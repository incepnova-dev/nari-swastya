<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Fertility Journey - Complete Guide to Conceiving</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #e91e63;
      --primary-dark: #c2185b;
      --secondary: #ff6b9d;
      --success: #4caf50;
      --warning: #ff9800;
      --danger: #f44336;
      --info: #2196f3;
      --bg: #fff8f9;
      --text: #2d2d2d;
      --text-soft: #666;
      --purple: #9c27b0;
      --teal: #00bcd4;
      --green: #4caf50;
      --orange: #ff9800;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }

     /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .site-header{
      background:rgba(255,255,255,0.95);
      backdrop-filter:blur(24px);
      -webkit-backdrop-filter:blur(24px);
      padding:0;
      box-shadow:0 2px 24px rgba(236,64,122,0.09);
      position:sticky;top:0;z-index:1000;
      border-bottom:1px solid rgba(236,64,122,0.08);
    }

    /* Floating Hearts Background Animation */
    .site-header::before {
      content: 'ðŸ’— âœ¨ ðŸŒ¸ ðŸ’• â­ ðŸ¦‹ ðŸ’— âœ¨ ðŸŒ¸ ðŸ’•';
      position: absolute;
      top: 0;
      left: -100%;
      width: 200%;
      height: 100%;
      display: flex;
      align-items: center;
      font-size: 1.2rem;
      gap: 3rem;
      opacity: 0.08;
      animation: float-emojis 40s linear infinite;
      pointer-events: none;
      white-space: nowrap;
    }

    @keyframes float-emojis {
      0% { transform: translateX(0); }
      100% { transform: translateX(50%); }
    }

    /* Sparkle Effect on Hover */
    .site-header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), 
        rgba(236, 64, 122, 0.1) 0%, 
        transparent 25%);
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .site-header:hover::after {
      opacity: 1;
    }

    .nav-container{
      max-width:1400px;margin:0 auto;
      padding:0 1.5rem;
      display:flex;justify-content:space-between;align-items:center;
      height:64px;
    }
    .logo{display:flex;align-items:center;gap:.65rem;flex-shrink:0;}
    .logo-icon{
      width:40px;height:40px;border-radius:12px;
      background:linear-gradient(135deg,#ec407a,#ad1457);
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 4px 14px rgba(236,64,122,0.35);flex-shrink:0;
    }
    .logo-icon svg{width:22px;height:22px;fill:white;}
    .logo-text{display:flex;flex-direction:column;gap:0;}
    .logo-text a{
      text-decoration:none;font-family:'Playfair Display',serif;
      font-weight:900;font-size:1.25rem;line-height:1.1;
      background:linear-gradient(135deg,#ec407a,#ad1457);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
    }
    .logo-text span{
      font-size:.62rem;color:#555;font-family:'Manrope',sans-serif;
      font-weight:500;letter-spacing:.1em;text-transform:uppercase;
    }
    .main-nav{display:flex;align-items:center;gap:.2rem;}
    .nav-item{position:relative;}
    .nav-link{
      display:flex;align-items:center;gap:.3rem;
      text-decoration:none;color:#212121;
      font-weight:500;font-size:.875rem;
      padding:.55rem .75rem;border-radius:8px;
      transition:all .25s;white-space:nowrap;
      cursor:pointer;background:none;border:none;font-family:inherit;
    }
    .nav-link:hover,.nav-link.active{color:#d81b60;background:rgba(236,64,122,0.06);}
    .nav-link .chevron{font-size:.6rem;transition:transform .25s;color:#555;margin-top:1px;}
    .nav-item:hover .chevron{transform:rotate(180deg);}
    .nav-dropdown{
      position:absolute;top:calc(100% + 8px);left:50%;
      transform:translateX(-50%) translateY(-6px);
      min-width:220px;background:white;border-radius:16px;
      box-shadow:0 16px 50px rgba(0,0,0,0.12),0 4px 16px rgba(236,64,122,0.1);
      border:1px solid rgba(236,64,122,0.1);padding:.5rem;
      opacity:0;pointer-events:none;
      transition:all .25s cubic-bezier(.23,1.01,.32,1);z-index:200;
    }
    .nav-dropdown::before{
      content:'';position:absolute;top:-6px;left:50%;transform:translateX(-50%);
      border:6px solid transparent;border-bottom-color:white;
      border-top:none;filter:drop-shadow(0 -2px 4px rgba(0,0,0,0.06));
    }
    .nav-item:hover .nav-dropdown,.nav-item:focus-within .nav-dropdown{
      opacity:1;pointer-events:all;transform:translateX(-50%) translateY(0);
    }
    .dd-item{
      display:flex;align-items:center;gap:.75rem;
      padding:.65rem .9rem;border-radius:10px;
      text-decoration:none;color:#212121;font-size:.85rem;font-weight:500;transition:all .2s;
    }
    .dd-item:hover{background:rgba(236,64,122,0.07);color:#d81b60;padding-left:1.1rem;}
    .dd-icon{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:.8rem;flex-shrink:0;}
    .dd-sep{height:1px;background:#e0e0e0;margin:.3rem .5rem;}
    /* Flyout submenu â€” appears to the right of the parent row */
    .dd-has-flyout{position:relative;}
    .dd-has-flyout>.dd-flyout-arrow{font-size:.6rem;color:#aaa;margin-left:auto;transition:transform .2s;}
    .dd-flyout{
      display:none;position:absolute;top:0;left:calc(100% + 4px);
      min-width:190px;background:white;border-radius:12px;
      box-shadow:0 12px 36px rgba(0,0,0,0.12),0 4px 12px rgba(236,64,122,0.1);
      border:1px solid rgba(236,64,122,0.12);padding:.4rem;z-index:300;
    }
    .dd-has-flyout:hover>.dd-flyout,
    .dd-has-flyout:focus-within>.dd-flyout{display:block;}
    .dd-has-flyout:hover{background:rgba(236,64,122,0.07);color:#d81b60;}
    .dd-flyout .dd-item{padding:.55rem .8rem;font-size:.82rem;}
    .dd-flyout .dd-item:hover{background:rgba(236,64,122,0.07);color:#d81b60;padding-left:1rem;}
    .nav-actions{display:flex;gap:.6rem;align-items:center;}
    .btn-nav{
      padding:.46rem 1.1rem;border-radius:50px;text-decoration:none;
      font-weight:600;font-size:.82rem;transition:all .3s;border:none;cursor:pointer;
      font-family:inherit;display:inline-flex;align-items:center;gap:.4rem;
    }
    .btn-nav.outline{
      background:linear-gradient(135deg,#ec407a,#ad1457);
      color:#fff;box-shadow:0 4px 15px rgba(236,64,122,0.3);
    }
    .btn-nav.outline:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(236,64,122,0.4);color:#fff;}
    .btn-nav.primary{border:1.5px solid #d81b60;color:#d81b60;background:#fff;}
    .btn-nav.primary:hover{background:rgba(236,64,122,0.05);}
    .hamburger{
      display:none;width:38px;height:38px;border-radius:10px;
      background:none;border:1.5px solid #e0e0e0;
      align-items:center;justify-content:center;cursor:pointer;
      flex-direction:column;gap:4px;padding:8px;
    }
    .hamburger span{display:block;height:2px;background:#212121;border-radius:2px;transition:all .3s;}
    .mobile-menu{
      display:none;position:fixed;inset:0;top:64px;
      background:rgba(255,255,255,0.98);backdrop-filter:blur(20px);
      z-index:999;padding:1.5rem;overflow-y:auto;
    }
    .mm-action-btn{display:inline-flex !important;}
    .mobile-menu.open{display:block;}
    .mm-link{
      display:flex;align-items:center;gap:.75rem;
      padding:.85rem 1rem;border-radius:12px;
      text-decoration:none;color:#212121;font-weight:500;font-size:1rem;
      transition:all .2s;border-bottom:1px solid #e0e0e0;
    }
    .mm-link:hover{color:#d81b60;background:rgba(236,64,122,0.05);}
    .mm-section{font-size:.72rem;font-weight:700;color:#555;text-transform:uppercase;letter-spacing:.1em;padding:.6rem 1rem .3rem;}
    @media(max-width:1060px){
      .main-nav{display:none;}
      .hamburger{display:flex;}
      .nav-actions .btn-nav{display:none;}
    }


    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    footer.ns-footer{background:#1e1a1e; color:#c9bfc9; font-family:'DM Sans',sans-serif; border-top:1px solid rgba(232,81,122,0.18);}
    .footer-main{max-width:1200px; margin:0 auto; padding:56px 32px 48px; display:grid; grid-template-columns:repeat(4,1fr); gap:40px;}
    .footer-col h3{font-family:'Playfair Display',Georgia,serif; font-size:1.05rem; font-weight:600; color:#e8517a; margin-bottom:18px; letter-spacing:.01em;}
    .footer-col p{font-size:.875rem; line-height:1.75; color:#c9bfc9; font-weight:300;}
    .footer-col ul{list-style:none;}
    .footer-col ul li{font-size:.875rem; color:#c9bfc9; padding:5px 0; font-weight:300; position:relative; padding-left:14px; transition:color .2s;}
    .footer-col ul li::before{content:''; position:absolute; left:0; top:50%; transform:translateY(-50%); width:5px; height:5px; border-radius:50%; background:#e8517a; opacity:.5;}
    .footer-col ul li:hover{color:#f0748e;}
    .disclaimer-text{font-size:.875rem; line-height:1.75; color:#c9bfc9; font-weight:300;}
    .emergency-alert{font-size:.875rem; line-height:1.7; color:#e8517a; font-weight:500;}
    .emergency-alert strong{font-weight:600;}
    .footer-meta{border-top:1px solid rgba(232,81,122,0.18); max-width:1200px; margin:0 auto; padding:28px 32px; text-align:center;}
    .footer-meta .meta-line{font-size:.8rem; color:#7c7080; letter-spacing:.04em; margin-bottom:10px;}
    .footer-meta .meta-line .sep{color:#e8517a; margin:0 6px;}
    .footer-meta .tagline{font-size:.82rem; color:#7c7080; display:flex; align-items:center; justify-content:center; gap:6px;}
    .footer-meta .tagline .heart{color:#e8517a; font-size:1rem; animation:footerPulse 2s ease-in-out infinite;}
    @keyframes footerPulse{0%,100%{transform:scale(1); opacity:1;} 50%{transform:scale(1.25); opacity:.8;}}
    .footer-bottom{background:#161316; border-top:1px solid rgba(255,255,255,.04);}
    .footer-bottom-inner{max-width:1200px; margin:0 auto; padding:22px 32px; display:flex; flex-direction:column; align-items:center; gap:10px;}
    .footer-links{display:flex; gap:36px; flex-wrap:wrap; justify-content:center;}
    .footer-links a{font-size:.82rem; color:#7c7080; text-decoration:none; letter-spacing:.03em; transition:color .2s;}
    .footer-links a:hover{color:#f0748e;}
    .footer-copy{font-size:.78rem; color:#7c7080; opacity:.7; letter-spacing:.02em;}
    @media(max-width:900px){.footer-main{grid-template-columns:repeat(2,1fr); gap:32px;}}
    @media(max-width:540px){.footer-main{grid-template-columns:1fr; padding:40px 20px 32px;} .footer-meta{padding:20px;} .footer-bottom-inner{padding:18px 20px;} .footer-links{gap:20px;}}
    
    html { overflow-x: hidden; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }
    
    /* Animated Hero */
    .hero {
      background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 50%, #f48fb1 100%);
      padding: 4rem 2rem;
      text-align: center;
      position: relative;
      overflow: hidden;
      margin-bottom: 3rem;
      border-radius: 0 0 50% 50% / 0 0 30px 30px;
    }
    
    .hero::before {
      content: 'ðŸŒ¸';
      position: absolute;
      font-size: 15rem;
      opacity: 0.1;
      top: -3rem;
      right: -3rem;
      animation: rotate 20s linear infinite;
    }
    
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .hero-title {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 900;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, #e91e63 0%, #9c27b0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      position: relative;
      z-index: 2;
    }
    
    .hero-subtitle {
      font-size: 1.3rem;
      color: var(--text-soft);
      max-width: 700px;
      margin: 0 auto 2rem;
      position: relative;
      z-index: 2;
    }
    
    .hero-stats {
      display: flex;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
      position: relative;
      z-index: 2;
    }
    
    .stat-box {
      background: white;
      padding: 1.5rem 2rem;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(233,30,99,0.2);
      min-width: 0;
      transition: transform 0.3s;
    }
    
    .stat-box:hover {
      transform: translateY(-10px) scale(1.05);
    }
    
    .stat-icon {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: 800;
      color: var(--primary);
    }
    
    .stat-label {
      font-size: 0.85rem;
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    /* Section Headers */
    .section-header {
      text-align: center;
      margin: 4rem 0 2rem;
    }
    
    .section-title {
      font-size: clamp(1.3rem, 4vw, 2.5rem);
      font-weight: 800;
      margin-bottom: 0.5rem;
      display: inline-flex;
      align-items: center;
      gap: 1rem;
    }
    
    .section-subtitle {
      font-size: 1.1rem;
      color: var(--text-soft);
      max-width: 800px;
      margin: 0 auto;
    }
    
    /* Cycle Tracker Wheel */
    .cycle-tracker {
      background: white;
      border-radius: 40px;
      padding: 3rem;
      margin-bottom: 3rem;
      box-shadow: 0 15px 50px rgba(0,0,0,0.1);
    }
    
    .cycle-visual {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
    }
    
    .cycle-wheel-container {
      position: relative;
      width: 100%;
      max-width: 450px;
      margin: 0 auto;
    }
    
    .cycle-wheel {
      width: 100%;
      aspect-ratio: 1;
      position: relative;
      border-radius: 50%;
      background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 40px rgba(233,30,99,0.3);
    }
    
    .cycle-day {
      position: absolute;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .cycle-day:hover {
      transform: scale(1.2);
      z-index: 10;
    }
    
    .cycle-day.fertile {
      background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
      color: white;
    }
    
    .cycle-day.ovulation {
      background: linear-gradient(135deg, #ff9800 0%, #e65100 100%);
      color: white;
      transform: scale(1.3);
    }
    
    .cycle-day.period {
      background: linear-gradient(135deg, #f44336 0%, #c62828 100%);
      color: white;
    }
    
    .day-num {
      font-size: 1.2rem;
    }
    
    .day-label {
      font-size: 0.6rem;
      opacity: 0.8;
    }
    
    .cycle-center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      background: white;
      width: 160px;
      height: 160px;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .cycle-info {
      background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
      border-radius: 25px;
      padding: 2rem;
    }
    
    .info-item {
      display: flex;
      align-items: start;
      gap: 1rem;
      padding: 1rem;
      background: white;
      border-radius: 15px;
      margin-bottom: 1rem;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    }
    
    .info-icon {
      width: 50px;
      height: 50px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      flex-shrink: 0;
    }
    
    .info-icon.red { background: linear-gradient(135deg, #f44336 0%, #c62828 100%); color: white; }
    .info-icon.green { background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%); color: white; }
    .info-icon.orange { background: linear-gradient(135deg, #ff9800 0%, #e65100 100%); color: white; }
    
    /* Nutrient Cards with Icons */
    .nutrient-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }
    
    .nutrient-card {
      background: white;
      border-radius: 25px;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      transition: all 0.4s;
      position: relative;
      overflow: hidden;
    }
    
    .nutrient-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: var(--nutrient-color);
    }
    
    .nutrient-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 50px rgba(0,0,0,0.15);
    }
    
    .nutrient-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .nutrient-icon {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: var(--nutrient-color);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: white;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    
    .nutrient-name {
      font-size: 1.4rem;
      font-weight: 700;
    }
    
    .nutrient-benefit {
      font-size: 0.85rem;
      color: var(--text-soft);
      margin-bottom: 1rem;
      line-height: 1.5;
    }
    
    .food-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .food-item {
      padding: 0.4rem 0.9rem;
      background: rgba(233,30,99,0.1);
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      transition: all 0.3s;
      cursor: default;
    }
    
    .food-item:hover {
      background: var(--nutrient-color);
      color: white;
      transform: scale(1.05);
    }
    
    /* Do's and Don'ts */
    .dos-donts {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 3rem;
    }
    
    .do-card, .dont-card {
      border-radius: 30px;
      padding: 2.5rem;
      position: relative;
      overflow: hidden;
    }
    
    .do-card {
      background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
      border: 3px solid #4caf50;
    }
    
    .dont-card {
      background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
      border: 3px solid #f44336;
    }
    
    .card-title {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .do-card .card-title { color: #2e7d32; }
    .dont-card .card-title { color: #c62828; }
    
    .action-item {
      display: flex;
      align-items: start;
      gap: 1rem;
      padding: 1rem;
      background: white;
      border-radius: 15px;
      margin-bottom: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: all 0.3s;
    }
    
    .action-item:hover {
      transform: translateX(10px);
    }
    
    .action-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      flex-shrink: 0;
      color: white;
    }
    
    .do-card .action-icon { background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%); }
    .dont-card .action-icon { background: linear-gradient(135deg, #f44336 0%, #c62828 100%); }
    
    .action-text {
      flex: 1;
    }
    
    .action-title {
      font-weight: 700;
      font-size: 1.05rem;
      margin-bottom: 0.25rem;
    }
    
    .action-desc {
      font-size: 0.9rem;
      color: var(--text-soft);
    }
    
    /* Exercise Cards with Animations */
    .exercise-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(320px, 100%), 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }
    
    .exercise-card {
      background: white;
      border-radius: 25px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      transition: all 0.4s;
    }
    
    .exercise-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 50px rgba(0,0,0,0.15);
    }
    
    .exercise-visual {
      height: 180px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    
    .exercise-icon {
      font-size: 5rem;
      animation: bounce 2s ease-in-out infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }
    
    .exercise-content {
      padding: 2rem;
    }
    
    .exercise-title {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    
    .exercise-duration {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.4rem 1rem;
      background: rgba(233,30,99,0.1);
      border-radius: 999px;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 1rem;
    }
    
    .exercise-benefit {
      font-size: 0.95rem;
      color: var(--text-soft);
      line-height: 1.6;
    }
    
    /* Pregnancy Loss Types - Educational Cards */
    .loss-types {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }
    
    .loss-card {
      background: white;
      border-radius: 25px;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      border-left: 6px solid var(--loss-color);
      transition: all 0.3s;
    }
    
    .loss-card:hover {
      transform: translateX(10px);
      box-shadow: 0 15px 40px rgba(0,0,0,0.12);
    }
    
    .loss-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .loss-icon {
      width: 60px;
      height: 60px;
      border-radius: 15px;
      background: var(--loss-color);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      color: white;
    }
    
    .loss-name {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--text);
    }
    
    .loss-description {
      font-size: 0.95rem;
      color: var(--text-soft);
      line-height: 1.7;
      margin-bottom: 1rem;
    }
    
    .loss-signs {
      background: rgba(255,152,0,0.08);
      padding: 1rem;
      border-radius: 12px;
      margin-bottom: 1rem;
    }
    
    .loss-signs-title {
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--orange);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .loss-signs-list {
      font-size: 0.85rem;
      color: var(--text-soft);
      line-height: 1.6;
      margin-left: 1.5rem;
    }
    
    .loss-action {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      padding: 1rem;
      border-radius: 12px;
      font-size: 0.9rem;
      font-weight: 600;
      color: #1565c0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    /* Doctor Consultation Triggers */
    .doctor-section {
      background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
      border-radius: 40px;
      padding: 3rem;
      margin-bottom: 3rem;
      position: relative;
      overflow: hidden;
    }
    
    .doctor-section::before {
      content: 'ðŸ¥';
      position: absolute;
      font-size: 20rem;
      opacity: 0.05;
      bottom: -5rem;
      right: -5rem;
    }
    
    .trigger-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(250px, 100%), 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    
    .trigger-card {
      background: white;
      border-radius: 20px;
      padding: 1.5rem;
      box-shadow: 0 8px 25px rgba(0,0,0,0.08);
      border-top: 4px solid var(--trigger-color);
      transition: all 0.3s;
    }
    
    .trigger-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 15px 40px rgba(0,0,0,0.15);
    }
    
    .trigger-icon {
      width: 50px;
      height: 50px;
      border-radius: 12px;
      background: var(--trigger-color);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: white;
      margin-bottom: 1rem;
    }
    
    .trigger-text {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text);
      line-height: 1.5;
    }
    
    /* Fertility Timeline */
    .timeline {
      position: relative;
      padding: 2rem 0;
      margin-bottom: 3rem;
    }
    
    .timeline::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 100%;
      background: linear-gradient(180deg, #e91e63 0%, #9c27b0 50%, #2196f3 100%);
    }
    
    .timeline-item {
      display: grid;
      grid-template-columns: 1fr 100px 1fr;
      gap: 2rem;
      margin-bottom: 3rem;
      align-items: center;
    }
    
    .timeline-item:nth-child(even) .timeline-content:first-child {
      grid-column: 3;
    }
    
    .timeline-item:nth-child(even) .timeline-content:last-child {
      grid-column: 1;
      grid-row: 1;
    }
    
    .timeline-marker {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      border: 5px solid var(--timeline-color);
      font-weight: 700;
      z-index: 2;
    }
    
    .timeline-icon {
      font-size: 2rem;
      margin-bottom: 0.25rem;
    }
    
    .timeline-label {
      font-size: 0.75rem;
      color: var(--text-soft);
    }
    
    .timeline-content {
      background: white;
      border-radius: 20px;
      padding: 1.5rem;
      box-shadow: 0 8px 25px rgba(0,0,0,0.08);
      transition: all 0.3s;
    }
    
    .timeline-content:hover {
      transform: scale(1.05);
      box-shadow: 0 12px 35px rgba(0,0,0,0.15);
    }
    
    .timeline-title {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: var(--timeline-color);
    }
    
    .timeline-desc {
      font-size: 0.95rem;
      color: var(--text-soft);
      line-height: 1.6;
    }
    
    /* Responsive */
    @media (max-width: 968px) {
      .cycle-visual,
      .dos-donts {
        grid-template-columns: 1fr;
      }
      
      .timeline::before {
        left: 30px;
      }
      
      .timeline-item {
        grid-template-columns: 80px 1fr;
        gap: 1.5rem;
      }
      
      .timeline-marker {
        width: 80px;
        height: 80px;
      }
      
      .timeline-content:last-child {
        display: none;
      }
      
      .timeline-item:nth-child(even) .timeline-content:first-child {
        grid-column: 2;
      }
    }
    
    /* Footer CTA */
    .cta-section {
      background: linear-gradient(135deg, #e91e63 0%, #9c27b0 100%);
      color: white;
      text-align: center;
      padding: 3rem;
      border-radius: 40px;
      margin-bottom: 3rem;
    }
    
    .cta-title {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 1rem;
    }
    
    .cta-text {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      opacity: 0.9;
    }
    
    .cta-button {
      padding: 1rem 2.5rem;
      background: white;
      color: var(--primary);
      border: none;
      border-radius: 999px;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }
    
    .cta-button:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 12px 35px rgba(0,0,0,0.3);
    }
    /* ============================================================
       MOBILE RESPONSIVE â€” comprehensive fixes for all breakpoints
       ============================================================ */

    /* â”€â”€ 768px: tablet â”€â”€ */
    @media (max-width: 768px) {
      /* Container padding */
      .container { padding: 0 1rem; }

      /* Hero */
      .hero {
        padding: 2.5rem 1rem 2rem;
        border-radius: 0 0 30px 30px;
        margin-bottom: 2rem;
      }
      .hero::before { font-size: 8rem; top: -1rem; right: -1rem; }
      .hero-subtitle { font-size: 1rem; }

      /* Hero stats */
      .hero-stats { gap: 1rem; }
      .stat-box {
        padding: 1rem 1.25rem;
        min-width: 120px;
        flex: 1 1 120px;
      }
      .stat-value { font-size: 1.6rem; }

      /* Section titles */
      .section-title {
        font-size: 1.6rem;
        gap: 0.6rem;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        text-align: center;
      }
      .section-subtitle { font-size: 0.95rem; }
      .section-header { margin: 2.5rem 0 1.5rem; }

      /* Cycle tracker */
      .cycle-tracker { padding: 1.75rem 1rem; border-radius: 24px; }
      .cycle-visual { gap: 2rem; }
      .cycle-wheel-container { max-width: 320px; }
      .cycle-center { width: 120px; height: 120px; }
      .cycle-center > div:first-child { font-size: 1.8rem; }
      .cycle-center > div:nth-child(2) { font-size: 0.95rem; }
      .cycle-center > div:last-child { font-size: 0.75rem; }
      .cycle-day { width: 46px; height: 46px; }
      .day-num { font-size: 0.95rem; }
      .cycle-info { padding: 1.25rem; border-radius: 18px; }

      /* Nutrient grid */
      .nutrient-grid { gap: 1.25rem; margin-bottom: 2rem; }
      .nutrient-card { padding: 1.5rem; }
      .nutrient-icon { width: 55px; height: 55px; font-size: 1.6rem; }

      /* Do's & Don'ts */
      .dos-donts { gap: 1.25rem; margin-bottom: 2rem; }
      .do-card, .dont-card { padding: 1.75rem 1.25rem; border-radius: 20px; }
      .card-title { font-size: 1.5rem; gap: 0.6rem; }

      /* Exercise grid */
      .exercise-grid { gap: 1.25rem; margin-bottom: 2rem; }
      .exercise-visual { height: 140px; }
      .exercise-icon { font-size: 3.5rem; }
      .exercise-content { padding: 1.25rem; }

      /* Loss types */
      .loss-types { gap: 1.25rem; margin-bottom: 2rem; }
      .loss-card { padding: 1.5rem; }

      /* Doctor section */
      .doctor-section { padding: 2rem 1rem; border-radius: 24px; }
      .doctor-section::before { font-size: 10rem; }
      .trigger-grid { gap: 1rem; margin-top: 1.25rem; }
      .trigger-card { padding: 1.25rem; }

      /* Doctor visit box */
      .doctor-section > div:last-child > div {
        flex-direction: column;
        gap: 1rem;
      }

      /* Timeline */
      .timeline { padding: 1rem 0; margin-bottom: 2rem; }

      /* CTA */
      .cta-section { padding: 2rem 1.25rem; border-radius: 24px; margin-bottom: 2rem; }
      .cta-title { font-size: 1.75rem; }
      .cta-text { font-size: 1rem; }
    }

    /* â”€â”€ 540px: large phones â”€â”€ */
    @media (max-width: 540px) {
      /* Hero stats stack */
      .hero-stats { flex-direction: column; align-items: center; gap: 0.75rem; }
      .stat-box { width: 100%; max-width: 280px; min-width: unset; }

      /* Section title smaller */
      .section-title { font-size: 1.35rem; gap: 0.4rem; }

      /* Cycle: stack wheel on top of info */
      .cycle-visual { grid-template-columns: 1fr; }
      .cycle-wheel-container { max-width: 280px; }
      .cycle-day { width: 40px; height: 40px; }
      .cycle-center { width: 100px; height: 100px; }
      .cycle-center > div:first-child { font-size: 1.5rem; margin-bottom: 0.25rem; }
      .cycle-center > div:nth-child(2) { font-size: 0.85rem; }
      .cycle-center > div:last-child { font-size: 0.65rem; }
      .day-num { font-size: 0.8rem; }
      .day-label { font-size: 0.5rem; }

      /* Card title */
      .card-title { font-size: 1.25rem; margin-bottom: 1rem; }

      /* Action items */
      .action-item { padding: 0.75rem; gap: 0.75rem; }
      .action-icon { width: 36px; height: 36px; font-size: 1rem; }
      .action-title { font-size: 0.95rem; }
      .action-desc { font-size: 0.82rem; }

      /* Info items in cycle */
      .info-item { padding: 0.75rem; gap: 0.75rem; }
      .info-icon { width: 40px; height: 40px; font-size: 1.2rem; }

      /* Loss card header */
      .loss-header { gap: 0.75rem; }
      .loss-icon { width: 48px; height: 48px; font-size: 1.4rem; border-radius: 12px; }
      .loss-name { font-size: 1.1rem; }

      /* Timeline (already has 968px fix but needs small phone tweak) */
      .timeline::before { left: 20px; }
      .timeline-item {
        grid-template-columns: 60px 1fr;
        gap: 1rem;
      }
      .timeline-marker { width: 60px; height: 60px; border-width: 3px; }
      .timeline-icon { font-size: 1.4rem; margin-bottom: 0; }
      .timeline-label { font-size: 0.65rem; }
      .timeline-content { padding: 1rem; }
      .timeline-title { font-size: 1rem; }
      .timeline-desc { font-size: 0.85rem; }

      /* Trigger cards: 2 col on small phones */
      .trigger-grid { grid-template-columns: 1fr 1fr; }
      .trigger-icon { width: 40px; height: 40px; font-size: 1.2rem; margin-bottom: 0.6rem; }
      .trigger-text { font-size: 0.85rem; }

      /* Nutrient card */
      .nutrient-header { gap: 0.75rem; margin-bottom: 1rem; }
      .nutrient-icon { width: 48px; height: 48px; font-size: 1.4rem; }
      .nutrient-name { font-size: 1.15rem; }
      .nutrient-benefit { font-size: 0.8rem; }

      /* CTA */
      .cta-title { font-size: 1.5rem; }
      .cta-text { font-size: 0.9rem; margin-bottom: 1.5rem; }
      .cta-button { font-size: 1rem; padding: 0.85rem 2rem; }
    }

    /* â”€â”€ 400px: very small phones â”€â”€ */
    @media (max-width: 400px) {
      .hero { padding: 2rem 0.75rem 1.75rem; }
      .hero-title { font-size: 1.5rem; }
      .section-title { font-size: 1.2rem; }
      .cycle-wheel-container { max-width: 240px; }
      .cycle-day { width: 34px; height: 34px; }
      .cycle-center { width: 86px; height: 86px; }
      .trigger-grid { grid-template-columns: 1fr; }
      .do-card, .dont-card { padding: 1.25rem 1rem; }
      .doctor-section { padding: 1.5rem 0.75rem; }
      .cta-section { padding: 1.5rem 0.75rem; }
    }

    /* â”€â”€ Touch: ensure all interactive elements are finger-friendly â”€â”€ */
    @media (hover: none) and (pointer: coarse) {
      .stat-box,
      .nutrient-card,
      .exercise-card,
      .loss-card,
      .trigger-card,
      .action-item,
      .cycle-day,
      .cta-button,
      .btn-nav,
      .mm-link { min-height: 44px; }
      /* Remove hover transforms that feel glitchy on touch */
      .action-item:hover { transform: none; }
      .loss-card:hover { transform: none; }
    }
  /* ============================================================
     JOURNEYS.HTML DESIGN SYSTEM OVERLAY
     Fonts, palette, hero, section labels, card animations
     ============================================================ */

  /* Import Playfair + Manrope to match journeys exactly */
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Manrope:wght@300;400;500;600;700;800&display=swap');

  /* â”€â”€ Root tokens matching journeys.html â”€â”€ */
  :root {
    --pink:#ec407a; --deep-pink:#d81b60;
    --primary:#ec407a; --primary-dark:#ad1457; --primary-light:#f48fb1;
    --rose:#ff6090; --lavender:#ede7f6; --purple:#7c3aed;
    --soft-purple:#9c5cf7; --mint:#00bcd4; --gold:#ffb300;
    --bg:#faf5fb; --card-bg:#fff;
    --text-main:#212121; --text-soft:#666;
    --border-soft:#f0e6f0;
    --shadow:0 8px 30px rgba(0,0,0,.07);
    --shadow-pink:0 15px 40px rgba(236,64,122,.18);
    --shadow-strong:0 20px 60px rgba(236,64,122,.22);
  }

  body { font-family:'Manrope',system-ui,sans-serif; background:var(--bg); }
  h1,h2,h3,h4 { font-family:'Playfair Display',Georgia,serif; }

  /* â”€â”€ HERO: two-column like journeys â”€â”€ */
  .hero {
    background: none !important;
    border-radius: 0 !important;
    margin-bottom: 0 !important;
    padding: 0 !important;
    position: relative;
    min-height: 90vh;
    display: grid !important;
    grid-template-columns: 1.1fr .9fr;
    gap: 0;
    align-items: center;
    overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute; inset: 0;
    background:
      radial-gradient(ellipse 70% 70% at 60% 40%, rgba(236,64,122,.07) 0%, transparent 70%),
      radial-gradient(ellipse 40% 50% at 10% 80%, rgba(124,58,237,.06) 0%, transparent 60%);
    pointer-events: none; z-index: 0;
  }

  /* Hero left content column */
  .hero-left {
    position: relative; z-index: 2;
    padding: 4rem 2rem 4rem 4rem;
    display: flex; flex-direction: column; justify-content: center;
  }
  .hero-badge-wrap {
    display: inline-flex; align-items: center; gap: .5rem;
    background: rgba(236,64,122,.1);
    border: 1px solid rgba(236,64,122,.2);
    color: var(--deep-pink);
    padding: .4rem 1rem; border-radius: 50px;
    font-size: .8rem; font-weight: 700; letter-spacing: .06em; text-transform: uppercase;
    margin-bottom: 1.4rem; width: fit-content;
    animation: badge-glow 3s ease-in-out infinite;
  }
  @keyframes badge-glow {
    0%,100%{box-shadow:0 0 0 0 rgba(236,64,122,0);}
    50%{box-shadow:0 0 18px 3px rgba(236,64,122,.18);}
  }

  /* Hero title - journeys style */
  .hero .hero-title {
    font-family: 'Playfair Display', Georgia, serif !important;
    font-size: clamp(2.4rem,4.5vw,4rem) !important;
    font-weight: 900 !important;
    line-height: 1.08 !important;
    margin-bottom: 1.2rem !important;
    background: linear-gradient(135deg,#212121 0%,#555 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    position: relative; z-index: 2;
  }
  .hero .hero-title .em {
    background: linear-gradient(135deg,#ec407a 0%,#d81b60 50%,#ad1457 100%);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    animation: title-shimmer 3s ease-in-out infinite;
    filter: drop-shadow(0 2px 10px rgba(236,64,122,.35));
  }
  @keyframes title-shimmer {
    0%,100%{filter:brightness(1) drop-shadow(0 2px 10px rgba(236,64,122,.35));}
    50%{filter:brightness(1.35) drop-shadow(0 5px 18px rgba(236,64,122,.55));}
  }

  /* Hero subtitle */
  .hero .hero-subtitle {
    font-size: 1.1rem !important;
    color: var(--text-soft) !important;
    margin: 0 0 2rem !important;
    line-height: 1.85 !important;
    max-width: 500px;
    position: relative; z-index: 2;
  }

  /* Hero stat boxes â€” journeys stat-card style */
  .hero .hero-stats {
    display: grid !important;
    grid-template-columns: repeat(3,1fr) !important;
    gap: 1rem !important;
    margin-bottom: 0 !important;
    position: relative; z-index: 2;
    max-width: 440px;
  }
  .hero .stat-box {
    background: #fff !important;
    border-radius: 16px !important;
    padding: 1rem !important;
    box-shadow: 0 4px 20px rgba(0,0,0,.06) !important;
    text-align: center !important;
    border: 1px solid var(--border-soft) !important;
    min-width: unset !important;
    transition: transform .3s !important;
  }
  .hero .stat-box:hover { transform: translateY(-4px) !important; }
  .hero .stat-icon { font-size: 1.4rem !important; margin-bottom: .3rem !important; }
  .hero .stat-value {
    font-size: 1.6rem !important; font-weight: 800 !important;
    background: linear-gradient(135deg,#ec407a,#ad1457) !important;
    -webkit-background-clip: text !important; -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    display: block;
  }
  .hero .stat-label {
    font-size: .72rem !important; color: var(--text-soft) !important;
    font-weight: 600 !important; margin-top: .15rem !important;
    text-transform: uppercase; letter-spacing: .04em;
  }

  /* Hero right: canvas column */
  .hero-right {
    position: relative; z-index: 2;
    display: flex; align-items: center; justify-content: center;
    padding: 3rem 3.5rem 3rem 1rem;
    min-height: 0;
  }

  /* Outer wrapper â€” positions the orb + floating labels */
  .hero-visual-outer {
    position: relative;
    width: 460px; max-width: 100%;
    display: flex; align-items: center; justify-content: center;
  }

  /* The round canvas container */
  .hero-canvas-wrap {
    position: relative;
    width: min(420px, 100%); height: min(420px, 90vw); max-width: 100%;
    border-radius: 50%;
    overflow: hidden;
    box-shadow:
      0 0 0 4px rgba(236,64,122,0.22),
      0 0 0 14px rgba(236,64,122,0.08),
      0 0 0 28px rgba(236,64,122,0.04),
      0 24px 70px rgba(236,64,122,0.32),
      0 50px 110px rgba(173,20,87,0.18);
    animation: orb-pulse 5s ease-in-out infinite;
    flex-shrink: 0;
  }
  @keyframes orb-pulse {
    0%,100%{
      box-shadow:
        0 0 0 4px rgba(236,64,122,0.22),
        0 0 0 14px rgba(236,64,122,0.08),
        0 0 0 28px rgba(236,64,122,0.04),
        0 24px 70px rgba(236,64,122,0.32),
        0 50px 110px rgba(173,20,87,0.18);
    }
    50%{
      box-shadow:
        0 0 0 6px rgba(236,64,122,0.32),
        0 0 0 20px rgba(236,64,122,0.12),
        0 0 0 40px rgba(236,64,122,0.05),
        0 32px 90px rgba(236,64,122,0.42),
        0 70px 130px rgba(173,20,87,0.25);
    }
  }
  #fertilityHeroCanvas { width: 100%; height: 100%; display: block; }

  /* Orbital ring decorations â€” OUTSIDE overflow:hidden, on outer wrapper */
  .hero-canvas-wrap::before,
  .hero-canvas-wrap::after { display: none; } /* disabled â€” handled on outer */

  .hero-orbital-1, .hero-orbital-2 {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    z-index: 0;
  }
  .hero-orbital-1 {
    inset: -22px;
    border: 1.5px dashed rgba(236,64,122,0.22);
    animation: spin-cw 20s linear infinite;
  }
  .hero-orbital-2 {
    inset: -42px;
    border: 1px dashed rgba(156,39,176,0.13);
    animation: spin-ccw 34s linear infinite;
  }
  @keyframes spin-cw { to { transform: rotate(360deg); } }
  @keyframes spin-ccw { to { transform: rotate(-360deg); } }

  /* Phase strip â€” live narrative label BELOW the orb */
  .hero-phase-strip {
    position: absolute;
    bottom: -44px; left: 50%;
    transform: translateX(-50%);
    background: white;
    border-radius: 50px;
    padding: .42rem 1.15rem;
    font-size: .78rem; font-weight: 700;
    box-shadow: 0 6px 24px rgba(0,0,0,.12);
    border: 1px solid rgba(236,64,122,.22);
    color: var(--deep-pink);
    white-space: nowrap;
    display: inline-flex; align-items: center; gap: .5rem;
    z-index: 20; letter-spacing: .03em;
  }
  .phase-live-dot {
    width: 7px; height: 7px; border-radius: 50%;
    background: var(--deep-pink);
    animation: live-pulse 1.4s ease-in-out infinite;
    flex-shrink: 0;
  }
  @keyframes live-pulse {
    0%,100%{transform:scale(1);opacity:1;}
    50%{transform:scale(1.7);opacity:.5;}
  }

  /* Floating hero labels â€” positioned on .hero-visual-outer */
  .hero-float-label {
    position: absolute;
    background: white; border-radius: 50px;
    padding: .38rem .95rem; font-size: .74rem; font-weight: 700;
    box-shadow: 0 6px 22px rgba(0,0,0,.12);
    border: 1px solid rgba(236,64,122,.22);
    color: var(--deep-pink); white-space: nowrap;
    display: inline-flex; align-items: center; gap: .38rem;
    z-index: 10;
    animation: float-label 3s ease-in-out infinite;
  }
  .hero-float-label:nth-child(1){animation-delay:0s;}
  .hero-float-label:nth-child(2){animation-delay:.9s;}
  .hero-float-label:nth-child(3){animation-delay:1.8s;}
  .hero-float-label:nth-child(4){animation-delay:2.7s;}
  @keyframes float-label {
    0%,100%{transform:translateY(0);}
    50%{transform:translateY(-7px);}
  }

  /* Particle canvas */
  #heroParticleCanvas {
    position: absolute; inset: 0; width: 100%; height: 100%;
    pointer-events: none; z-index: 0; opacity: .6;
  }

  /* Petal layer */
  .petal-layer {
    position: absolute; inset: 0; pointer-events: none; z-index: 1; overflow: hidden;
  }
  .petal {
    position: absolute; border-radius: 0 80% 0 80%;
    opacity: 0; animation: petal-fall linear infinite;
  }
  @keyframes petal-fall {
    0%{opacity:0;transform:translateY(-30px) rotate(0deg) scale(.5);}
    10%{opacity:.7;}
    90%{opacity:.3;}
    100%{opacity:0;transform:translateY(110vh) rotate(540deg) scale(1.2);}
  }

  /* â”€â”€ SECTION LABEL PILLS (journeys style) â”€â”€ */
  .section-label-pill {
    display: inline-flex; align-items: center; gap: .5rem;
    background: rgba(236,64,122,.08);
    border: 1px solid rgba(236,64,122,.15);
    color: var(--deep-pink); padding: .35rem .9rem; border-radius: 50px;
    font-size: .75rem; font-weight: 700; letter-spacing: .08em; text-transform: uppercase;
    margin-bottom: 1rem;
  }
  .section-label-pill.purple {
    background: rgba(124,58,237,.08); border-color: rgba(124,58,237,.2);
    color: var(--purple);
  }
  .section-label-pill.teal {
    background: rgba(0,188,212,.08); border-color: rgba(0,188,212,.2);
    color: #00838f;
  }
  .section-label-pill.gold {
    background: rgba(255,179,0,.12); border-color: rgba(255,179,0,.25);
    color: #e65100;
  }
  .section-label-pill.green {
    background: rgba(76,175,80,.1); border-color: rgba(76,175,80,.2);
    color: #2e7d32;
  }
  .section-label-pill.red {
    background: rgba(244,67,54,.08); border-color: rgba(244,67,54,.2);
    color: #c62828;
  }

  /* â”€â”€ SECTION HEADING (journeys style) â”€â”€ */
  .section-heading-j {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: clamp(1.8rem,3.5vw,2.8rem);
    font-weight: 900; line-height: 1.15; margin-bottom: .6rem;
    color: var(--text-main);
  }
  .section-heading-j .em {
    background: linear-gradient(135deg,#ec407a,#ad1457);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  }
  .section-sub-j {
    font-size: 1.05rem; color: var(--text-soft); max-width: 660px; line-height: 1.8;
    margin-bottom: 2.5rem;
  }

  /* â”€â”€ SCROLL REVEAL â”€â”€ */
  .reveal { opacity: 0; transform: translateY(30px); transition: opacity .7s cubic-bezier(.23,1.01,.32,1), transform .7s cubic-bezier(.23,1.01,.32,1); }
  .reveal.from-left { transform: translateX(-40px); }
  .reveal.from-right { transform: translateX(40px); }
  .reveal.visible { opacity: 1 !important; transform: translate(0) !important; }
  .reveal-delay-1 { transition-delay: .1s; }
  .reveal-delay-2 { transition-delay: .2s; }
  .reveal-delay-3 { transition-delay: .3s; }
  .reveal-delay-4 { transition-delay: .4s; }
  .reveal-delay-5 { transition-delay: .5s; }

  /* â”€â”€ NUTRIENT CARDS â€” journeys fert-card style â”€â”€ */
  .nutrient-card {
    border-radius: 24px !important;
    box-shadow: 0 6px 25px rgba(0,0,0,.07) !important;
    border: 1px solid var(--border-soft) !important;
    transition: all .45s cubic-bezier(.23,1.01,.32,1) !important;
    position: relative;
  }
  .nutrient-card:hover {
    transform: translateY(-10px) !important;
    box-shadow: 0 20px 50px rgba(236,64,122,.15) !important;
    border-color: rgba(236,64,122,.2) !important;
  }
  .nutrient-card::after {
    content: ''; position: absolute; inset: 0;
    border-radius: 24px;
    background: linear-gradient(135deg, rgba(252,228,236,.08) 0%, transparent 60%);
    pointer-events: none;
  }
  .nutrient-icon {
    background: var(--nutrient-color) !important;
    box-shadow: 0 8px 20px rgba(0,0,0,.15) !important;
  }
  .nutrient-name { font-family: 'Playfair Display', serif !important; font-size: 1.3rem !important; font-weight: 700 !important; }

  /* â”€â”€ DO'S & DON'TS â€” glassmorphism upgrade â”€â”€ */
  @media(min-width: 969px) { .dos-donts { gap: 2.5rem !important; } }
  .do-card, .dont-card {
    border-radius: 28px !important;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 40px rgba(0,0,0,.1) !important;
    transition: transform .35s, box-shadow .35s;
  }
  .do-card:hover { transform: translateY(-6px); box-shadow: 0 20px 50px rgba(76,175,80,.2) !important; }
  .dont-card:hover { transform: translateY(-6px); box-shadow: 0 20px 50px rgba(244,67,54,.15) !important; }
  .card-title {
    font-family: 'Playfair Display', serif !important;
    font-size: 1.8rem !important; font-weight: 900 !important;
  }
  .action-item {
    border-radius: 16px !important;
    transition: all .3s !important;
    border: 1px solid transparent;
  }
  .do-card .action-item:hover { border-color: rgba(76,175,80,.3); background: rgba(255,255,255,.9) !important; }
  .dont-card .action-item:hover { border-color: rgba(244,67,54,.2); background: rgba(255,255,255,.9) !important; }

  /* â”€â”€ EXERCISE CARDS â€” journeys pp-card style â”€â”€ */
  .exercise-card {
    border-radius: 24px !important;
    border: 1px solid var(--border-soft) !important;
    box-shadow: 0 6px 25px rgba(0,0,0,.07) !important;
    transition: all .45s cubic-bezier(.23,1.01,.32,1) !important;
    overflow: hidden;
  }
  .exercise-card:hover {
    transform: translateY(-12px) !important;
    box-shadow: 0 24px 55px rgba(236,64,122,.15) !important;
  }
  .exercise-visual { border-radius: 0 !important; }
  .exercise-title { font-family: 'Playfair Display', serif !important; font-size: 1.3rem !important; font-weight: 700 !important; }

  /* â”€â”€ LOSS CARDS â€” journeys milestone style â”€â”€ */
  .loss-card {
    border-radius: 24px !important;
    box-shadow: 0 6px 25px rgba(0,0,0,.07) !important;
    border: 1px solid var(--border-soft) !important;
    border-left: 6px solid var(--loss-color) !important;
    transition: all .4s cubic-bezier(.23,1.01,.32,1) !important;
    background: linear-gradient(135deg, white 0%, rgba(250,245,251,.5) 100%) !important;
  }
  .loss-card:hover {
    transform: translateY(-8px) translateX(4px) !important;
    box-shadow: 0 20px 50px rgba(0,0,0,.12) !important;
  }
  .loss-name { font-family: 'Playfair Display', serif !important; font-weight: 700 !important; font-size: 1.2rem !important; }

  /* â”€â”€ TRIGGER CARDS â€” journeys cond-pill style â”€â”€ */
  .doctor-section {
    background: linear-gradient(135deg, #faf5fb 0%, #f3e5f5 50%, #ede7f6 100%) !important;
    border: 1px solid var(--border-soft) !important;
  }
  .doctor-section::before { content: none !important; }
  .trigger-card {
    border-radius: 20px !important;
    border: 1px solid var(--border-soft) !important;
    box-shadow: 0 4px 20px rgba(0,0,0,.06) !important;
    transition: all .35s cubic-bezier(.23,1.01,.32,1) !important;
    border-top: 4px solid var(--trigger-color) !important;
    background: white !important;
  }
  .trigger-card:hover {
    transform: translateY(-8px) !important;
    box-shadow: 0 16px 40px rgba(236,64,122,.14) !important;
  }

  /* â”€â”€ TIMELINE â€” journeys milestone left-line style â”€â”€ */
  .timeline::before {
    background: linear-gradient(180deg,#ec407a 0%,#d81b60 50%,#ad1457 100%) !important;
    width: 3px !important; border-radius: 2px;
  }
  .timeline-marker {
    background: white !important;
    box-shadow: 0 6px 24px rgba(236,64,122,.25) !important;
  }
  .timeline-content {
    border-radius: 20px !important;
    box-shadow: 0 6px 24px rgba(0,0,0,.07) !important;
    border: 1px solid var(--border-soft) !important;
    background: linear-gradient(135deg, white 0%, rgba(252,228,236,.08) 100%) !important;
    transition: all .4s !important;
  }
  .timeline-content:hover {
    transform: scale(1.04) !important;
    box-shadow: 0 14px 40px rgba(236,64,122,.15) !important;
    border-color: rgba(236,64,122,.2) !important;
  }
  .timeline-title { font-family: 'Playfair Display', serif !important; font-size: 1.2rem !important; font-weight: 700 !important; }

  /* â”€â”€ CYCLE TRACKER â€” glassmorphism â”€â”€ */
  .cycle-tracker {
    background: linear-gradient(135deg, rgba(252,228,236,.4) 0%, rgba(237,231,246,.3) 100%) !important;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(236,64,122,.1) !important;
    box-shadow: 0 20px 60px rgba(236,64,122,.1) !important;
  }

  /* â”€â”€ CTA â”€â”€ */
  .cta-section {
    background: linear-gradient(135deg,#ec407a 0%,#d81b60 50%,#ad1457 100%) !important;
    box-shadow: 0 20px 60px rgba(236,64,122,.35) !important;
  }
  .cta-title {
    font-family: 'Playfair Display', serif !important;
    font-size: clamp(1.8rem,3.5vw,2.8rem) !important;
    font-weight: 900 !important;
  }
  .cta-button {
    font-family: 'Manrope', sans-serif !important;
    font-weight: 700 !important;
  }

  /* â”€â”€ Section alternating backgrounds â”€â”€ */
  .section-alt { background: linear-gradient(180deg,#faf5fb 0%,#f5eef8 100%); }
  .section-white { background: white; }

  /* â”€â”€ HERO MOBILE â”€â”€ */
  @media(max-width:900px) {
    .hero {
      grid-template-columns: 1fr !important;
      min-height: auto !important;
      background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 40%, #ede7f6 100%) !important;
    }

    /* Left column: content at top */
    .hero-left {
      padding: 3rem 1.5rem 1.5rem !important;
      align-items: flex-start;
      order: 1;
    }
    .hero .hero-subtitle { max-width: 100%; }
    .hero .hero-stats { max-width: 100%; }

    /* Make hero title readable on gradient */
    .hero .hero-title {
      background: linear-gradient(135deg, #ad1457 0%, #6a1b9a 100%) !important;
      -webkit-background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
      background-clip: text !important;
    }

    /* Stat boxes: subtle white card on gradient */
    .hero .stat-box {
      background: rgba(255,255,255,0.85) !important;
      backdrop-filter: blur(8px);
    }

    /* RIGHT COLUMN: show below text as compact centered orb */
    .hero-right {
      display: flex !important;
      order: 2;
      padding: 0.5rem 1.5rem 3rem !important;
      justify-content: center;
      align-items: center;
    }

    /* Outer wrapper: constrained width on mobile */
    .hero-visual-outer {
      width: min(300px, 80vw) !important;
      position: relative;
    }

    /* Scale down the canvas orb */
    .hero-canvas-wrap {
      width: min(280px, 76vw) !important;
      height: min(280px, 76vw) !important;
    }

    /* Orbital rings: scale to match smaller orb */
    .hero-orbital-1 { inset: -14px !important; }
    .hero-orbital-2 { inset: -26px !important; }

    /* Phase strip: reposition for smaller orb */
    .hero-phase-strip {
      bottom: -36px !important;
      font-size: .7rem !important;
      padding: .35rem .9rem !important;
    }

    /* Side float labels that would overflow: hide them */
    .hero-float-label[style*="right:-8%"],
    .hero-float-label[style*="left:-10%"] {
      display: none !important;
    }
    /* Top label: pull in tight */
    .hero-float-label[style*="top:-2%"] {
      top: -14px !important;
      font-size: .68rem !important;
      padding: .28rem .7rem !important;
    }
    /* Bottom label: push below phase strip */
    .hero-float-label[style*="bottom:-2%"] {
      bottom: -62px !important;
      font-size: .68rem !important;
      padding: .28rem .7rem !important;
    }

    /* Particle canvas on gradient: boost opacity */
    #heroParticleCanvas { opacity: 0.45; }
  }

  @media(max-width:600px){
    .hero-left { padding: 2.5rem 1.25rem 1.25rem !important; }
    .hero-right { padding: 0.5rem 1.25rem 2.75rem !important; }
    .hero-visual-outer { width: min(260px, 80vw) !important; }
    .hero-canvas-wrap {
      width: min(240px, 76vw) !important;
      height: min(240px, 76vw) !important;
    }
  }

  @media(max-width:400px){
    .hero-left { padding: 2rem 1rem 1rem !important; }
    .hero-right { padding: 0.5rem 1rem 2.5rem !important; }
    .hero-visual-outer { width: min(220px, 82vw) !important; }
    .hero-canvas-wrap {
      width: min(200px, 78vw) !important;
      height: min(200px, 78vw) !important;
    }
    .hero-phase-strip { font-size: .62rem !important; bottom: -32px !important; }
  }

  /* â”€â”€ TIMELINE MOBILE â€” clean single-column left-rail â”€â”€ */
  @media(max-width: 968px) {
    /* Override the broken grid for ALL timeline items */
    .timeline-item {
      display: flex !important;
      flex-direction: row !important;
      align-items: flex-start !important;
      gap: 1rem !important;
      grid-template-columns: unset !important;
      margin-bottom: 1.75rem;
    }

    /* The vertical line stays on the left */
    .timeline::before {
      left: 28px !important;
      transform: none !important;
    }

    /* Marker: fixed size, always first visually */
    .timeline-marker {
      width: 56px !important;
      height: 56px !important;
      flex-shrink: 0 !important;
      order: 0 !important;
    }

    /* The REAL content card â€” always show, always second */
    .timeline-content {
      flex: 1 !important;
      min-width: 0 !important;
      order: 1 !important;
    }

    /* Hide the EMPTY placeholder content divs (they have no children) */
    .timeline-content:empty {
      display: none !important;
    }

    /* Remove the broken nth-child grid hacks */
    .timeline-item:nth-child(even) .timeline-content:first-child {
      grid-column: unset !important;
      order: 1 !important;
    }
    .timeline-item:nth-child(even) .timeline-content:last-child {
      grid-column: unset !important;
      order: 1 !important;
    }

    /* Undo the old "hide last child" rule that was hiding even-item content */
    .timeline-content:last-child {
      display: flex !important;
    }

    /* Marker icon sizing */
    .timeline-icon { font-size: 1.4rem !important; margin-bottom: 0 !important; }
    .timeline-label { font-size: 0.6rem !important; }

    /* Content card */
    .timeline-content { padding: 1rem !important; border-radius: 14px !important; }
    .timeline-title { font-size: 1rem !important; }
    .timeline-desc { font-size: 0.85rem !important; line-height: 1.55 !important; }
  }

  /* â”€â”€ TIMELINE extra small â”€â”€ */
  @media(max-width: 480px) {
    .timeline::before { left: 22px !important; }
    .timeline-marker { width: 44px !important; height: 44px !important; border-width: 3px !important; }
    .timeline-icon { font-size: 1.1rem !important; }
    .timeline-label { font-size: 0.55rem !important; }
    .timeline-item { gap: .75rem !important; margin-bottom: 1.25rem; }
    .timeline-content { padding: .875rem !important; }
    .timeline-title { font-size: .92rem !important; }
    .timeline-desc { font-size: .8rem !important; }
  }
  /* 600px: 3 compact cols */
  @media(max-width:600px) {
    .hero-left { padding: 2rem 1rem 2rem !important; }
    .hero .hero-title { font-size: clamp(1.9rem, 7.5vw, 2.8rem) !important; }
    .hero .hero-stats {
      grid-template-columns: repeat(3, 1fr) !important;
      gap: .5rem !important;
    }
    .hero .stat-box { padding: .75rem .5rem !important; border-radius: 12px !important; }
    .hero .stat-value { font-size: 1.2rem !important; }
    .hero .stat-icon { font-size: 1.1rem !important; margin-bottom: .2rem !important; }
    .hero .stat-label { font-size: .6rem !important; letter-spacing: 0 !important; }
  }
  /* 420px: 2-col, last stat centred */
  @media(max-width:420px) {
    .hero-left { padding: 1.75rem .875rem 1.75rem !important; }
    .hero .hero-title { font-size: clamp(1.75rem, 8vw, 2.2rem) !important; }
    .hero .hero-stats { grid-template-columns: 1fr 1fr !important; gap: .5rem !important; }
    .hero .stat-box:last-child { grid-column: 1 / -1; max-width: 50%; margin: 0 auto; }
  }
  /* 340px: single col */
  @media(max-width:340px) {
    .hero-left { padding: 1.5rem .75rem 1.5rem !important; }
    .hero .hero-title { font-size: 1.5rem !important; }
    .hero .hero-stats { grid-template-columns: 1fr !important; }
    .hero .stat-box:last-child { grid-column: auto; max-width: 100%; margin: 0; }
  }

  /* Ensure the outer wrapper is a positioning context */
  .hero-visual-outer { position: relative; }
  /* Phase strip transition */
  #heroPhaseText { transition: opacity 0.35s ease; }

  /* ============================================================
     MOBILE â€” REMAINING SURGICAL FIXES
  ============================================================ */

  /* Fix: hero-visual-outer width must not overflow on narrow tablets */
  .hero-visual-outer { width: min(460px, 100%); }

  /* Fix: section-sub-j fluid on small screens */
  .section-sub-j { font-size: clamp(.87rem, 2.5vw, 1.05rem); }

  /* Fix: card-title clamp so it never overflows at any width */
  .card-title { font-size: clamp(1.2rem, 4vw, 1.8rem) !important; }

  /* Fix: cta-title clamp on small phones */
  .cta-title { font-size: clamp(1.4rem, 5vw, 2.5rem) !important; }
  @media(max-width:600px) {
    .cta-section { padding: 2rem 1rem !important; }
    .cta-text { font-size: .92rem !important; }
    .section-header { margin: 2rem 0 1.25rem; }
    .section-sub-j { margin-bottom: 1.5rem; }
  }

  /* Fix: doctor-visit-inner flex â†’ column on â‰¤600px */
  @media(max-width:600px) {
    .doctor-visit-inner {
      flex-direction: column !important;
      gap: 1rem !important;
    }
  }

  /* Fix: grids that need single-col below 480px */
  @media(max-width:480px) {
    .exercise-grid,
    .nutrient-grid,
    .loss-types { grid-template-columns: 1fr !important; }
    .trigger-grid { grid-template-columns: 1fr 1fr !important; }
    .cycle-tracker { padding: 1.5rem .875rem; }
  }

  /* Fix: trigger-grid â†’ single col on very small phones */
  @media(max-width:380px) {
    .trigger-grid { grid-template-columns: 1fr !important; }
    .timeline::before { left: 16px; }
    .timeline-item { grid-template-columns: 50px 1fr; gap: .75rem; }
    .timeline-marker { width: 50px; height: 50px; border-width: 3px; }
    .timeline-icon { font-size: 1.1rem; margin-bottom: 0; }
    .timeline-content { padding: .85rem; }
    .timeline-title { font-size: .9rem !important; }
    .timeline-desc { font-size: .8rem; }
    .container { padding: 0 .75rem; }
    .nav-container { padding: 0 .75rem; }
    .logo-text a { font-size: 1.05rem; }
    .cycle-wheel-container { max-width: 220px; }
    .cycle-day { width: 30px; height: 30px; }
    .cycle-center { width: 76px; height: 76px; }
  }

  /* Fix: Touch devices â€” remove ALL hover transforms that feel broken on touchscreens */
  @media(hover: none) and (pointer: coarse) {
    .stat-box:hover,
    .nutrient-card:hover,
    .exercise-card:hover,
    .loss-card:hover,
    .trigger-card:hover,
    .do-card:hover,
    .dont-card:hover,
    .action-item:hover,
    .timeline-content:hover,
    .cycle-day:hover,
    .cta-button:hover,
    .btn-nav.outline:hover {
      transform: none !important;
      box-shadow: inherit !important;
    }
  }

  /* ============================================================
     COMPREHENSIVE MOBILE RESPONSIVE â€” FINAL PASS
     Addresses all remaining overflow and layout issues
     ============================================================ */

  /* Global overflow protection */
  html, body { overflow-x: hidden; max-width: 100%; }

  /* â”€â”€ Hero: float labels overflow fix â”€â”€
     The labels at right:-8% and left:-10% cause overflow on small screens.
     We clip them at the outer wrapper instead of repositioning (hero-right is
     hidden at â‰¤900px so these labels are already hidden). */
  /* hero-visual-outer: visible on desktop, hidden on mobile to clip overflowing labels */
  .hero-visual-outer { overflow: visible; }
  @media(max-width:900px){
    .hero-visual-outer { overflow: visible; }
    /* Clip anything bleeding outside the hero right column */
    .hero-right { overflow: hidden; }
  }

  /* Orbital rings: prevent them bleeding beyond the page at narrow viewports */
  .hero-orbital-1, .hero-orbital-2 {
    pointer-events: none;
  }

  /* Phase strip: allow wrapping on very small screens */
  .hero-phase-strip {
    white-space: normal !important;
    text-align: center;
    max-width: calc(100% - 2rem);
  }

  /* Float labels: prevent overflow if visible */
  .hero-float-label {
    white-space: normal !important;
    max-width: min(200px, 90vw);
  }

  /* â”€â”€ Section padding fluid â”€â”€ */
  .section-alt, .section-white { overflow-x: hidden; }

  /* â”€â”€ Container max-width safety â”€â”€ */
  .container, .sim-wrap { max-width: 100%; }

  /* â”€â”€ Cycle wheel: cycle-day size safety for very small â”€â”€ */
  .cycle-day { min-width: 0; min-height: 0; }

  /* â”€â”€ pl-btn-wrap wrapping â”€â”€ */
  .pl-btn-wrap { padding: 1.5rem 1rem 2rem; }
  .pl-3d-btn { max-width: 100%; flex-wrap: wrap; }

  /* â”€â”€ Timeline: prevent content text from overflowing â”€â”€ */
  .timeline-content { overflow-wrap: break-word; word-break: break-word; }
  .timeline-title { overflow-wrap: break-word; }
  .timeline-desc { overflow-wrap: break-word; }

  /* â”€â”€ Action items: prevent overflow â”€â”€ */
  .action-text { min-width: 0; overflow-wrap: break-word; }
  .action-desc { overflow-wrap: break-word; }

  /* â”€â”€ Info item text â”€â”€ */
  .info-item > div:last-child { min-width: 0; overflow-wrap: break-word; }

  /* â”€â”€ Loss card description â”€â”€ */
  .loss-description, .loss-signs-list { overflow-wrap: break-word; }

  /* â”€â”€ Trigger card text â”€â”€ */
  .trigger-text { overflow-wrap: break-word; word-break: break-word; }

  /* â”€â”€ Nutrient card text â”€â”€ */
  .nutrient-benefit, .nutrient-name { overflow-wrap: break-word; }

  /* â”€â”€ Sim sliders: prevent overflow â”€â”€ */
  .sim-slider { max-width: 100%; }
  .sim-slider-header { flex-wrap: wrap; gap: .25rem; }
  .sim-slider-name { min-width: 0; flex: 1; overflow-wrap: break-word; }

  /* â”€â”€ Factor grid â€” safe wrapping â”€â”€ */
  .factor-toggle { min-width: 0; overflow-wrap: break-word; }

  /* â”€â”€ Evidence card: ghost number not causing overflow â”€â”€ */
  .evidence-card { overflow: hidden; }

  /* â”€â”€ pg-stats-row: prevent overflow on narrow â”€â”€ */
  .pg-stat { min-width: 0; overflow-wrap: break-word; }
  .pg-stat-label { overflow-wrap: break-word; word-break: break-word; }

  /* â”€â”€ Legend evidence badge â”€â”€ */
  .legend-evidence { white-space: normal !important; overflow-wrap: break-word; }

  /* â”€â”€ Playground shell â”€â”€ */
  .playground-shell { overflow: hidden; }

  /* â”€â”€ Nav dropdown: prevent clipping on right edge â”€â”€ */
  @media(max-width:1060px) {
    .nav-dropdown { display: none !important; }
  }

  /* â”€â”€ 768px tweaks for sections not yet addressed â”€â”€ */
  @media(max-width: 768px) {
    /* Hero left padding  */
    .hero-left { padding: 2.5rem 1.25rem 2rem !important; }

    /* Cycle info card padding */
    .cycle-info { padding: 1rem; }

    /* Loss card hover â€” less aggressive on narrow */
    .loss-card:hover { transform: translateY(-4px) !important; }

    /* Doctor section inner box */
    .doctor-section > div:last-child {
      border-radius: 16px;
      padding: 1.25rem;
    }

    /* Timeline: ensure it uses the 80px column version */
    .timeline::before { left: 28px; }

    /* CTA button full width on tablet */
    .cta-button { display: block; width: 100%; max-width: 320px; margin: 0 auto; }

    /* Playground shell */
    .playground-shell { margin-bottom: 1.5rem; }

    /* Prob meter â€” ensure gauge canvas doesn't overflow */
    #sim-gauge-canvas { max-width: 100%; }

    /* pl-3d-btn wrapping */
    .pl-3d-btn { flex-wrap: wrap; justify-content: center; text-align: center; }
    .pl-btn-text { align-items: center; }
  }

  /* â”€â”€ 600px â”€â”€ */
  @media(max-width: 600px) {
    /* Hero badge */
    .hero-badge-wrap { font-size: .72rem; }

    /* Doctor section tile grid */
    .doctor-section > * { word-break: break-word; }

    /* pl-btn-sub can wrap */
    .pl-btn-sub { white-space: normal !important; }

    /* Loss card: horizontal transform removed */
    .loss-card:hover { transform: translateY(-4px) !important; }

    /* Evidence grid gap */
    .evidence-grid { gap: 1rem; }

    /* Sim prob insights */
    .prob-insight-item { flex-wrap: wrap; }

    /* Step nav scroll on mobile */
    .pg-steps-nav { overflow-x: auto; flex-wrap: nowrap !important; padding-bottom: .5rem; }
    .pg-steps-nav::-webkit-scrollbar { height: 3px; }
    .pg-steps-nav::-webkit-scrollbar-track { background: transparent; }
    .pg-steps-nav::-webkit-scrollbar-thumb { background: rgba(232,53,109,.3); border-radius: 2px; }
  }

  /* â”€â”€ 480px â”€â”€ */
  @media(max-width: 480px) {
    /* Hero left tighter */
    .hero-left { padding: 2rem 1rem 1.75rem !important; }

    /* Badge pill wrap */
    .hero-badge-wrap { font-size: .68rem; padding: .35rem .75rem; }

    /* cycle info items */
    .info-item { flex-direction: column; align-items: flex-start; gap: .5rem; }
    .info-icon { width: 36px; height: 36px; font-size: 1.1rem; }

    /* card title tighter */
    .card-title { flex-wrap: wrap; }

    /* exercise visual height */
    .exercise-visual { height: 120px; }
    .exercise-icon { font-size: 3rem; }

    /* pl-3d-btn: full width */
    .pl-3d-btn { width: 100%; justify-content: flex-start; }
    .pl-btn-wrap { padding: 1rem .5rem 1.5rem; }

    /* loss action flex wrap */
    .loss-action { flex-wrap: wrap; }

    /* Doctor section grid */
    .trigger-grid { grid-template-columns: 1fr 1fr !important; }

    /* Section alt/white sections padding */
    .section-alt, .section-white { padding: 2.5rem 0; }
  }

  /* â”€â”€ 380px â”€â”€ */
  @media(max-width: 380px) {
    /* Hero */
    .hero-left { padding: 1.75rem .875rem 1.5rem !important; }
    .hero-badge-wrap { font-size: .62rem; padding: .3rem .65rem; gap: .3rem; }

    /* Cycle info stacked */
    .info-item { padding: .65rem .75rem; }
    .info-icon { width: 32px; height: 32px; font-size: 1rem; border-radius: 8px; }

    /* Card title  */
    .card-title { font-size: clamp(1rem, 5vw, 1.5rem) !important; margin-bottom: .75rem; }

    /* do/dont cards padding */
    .do-card, .dont-card { padding: 1rem .875rem; }

    /* action items */
    .action-item { gap: .5rem; padding: .65rem .75rem; }

    /* Exercise content */
    .exercise-content { padding: 1rem .875rem; }
    .exercise-title { font-size: 1.1rem !important; }

    /* loss card */
    .loss-card { padding: 1rem .875rem; }
    .loss-name { font-size: 1rem !important; }

    /* trigger text */
    .trigger-text { font-size: .8rem; }

    /* nutrient card */
    .nutrient-card { padding: 1rem .875rem; }
    .nutrient-name { font-size: 1.05rem !important; }

    /* Sim */
    .calc-card { padding: .875rem; }
    .calc-card h4 { font-size: .95rem; }
    .factor-toggle { font-size: .72rem; padding: .45rem .6rem; }

    /* Doctor section */
    .doctor-section { padding: 1.25rem .75rem; }
    .trigger-grid { grid-template-columns: 1fr !important; }

    /* CTA */
    .cta-section { padding: 1.5rem .875rem; }
    .cta-title { font-size: 1.3rem !important; }

    /* pl-btn */
    .pl-3d-btn { padding: .85rem 1rem .85rem .9rem; gap: .6rem; }
    .pl-btn-label { font-size: .85rem; }
    .pl-btn-sub { font-size: .6rem; }
    .pl-btn-icon { width: 28px; height: 28px; font-size: .85rem; }
  }

  /* â”€â”€ 320px: minimum viable width â”€â”€ */
  @media(max-width: 320px) {
    .container, .nav-container, .sim-wrap { padding: 0 .625rem; }
    .hero-left { padding: 1.5rem .625rem 1.25rem !important; }
    .hero .hero-title { font-size: 1.4rem !important; }
    .hero .hero-stats { grid-template-columns: 1fr !important; }
    .hero .stat-box:last-child { grid-column: auto; max-width: 100%; margin: 0; }
    .cycle-wheel-container { max-width: 200px; }
    .cycle-day { width: 26px; height: 26px; }
    .cycle-center { width: 70px; height: 70px; }
    .dos-donts { gap: .75rem; }
    .do-card, .dont-card { padding: .875rem .75rem; }
    .loss-card { padding: .875rem .75rem; }
    .doctor-section { padding: 1rem .625rem; }
    .trigger-grid { grid-template-columns: 1fr !important; }
    .nutrient-card { padding: .875rem .75rem; }
    .exercise-content { padding: .875rem .75rem; }
    .cta-section { padding: 1.25rem .75rem; }
    .footer-main { padding: 32px 12px 24px; gap: 24px; }
    .footer-meta { padding: 16px 12px; }
    .footer-bottom-inner { padding: 16px 12px; }
    .footer-links { gap: 14px; }
  }

  /* â”€â”€ Additional sim-section fixes â”€â”€ */
  @media(max-width: 700px) {
    /* Prob meter: ensure 1-col layout */
    .prob-meter-wrap { grid-template-columns: 1fr !important; }

    /* Gauge canvas centred */
    #sim-gauge-canvas { display: block; margin: 0 auto; }

    /* Factor toggles wrap */
    .factor-grid { grid-template-columns: 1fr 1fr !important; gap: .4rem; }
  }

  /* â”€â”€ pg-steps-nav on very small: scrollable horizontal â”€â”€ */
  @media(max-width: 480px) {
    .pg-steps-nav { overflow-x: auto; flex-wrap: nowrap !important; padding-bottom: .4rem; -webkit-overflow-scrolling: touch; }
    .pg-step-btn { flex-shrink: 0; }
  }

  /* Ensure sim playground canvas never overflows */
  #sim-playground-canvas { max-width: 100%; height: auto !important; }
  #sim-cycle-canvas { max-width: 100%; }

  /* Prevent any inline-styled element with fixed px widths from overflowing */
  .prob-gauge-wrap { max-width: 100%; }
  #sim-gauge-canvas { max-width: min(220px, 90vw); height: auto; aspect-ratio: 220 / 140; }

  /* â”€â”€ Footer on very small screens â”€â”€ */
  @media(max-width: 400px) {
    .footer-links { flex-direction: column; align-items: center; gap: 10px; }
    .footer-copy { font-size: .72rem; }
    .footer-meta .meta-line { font-size: .72rem; }
    .footer-meta .tagline { font-size: .74rem; flex-wrap: wrap; justify-content: center; }
  }

  </style>
</head>
<body>

<!-- ===== HEADER ===== -->
  <header class="site-header">
    <div class="nav-container">
      <!-- Logo -->
      <div class="logo">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="white">
            <circle cx="12" cy="5.5" r="2.8"/>
            <path d="M9.3 4.8 Q9.1 2.5 12 2.2 Q14.9 2.5 14.7 4.8" opacity="0.7"/>
            <path d="M9.5 13.2 Q9 10.5 10 9.3 Q11 8.6 12 8.6 Q13 8.6 14 9.3 Q15 10.5 14.5 13.2Z"/>
            <path d="M9.5 13.2 Q7.2 13.8 6.8 16.2 Q7.8 16.4 8.8 15Z" opacity="0.85"/>
            <path d="M14.5 13.2 Q16.8 13.8 17.2 16.2 Q16.2 16.4 15.2 15Z" opacity="0.85"/>
            <path d="M8.8 15 Q8.2 17.5 9.5 19.5 Q11 21 12 21 Q13 21 14.5 19.5 Q15.8 17.5 15.2 15Z"/>
          </svg>
        </div>
        <div class="logo-text">
          <a href="index.html">Nari Swasthya</a>
          <span>Women's Complete Health</span>
        </div>
      </div>

      <nav class="main-nav" aria-label="Main navigation">
        <div class="nav-item"><a href="index.html" class="nav-link">Home</a></div>

        <!-- Journeys dropdown -->
        <div class="nav-item">
          <button class="nav-link" aria-haspopup="true">Journeys <i class="fa-solid fa-chevron-down chevron"></i></button>
          <div class="nav-dropdown">
            <a href="journeys.html" class="dd-item" style="background:linear-gradient(135deg,rgba(236,64,122,0.08),rgba(173,20,87,0.04));border-radius:10px;margin-bottom:.3rem;">
              <div class="dd-icon" style="background:linear-gradient(135deg,#ec407a,#ad1457);color:white;"><i class="fa-solid fa-map"></i></div>
              <div><strong style="display:block;font-size:.82rem;color:#d81b60;">View Full Journeys</strong><span style="font-size:.73rem;color:#555;">Browse all her journeys</span></div>
            </a>
            <div class="dd-sep"></div>
            <a href="conceiving.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-seedling"></i></div><div><strong style="display:block;font-size:.82rem;">Conceiving</strong><span style="font-size:.73rem;color:#555;">Preparation &amp; planning</span></div></a>
            <a href="fertility.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-dna"></i></div><div><strong style="display:block;font-size:.82rem;">Fertility</strong><span style="font-size:.73rem;color:#555;">Cycle &amp; ovulation</span></div></a>
            <!-- Pregnancy Journey with flyout sub-items -->
            <div class="dd-item dd-has-flyout">
              <div class="dd-icon" style="background:#fce4ec;color:#ec407a;"><i class="fa-solid fa-baby-carriage"></i></div>
              <a href="pregnancy_journey.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Pregnancy Journey</strong><span style="font-size:.73rem;color:#555;">Week by week guide</span></a>
              <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
              <div class="dd-flyout">
                <a href="normal_delivery.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-circle-check"></i></div><div><strong style="display:block;font-size:.82rem;">Normal Delivery</strong><span style="font-size:.73rem;color:#555;">Vaginal birth guide</span></div></a>
                <a href="csection.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-hospital"></i></div><div><strong style="display:block;font-size:.82rem;">C-Section</strong><span style="font-size:.73rem;color:#555;">Surgical birth info</span></div></a>
                <a href="pregnancy_loss.html" class="dd-item"><div class="dd-icon" style="background:#fafafa;color:#9e9e9e;"><i class="fa-solid fa-hands-holding-heart"></i></div><div><strong style="display:block;font-size:.82rem;">Pregnancy Loss</strong><span style="font-size:.73rem;color:#555;">Support &amp; care</span></div></a>
              </div>
            </div>
            <a href="antenatal_care.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-clipboard-list"></i></div><div><strong style="display:block;font-size:.82rem;">Antenatal Care</strong><span style="font-size:.73rem;color:#555;">ANC visits &amp; checklist</span></div></a>
            <!-- NCD with flyout sub-items -->
            <div class="dd-item dd-has-flyout">
              <div class="dd-icon" style="background:#e8eaf6;color:#283593;"><i class="fa-solid fa-heart-pulse"></i></div>
              <a href="ncd_pregnancy.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Non Communicable Diseases</strong><span style="font-size:.73rem;color:#555;">Diabetes, hypertension &amp; more</span></a>
              <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
              <div class="dd-flyout">
                <a href="gestational_diabetes.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-droplet"></i></div><div><strong style="display:block;font-size:.82rem;">Gestational Diabetes</strong><span style="font-size:.73rem;color:#555;">Manage blood sugar</span></div></a>
                <a href="preeclampsia_education.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-heart-circle-exclamation"></i></div><div><strong style="display:block;font-size:.82rem;">Preeclampsia</strong><span style="font-size:.73rem;color:#555;">Blood pressure care</span></div></a>
                <a href="cancer_simulation_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#6a1b9a;"><i class="fa-solid fa-ribbon"></i></div><div><strong style="display:block;font-size:.82rem;">Cancer</strong><span style="font-size:.73rem;color:#555;">Simulation journey</span></div></a>
              </div>
            </div>
            <a href="newborn_postpartum_care.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-baby"></i></div><div><strong style="display:block;font-size:.82rem;">Newborn &amp; Postpartum</strong><span style="font-size:.73rem;color:#555;">4th trimester care</span></div></a>
            <a href="breastfeeding_journey.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57c00;"><i class="fa-solid fa-heart"></i></div><div><strong style="display:block;font-size:.82rem;">Breastfeeding</strong><span style="font-size:.73rem;color:#555;">Latch, supply, nutrition</span></div></a>
            <a href="menopause.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#ad1457;"><i class="fa-solid fa-fire-flame-curved"></i></div><div><strong style="display:block;font-size:.82rem;">Menopause</strong><span style="font-size:.73rem;color:#555;">Perimenopause &amp; beyond</span></div></a>
          </div>
        </div>

        <!-- Services dropdown (active) -->
        <div class="nav-item">
          <button class="nav-link active" aria-haspopup="true">Services <i class="fa-solid fa-chevron-down chevron"></i></button>
          <div class="nav-dropdown">
            <a href="services.html" class="dd-item" style="background:linear-gradient(135deg,rgba(236,64,122,0.08),rgba(173,20,87,0.04));border-radius:10px;margin-bottom:.3rem;">
              <div class="dd-icon" style="background:linear-gradient(135deg,#ec407a,#ad1457);color:white;"><i class="fa-solid fa-grid-2"></i></div>
              <div><strong style="display:block;font-size:.82rem;color:#d81b60;">Services Available</strong><span style="font-size:.73rem;color:#555;">Browse all our services</span></div>
            </a>
            <div class="dd-sep"></div>
            <a href="symptom_checker.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-stethoscope"></i></div><div><strong style="display:block;font-size:.82rem;">Symptom Checker</strong><span style="font-size:.73rem;color:#555;">AI-powered diagnosis</span></div></a>
            <a href="dashboard.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-gauge-high"></i></div><div><strong style="display:block;font-size:.82rem;">My Dashboard</strong><span style="font-size:.73rem;color:#555;">Track your health</span></div></a>
            <a href="screening.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-magnifying-glass-plus"></i></div><div><strong style="display:block;font-size:.82rem;">Health Screening</strong><span style="font-size:.73rem;color:#555;">Cancer &amp; preventive</span></div></a>
            <a href="vaccination.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-syringe"></i></div><div><strong style="display:block;font-size:.82rem;">Vaccination</strong><span style="font-size:.73rem;color:#555;">Immunization schedule</span></div></a>
            <a href="otc.html" class="dd-item"><div class="dd-icon" style="background:#e0f7fa;color:#006064;"><i class="fa-solid fa-pills"></i></div><div><strong style="display:block;font-size:.82rem;">OTC Medicine Guide</strong><span style="font-size:.73rem;color:#555;">Safe self-care options</span></div></a>
            <a href="government_schemes.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#e65100;"><i class="fa-solid fa-landmark"></i></div><div><strong style="display:block;font-size:.82rem;">Govt Schemes</strong><span style="font-size:.73rem;color:#555;">Benefits you deserve</span></div></a>
            <a href="insurance.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#1b5e20;"><i class="fa-solid fa-shield-halved"></i></div><div><strong style="display:block;font-size:.82rem;">Insurance</strong><span style="font-size:.73rem;color:#555;">Coverage &amp; claims guide</span></div></a>
          </div>
        </div>

        <div class="nav-item"><a href="stories.html" class="nav-link">Stories</a></div>
        <div class="nav-item"><a href="about.html" class="nav-link">About Us</a></div>

        <!-- Additional Info dropdown -->
        <div class="nav-item">
          <button class="nav-link" aria-haspopup="true">Additional Info <i class="fa-solid fa-chevron-down chevron"></i></button>
          <div class="nav-dropdown" style="min-width:240px;">
            <div style="padding:.4rem .9rem .2rem;font-size:.7rem;font-weight:700;color:#555;text-transform:uppercase;letter-spacing:.08em;">Health Topics</div>
            <a href="fertility.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#ec407a;"><i class="fa-solid fa-seedling"></i></div><div><strong style="display:block;font-size:.82rem;">Fertility</strong><span style="font-size:.73rem;color:#555;">Cycle, conceiving &amp; IVF</span></div></a>
            <a href="pregnancy_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-baby-carriage"></i></div><div><strong style="display:block;font-size:.82rem;">Pregnancy</strong><span style="font-size:.73rem;color:#555;">All trimesters covered</span></div></a>
            <a href="newborn_postpartum_care.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-baby"></i></div><div><strong style="display:block;font-size:.82rem;">Motherhood</strong><span style="font-size:.73rem;color:#555;">Newborn &amp; postpartum</span></div></a>
            <a href="menopause.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-spa"></i></div><div><strong style="display:block;font-size:.82rem;">Wellness</strong><span style="font-size:.73rem;color:#555;">Menopause, bone, mental</span></div></a>
            <div class="dd-sep"></div>
            <a href="community.html" class="dd-item"><div class="dd-icon" style="background:#ede7f6;color:#4527a0;"><i class="fa-solid fa-users"></i></div><div><strong style="display:block;font-size:.82rem;">Community</strong><span style="font-size:.73rem;color:#555;">Share &amp; connect</span></div></a>
            <div class="dd-sep"></div>
            <div style="padding:.4rem .9rem .2rem;font-size:.7rem;font-weight:700;color:#555;text-transform:uppercase;letter-spacing:.08em;">Specialised Care</div>
            <!-- NCD with flyout sub-items â€” first item -->
            <div class="dd-item dd-has-flyout">
              <div class="dd-icon" style="background:#e8eaf6;color:#283593;"><i class="fa-solid fa-heart-pulse"></i></div>
              <a href="ncd_pregnancy.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Non Communicable Diseases</strong><span style="font-size:.73rem;color:#555;">Diabetes, hypertension &amp; more</span></a>
              <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
              <div class="dd-flyout">
                <a href="gestational_diabetes.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-droplet"></i></div><div><strong style="display:block;font-size:.82rem;">Gestational Diabetes</strong><span style="font-size:.73rem;color:#555;">Manage blood sugar</span></div></a>
                <a href="preeclampsia_education.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-heart-circle-exclamation"></i></div><div><strong style="display:block;font-size:.82rem;">Preeclampsia</strong><span style="font-size:.73rem;color:#555;">Blood pressure care</span></div></a>
                <a href="cancer_simulation_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#6a1b9a;"><i class="fa-solid fa-ribbon"></i></div><div><strong style="display:block;font-size:.82rem;">Cancer</strong><span style="font-size:.73rem;color:#555;">Simulation journey</span></div></a>
              </div>
            </div>
            <a href="bone_health.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#ad1457;"><i class="fa-solid fa-bone"></i></div><div><strong style="display:block;font-size:.82rem;">Bone Health</strong><span style="font-size:.73rem;color:#555;">Osteoporosis prevention</span></div></a>
            <a href="depression.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-brain"></i></div><div><strong style="display:block;font-size:.82rem;">Mental Health</strong><span style="font-size:.73rem;color:#555;">Anxiety, depression, support</span></div></a>
            <a href="loss_support.html" class="dd-item"><div class="dd-icon" style="background:#fafafa;color:#9e9e9e;"><i class="fa-solid fa-hands-holding-heart"></i></div><div><strong style="display:block;font-size:.82rem;">Loss Support</strong><span style="font-size:.73rem;color:#555;">You are never alone</span></div></a>
          </div>
        </div>
      </nav>

      <!-- Right: Sign In + Contact Us -->
      <div class="nav-actions">
        <a class="btn-nav outline" href="login.html"><i class="fa-regular fa-user"></i> Sign In</a>
        <a class="btn-nav primary" href="contact.html"><i class="fa-solid fa-envelope"></i> Contact Us</a>
        <button class="hamburger" id="hamburgerBtn" aria-label="Menu" onclick="toggleMobile()">
          <span id="hb1"></span><span id="hb2"></span><span id="hb3"></span>
        </button>
      </div>
    </div>
  </header>


<!-- Mobile Menu -->
  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="mm-section">Navigation</div>
    <a href="index.html" class="mm-link"><i class="fa-solid fa-house" style="color:#d81b60;width:20px;"></i> Home</a>
    <div class="mm-section">Journeys</div>
    <a href="conceiving.html" class="mm-link"><i class="fa-solid fa-seedling" style="color:#d81b60;width:20px;"></i> Conceiving</a>
    <a href="fertility.html" class="mm-link"><i class="fa-solid fa-dna" style="color:#d81b60;width:20px;"></i> Fertility</a>
    <a href="pregnancy_journey.html" class="mm-link"><i class="fa-solid fa-baby-carriage" style="color:#d81b60;width:20px;"></i> Pregnancy Journey</a>
    <a href="normal_delivery.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#ec407a;width:20px;"></i> Normal Delivery</a>
    <a href="csection.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#ec407a;width:20px;"></i> C-Section</a>
    <a href="pregnancy_loss.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#9e9e9e;width:20px;"></i> Pregnancy Loss</a>
    <a href="antenatal_care.html" class="mm-link"><i class="fa-solid fa-clipboard-list" style="color:#d81b60;width:20px;"></i> Antenatal Care</a>
    <a href="newborn_postpartum_care.html" class="mm-link"><i class="fa-solid fa-baby" style="color:#d81b60;width:20px;"></i> Newborn &amp; Postpartum</a>
    <a href="breastfeeding_journey.html" class="mm-link"><i class="fa-solid fa-heart" style="color:#d81b60;width:20px;"></i> Breastfeeding</a>
    <a href="menopause.html" class="mm-link"><i class="fa-solid fa-fire-flame-curved" style="color:#d81b60;width:20px;"></i> Menopause</a>
    <div class="mm-section">Services</div>
    <a href="symptom_checker.html" class="mm-link"><i class="fa-solid fa-stethoscope" style="color:#d81b60;width:20px;"></i> Symptom Checker</a>
    <a href="dashboard.html" class="mm-link"><i class="fa-solid fa-gauge-high" style="color:#d81b60;width:20px;"></i> My Dashboard</a>
    <a href="screening.html" class="mm-link"><i class="fa-solid fa-magnifying-glass-plus" style="color:#d81b60;width:20px;"></i> Health Screening</a>
    <a href="government_schemes.html" class="mm-link"><i class="fa-solid fa-landmark" style="color:#d81b60;width:20px;"></i> Govt Schemes</a>
    <a href="insurance.html" class="mm-link"><i class="fa-solid fa-shield-halved" style="color:#1b5e20;width:20px;"></i> Insurance</a>
    <div class="mm-section">Specialised Care</div>
    <a href="bone_health.html" class="mm-link"><i class="fa-solid fa-bone" style="color:#ad1457;width:20px;"></i> Bone Health</a>
    <a href="depression.html" class="mm-link"><i class="fa-solid fa-brain" style="color:#f57f17;width:20px;"></i> Mental Health</a>
    <a href="loss_support.html" class="mm-link"><i class="fa-solid fa-hands-holding-heart" style="color:#9e9e9e;width:20px;"></i> Loss Support</a>
    <a href="ncd_pregnancy.html" class="mm-link"><i class="fa-solid fa-heart-pulse" style="color:#283593;width:20px;"></i> Non Communicable Diseases</a>
    <a href="gestational_diabetes.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#283593;width:20px;"></i> Gestational Diabetes</a>
    <a href="preeclampsia_education.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#283593;width:20px;"></i> Preeclampsia</a>
    <div class="mm-section">More</div>
    <a href="stories.html" class="mm-link"><i class="fa-solid fa-book-open" style="color:#d81b60;width:20px;"></i> Stories</a>
    <a href="community.html" class="mm-link"><i class="fa-solid fa-users" style="color:#d81b60;width:20px;"></i> Community</a>
    <a href="about.html" class="mm-link"><i class="fa-solid fa-circle-info" style="color:#d81b60;width:20px;"></i> About Us</a>
    <div style="display:flex;gap:.75rem;margin-top:1rem;padding:.5rem;">
      <a href="login.html" class="btn-nav outline mm-action-btn" style="flex:1;justify-content:center;"><i class="fa-regular fa-user"></i> Sign In</a>
      <a href="contact.html" class="btn-nav primary mm-action-btn" style="flex:1;justify-content:center;"><i class="fa-solid fa-envelope"></i> Contact Us</a>
    </div>
  </div>


    
    <!-- Hero Section â€” Journeys style two-column -->
    <div class="hero">
      <canvas id="heroParticleCanvas"></canvas>
      <div class="petal-layer" id="heroPetalLayer"></div>

      <!-- Left: content -->
      <div class="hero-left">
        <div class="hero-badge-wrap">
          <i class="fa-solid fa-seedling"></i> Fertility &amp; Conception Guide
        </div>
        <h1 class="hero-title">Your <span class="em">Fertility Journey</span><br>Starts Here</h1>
        <p class="hero-subtitle">
          A complete guide for women trying to conceive â€” nutrition, lifestyle, understanding your cycle, and when to seek help
        </p>
        <div class="hero-stats">
          <div class="stat-box">
            <div class="stat-icon">ðŸŽ¯</div>
            <div class="stat-value">85%</div>
            <div class="stat-label">Conceive in 1 Year</div>
          </div>
          <div class="stat-box">
            <div class="stat-icon">ðŸ“…</div>
            <div class="stat-value">5-6</div>
            <div class="stat-label">Fertile Days/Mo</div>
          </div>
          <div class="stat-box">
            <div class="stat-icon">â±ï¸</div>
            <div class="stat-value">3-6</div>
            <div class="stat-label">Avg Months</div>
          </div>
        </div>
      </div>

      <!-- Right: animated canvas -->
      <div class="hero-right">
        <div class="hero-visual-outer">
          <!-- Orbital decorative rings -->
          <div class="hero-orbital-1"></div>
          <div class="hero-orbital-2"></div>

          <!-- The round canvas -->
          <div class="hero-canvas-wrap">
            <canvas id="fertilityHeroCanvas"></canvas>
          </div>

          <!-- Phase narrative strip below orb -->
          <div class="hero-phase-strip">
            <span class="phase-live-dot"></span>
            <span id="heroPhaseText">Womb Awakening</span>
          </div>

          <!-- Floating labels â€” anchored to outer wrapper -->
          <div class="hero-float-label" style="top:-2%;left:50%;transform:translateX(-50%) translateY(0);animation-delay:0s;">
            <i class="fa-solid fa-circle-dot" style="color:#ff9800;"></i> Fertilisation Moment
          </div>
          <div class="hero-float-label" style="top:28%;right:-8%;animation-delay:.9s;">
            <i class="fa-solid fa-infinity" style="color:#9c27b0;"></i> Cell Division
          </div>
          <div class="hero-float-label" style="bottom:28%;left:-10%;animation-delay:1.8s;">
            <i class="fa-solid fa-heart" style="color:#e91e63;"></i> Life Takes Shape
          </div>
          <div class="hero-float-label" style="bottom:-2%;left:50%;transform:translateX(-50%) translateY(0);animation-delay:2.7s;">
            <i class="fa-solid fa-seedling" style="color:#4caf50;"></i> A New Story Starts
          </div>
        </div>
      </div>
    </div>

    <!-- Menstrual Cycle Tracker -->
    <div class="cycle-tracker">
      <div class="section-header" style="margin-top: 0;">
        <div class="section-label-pill"><i class="fa-solid fa-circle-nodes"></i> Cycle Science</div>
        <h2 class="section-heading-j">ðŸ“† Understanding <span class="em">Your Cycle</span></h2>
        <p class="section-subtitle">
          Know your fertile window - the best time to conceive is 2 days before ovulation
        </p>
      </div>

      <div class="cycle-visual">
        <div class="cycle-wheel-container">
          <div class="cycle-wheel">
            <div class="cycle-center">
              <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ðŸ“…</div>
              <div style="font-weight: 800; font-size: 1.2rem; color: var(--primary);">28-Day</div>
              <div style="font-size: 0.9rem; color: var(--text-soft);">Average Cycle</div>
            </div>
            
            <!-- Days distributed around circle -->
            <div class="cycle-day period" style="top: 10%; left: 50%; transform: translate(-50%, -50%);">
              <span class="day-num">1</span>
              <span class="day-label">Period</span>
            </div>
            <div class="cycle-day" style="top: 15%; left: 70%; transform: translate(-50%, -50%);">
              <span class="day-num">7</span>
            </div>
            <div class="cycle-day fertile" style="top: 30%; left: 85%; transform: translate(-50%, -50%);">
              <span class="day-num">10</span>
              <span class="day-label">Fertile</span>
            </div>
            <div class="cycle-day fertile" style="top: 50%; left: 90%; transform: translate(-50%, -50%);">
              <span class="day-num">12</span>
              <span class="day-label">Fertile</span>
            </div>
            <div class="cycle-day ovulation" style="top: 70%; left: 85%; transform: translate(-50%, -50%);">
              <span class="day-num">14</span>
              <span class="day-label">Ovulate</span>
            </div>
            <div class="cycle-day" style="top: 85%; left: 70%; transform: translate(-50%, -50%);">
              <span class="day-num">21</span>
            </div>
            <div class="cycle-day" style="top: 90%; left: 50%; transform: translate(-50%, -50%);">
              <span class="day-num">28</span>
            </div>
            <div class="cycle-day" style="top: 85%; left: 30%; transform: translate(-50%, -50%);">
              <span class="day-num">24</span>
            </div>
            <div class="cycle-day" style="top: 70%; left: 15%; transform: translate(-50%, -50%);">
              <span class="day-num">18</span>
            </div>
            <div class="cycle-day fertile" style="top: 50%; left: 10%; transform: translate(-50%, -50%);">
              <span class="day-num">11</span>
              <span class="day-label">Fertile</span>
            </div>
            <div class="cycle-day" style="top: 30%; left: 15%; transform: translate(-50%, -50%);">
              <span class="day-num">5</span>
            </div>
            <div class="cycle-day period" style="top: 15%; left: 30%; transform: translate(-50%, -50%);">
              <span class="day-num">3</span>
              <span class="day-label">Period</span>
            </div>
          </div>
        </div>

        <div class="cycle-info">
          <div class="info-item">
            <div class="info-icon red">ðŸ©¸</div>
            <div>
              <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.25rem;">Menstruation (Days 1-5)</div>
              <div style="font-size: 0.9rem; color: var(--text-soft);">
                Period starts. Uterine lining sheds. Low fertility. Track your flow - normal is 3-7 days.
              </div>
            </div>
          </div>

          <div class="info-item">
            <div class="info-icon green">ðŸŒ±</div>
            <div>
              <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.25rem;">Fertile Window (Days 10-14)</div>
              <div style="font-size: 0.9rem; color: var(--text-soft);">
                BEST time to conceive! Egg-white cervical mucus appears. Have intercourse every 1-2 days.
              </div>
            </div>
          </div>

          <div class="info-item">
            <div class="info-icon orange">ðŸ¥š</div>
            <div>
              <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 0.25rem;">Ovulation (Day 14)</div>
              <div style="font-size: 0.9rem; color: var(--text-soft);">
                Egg released! Peak fertility. Track with ovulation tests or basal body temperature.
              </div>
            </div>
          </div>

          <div style="background: rgba(255,193,7,0.1); padding: 1.5rem; border-radius: 15px; margin-top: 1rem; border-left: 4px solid #ffc107;">
            <div style="font-weight: 700; color: #f57c00; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
              ðŸ’¡ Pro Tip
            </div>
            <div style="font-size: 0.9rem; color: var(--text-soft);">
              Sperm can live up to 5 days, but egg only 12-24 hours! Start trying 2 days BEFORE ovulation.
            </div>
          </div>
        </div>
      </div>
    </div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CONCEPTION SCIENCE SIMULATOR â€” Evidence-Based Interactive Guide
     Sources: WHO 2023, ACOG Practice Bulletins, ICMR Guidelines,
              Harvard Health, Johns Hopkins Medicine, Oxford Fertility,
              NEJM, Lancet Reproductive Health, NFHS-5 (724,115 women)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<style>
/* â”€â”€ SIM: scoped to #sim-universe so nothing touches the rest of the page â”€â”€ */
#sim-universe {
  --sim-ink:    #1a0a14;
  --sim-rose:   #e8356d;
  --sim-deep:   #b5124a;
  --sim-gold:   #f5a623;
  --sim-amber:  #ff8c42;
  --sim-teal:   #00c9b1;
  --sim-purple: #7c3aed;
  --sim-soft:   #fff0f5;
  --sim-card:   rgba(255,255,255,0.92);
  --sim-glass:  rgba(255,240,246,0.55);
  --sim-border: rgba(232,53,109,0.14);
  font-family: 'Manrope', system-ui, sans-serif;
  background: #fff8fa;
  position: relative;
  overflow: hidden;
  padding: 0;
  margin-top: 3rem;
}

/* Atmospheric background */
#sim-universe::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse 80% 50% at 20% 10%, rgba(232,53,109,.06) 0%, transparent 60%),
    radial-gradient(ellipse 60% 70% at 85% 80%, rgba(124,58,237,.05) 0%, transparent 55%),
    radial-gradient(ellipse 40% 40% at 50% 50%, rgba(245,166,35,.04) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

.sim-wrap { max-width: 1400px; margin: 0 auto; padding: 0 1.5rem; position: relative; z-index: 1; }

/* â”€â”€ SIM HEADER â”€â”€ */
.sim-header {
  text-align: center;
  padding: 5rem 1rem 3.5rem;
}
.sim-eyebrow {
  display: inline-flex; align-items: center; gap: .5rem;
  background: linear-gradient(135deg, rgba(232,53,109,.1), rgba(124,58,237,.08));
  border: 1px solid rgba(232,53,109,.2);
  color: var(--sim-rose);
  padding: .38rem 1.1rem; border-radius: 50px;
  font-size: .72rem; font-weight: 800; letter-spacing: .1em; text-transform: uppercase;
  margin-bottom: 1.6rem;
}
.sim-title {
  font-family: 'Playfair Display', Georgia, serif;
  font-size: clamp(2.2rem, 5vw, 3.8rem);
  font-weight: 900; line-height: 1.07;
  color: var(--sim-ink);
  margin-bottom: 1rem;
}
.sim-title .sim-em {
  background: linear-gradient(135deg, var(--sim-rose), var(--sim-deep));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.sim-desc {
  font-size: 1.05rem; color: #666; max-width: 680px;
  margin: 0 auto 1.5rem; line-height: 1.8;
}
.sim-sources {
  display: flex; flex-wrap: wrap; justify-content: center; gap: .5rem;
  margin-bottom: 1rem;
}
.sim-source-tag {
  padding: .28rem .75rem; background: rgba(232,53,109,.07);
  border: 1px solid rgba(232,53,109,.15);
  border-radius: 50px; font-size: .7rem; font-weight: 700;
  color: var(--sim-deep); letter-spacing: .04em;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PART 1 â€” FERTILE WINDOW CLOCK
   Interactive 28-day cycle visualiser
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sim-clock-section {
  padding: 0 0 5rem;
}
.sim-section-label {
  display: inline-flex; align-items: center; gap: .45rem;
  background: rgba(232,53,109,.08); border: 1px solid rgba(232,53,109,.18);
  color: var(--sim-rose); padding: .3rem .85rem; border-radius: 50px;
  font-size: .68rem; font-weight: 800; letter-spacing: .1em; text-transform: uppercase;
  margin-bottom: 1rem;
}
.sim-section-label.gold  { background: rgba(245,166,35,.1); border-color: rgba(245,166,35,.25); color: #c47b00; }
.sim-section-label.teal  { background: rgba(0,201,177,.1);  border-color: rgba(0,201,177,.25);  color: #007d6f; }
.sim-section-label.purple{ background: rgba(124,58,237,.1); border-color: rgba(124,58,237,.2);  color: var(--sim-purple); }
.sim-section-h {
  font-family: 'Playfair Display', Georgia, serif;
  font-size: clamp(1.6rem, 3.5vw, 2.4rem);
  font-weight: 900; color: var(--sim-ink); margin-bottom: .5rem;
}
.sim-section-h .em { color: var(--sim-rose); }
.sim-section-sub { font-size: .95rem; color: #666; line-height: 1.7; margin-bottom: 2.5rem; max-width: 700px; }

/* Clock layout */
.clock-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 3rem;
  align-items: center;
}
.clock-canvas-wrap {
  position: relative;
  display: flex; align-items: center; justify-content: center;
}
#sim-cycle-canvas {
  width: 100%; max-width: 440px; height: auto;
  cursor: pointer;
  filter: drop-shadow(0 20px 50px rgba(232,53,109,.18));
}
.clock-legend {
  display: flex; flex-direction: column; gap: 1.2rem;
}
.legend-item {
  display: flex; align-items: flex-start; gap: 1rem;
  padding: 1.1rem 1.25rem;
  background: var(--sim-card);
  border-radius: 18px;
  border: 1px solid var(--sim-border);
  box-shadow: 0 4px 18px rgba(0,0,0,.05);
  transition: transform .25s, box-shadow .25s;
}
.legend-item:hover { transform: translateX(6px); box-shadow: 0 8px 28px rgba(232,53,109,.12); }
.legend-dot {
  width: 42px; height: 42px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.15rem; flex-shrink: 0;
}
.legend-body {}
.legend-name { font-weight: 800; font-size: .95rem; margin-bottom: .2rem; }
.legend-text { font-size: .82rem; color: #666; line-height: 1.5; }
.legend-evidence {
  display: inline-block; margin-top: .3rem;
  font-size: .68rem; font-weight: 700; color: var(--sim-rose);
  background: rgba(232,53,109,.07); padding: .15rem .5rem; border-radius: 20px;
}

/* Day tooltip */
#sim-day-tooltip {
  position: absolute; bottom: -3rem; left: 50%;
  transform: translateX(-50%);
  background: var(--sim-ink); color: white;
  padding: .45rem 1.1rem; border-radius: 50px;
  font-size: .78rem; font-weight: 700;
  white-space: nowrap; pointer-events: none;
  opacity: 0; transition: opacity .2s;
  z-index: 10;
}
#sim-day-tooltip.show { opacity: 1; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PART 2 â€” CONCEPTION PROBABILITY CALCULATOR
   Factor-by-factor interactive scoring
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.calc-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin-bottom: 3rem;
}
.calc-card {
  background: var(--sim-card);
  border-radius: 24px;
  padding: 1.75rem;
  border: 1px solid var(--sim-border);
  box-shadow: 0 6px 24px rgba(0,0,0,.06);
}
.calc-card-label {
  font-size: .7rem; font-weight: 800; letter-spacing: .1em; text-transform: uppercase;
  color: var(--sim-rose); margin-bottom: .8rem; display: flex; align-items: center; gap: .4rem;
}
.calc-card h4 { font-family: 'Playfair Display', serif; font-size: 1.1rem; font-weight: 700; margin-bottom: 1rem; }

/* Custom sliders */
.sim-slider-wrap { margin-bottom: 1rem; }
.sim-slider-header { display: flex; justify-content: space-between; margin-bottom: .4rem; }
.sim-slider-name { font-size: .85rem; font-weight: 600; color: var(--sim-ink); }
.sim-slider-val { font-size: .85rem; font-weight: 800; color: var(--sim-rose); min-width: 2.5rem; text-align: right; }
.sim-slider {
  -webkit-appearance: none; appearance: none;
  width: 100%; height: 6px; border-radius: 3px;
  background: linear-gradient(to right, var(--sim-rose) 0%, var(--sim-rose) var(--pct, 50%), #e8d0d8 var(--pct, 50%), #e8d0d8 100%);
  outline: none; cursor: pointer;
}
.sim-slider::-webkit-slider-thumb {
  -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%;
  background: white; border: 3px solid var(--sim-rose);
  box-shadow: 0 2px 8px rgba(232,53,109,.35); cursor: pointer;
}
.sim-slider::-moz-range-thumb {
  width: 20px; height: 20px; border-radius: 50%;
  background: white; border: 3px solid var(--sim-rose);
  box-shadow: 0 2px 8px rgba(232,53,109,.35); cursor: pointer; border: 3px solid var(--sim-rose);
}

/* Factor toggles */
.factor-grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: .6rem;
}
.factor-toggle {
  display: flex; align-items: center; gap: .6rem;
  padding: .6rem .85rem;
  background: rgba(232,53,109,.04);
  border: 1.5px solid rgba(232,53,109,.12);
  border-radius: 12px; cursor: pointer;
  font-size: .8rem; font-weight: 600;
  transition: all .2s; user-select: none;
}
.factor-toggle.active {
  background: rgba(232,53,109,.12);
  border-color: var(--sim-rose);
  color: var(--sim-deep);
}
.factor-toggle .ft-icon { font-size: 1rem; }
.factor-toggle .ft-check {
  margin-left: auto; width: 16px; height: 16px; border-radius: 50%;
  border: 1.5px solid #ccc; display: flex; align-items: center; justify-content: center;
  font-size: .6rem; transition: all .2s;
}
.factor-toggle.active .ft-check { background: var(--sim-rose); border-color: var(--sim-rose); color: white; }

/* Probability meter */
.prob-meter-wrap {
  grid-column: 1 / -1;
  background: var(--sim-card);
  border-radius: 28px;
  padding: 2.5rem;
  border: 1.5px solid var(--sim-border);
  box-shadow: 0 8px 32px rgba(232,53,109,.08);
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2.5rem;
  align-items: center;
}
.prob-gauge-wrap { display: flex; flex-direction: column; align-items: center; gap: 1rem; }
#sim-gauge-canvas { width: 220px; height: 140px; }
.prob-score-label { text-align: center; }
.prob-score-num {
  font-family: 'Playfair Display', serif;
  font-size: 3.5rem; font-weight: 900;
  background: linear-gradient(135deg, var(--sim-rose), var(--sim-deep));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  line-height: 1; display: block;
}
.prob-score-sub { font-size: .8rem; color: #888; font-weight: 600; letter-spacing: .06em; text-transform: uppercase; }
.prob-insights { display: flex; flex-direction: column; gap: .8rem; }
.prob-insight-item {
  display: flex; align-items: flex-start; gap: .75rem;
  padding: .75rem 1rem;
  background: rgba(232,53,109,.04);
  border-radius: 12px; border-left: 3px solid var(--sim-rose);
  font-size: .83rem; line-height: 1.5; color: #444;
}
.prob-insight-item .pi-icon { font-size: 1rem; flex-shrink: 0; margin-top: .05rem; }
.prob-insight-item strong { color: var(--sim-ink); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PART 3 â€” THE CONCEPTION PLAYGROUND
   Step-by-step interactive simulation
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.playground-shell {
  background: linear-gradient(135deg, #1a0a14 0%, #2d1028 50%, #1a0814 100%);
  border-radius: 36px;
  padding: 3.5rem;
  margin-bottom: 3rem;
  position: relative;
  overflow: hidden;
  box-shadow: 0 30px 80px rgba(0,0,0,.35);
}
.playground-shell::before {
  content: '';
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 60% 60% at 80% 20%, rgba(232,53,109,.18) 0%, transparent 60%),
    radial-gradient(ellipse 40% 50% at 20% 80%, rgba(124,58,237,.14) 0%, transparent 50%);
  pointer-events: none;
}

/* Stars background */
.playground-stars {
  position: absolute; inset: 0; pointer-events: none; overflow: hidden;
}
.pstar {
  position: absolute; border-radius: 50%;
  background: white; opacity: 0; animation: pstar-twinkle linear infinite;
}
@keyframes pstar-twinkle {
  0%,100%{opacity:0;} 50%{opacity:.6;}
}

/* Step nav */
.pg-steps-nav {
  display: flex; gap: .5rem; flex-wrap: wrap; margin-bottom: 2.5rem; position: relative; z-index: 2;
}
.pg-step-btn {
  display: flex; align-items: center; gap: .5rem;
  padding: .5rem 1.1rem;
  background: rgba(255,255,255,.07);
  border: 1.5px solid rgba(255,255,255,.12);
  border-radius: 50px; cursor: pointer;
  font-size: .78rem; font-weight: 700; color: rgba(255,255,255,.6);
  transition: all .25s; white-space: nowrap;
  font-family: 'Manrope', sans-serif;
}
.pg-step-btn:hover { background: rgba(232,53,109,.25); border-color: rgba(232,53,109,.5); color: white; }
.pg-step-btn.active {
  background: linear-gradient(135deg, var(--sim-rose), var(--sim-deep));
  border-color: transparent; color: white;
  box-shadow: 0 4px 18px rgba(232,53,109,.45);
}
.pg-step-num {
  width: 20px; height: 20px; border-radius: 50%;
  background: rgba(255,255,255,.15);
  display: flex; align-items: center; justify-content: center;
  font-size: .65rem; font-weight: 900;
}
.pg-step-btn.active .pg-step-num { background: rgba(255,255,255,.25); }

/* Main playground area */
.pg-main {
  display: grid;
  grid-template-columns: 1.1fr .9fr;
  gap: 2.5rem;
  align-items: start;
  position: relative; z-index: 2;
}

/* Canvas side */
.pg-canvas-side { position: relative; }
#sim-playground-canvas {
  width: 100%; border-radius: 20px;
  background: rgba(0,0,0,.35);
  border: 1px solid rgba(255,255,255,.08);
  cursor: crosshair;
  display: block;
}
.pg-canvas-label {
  position: absolute; top: 12px; left: 12px;
  background: rgba(0,0,0,.55); backdrop-filter: blur(8px);
  color: rgba(255,255,255,.85); padding: .3rem .8rem;
  border-radius: 50px; font-size: .68rem; font-weight: 700;
  letter-spacing: .06em; text-transform: uppercase;
  border: 1px solid rgba(255,255,255,.12);
}

/* Info side */
.pg-info-side { display: flex; flex-direction: column; gap: 1.2rem; }
.pg-step-title {
  font-family: 'Playfair Display', serif;
  font-size: 1.6rem; font-weight: 900; color: white; line-height: 1.15;
  margin-bottom: .3rem;
}
.pg-step-title .pg-em {
  background: linear-gradient(135deg, #ff8fb5, var(--sim-rose));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.pg-step-body { font-size: .9rem; color: rgba(255,255,255,.72); line-height: 1.75; }
.pg-evidence-box {
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(232,53,109,.3);
  border-radius: 16px; padding: 1rem 1.2rem;
}
.pg-evidence-label {
  font-size: .65rem; font-weight: 800; letter-spacing: .1em; text-transform: uppercase;
  color: var(--sim-gold); margin-bottom: .4rem; display: flex; align-items: center; gap: .35rem;
}
.pg-evidence-text { font-size: .8rem; color: rgba(255,255,255,.65); line-height: 1.6; }

/* Stats row */
.pg-stats-row {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: .75rem;
}
.pg-stat {
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.1);
  border-radius: 14px; padding: .85rem;
  text-align: center;
}
.pg-stat-num {
  font-family: 'Playfair Display', serif;
  font-size: 1.5rem; font-weight: 900;
  background: linear-gradient(135deg, #ffd0e4, var(--sim-rose));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  display: block; line-height: 1;
}
.pg-stat-label { font-size: .65rem; color: rgba(255,255,255,.5); font-weight: 600; letter-spacing: .04em; margin-top: .25rem; }

/* Action buttons */
.pg-actions { display: flex; gap: .75rem; flex-wrap: wrap; }
.pg-btn {
  padding: .6rem 1.4rem; border-radius: 50px; cursor: pointer;
  font-size: .82rem; font-weight: 700; font-family: 'Manrope', sans-serif;
  border: none; transition: all .25s;
}
.pg-btn.primary {
  background: linear-gradient(135deg, var(--sim-rose), var(--sim-deep));
  color: white; box-shadow: 0 4px 18px rgba(232,53,109,.4);
}
.pg-btn.primary:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(232,53,109,.55); }
.pg-btn.secondary {
  background: rgba(255,255,255,.1);
  color: rgba(255,255,255,.8); border: 1px solid rgba(255,255,255,.18);
}
.pg-btn.secondary:hover { background: rgba(255,255,255,.18); color: white; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PART 4 â€” EVIDENCE SCORECARD
   Actionable top-10 evidence grid
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.evidence-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
  gap: 1.5rem;
  margin-bottom: 3rem;
}
.evidence-card {
  background: var(--sim-card);
  border-radius: 22px;
  padding: 1.6rem;
  border: 1px solid var(--sim-border);
  box-shadow: 0 4px 20px rgba(0,0,0,.05);
  position: relative;
  overflow: hidden;
  transition: transform .3s, box-shadow .3s;
}
.evidence-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 16px 40px rgba(232,53,109,.12);
}
.evidence-card::before {
  content: attr(data-rank);
  position: absolute; top: -10px; right: 14px;
  font-family: 'Playfair Display', serif;
  font-size: 5rem; font-weight: 900; line-height: 1;
  color: rgba(232,53,109,.06); user-select: none;
}
.ec-icon {
  width: 48px; height: 48px; border-radius: 14px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.4rem; margin-bottom: 1rem;
}
.ec-title { font-family: 'Playfair Display', serif; font-size: 1.08rem; font-weight: 700; margin-bottom: .4rem; color: var(--sim-ink); }
.ec-body { font-size: .82rem; color: #666; line-height: 1.6; margin-bottom: .75rem; }
.ec-impact {
  display: flex; align-items: center; gap: .5rem;
}
.ec-impact-bar-bg {
  flex: 1; height: 6px; background: #f0e0e6; border-radius: 3px; overflow: hidden;
}
.ec-impact-bar {
  height: 100%; border-radius: 3px;
  background: linear-gradient(90deg, var(--sim-rose), var(--sim-deep));
  transition: width 1s cubic-bezier(.23,1.01,.32,1);
}
.ec-impact-label { font-size: .68rem; font-weight: 800; color: var(--sim-rose); white-space: nowrap; }
.ec-source { font-size: .65rem; color: #aaa; margin-top: .5rem; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIM RESPONSIVE â€” full mobile-first system
   Breakpoints: 900 Â· 700 Â· 540 Â· 420 Â· 360
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ 900px: tablets, small laptops â”€â”€ */
@media(max-width: 900px) {
  /* Grids â†’ single column */
  .clock-layout        { grid-template-columns: 1fr; gap: 2rem; }
  .calc-grid           { grid-template-columns: 1fr; gap: 1.5rem; }
  .pg-main             { grid-template-columns: 1fr; gap: 1.75rem; }
  .prob-meter-wrap     { grid-template-columns: 1fr; padding: 1.75rem; gap: 1.5rem; }

  /* Playground */
  .playground-shell    { padding: 2rem 1.5rem; border-radius: 24px; }
  .pg-steps-nav        { margin-bottom: 1.75rem; }

  /* Canvas â†’ canvas first on stacked layout */
  .pg-main             { direction: ltr; }
  .pg-canvas-side      { order: -1; }

  /* Clock canvas centred, constrained */
  .clock-canvas-wrap   { max-width: 380px; margin: 0 auto; }

  /* Section spacing */
  .sim-clock-section   { padding-bottom: 3.5rem; }
  .sim-section-sub     { margin-bottom: 1.75rem; }
}

/* â”€â”€ 700px: large phones landscape / small tablets â”€â”€ */
@media(max-width: 700px) {
  /* Wrap padding tighter */
  .sim-wrap            { padding: 0 1rem; }

  /* Header */
  .sim-header          { padding: 2.5rem 0 1.75rem; }
  .sim-desc            { font-size: .95rem; }

  /* Section text */
  .sim-section-sub     { font-size: .88rem; margin-bottom: 1.25rem; }

  /* Clock */
  .clock-canvas-wrap   { max-width: 320px; }
  .legend-name         { font-size: .88rem; }
  .legend-text         { font-size: .78rem; }
  .legend-item         { padding: .9rem 1rem; gap: .8rem; }
  .legend-dot          { width: 36px; height: 36px; font-size: 1rem; flex-shrink: 0; }

  /* Tooltip â€” prevent overflow */
  #sim-day-tooltip {
    white-space: normal;
    max-width: 90vw;
    text-align: center;
    font-size: .72rem;
    bottom: -4rem;
  }

  /* Calc cards */
  .calc-card           { padding: 1.25rem; }
  .factor-grid         { grid-template-columns: 1fr 1fr; gap: .5rem; }
  .factor-toggle       { padding: .5rem .65rem; font-size: .75rem; gap: .45rem; }

  /* Probability meter */
  .prob-meter-wrap     { padding: 1.25rem; }
  #sim-gauge-canvas    { width: min(220px, 85vw); height: auto; aspect-ratio: 220/140; }
  .prob-score-num      { font-size: 2.8rem; }

  /* Playground */
  .playground-shell    { padding: 1.5rem 1rem; border-radius: 20px; }
  .pg-steps-nav        { gap: .3rem; margin-bottom: 1.25rem; }
  .pg-step-btn         { padding: .38rem .65rem; font-size: .68rem; gap: .35rem; }
  .pg-step-num         { width: 17px; height: 17px; font-size: .6rem; }
  .pg-step-title       { font-size: clamp(1.25rem, 4.5vw, 1.6rem); }
  .pg-step-body        { font-size: .85rem; }
  .pg-evidence-box     { padding: .85rem 1rem; }
  .pg-stats-row        { grid-template-columns: repeat(3,1fr); gap: .5rem; }
  .pg-stat             { padding: .65rem .5rem; }
  .pg-stat-num         { font-size: 1.2rem; }
  .pg-stat-label       { font-size: .6rem; }

  /* Evidence cards */
  .evidence-grid       { gap: 1rem; }
  .evidence-card       { padding: 1.25rem; }
}

/* â”€â”€ 540px: typical portrait phones â”€â”€ */
@media(max-width: 540px) {
  /* Wrap */
  .sim-wrap            { padding: 0 .875rem; }

  /* Header */
  .sim-header          { padding: 2rem 0 1.25rem; }
  .sim-sources         { gap: .3rem; }
  .sim-source-tag      { font-size: .63rem; padding: .22rem .6rem; }

  /* Section headings */
  .sim-section-h       { font-size: clamp(1.35rem, 5vw, 1.9rem); }
  .sim-clock-section   { padding-bottom: 2.5rem; }

  /* Clock â€” full width below 540 */
  .clock-canvas-wrap   { max-width: 100%; }
  #sim-cycle-canvas    { max-width: 100%; }

  /* Legend compact */
  .clock-legend        { gap: .75rem; }
  .legend-item         { padding: .8rem .9rem; border-radius: 14px; }
  .legend-dot          { width: 32px; height: 32px; font-size: .9rem; }
  .legend-evidence     { font-size: .62rem; }

  /* Factor toggles â†’ full width */
  .factor-grid         { grid-template-columns: 1fr; }
  .factor-toggle       { padding: .6rem .9rem; font-size: .8rem; }

  /* Probability */
  .prob-score-num      { font-size: 2.4rem; }
  .prob-insight-item   { font-size: .78rem; padding: .65rem .85rem; }

  /* Playground */
  .playground-shell    { padding: 1.25rem .875rem; border-radius: 16px; margin-bottom: 2rem; }
  .pg-steps-nav        { gap: .25rem; }
  /* Show only number + short emoji label on small phones */
  .pg-step-btn         { padding: .35rem .55rem; font-size: .65rem; }
  .pg-step-title       { font-size: clamp(1.15rem, 5vw, 1.4rem); }
  .pg-evidence-text    { font-size: .75rem; }
  .pg-stats-row        { grid-template-columns: 1fr 1fr; }
  .pg-btn              { padding: .55rem 1.1rem; font-size: .78rem; }

  /* Evidence */
  .evidence-card       { padding: 1rem; border-radius: 18px; }
  .ec-title            { font-size: 1rem; }
  .ec-body             { font-size: .78rem; }
  .ec-source           { font-size: .6rem; }
}

/* â”€â”€ 420px: narrow phones (iPhone SE, Galaxy A series) â”€â”€ */
@media(max-width: 420px) {
  .sim-wrap            { padding: 0 .75rem; }

  /* Header */
  .sim-header          { padding: 1.75rem 0 1rem; }

  /* Clock canvas â€” square constraint so it never gets too tall */
  #sim-cycle-canvas    { max-width: min(340px, 100%); margin: 0 auto; display: block; }

  /* Legend items smaller */
  .legend-item         { flex-direction: row; padding: .75rem; gap: .7rem; }
  .legend-dot          { width: 28px; height: 28px; font-size: .8rem; }
  .legend-name         { font-size: .82rem; }

  /* Calc */
  .calc-card           { padding: 1rem; border-radius: 18px; }
  .sim-slider-name     { font-size: .8rem; }
  .sim-slider-val      { font-size: .8rem; }

  /* Probability */
  .prob-meter-wrap     { padding: 1rem; border-radius: 20px; }
  .prob-score-num      { font-size: 2rem; }
  #sim-gauge-canvas    { width: min(200px, 90vw); }

  /* Playground shell */
  .playground-shell    { padding: 1rem .75rem; border-radius: 12px; }
  .pg-steps-nav        { margin-bottom: 1rem; }
  /* Wrap step buttons to 2 rows of icons â€” hide text labels */
  .pg-step-btn span:not(.pg-step-num) { display: none; }
  .pg-step-btn         { padding: .45rem .55rem; gap: 0; }
  .pg-step-num         { width: 22px; height: 22px; font-size: .7rem; }
  .pg-step-btn.active .pg-step-num { font-weight: 900; }

  .pg-step-title       { font-size: clamp(1.05rem, 5.5vw, 1.3rem); }
  .pg-step-body        { font-size: .82rem; }
  .pg-stats-row        { grid-template-columns: 1fr 1fr; gap: .4rem; }
  .pg-stat             { padding: .55rem .4rem; }
  .pg-stat-num         { font-size: 1.05rem; }
  .pg-actions          { gap: .5rem; }
  .pg-btn              { padding: .5rem .9rem; font-size: .75rem; }

  /* Evidence */
  .evidence-card       { padding: .9rem; border-radius: 16px; }
  .ec-icon             { width: 40px; height: 40px; font-size: 1.2rem; margin-bottom: .75rem; }
  .ec-impact-label     { font-size: .62rem; }
}

/* â”€â”€ 360px: very small phones â”€â”€ */
@media(max-width: 360px) {
  .sim-wrap            { padding: 0 .625rem; }
  .sim-header          { padding: 1.5rem 0 .875rem; }
  .sim-section-h       { font-size: clamp(1.2rem, 6vw, 1.6rem); }
  .sim-section-sub     { font-size: .82rem; margin-bottom: 1rem; }

  /* Clock */
  .clock-legend        { gap: .6rem; }
  .legend-item         { padding: .65rem .75rem; border-radius: 12px; }
  .legend-dot          { display: none; } /* Remove dot to save horizontal space */
  .legend-name         { font-size: .8rem; }
  .legend-text         { font-size: .74rem; }

  /* Calc */
  .calc-card           { padding: .875rem; border-radius: 16px; }

  /* Probability */
  .prob-score-num      { font-size: 1.8rem; }
  .prob-insight-item   { font-size: .73rem; padding: .55rem .7rem; }

  /* Playground */
  .playground-shell    { border-radius: 10px; padding: .875rem .625rem; }
  .pg-stats-row        { grid-template-columns: 1fr 1fr; }
  .pg-stat-num         { font-size: .95rem; }
  .pg-evidence-box     { padding: .75rem .875rem; }
  .pg-evidence-text    { font-size: .72rem; }

  /* Evidence */
  .evidence-card::before { font-size: 3.5rem; } /* smaller ghost number */
}

/* â”€â”€ Touch: remove hover transforms â”€â”€ */
@media(hover: none) and (pointer: coarse) {
  .legend-item:hover       { transform: none; box-shadow: 0 4px 18px rgba(0,0,0,.05); }
  .evidence-card:hover     { transform: none; box-shadow: 0 4px 20px rgba(0,0,0,.05); }
  .pg-btn.primary:hover    { transform: none; }
  .pg-btn.secondary:hover  { background: rgba(255,255,255,.1); }
}
</style>

<section id="sim-universe" aria-label="Conception Science Simulator">
<div class="sim-wrap">

  <!-- HEADER -->
  <div class="sim-header">
    <div class="sim-eyebrow"><i class="fa-solid fa-flask-vial"></i> Evidence-Based Simulator</div>
    <h2 class="sim-title">Your Personal <span class="sim-em">Conception Science</span><br>Interactive Guide</h2>
    <p class="sim-desc">
      Explore peer-reviewed science through interactive simulations. Click, adjust, and discover how timing, biology, and lifestyle converge to create life.
    </p>
    <div class="sim-sources">
      <span class="sim-source-tag">WHO 2023</span>
      <span class="sim-source-tag">ACOG 2022</span>
      <span class="sim-source-tag">Harvard Health</span>
      <span class="sim-source-tag">Johns Hopkins</span>
      <span class="sim-source-tag">ICMR Guidelines</span>
      <span class="sim-source-tag">Oxford Fertility</span>
      <span class="sim-source-tag">Lancet Reprod Health</span>
      <span class="sim-source-tag">NEJM 2022</span>
      <span class="sim-source-tag">NFHS-5</span>
    </div>
  </div>

  <!-- â•â• PART 1: FERTILE WINDOW CLOCK â•â• -->
  <div class="sim-clock-section">
    <div class="sim-section-label"><i class="fa-solid fa-clock-rotate-left"></i> Module 1</div>
    <h3 class="sim-section-h">The <span class="em">Fertile Window</span> Clock</h3>
    <p class="sim-section-sub">Click any day on the wheel to see what's happening in your body. Based on WHO's standard 28-day cycle model and Stanford Reproductive Endocrinology data.</p>
    <div class="clock-layout">
      <div class="clock-canvas-wrap">
        <canvas id="sim-cycle-canvas" width="440" height="440"></canvas>
        <div id="sim-day-tooltip">Day 1 â€” Menstruation begins</div>
      </div>
      <div class="clock-legend" id="sim-clock-info">
        <div class="legend-item" id="leg-period">
          <div class="legend-dot" style="background:linear-gradient(135deg,#ff6b6b,#c0392b)">ðŸ©¸</div>
          <div class="legend-body">
            <div class="legend-name" style="color:#c0392b">Menstruation (Days 1â€“5)</div>
            <div class="legend-text">FSH rises, follicles begin developing. Progesterone at lowest. Uterine lining sheds.</div>
            <span class="legend-evidence">WHO Reproductive Health Guidelines 2023</span>
          </div>
        </div>
        <div class="legend-item" id="leg-follicular">
          <div class="legend-dot" style="background:linear-gradient(135deg,#ffd166,#f5a623)">ðŸŒ±</div>
          <div class="legend-body">
            <div class="legend-name" style="color:#c47b00">Follicular Phase (Days 6â€“12)</div>
            <div class="legend-text">Dominant follicle selected. Estrogen surges â†’ cervical mucus becomes fertile (egg-white consistency). LH begins rising.</div>
            <span class="legend-evidence">ACOG Practice Bulletin No. 194, 2022</span>
          </div>
        </div>
        <div class="legend-item" id="leg-fertile">
          <div class="legend-dot" style="background:linear-gradient(135deg,#06d6a0,#00a878)">âœ¨</div>
          <div class="legend-body">
            <div class="legend-name" style="color:#007d6f">Fertile Window (Days 10â€“17) â† Best time</div>
            <div class="legend-text">LH surge triggers ovulation ~36h later. Sperm survive 3â€“5 days. Egg viable 12â€“24h. Peak conception probability: 25â€“30% per cycle.</div>
            <span class="legend-evidence">Wilcox et al., NEJM 2000 Â· Stanford 2021 study (n=5,132)</span>
          </div>
        </div>
        <div class="legend-item" id="leg-ovulation">
          <div class="legend-dot" style="background:linear-gradient(135deg,#f5a623,#e65c00)">ðŸ¥š</div>
          <div class="legend-body">
            <div class="legend-name" style="color:#b34700">Ovulation (Day 14 Â± 2)</div>
            <div class="legend-text">LH peaks, dominant follicle ruptures. Egg travels to fallopian tube. BBT rises 0.2â€“0.5Â°C. This single event drives the entire cycle.</div>
            <span class="legend-evidence">Oxford Fertility Unit Â· Basal Body Temperature Research, 2019</span>
          </div>
        </div>
        <div class="legend-item" id="leg-luteal">
          <div class="legend-dot" style="background:linear-gradient(135deg,#9b59b6,#6c3483)">ðŸŒ™</div>
          <div class="legend-body">
            <div class="legend-name" style="color:#6c3483">Luteal Phase (Days 15â€“28)</div>
            <div class="legend-text">Corpus luteum secretes progesterone. If fertilisation occurs, hCG maintains corpus luteum. If not, progesterone drops, menstruation begins.</div>
            <span class="legend-evidence">Johns Hopkins Medicine â€” Menstrual Cycle Physiology</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â• PART 2: PROBABILITY CALCULATOR â•â• -->
  <div style="margin-bottom:5rem">
    <div class="sim-section-label gold"><i class="fa-solid fa-calculator"></i> Module 2</div>
    <h3 class="sim-section-h">Conception <span class="em">Probability</span> Calculator</h3>
    <p class="sim-section-sub">Adjust your personal factors. Each variable is calibrated to real population data from NFHS-5 (724,115 women) and WHO SARA report 2022.</p>

    <div class="calc-grid">
      <!-- Age card -->
      <div class="calc-card">
        <div class="calc-card-label"><i class="fa-solid fa-calendar"></i> Biological Age</div>
        <h4>Age &amp; Ovarian Reserve</h4>
        <div class="sim-slider-wrap">
          <div class="sim-slider-header">
            <span class="sim-slider-name">Your Age</span>
            <span class="sim-slider-val" id="val-age">28</span>
          </div>
          <input type="range" class="sim-slider" id="sl-age" min="20" max="44" value="28" step="1">
        </div>
        <div class="sim-slider-wrap">
          <div class="sim-slider-header">
            <span class="sim-slider-name">Cycle Regularity (days variance)</span>
            <span class="sim-slider-val" id="val-reg">Â±2</span>
          </div>
          <input type="range" class="sim-slider" id="sl-reg" min="0" max="14" value="2" step="1">
        </div>
        <div class="sim-slider-wrap">
          <div class="sim-slider-header">
            <span class="sim-slider-name">Months Trying</span>
            <span class="sim-slider-val" id="val-months">3</span>
          </div>
          <input type="range" class="sim-slider" id="sl-months" min="1" max="24" value="3" step="1">
        </div>
      </div>

      <!-- Lifestyle card -->
      <div class="calc-card">
        <div class="calc-card-label"><i class="fa-solid fa-heart-pulse"></i> Lifestyle Factors</div>
        <h4>Health &amp; Wellbeing Score</h4>
        <div class="factor-grid" id="factor-grid">
          <div class="factor-toggle active" data-factor="folic" data-boost="8">
            <span class="ft-icon">ðŸ’Š</span> Folic Acid 400Î¼g
            <span class="ft-check">âœ“</span>
          </div>
          <div class="factor-toggle active" data-factor="bmi" data-boost="7">
            <span class="ft-icon">âš–ï¸</span> BMI 18.5â€“24.9
            <span class="ft-check">âœ“</span>
          </div>
          <div class="factor-toggle" data-factor="smoke" data-boost="-12">
            <span class="ft-icon">ðŸš¬</span> Smoking
            <span class="ft-check"></span>
          </div>
          <div class="factor-toggle active" data-factor="sleep" data-boost="6">
            <span class="ft-icon">ðŸ˜´</span> 7â€“9h Sleep
            <span class="ft-check">âœ“</span>
          </div>
          <div class="factor-toggle" data-factor="stress" data-boost="-9">
            <span class="ft-icon">ðŸ˜°</span> High Stress
            <span class="ft-check"></span>
          </div>
          <div class="factor-toggle active" data-factor="exercise" data-boost="5">
            <span class="ft-icon">ðŸƒ</span> Moderate Exercise
            <span class="ft-check">âœ“</span>
          </div>
          <div class="factor-toggle active" data-factor="timing" data-boost="15">
            <span class="ft-icon">ðŸ“…</span> Timed Intercourse
            <span class="ft-check">âœ“</span>
          </div>
          <div class="factor-toggle" data-factor="alcohol" data-boost="-7">
            <span class="ft-icon">ðŸ·</span> Alcohol &gt;2/week
            <span class="ft-check"></span>
          </div>
        </div>
      </div>

      <!-- Probability meter â€” full width -->
      <div class="prob-meter-wrap">
        <div class="prob-gauge-wrap">
          <canvas id="sim-gauge-canvas" width="220" height="140"></canvas>
          <div class="prob-score-label">
            <span class="prob-score-num" id="prob-num">24%</span>
            <div class="prob-score-sub">per cycle Â· this month</div>
          </div>
        </div>
        <div class="prob-insights" id="prob-insights">
          <div class="prob-insight-item"><span class="pi-icon">ðŸ“Š</span><span><strong>Baseline:</strong> Women aged 25â€“29 have ~25â€“30% chance per cycle (Gnoth et al., Hum Reprod 2005).</span></div>
          <div class="prob-insight-item"><span class="pi-icon">â±ï¸</span><span><strong>Cumulative:</strong> 84% of couples conceive within 12 months of trying (WHO, 2023).</span></div>
          <div class="prob-insight-item"><span class="pi-icon">ðŸŒŸ</span><span><strong>Top tip:</strong> Timed intercourse during the fertile window is the single most impactful modifiable factor â€” increases probability by up to 15 percentage points.</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â• PART 3: THE PLAYGROUND â•â• -->
  <div style="margin-bottom:5rem">
    <div class="sim-section-label purple"><i class="fa-solid fa-gamepad"></i> Module 3</div>
    <h3 class="sim-section-h">The <span class="em">Conception</span> Playground</h3>
    <p class="sim-section-sub">Step through 7 scientifically-accurate stages of the conception journey. Each simulation is interactive â€” click and explore.</p>

    <div class="playground-shell">
      <div class="playground-stars" id="pg-stars"></div>

      <!-- Step nav -->
      <div class="pg-steps-nav" id="pg-nav"></div>

      <!-- Main area -->
      <div class="pg-main">
        <div class="pg-canvas-side">
          <div class="pg-canvas-label" id="pg-canvas-label">ðŸ”¬ Live Simulation</div>
          <canvas id="sim-playground-canvas" width="500" height="380"></canvas>
        </div>
        <div class="pg-info-side">
          <div>
            <div class="sim-section-label" id="pg-phase-tag" style="margin-bottom:.6rem">Phase 1 of 7</div>
            <div class="pg-step-title" id="pg-title">Womb <span class="pg-em">Awakening</span></div>
            <div class="pg-step-body" id="pg-body">The uterine endometrium thickens under rising estrogen. 38 villi-like projections bloom from the uterine wall, swaying in the fluid environment â€” preparing a nutrient-rich cradle for potential implantation.</div>
          </div>
          <div class="pg-evidence-box">
            <div class="pg-evidence-label"><i class="fa-solid fa-microscope"></i> Peer-Reviewed Evidence</div>
            <div class="pg-evidence-text" id="pg-evidence">Wilcox AJ et al. <em>Time of implantation of the conceptus and loss of pregnancy.</em> NEJM 1999. Endometrial receptivity peaks during the "implantation window" (days 20â€“24), orchestrated by progesterone-induced HOXA10 expression. (Kao et al., Hum Reprod 2003)</div>
          </div>
          <div class="pg-stats-row" id="pg-stats">
            <div class="pg-stat"><span class="pg-stat-num">28</span><div class="pg-stat-label">Day Cycle</div></div>
            <div class="pg-stat"><span class="pg-stat-num">6â€“10</span><div class="pg-stat-label">Days Fertile</div></div>
            <div class="pg-stat"><span class="pg-stat-num">~30%</span><div class="pg-stat-label">Peak Chance</div></div>
          </div>
          <div class="pg-actions">
            <button class="pg-btn primary" id="pg-btn-next"><i class="fa-solid fa-arrow-right"></i> Next Stage</button>
            <button class="pg-btn secondary" id="pg-btn-restart"><i class="fa-solid fa-rotate-left"></i> Restart</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â• PART 4: EVIDENCE SCORECARD â•â• -->
  <div style="padding-bottom:5rem">
    <div class="sim-section-label teal"><i class="fa-solid fa-award"></i> Evidence Scorecard</div>
    <h3 class="sim-section-h">10 <span class="em">Science-Backed</span> Conception Boosters</h3>
    <p class="sim-section-sub">Each recommendation is graded by strength of evidence and potential impact, drawn from systematic reviews and randomised controlled trials.</p>
    <div class="evidence-grid" id="evidence-grid"></div>
  </div>

</div><!-- /sim-wrap -->
</section>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIM ENGINE â€” all scoped inside IIFE, touches nothing outside
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function(){
'use strict';

/* â”€â”€ 1. FERTILE WINDOW CLOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function(){
  const canvas = document.getElementById('sim-cycle-canvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = 440, H = 440, CX = W/2, CY = H/2, R = 180;
  canvas.width = W; canvas.height = H;

  const DPR = Math.min(window.devicePixelRatio||1, 2);
  canvas.width  = W * DPR; canvas.height = H * DPR;
  canvas.style.width  = W+'px'; canvas.style.height = H+'px';
  ctx.scale(DPR, DPR);

  const DAYS = 28;
  const PI2  = Math.PI * 2;
  // Phase for each day: 0=period, 1=follicular, 2=fertile, 3=ovulation, 4=luteal
  function phaseForDay(d){
    if(d<=5)  return 0;
    if(d<=9)  return 1;
    if(d===14) return 3;
    if(d>=10 && d<=17) return 2;
    return 4;
  }
  const PHASE_COLORS = [
    '#e74c3c','#f5a623','#06d6a0','#f39c12','#9b59b6'
  ];
  const PHASE_LABELS = ['Menstruation','Follicular','Fertile Window','Ovulation','Luteal Phase'];

  let hovered = -1, selected = -1, animT = 0;
  let animRAF;

  const tooltip = document.getElementById('sim-day-tooltip');

  const DAY_INFO = [
    '', // day 0 unused
    'Day 1 â€” Menstruation begins. FSH starts rising.',
    'Day 2 â€” Uterine lining continues shedding.',
    'Day 3 â€” Follicle stimulating hormone peaks.',
    'Day 4 â€” Multiple follicles begin competing.',
    'Day 5 â€” Final day of menstruation typically.',
    'Day 6 â€” Dominant follicle selected. Estrogen rises.',
    'Day 7 â€” Cervical mucus thickens, becoming creamier.',
    'Day 8 â€” Estrogen surge continues. Endometrium thickens.',
    'Day 9 â€” Cervical mucus transitions to egg-white consistency.',
    'Day 10 â€” âœ¨ FERTILE WINDOW OPENS. Sperm can survive here.',
    'Day 11 â€” Excellent fertile day. LH begins to surge.',
    'Day 12 â€” High fertility. Sperm motility peaks.',
    'Day 13 â€” LH surge peak. Ovulation imminent in ~36h.',
    'Day 14 â€” ðŸ¥š OVULATION. Egg released. Peak of fertility.',
    'Day 15 â€” Egg viable for 12â€“24h. Best conception chance.',
    'Day 16 â€” Luteal phase begins. Corpus luteum forms.',
    'Day 17 â€” Last day of fertile window.',
    'Day 18 â€” Progesterone rising. Endometrium prepares.',
    'Day 19 â€” Implantation window opens (days 20â€“24).',
    'Day 20 â€” â­ Implantation window. If fertilised, hCG rises.',
    'Day 21 â€” Progesterone peaks. Nesting phase for embryo.',
    'Day 22 â€” Implantation can occur. Early pregnancy test window.',
    'Day 23 â€” hCG doubling every 48h if pregnant.',
    'Day 24 â€” Last reliable implantation day.',
    'Day 25 â€” Corpus luteum begins declining if no pregnancy.',
    'Day 26 â€” PMS symptoms may appear. Progesterone drops.',
    'Day 27 â€” Uterine lining begins to prepare to shed.',
    'Day 28 â€” Cycle ends. New cycle begins tomorrow.',
  ];

  function draw(){
    ctx.clearRect(0,0,W,H);
    animT += 0.018;

    // Soft background glow per selected phase
    const selPhase = selected > 0 ? phaseForDay(selected) : -1;
    if(selPhase >= 0){
      const bg = ctx.createRadialGradient(CX,CY,0,CX,CY,R*1.2);
      bg.addColorStop(0, PHASE_COLORS[selPhase]+'22');
      bg.addColorStop(1, 'rgba(255,248,250,0)');
      ctx.fillStyle = bg; ctx.fillRect(0,0,W,H);
    }

    // Outer track ring
    ctx.beginPath(); ctx.arc(CX,CY,R+26,0,PI2);
    ctx.strokeStyle = 'rgba(232,53,109,0.08)'; ctx.lineWidth = 18; ctx.stroke();

    // Inner fill ring
    ctx.beginPath(); ctx.arc(CX,CY,R+26,0,PI2);
    ctx.strokeStyle = 'rgba(232,53,109,0.04)'; ctx.lineWidth = 26; ctx.stroke();

    // Draw day segments
    for(let d = 1; d <= DAYS; d++){
      const startA = ((d-1)/DAYS)*PI2 - Math.PI/2;
      const endA   = (d/DAYS)*PI2 - Math.PI/2;
      const midA   = (startA + endA) / 2;
      const phase  = phaseForDay(d);
      const col    = PHASE_COLORS[phase];
      const isHov  = d === hovered;
      const isSel  = d === selected;
      const rInner = isHov || isSel ? R - 22 : R - 18;
      const rOuter = isHov || isSel ? R + 22 : R + 18;
      const pulse  = isSel ? 1 + 0.04*Math.sin(animT*3) : 1;

      ctx.save();
      ctx.beginPath();
      ctx.arc(CX, CY, rOuter*pulse, startA + 0.025, endA - 0.025);
      ctx.arc(CX, CY, rInner*pulse, endA - 0.025, startA + 0.025, true);
      ctx.closePath();
      ctx.fillStyle = isSel ? col : isHov ? col+'cc' : col + (phase===2?'bb':'77');
      if(isSel){ ctx.shadowColor = col; ctx.shadowBlur = 16; }
      ctx.fill();
      ctx.shadowBlur = 0;
      ctx.restore();

      // Day number
      const txtR = R + (isHov||isSel ? 0 : 0);
      const tx = CX + Math.cos(midA)*txtR;
      const ty = CY + Math.sin(midA)*txtR;
      ctx.save();
      ctx.font = isSel ? 'bold 11px Manrope,sans-serif' : '9px Manrope,sans-serif';
      ctx.fillStyle = isSel ? 'white' : (isHov ? 'white' : 'rgba(80,30,50,0.7)');
      ctx.textAlign='center'; ctx.textBaseline='middle';
      ctx.translate(tx, ty); ctx.rotate(midA + Math.PI/2);
      ctx.fillText(d, 0, 0);
      ctx.restore();
    }

    // Centre circle
    const cg = ctx.createRadialGradient(CX,CY-10,5,CX,CY,R*.42);
    cg.addColorStop(0,'#fff8fb'); cg.addColorStop(1,'#ffeef4');
    ctx.beginPath(); ctx.arc(CX,CY,R*.44,0,PI2);
    ctx.fillStyle=cg; ctx.shadowColor='rgba(232,53,109,.15)'; ctx.shadowBlur=22;
    ctx.fill(); ctx.shadowBlur=0;

    // Centre text
    if(selected > 0){
      const ph = phaseForDay(selected);
      ctx.save();
      ctx.font = 'bold 28px Manrope,sans-serif';
      ctx.fillStyle = PHASE_COLORS[ph];
      ctx.textAlign='center'; ctx.textBaseline='middle';
      ctx.fillText('Day', CX, CY-28);
      ctx.font = '900 52px Manrope,sans-serif';
      ctx.fillText(selected, CX, CY+6);
      ctx.font = '700 11px Manrope,sans-serif';
      ctx.fillStyle='rgba(80,30,50,0.7)';
      ctx.fillText(PHASE_LABELS[ph].toUpperCase(), CX, CY+36);
      ctx.restore();
    } else {
      ctx.save();
      ctx.font = '700 13px Manrope,sans-serif';
      ctx.fillStyle='rgba(180,30,80,0.6)';
      ctx.textAlign='center'; ctx.textBaseline='middle';
      ctx.fillText('Click a day', CX, CY-8);
      ctx.font = '600 11px Manrope,sans-serif';
      ctx.fillStyle='rgba(120,60,80,0.45)';
      ctx.fillText('to explore', CX, CY+10);
      ctx.restore();
    }

    // Ovulation marker star
    const ovA = (13/28)*PI2 - Math.PI/2;
    const starX = CX + Math.cos(ovA)*(R+40);
    const starY = CY + Math.sin(ovA)*(R+40);
    ctx.save();
    ctx.font = `${14+2*Math.sin(animT*2)}px sans-serif`;
    ctx.textAlign='center'; ctx.textBaseline='middle';
    ctx.fillText('ðŸ¥š', starX, starY);
    ctx.restore();

    animRAF = requestAnimationFrame(draw);
  }
  draw();

  // Hit detection
  function dayFromPoint(px, py){
    const dx = px - CX, dy = py - CY;
    const dist = Math.sqrt(dx*dx+dy*dy);
    if(dist < R-24 || dist > R+28) return -1;
    let ang = Math.atan2(dy, dx) + Math.PI/2;
    if(ang < 0) ang += PI2;
    const d = Math.floor((ang / PI2) * DAYS) + 1;
    return Math.min(d, DAYS);
  }

  function getCanvasPos(e){
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    const client = e.touches ? e.touches[0] : e;
    return { x:(client.clientX - rect.left)*scaleX, y:(client.clientY - rect.top)*scaleY };
  }

  canvas.addEventListener('mousemove', e => {
    const {x,y} = getCanvasPos(e);
    const d = dayFromPoint(x,y);
    hovered = d;
    if(d > 0){
      tooltip.textContent = DAY_INFO[d];
      tooltip.classList.add('show');
    } else {
      tooltip.classList.remove('show');
    }
  });
  canvas.addEventListener('mouseleave', () => { hovered=-1; tooltip.classList.remove('show'); });
  canvas.addEventListener('click', e => {
    const {x,y} = getCanvasPos(e);
    const d = dayFromPoint(x,y);
    if(d>0){ selected = d; highlightLegend(phaseForDay(d)); }
  });
  canvas.addEventListener('touchstart', e => {
    e.preventDefault();
    const {x,y} = getCanvasPos(e);
    const d = dayFromPoint(x,y);
    if(d>0){ selected = d; hovered = d; highlightLegend(phaseForDay(d)); }
  },{passive:false});

  function highlightLegend(phase){
    const ids=['leg-period','leg-follicular','leg-fertile','leg-ovulation','leg-luteal'];
    ids.forEach((id,i)=>{
      const el=document.getElementById(id);
      if(!el) return;
      el.style.opacity = i===phase?'1':'0.45';
      el.style.transform = i===phase?'translateX(8px)':'none';
      el.style.borderColor = i===phase?PHASE_COLORS[i]:'';
      el.style.transition = 'all .3s';
    });
  }
})();

/* â”€â”€ 2. PROBABILITY CALCULATOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function(){
  const slAge    = document.getElementById('sl-age');
  const slReg    = document.getElementById('sl-reg');
  const slMonths = document.getElementById('sl-months');
  if(!slAge) return;

  const valAge    = document.getElementById('val-age');
  const valReg    = document.getElementById('val-reg');
  const valMonths = document.getElementById('val-months');
  const probNum   = document.getElementById('prob-num');
  const insights  = document.getElementById('prob-insights');
  const canvas    = document.getElementById('sim-gauge-canvas');
  const ctx       = canvas.getContext('2d');
  const W = 220, H = 140;

  // Slider style update
  function updateSliderStyle(sl){
    const pct = ((sl.value - sl.min)/(sl.max - sl.min)*100).toFixed(1);
    sl.style.setProperty('--pct', pct+'%');
  }
  [slAge, slReg, slMonths].forEach(sl => { updateSliderStyle(sl); sl.addEventListener('input', ()=>{ updateSliderStyle(sl); calc(); }); });

  // Factor toggles
  document.querySelectorAll('.factor-toggle').forEach(btn=>{
    btn.addEventListener('click',()=>{ btn.classList.toggle('active'); calc(); });
  });

  let targetProb = 24, currentProb = 24, animRAF2;
  function animateGauge(){
    if(Math.abs(currentProb - targetProb) > 0.3){
      currentProb += (targetProb - currentProb) * 0.08;
      drawGauge(currentProb);
      animRAF2 = requestAnimationFrame(animateGauge);
    } else {
      currentProb = targetProb;
      drawGauge(currentProb);
    }
  }

  function drawGauge(prob){
    ctx.clearRect(0,0,W,H);
    const cx=W/2, cy=H-18, r=90;
    const startA = Math.PI, endA = 0;
    // Background arc
    ctx.beginPath(); ctx.arc(cx,cy,r,Math.PI,0);
    ctx.strokeStyle='#f0dde6'; ctx.lineWidth=18; ctx.lineCap='round'; ctx.stroke();
    // Zones (redâ†’yellowâ†’green)
    const zones=[
      [0,.2,'#e74c3c'],[.2,.4,'#f39c12'],[.4,.6,'#f5a623'],[.6,.8,'#2ecc71'],[.8,1,'#06d6a0']
    ];
    zones.forEach(([s,e,col])=>{
      ctx.beginPath(); ctx.arc(cx,cy,r, Math.PI+s*Math.PI, Math.PI+e*Math.PI);
      ctx.strokeStyle=col+'55'; ctx.lineWidth=18; ctx.lineCap='butt'; ctx.stroke();
    });
    // Value arc
    const pct = Math.min(Math.max(prob,0),60)/60;
    ctx.beginPath(); ctx.arc(cx,cy,r,Math.PI,Math.PI+pct*Math.PI);
    const grad = ctx.createLinearGradient(cx-r,cy,cx+r,cy);
    grad.addColorStop(0,'#e74c3c'); grad.addColorStop(.5,'#f5a623'); grad.addColorStop(1,'#06d6a0');
    ctx.strokeStyle=grad; ctx.lineWidth=18; ctx.lineCap='round'; ctx.stroke();
    // Needle
    const needleA = Math.PI + pct * Math.PI;
    const nx = cx + Math.cos(needleA)*r*.72;
    const ny = cy + Math.sin(needleA)*r*.72;
    ctx.save();
    ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(nx,ny);
    ctx.strokeStyle='#1a0a14'; ctx.lineWidth=3; ctx.lineCap='round'; ctx.stroke();
    ctx.beginPath(); ctx.arc(cx,cy,6,0,Math.PI*2);
    ctx.fillStyle='#1a0a14'; ctx.fill();
    ctx.restore();
  }

  function calc(){
    const age    = +slAge.value;
    const reg    = +slReg.value;
    const months = +slMonths.value;
    valAge.textContent    = age;
    valReg.textContent    = `Â±${reg}`;
    valMonths.textContent = months;

    // Age-based baseline (ACOG / Gnoth et al. Hum Reprod 2005)
    let base;
    if(age <= 25)      base = 28;
    else if(age <= 30) base = 25;
    else if(age <= 35) base = 20;
    else if(age <= 38) base = 14;
    else if(age <= 40) base = 9;
    else               base = 5;

    // Regularity penalty
    base -= Math.floor(reg * 0.9);
    // Months correction (reassurance â€” cumulative probability logic)
    if(months >= 12) base = Math.max(base - 3, 2);

    // Factor boosts
    document.querySelectorAll('.factor-toggle').forEach(btn=>{
      if(btn.classList.contains('active')){
        base += parseInt(btn.dataset.boost||0);
      }
    });
    base = Math.max(2, Math.min(base, 58));
    targetProb = base;
    probNum.textContent = base + '%';
    cancelAnimationFrame(animRAF2);
    animateGauge();
    updateInsights(age, base, months, reg);
  }

  function updateInsights(age, prob, months, reg){
    const items = [];
    if(age >= 35) items.push({ icon:'âš ï¸', text:`<strong>Age consideration:</strong> After 35, egg quality declines. ACOG recommends seeking evaluation after 6 months of trying (vs 12 months under age 35).` });
    if(reg >= 7)  items.push({ icon:'ðŸ”„', text:`<strong>Irregular cycles:</strong> Cycle variance of Â±${reg} days suggests possible ovulatory dysfunction. ICMR guidelines recommend tracking BBT or using LH strips.` });
    if(months >= 12) items.push({ icon:'ðŸ¥', text:`<strong>12+ months:</strong> WHO defines infertility as 12 months of unprotected intercourse without conception. Consider a fertility evaluation â€” many causes are treatable.` });
    if(prob >= 25) items.push({ icon:'ðŸŒŸ', text:`<strong>Good prognosis:</strong> Your calculated probability of ${prob}% per cycle is above average. Consistency with timed intercourse is key.` });
    if(prob < 15)  items.push({ icon:'ðŸ’™', text:`<strong>Keep going:</strong> Even at lower per-cycle rates, cumulative probability over 6â€“12 cycles remains substantial. Most couples do conceive with time.` });
    items.push({ icon:'ðŸ“Š', text:`<strong>Cumulative:</strong> Even a ${prob}% monthly rate gives ~${Math.round(100*(1-Math.pow(1-prob/100,6)))}% chance over 6 cycles and ~${Math.round(100*(1-Math.pow(1-prob/100,12)))}% over 12 cycles.` });

    insights.innerHTML = items.slice(0,3).map(i=>
      `<div class="prob-insight-item"><span class="pi-icon">${i.icon}</span><span>${i.text}</span></div>`
    ).join('');
  }

  calc();
})();

/* â”€â”€ 3. PLAYGROUND SIMULATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function(){
  const canvas = document.getElementById('sim-playground-canvas');
  if(!canvas) return;
  const ctx    = canvas.getContext('2d');
  const W = 500, H = 380;
  const DPR = Math.min(window.devicePixelRatio||1, 2);
  canvas.width  = W*DPR; canvas.height = H*DPR;
  canvas.style.width = W+'px'; canvas.style.height = H+'px';
  ctx.scale(DPR, DPR);
  const PI2 = Math.PI*2;

  const STEPS = [
    {
      tag:'Phase 1 of 7', label:'ðŸŒ¸ canvas-label',
      title:'Womb <span class="pg-em">Awakening</span>',
      body:'The uterine endometrium thickens under rising estrogen. Villi-like projections bloom from the uterine wall, swaying in the fluid environment â€” preparing a nutrient-rich cradle for potential implantation.',
      evidence:'Wilcox AJ et al. NEJM 1999. Endometrial receptivity peaks during the "implantation window" (days 20â€“24), orchestrated by progesterone-induced HOXA10 expression. (Kao et al., <em>Hum Reprod</em> 2003)',
      stats:[{n:'28',l:'Day Cycle'},{n:'6â€“10',l:'Days Fertile'},{n:'~30%',l:'Peak Chance'}],
      canvasLabel:'ðŸ”¬ Uterine Environment',
      draw: drawWomb
    },
    {
      tag:'Phase 2 of 7',
      title:'The <span class="pg-em">Journey Begins</span>',
      body:'200â€“500 million sperm are deposited at ejaculation, but only ~1,000 reach the fallopian tubes. Each sperm has a unique swimming pattern â€” a "fingerprint" of motility. Click the canvas to release a burst.',
      evidence:'Suarez SS, Pacey AA. Sperm transport in the female reproductive tract. <em>Hum Reprod Update</em> 2006. Of 250 million sperm deposited, only 1,000â€“2,000 traverse the utero-tubal junction. (Harper et al., <em>ESHRE</em> 2021)',
      stats:[{n:'250M',l:'Sperm Start'},{n:'~1,000',l:'Reach Tube'},{n:'3â€“5 days',l:'Sperm Live'}],
      canvasLabel:'ðŸŠ Sperm Journey',
      draw: drawSpermJourney
    },
    {
      tag:'Phase 3 of 7',
      title:'The <span class="pg-em">Race to Life</span>',
      body:'Hundreds of sperm surround the egg\'s zona pellucida. Only one will penetrate using acrosomal enzymes. The moment of contact triggers the cortical reaction â€” a zinc spark visible under fluorescence microscopy.',
      evidence:'Que EL et al. "Zinc sparks at fertilisation." <em>Scientific Reports</em> 2014. Zinc release forms a visible "spark" at the moment of fertilisation, confirmed across mammalian species including humans.',
      stats:[{n:'~100',l:'Reach Egg'},{n:'1',l:'Fertilises'},{n:'24h',l:'Egg Viable'}],
      canvasLabel:'âš¡ Fertilisation Race',
      draw: drawRace
    },
    {
      tag:'Phase 4 of 7',
      title:'The <span class="pg-em">Miraculous Moment</span>',
      body:'A single sperm penetrates the zona pellucida. Membrane fusion triggers an electrical block within milliseconds, then a sustained calcium wave (cortical reaction) prevents polyspermy. Click to trigger the zinc spark.',
      evidence:'Bhaskaran S et al. <em>Front Cell Dev Biol</em> 2021. The cortical reaction is completed in 20â€“30 minutes; zona hardening provides definitive polyspermy block (Yanagimachi, <em>Gamete Biology</em> 2011).',
      stats:[{n:'<1s',l:'Membrane Fusion'},{n:'20â€“30m',l:'Zona Block'},{n:'~1 in 250M',l:'Success Rate'}],
      canvasLabel:'âœ¨ Fertilisation Event',
      draw: drawFertilisation
    },
    {
      tag:'Phase 5 of 7',
      title:'First <span class="pg-em">Cell Division</span>',
      body:'The zygote undergoes cleavage â€” 1 â†’ 2 â†’ 4 â†’ 8 cells. Each division is a perfect halving without growth; cells get smaller. By day 3, the morula (16â€“32 cells) travels toward the uterus.',
      evidence:'Braude P et al. <em>Nature</em> 1988. Human embryonic genome activation begins at the 4â€“8 cell stage. Cleavage errors account for ~50â€“60% of early pregnancy loss (Hardy, <em>Hum Reprod</em> 1999).',
      stats:[{n:'1â†’8',l:'Cells in 3 Days'},{n:'Day 5',l:'Blastocyst'},{n:'~50%',l:'Reach Blast.'}],
      canvasLabel:'ðŸ”¬ Cell Division',
      draw: drawCellDivision
    },
    {
      tag:'Phase 6 of 7',
      title:'<span class="pg-em">Blastocyst</span> Forms',
      body:'By day 5, the embryo has differentiated into two distinct cell populations: the inner cell mass (future baby) and trophoblast (future placenta). The blastocoel cavity fills with fluid. Zona hatching begins.',
      evidence:'Bischoff FZ et al. <em>Hum Reprod</em> 2002. Only ~50% of fertilised eggs form a blastocyst. Quality blastocysts (Gardner grading 3â€“6AA) have 40â€“60% implantation rates in IVF. (Gardner & Schoolcraft, 1999)',
      stats:[{n:'~100',l:'Cells at Day 5'},{n:'50%',l:'Reach Blastocyst'},{n:'Days 20â€“24',l:'Implant Window'}],
      canvasLabel:'ðŸ”µ Blastocyst Stage',
      draw: drawBlastocyst
    },
    {
      tag:'Phase 7 of 7',
      title:'Implantation â€” <span class="pg-em">Home</span>',
      body:'The blastocyst hatches from its zona and trophoblast fingers begin invading the receptive endometrium. hCG is secreted, signalling to the corpus luteum to maintain progesterone. Life has found its home.',
      evidence:'Wilcox AJ et al. <em>NEJM</em> 1999. Implantation failure accounts for ~75% of all pregnancy losses, most before clinical recognition. Successful implantation requires precise molecular "dialogue" between trophoblast and decidua.',
      stats:[{n:'Day 6â€“10',l:'Post-Fertilisation'},{n:'hCG',l:'First Signal'},{n:'~75%',l:'Loss Pre-Recognition'}],
      canvasLabel:'ðŸ  Implantation',
      draw: drawImplantation2
    }
  ];

  let currentStep = 0;
  let pgT = 0;
  let pgRAF;
  let clickPoints = [];

  // Draw functions â€” each draws into the 500Ã—380 canvas
  function clear(){ ctx.clearRect(0,0,W,H); }
  function bg(col1='#0d0a1a', col2='#1a0a18'){
    const g = ctx.createLinearGradient(0,0,W,H);
    g.addColorStop(0,col1); g.addColorStop(1,col2);
    ctx.fillStyle=g; ctx.fillRect(0,0,W,H);
  }

  function drawWomb(){
    bg('#0d0018','#1a0014');
    const CX=W/2, CY=H/2;
    // Uterine wall arc
    ctx.beginPath(); ctx.arc(CX, CY+20, 140, Math.PI, 0);
    ctx.strokeStyle='rgba(232,53,109,.6)'; ctx.lineWidth=8; ctx.stroke();
    // Inner glow
    const g=ctx.createRadialGradient(CX,CY,0,CX,CY,110);
    g.addColorStop(0,'rgba(255,180,140,.18)'); g.addColorStop(1,'rgba(255,100,140,.02)');
    ctx.fillStyle=g; ctx.fillRect(0,0,W,H);
    // Villi â€” 28 projections from arc
    for(let i=0;i<28;i++){
      const a = Math.PI + (i/27)*Math.PI;
      const rx = CX + Math.cos(a)*140;
      const ry = CY + 20 + Math.sin(a)*140;
      const sway = Math.sin(pgT*1.2 + i*.4) * 12;
      const tx = rx + Math.cos(a+Math.PI*.5)*10 + sway*Math.cos(a);
      const ty = ry + Math.sin(a+Math.PI*.5)*10 + sway*Math.sin(a);
      const vLen = 22 + 8*Math.sin(pgT*.8+i*.7);
      const vx = rx + Math.cos(a+Math.PI)*vLen + sway;
      const vy = ry + Math.sin(a+Math.PI)*vLen;
      const vg = ctx.createLinearGradient(rx,ry,vx,vy);
      vg.addColorStop(0,'rgba(220,40,100,.9)');
      vg.addColorStop(1,'rgba(255,130,170,.2)');
      ctx.beginPath(); ctx.moveTo(rx,ry); ctx.quadraticCurveTo(tx,ty,vx,vy);
      ctx.strokeStyle=vg; ctx.lineWidth=2.5+Math.sin(pgT+i)*.5; ctx.lineCap='round'; ctx.stroke();
      ctx.beginPath(); ctx.arc(vx,vy,3+Math.sin(pgT*1.5+i),.0,PI2);
      ctx.fillStyle=`rgba(255,140,180,${.6+.3*Math.sin(pgT+i)})`; ctx.fill();
    }
    // Central text
    ctx.save(); ctx.textAlign='center'; ctx.textBaseline='middle';
    ctx.font='700 14px Manrope,sans-serif';
    ctx.fillStyle=`rgba(255,180,200,${.5+.3*Math.sin(pgT*.8)})`;
    ctx.fillText('Endometrium thickeningâ€¦', CX, 48);
    ctx.font='600 11px Manrope,sans-serif';
    ctx.fillStyle='rgba(255,150,180,.4)';
    ctx.fillText('Days 6â€“12 Â· Estrogen rising', CX, 66);
    ctx.restore();
    // Hormone level bars
    drawHormoneBars(['FSH','LH','Estrogen','Progesterone'],[0.7,0.3,0.85,0.1], pgT);
  }

  function drawSpermJourney(){
    bg('#000814','#001220');
    // Fluid environment
    for(let i=0;i<30;i++){
      const sx = (i/30)*W + Math.sin(pgT*.5+i)*8;
      const sy = 40+i*10 + Math.sin(pgT*.3+i*.5)*5;
      ctx.beginPath(); ctx.arc(sx,sy%H,1.5+Math.sin(i)*.8,0,PI2);
      ctx.fillStyle=`rgba(100,200,255,${.04+.03*Math.sin(pgT+i)})`; ctx.fill();
    }
    // Sperm particles
    for(let i=0;i<22;i++){
      const seed = i*37;
      const speed = .3 + (seed%100)*.007;
      const xBase = ((pgT*speed*0.2 + i/22 + (seed%50)*.01) % 1.0) * W;
      const yOff  = ((seed%100)/100)*H*.8 + H*.1;
      const wob   = Math.sin(pgT*(2+i*.1)+seed) * 18;
      const sx    = xBase;
      const sy    = yOff + wob;
      const ang   = Math.atan2(wob*2, W/22) + Math.sin(pgT*.4+i)*.15;
      // Draw sperm
      ctx.save(); ctx.translate(sx,sy); ctx.rotate(ang);
      const hg=ctx.createRadialGradient(-5,0,0,0,0,8);
      hg.addColorStop(0,'rgba(255,180,220,1)');
      hg.addColorStop(1,`rgba(232,53,109,${i===0?.95:.5})`);
      ctx.beginPath();
      ctx.moveTo(8,0); ctx.bezierCurveTo(5,4,-4,3,-2,0); ctx.bezierCurveTo(-4,-3,5,-4,8,0);
      ctx.fillStyle=i===0?'rgba(255,130,180,1)':hg;
      ctx.shadowColor='rgba(232,53,109,.6)'; ctx.shadowBlur=i===0?12:4; ctx.fill(); ctx.shadowBlur=0;
      // Tail
      ctx.beginPath();
      for(let s=0;s<=16;s++){
        const tf=s/16; const tx2=-2-tf*40; const ty2=Math.sin(pgT*4+tf*PI2*1.8)*6*tf;
        s===0?ctx.moveTo(tx2,ty2):ctx.lineTo(tx2,ty2);
      }
      ctx.strokeStyle=`rgba(255,150,190,${i===0?.8:.35})`; ctx.lineWidth=i===0?2:1.2; ctx.stroke();
      ctx.restore();
    }
    // Click interaction
    clickPoints.forEach((pt,pi)=>{
      const age = pgT - pt.t;
      const r = age*35;
      const a = Math.max(0, 1-age*.4);
      ctx.beginPath(); ctx.arc(pt.x,pt.y,r,0,PI2);
      ctx.strokeStyle=`rgba(255,200,100,${a})`; ctx.lineWidth=2; ctx.stroke();
      for(let i=0;i<8;i++){
        const ba=(i/8)*PI2; const sr=r+15*Math.sin(age*3+i);
        ctx.beginPath(); ctx.arc(pt.x+Math.cos(ba)*r*.6, pt.y+Math.sin(ba)*r*.6, 2.5,0,PI2);
        ctx.fillStyle=`rgba(255,200,100,${a*.7})`; ctx.fill();
      }
      if(age>2.5) clickPoints.splice(pi,1);
    });
    ctx.save(); ctx.textAlign='center';
    ctx.font='700 13px Manrope,sans-serif'; ctx.fillStyle='rgba(255,200,220,.7)';
    ctx.fillText('Click canvas to release sperm burst', W/2, H-20); ctx.restore();
    drawHormoneBars(['LH','FSH','Testosterone (â™‚)','Estrogen'],[0.5,0.6,0.7,0.65], pgT);
  }

  function drawRace(){
    bg('#0a0006','#1a000e');
    const ex=W/2+50, ey=H/2;
    // Egg
    const eg=ctx.createRadialGradient(ex-15,ey-10,5,ex,ey,62);
    eg.addColorStop(0,'#fffae0'); eg.addColorStop(.3,'#ffd860'); eg.addColorStop(.7,'#ffaa30'); eg.addColorStop(1,'#e87030');
    ctx.beginPath(); ctx.arc(ex,ey,58,0,PI2);
    ctx.shadowColor='rgba(255,160,40,.8)'; ctx.shadowBlur=30; ctx.fillStyle=eg; ctx.fill(); ctx.shadowBlur=0;
    // Corona radiata
    for(let i=0;i<24;i++){
      const a=(i/24)*PI2+pgT*.3; const len=18+8*Math.sin(pgT*2+i*.8);
      ctx.save(); ctx.globalAlpha=.35+.12*Math.sin(pgT+i);
      ctx.beginPath(); ctx.moveTo(ex+Math.cos(a)*58,ey+Math.sin(a)*58); ctx.lineTo(ex+Math.cos(a)*(58+len),ey+Math.sin(a)*(58+len));
      ctx.strokeStyle='rgba(255,190,60,1)'; ctx.lineWidth=2; ctx.stroke(); ctx.restore();
    }
    // Zona ring
    ctx.beginPath(); ctx.arc(ex,ey,64,0,PI2);
    ctx.strokeStyle='rgba(255,195,60,.7)'; ctx.lineWidth=6; ctx.stroke();
    // Racing sperm
    for(let i=0;i<18;i++){
      const seed=i*79;
      const baseAng = (i/18)*PI2 + pgT*.06;
      const dist = 85 + 35*Math.sin(pgT*(0.25+i*.015)+seed) - (i===0?pgT*6:0);
      const sx = ex + Math.cos(baseAng)*Math.max(68,dist);
      const sy = ey + Math.sin(baseAng)*Math.max(68,dist);
      const headAng = Math.atan2(ey-sy,ex-sx);
      ctx.save(); ctx.translate(sx,sy); ctx.rotate(headAng+Math.PI);
      ctx.beginPath(); ctx.moveTo(10,0); ctx.bezierCurveTo(7,4,-4,3,-2,0); ctx.bezierCurveTo(-4,-3,7,-4,10,0);
      ctx.fillStyle=i===0?'rgba(255,100,160,1)':`rgba(180,80,140,${.3+.4*(i%3===0?1:.5)})`;
      ctx.shadowColor=i===0?'rgba(255,100,160,.9)':'transparent'; ctx.shadowBlur=i===0?14:0; ctx.fill(); ctx.shadowBlur=0;
      ctx.beginPath();
      for(let s=0;s<=14;s++){
        const tf=s/14; const tx2=-2-tf*28; const ty2=Math.sin(pgT*4.5+tf*PI2*1.6)*5*tf;
        s===0?ctx.moveTo(tx2,ty2):ctx.lineTo(tx2,ty2);
      }
      ctx.strokeStyle=`rgba(255,130,180,${i===0?.75:.25})`; ctx.lineWidth=i===0?2:1; ctx.stroke();
      ctx.restore();
    }
    ctx.save(); ctx.textAlign='center'; ctx.font='700 13px Manrope,sans-serif';
    ctx.fillStyle='rgba(255,200,100,.75)'; ctx.fillText(`~${Math.round(100+Math.abs(Math.sin(pgT*.3))*30)} sperm surrounding egg`, W/2, 26); ctx.restore();
    drawHormoneBars(['LH','FSH','Estrogen','Prog.'],[0.9,0.7,0.8,0.15], pgT);
  }

  function drawFertilisation(){
    bg('#060018','#120030');
    const cx2=W/2, cy2=H/2;
    // Flash effect if recently clicked
    const hasClick = clickPoints.length > 0;
    if(hasClick){
      const age = pgT - clickPoints[clickPoints.length-1].t;
      if(age < 1.5){
        const fa = Math.max(0,1-age/1.2);
        // Shockwaves
        for(let w=0;w<5;w++){
          const wp = Math.max(0,(age-.08*w)/1.2); if(wp<=0) continue;
          ctx.beginPath(); ctx.arc(cx2,cy2,wp*(1-w*.1)*170,0,PI2);
          ctx.strokeStyle=`rgba(255,${200-w*30},${50-w*10},${(1-wp)*.8})`;
          ctx.lineWidth=4-w*.5; ctx.stroke();
        }
        // Gold flash
        if(age < .5){
          const gg=ctx.createRadialGradient(cx2,cy2,0,cx2,cy2,fa*120);
          gg.addColorStop(0,`rgba(255,255,180,${fa})`); gg.addColorStop(1,'rgba(255,220,50,0)');
          ctx.fillStyle=gg; ctx.fillRect(0,0,W,H);
        }
      }
      if(pgT - clickPoints[clickPoints.length-1].t > 2.5) clickPoints.length=0;
    }
    // Egg
    const eg=ctx.createRadialGradient(cx2-18,cy2-12,6,cx2,cy2,70);
    eg.addColorStop(0,'#fffbe0'); eg.addColorStop(.4,'#ffd060'); eg.addColorStop(.8,'#ff9830'); eg.addColorStop(1,'#e86020');
    ctx.beginPath(); ctx.arc(cx2,cy2,66,0,PI2);
    ctx.shadowColor='rgba(255,160,40,.7)'; ctx.shadowBlur=40; ctx.fillStyle=eg; ctx.fill(); ctx.shadowBlur=0;
    // Winner sperm
    const penetrationAngle = -Math.PI/4;
    const sxPos = cx2+Math.cos(penetrationAngle)*60;
    const syPos = cy2+Math.sin(penetrationAngle)*60;
    ctx.save(); ctx.translate(sxPos,syPos); ctx.rotate(penetrationAngle+Math.PI*.5);
    ctx.beginPath(); ctx.moveTo(10,0); ctx.bezierCurveTo(7,5,-5,4,-2,0); ctx.bezierCurveTo(-5,-4,7,-5,10,0);
    ctx.fillStyle='rgba(255,80,150,1)'; ctx.shadowColor='rgba(255,80,150,1)'; ctx.shadowBlur=20; ctx.fill(); ctx.shadowBlur=0;
    ctx.restore();
    // Zinc spark particles
    for(let i=0;i<20;i++){
      const a=(i/20)*PI2+pgT*.5+(i%3)*.3;
      const r2=68+8*Math.sin(pgT*3+i); const sp=3+2*Math.sin(pgT*2+i);
      ctx.beginPath(); ctx.arc(cx2+Math.cos(a)*r2, cy2+Math.sin(a)*r2, sp,0,PI2);
      const c=`rgba(255,${180+Math.floor(50*Math.sin(pgT+i))},50,${.5+.4*Math.sin(pgT*2+i)})`;
      ctx.fillStyle=c; ctx.shadowColor=c; ctx.shadowBlur=8; ctx.fill(); ctx.shadowBlur=0;
    }
    ctx.save(); ctx.textAlign='center'; ctx.font='700 13px Manrope,sans-serif';
    ctx.fillStyle='rgba(255,220,100,.85)';
    ctx.fillText(hasClick && (pgT-clickPoints[0]?.t)<1 ? 'âš¡ ZINC SPARK! Fertilisation!' : 'â† Click egg to trigger zinc spark', W/2, 32);
    ctx.restore();
    drawHormoneBars(['LH peak','Estrogen','hCG','Prog.'],[1.0,0.95,0.05,0.2], pgT);
  }

  function drawCellDivision(){
    bg('#020814','#04122a');
    const cx2=W/2, cy2=H/2;
    const stage = Math.floor(pgT*.28) % 4; // 0=1cell,1=2cell,2=4cell,3=8cell
    const stageCounts=[1,2,4,8];
    const stageLabels=['Zygote (1 cell)','2-cell (Day 1)','4-cell (Day 2)','8-cell (Day 3)'];
    const n = stageCounts[stage];
    const cellR = [40,30,22,16][stage];
    const spread = [0,36,28,26][stage];
    // Flash on division
    const divT = pgT*.28 % 1;
    if(divT < .08 && stage > 0){
      const fa = 1-divT/.08;
      const fg=ctx.createRadialGradient(cx2,cy2,0,cx2,cy2,fa*130);
      fg.addColorStop(0,`rgba(255,240,140,${fa*.6})`); fg.addColorStop(1,'rgba(255,240,140,0)');
      ctx.fillStyle=fg; ctx.fillRect(0,0,W,H);
    }
    // Cells
    for(let i=0;i<n;i++){
      const a = n===1 ? 0 : (i/n)*PI2 - Math.PI/2;
      const px2 = cx2 + (n===1?0:Math.cos(a)*spread);
      const py2 = cy2 + (n===1?0:Math.sin(a)*spread);
      const hue = 335+i*22;
      // Glow
      const gg=ctx.createRadialGradient(px2,py2,0,px2,py2,cellR*3);
      gg.addColorStop(0,`hsla(${hue},85%,70%,.3)`); gg.addColorStop(1,'transparent');
      ctx.fillStyle=gg; ctx.beginPath(); ctx.arc(px2,py2,cellR*3,0,PI2); ctx.fill();
      // Body
      const cg2=ctx.createRadialGradient(px2-cellR*.3,py2-cellR*.25,0,px2,py2,cellR);
      cg2.addColorStop(0,'rgba(255,255,252,1)'); cg2.addColorStop(.4,`hsla(${hue},90%,82%,.97)`); cg2.addColorStop(1,`hsla(${hue},75%,55%,.95)`);
      ctx.beginPath(); ctx.arc(px2,py2,cellR,0,PI2);
      ctx.shadowColor=`hsla(${hue},85%,55%,.6)`; ctx.shadowBlur=14; ctx.fillStyle=cg2; ctx.fill(); ctx.shadowBlur=0;
      // Ring
      ctx.beginPath(); ctx.arc(px2,py2,cellR,0,PI2);
      ctx.strokeStyle=`hsla(${hue},70%,48%,.55)`; ctx.lineWidth=1.8; ctx.stroke();
      // Nucleus
      ctx.beginPath(); ctx.arc(px2+cellR*.1,py2+cellR*.08,cellR*.4,0,PI2);
      ctx.fillStyle=`hsla(${hue-20},80%,38%,.75)`; ctx.fill();
      // Junction lines
      if(n>1){
        for(let j=i+1;j<n;j++){
          const ja=n===1?0:(j/n)*PI2-Math.PI/2;
          const jx=cx2+Math.cos(ja)*spread; const jy=cy2+Math.sin(ja)*spread;
          const d=Math.hypot(jx-px2,jy-py2);
          if(d<cellR*4.5){
            ctx.save(); ctx.globalAlpha=.35*(1-d/(cellR*4.5));
            ctx.beginPath(); ctx.moveTo(px2,py2); ctx.lineTo(jx,jy);
            ctx.strokeStyle='rgba(255,80,140,.9)'; ctx.lineWidth=2; ctx.stroke(); ctx.restore();
          }
        }
      }
    }
    ctx.save(); ctx.textAlign='center'; ctx.font='800 16px Manrope,sans-serif';
    ctx.fillStyle='rgba(255,180,200,.85)'; ctx.fillText(stageLabels[stage], W/2, 30);
    ctx.font='600 11px Manrope,sans-serif'; ctx.fillStyle='rgba(180,140,165,.6)';
    ctx.fillText('Genome activation begins at 4-cell stage', W/2, 50);
    ctx.restore();
    drawHormoneBars(['hCG rising','Prog.','LH','FSH'],[0.3+stage*.15,0.45,0.2,0.3], pgT);
  }

  function drawBlastocyst(){
    bg('#020a18','#051428');
    const cx2=W/2, cy2=H/2;
    const r=72;
    const ba = Math.min(1, pgT*.18);
    // Outer radiance
    const og=ctx.createRadialGradient(cx2,cy2,r*.5,cx2,cy2,r*2.2);
    og.addColorStop(0,'rgba(255,180,120,.25)'); og.addColorStop(1,'rgba(255,180,120,0)');
    ctx.fillStyle=og; ctx.beginPath(); ctx.arc(cx2,cy2,r*2.2,0,PI2); ctx.fill();
    // 22 trophoblast cells
    for(let i=0;i<22;i++){
      const a=(i/22)*PI2+pgT*.12;
      const ro=r+Math.sin(pgT*1.8+i*.55)*5;
      const bx=cx2+Math.cos(a)*ro, by=cy2+Math.sin(a)*ro;
      const tg=ctx.createRadialGradient(bx,by,0,bx,by,12);
      tg.addColorStop(0,`hsla(${320+i*7},88%,78%,.97)`); tg.addColorStop(1,'rgba(255,170,190,0)');
      ctx.beginPath(); ctx.arc(bx,by,12,0,PI2); ctx.fillStyle=tg; ctx.fill();
      ctx.beginPath(); ctx.arc(bx,by,12,0,PI2);
      ctx.strokeStyle=`hsla(${320+i*7},62%,52%,.4)`; ctx.lineWidth=1.3; ctx.stroke();
    }
    // Blastocoel fluid
    const bv=ctx.createRadialGradient(cx2+r*.2,cy2-r*.15,0,cx2,cy2,r*.75);
    bv.addColorStop(0,'rgba(180,220,255,.94)'); bv.addColorStop(.55,'rgba(155,205,255,.58)'); bv.addColorStop(1,'rgba(130,185,255,0)');
    ctx.beginPath(); ctx.arc(cx2,cy2,r*.75,0,PI2); ctx.fillStyle=bv; ctx.fill();
    // ICM
    const ix=cx2-r*.3, iy=cy2-r*.18;
    const ig=ctx.createRadialGradient(ix,iy,0,ix,iy,r*.5);
    ig.addColorStop(0,'rgba(255,215,130,.99)'); ig.addColorStop(.5,'rgba(255,180,90,.9)'); ig.addColorStop(1,'rgba(255,140,65,0)');
    ctx.beginPath(); ctx.arc(ix,iy,r*.5,0,PI2); ctx.fillStyle=ig; ctx.fill();
    ctx.save(); ctx.globalAlpha=.8; ctx.font='bold 9px Manrope,sans-serif'; ctx.textAlign='center'; ctx.fillStyle='rgba(120,60,10,.9)'; ctx.fillText('ICM',ix,iy+3); ctx.restore();
    ctx.save(); ctx.globalAlpha=.65; ctx.font='bold 8px Manrope,sans-serif'; ctx.textAlign='center'; ctx.fillStyle='rgba(30,90,180,.8)'; ctx.fillText('blastocoel',cx2+r*.22,cy2+r*.3); ctx.restore();
    // Labels
    ctx.save(); ctx.textAlign='center'; ctx.font='800 14px Manrope,sans-serif'; ctx.fillStyle='rgba(255,190,210,.85)'; ctx.fillText('Blastocyst Â· Day 5', W/2, 28); ctx.restore();
    drawHormoneBars(['hCG','Prog.','Estrogen','LH'],[0.55,0.65,0.7,0.1], pgT);
  }

  function drawImplantation2(){
    bg('#0a0010','#180020');
    const cx2=W/2;
    // Uterine wall at top
    const wallY = 65;
    const wallG = ctx.createLinearGradient(0,wallY-20,0,wallY+30);
    wallG.addColorStop(0,'rgba(200,40,100,.7)'); wallG.addColorStop(1,'rgba(200,40,100,.15)');
    ctx.fillStyle=wallG; ctx.fillRect(0,wallY-20,W,50);
    // Villi on wall
    for(let i=0;i<20;i++){
      const vx=20+(i/19)*(W-40);
      const vLen=15+6*Math.sin(pgT*.9+i*.6);
      const sway=Math.sin(pgT*1.1+i*.5)*5;
      ctx.beginPath(); ctx.moveTo(vx+sway,wallY+15); ctx.lineTo(vx+sway*.5,wallY+15+vLen);
      ctx.strokeStyle=`rgba(240,80,130,${.5+.3*Math.sin(pgT+i)})`; ctx.lineWidth=2.5; ctx.lineCap='round'; ctx.stroke();
      ctx.beginPath(); ctx.arc(vx+sway*.5,wallY+15+vLen,3,0,PI2);
      ctx.fillStyle=`rgba(255,120,160,.7)`; ctx.fill();
    }
    // Blastocyst drifting up
    const drift = Math.min(1, pgT*.12);
    const bcy = H*.65 - drift*90;
    const br = 52;
    // Trophoblast
    for(let i=0;i<16;i++){
      const a=(i/16)*PI2+pgT*.15;
      const ro=br+Math.sin(pgT*1.6+i*.7)*4;
      const bx2=cx2+Math.cos(a)*ro;
      const by2=bcy+Math.sin(a)*ro;
      const tg=ctx.createRadialGradient(bx2,by2,0,bx2,by2,9);
      tg.addColorStop(0,`hsla(${314+i*8},88%,74%,.97)`); tg.addColorStop(1,'rgba(255,170,190,0)');
      ctx.beginPath(); ctx.arc(bx2,by2,9,0,PI2); ctx.fillStyle=tg; ctx.fill();
    }
    // Blastocoel
    const bv=ctx.createRadialGradient(cx2+br*.2,bcy-br*.12,0,cx2,bcy,br*.7);
    bv.addColorStop(0,'rgba(185,222,255,.93)'); bv.addColorStop(1,'rgba(130,185,255,0)');
    ctx.beginPath(); ctx.arc(cx2,bcy,br*.7,0,PI2); ctx.fillStyle=bv; ctx.fill();
    // ICM
    const ig=ctx.createRadialGradient(cx2-br*.28,bcy-br*.15,0,cx2-br*.28,bcy-br*.15,br*.42);
    ig.addColorStop(0,'rgba(255,215,130,.99)'); ig.addColorStop(1,'rgba(255,150,65,0)');
    ctx.beginPath(); ctx.arc(cx2-br*.28,bcy-br*.15,br*.42,0,PI2); ctx.fillStyle=ig; ctx.fill();
    // Tendrils if close to wall
    if(drift > .4){
      const ta = (drift-.4)/.6;
      const topY = bcy - br - 5;
      for(let i=0;i<9;i++){
        const off=((i-4)/4)*.7;
        const tx2=cx2+off*28;
        const len=ta*Math.min(wallY+30-topY, (wallY+15)-topY+ta*20);
        const ty2=topY - len;
        const sway=Math.sin(pgT*1.6+i*.9)*7;
        ctx.beginPath(); ctx.moveTo(tx2,topY); ctx.quadraticCurveTo(tx2+sway,topY-len*.5,tx2+sway*.4,ty2);
        ctx.strokeStyle=`rgba(225,40,108,${ta*.8*(1-Math.abs(off)*.4)})`; ctx.lineWidth=2.5+Math.sin(pgT+i)*.7; ctx.lineCap='round'; ctx.stroke();
        if(ta>.35){ ctx.beginPath(); ctx.arc(tx2+sway*.4,ty2,4+ta*3.5,0,PI2);
          ctx.fillStyle=`rgba(255,110,165,${ta*.85})`; ctx.fill(); }
      }
    }
    // hCG message
    if(drift > .55){
      const ca = (drift-.55)/.45;
      ctx.save(); ctx.globalAlpha=ca;
      ctx.font='700 14px Manrope,sans-serif'; ctx.textAlign='center'; ctx.fillStyle='rgba(255,200,210,1)';
      ctx.fillText('You are becoming a mother â™¡', cx2, H-35);
      ctx.font='600 10px Manrope,sans-serif'; ctx.fillStyle='rgba(255,170,190,.75)';
      ctx.fillText('hCG secreted Â· Corpus luteum maintained', cx2, H-18);
      ctx.restore();
    }
    drawHormoneBars(['hCG','Prog.','Estrogen','LH'],[Math.min(1,drift*1.8),0.75,0.65,0.05], pgT);
  }

  // Hormone bars helper
  function drawHormoneBars(names, vals, t){
    const bx=12, by=H-68, bh=8, bw=80, gap=16;
    names.forEach((name,i)=>{
      const val = Math.max(0,Math.min(1, vals[i] + .04*Math.sin(t*1.2+i)));
      ctx.save();
      ctx.font='500 8px Manrope,sans-serif'; ctx.fillStyle='rgba(255,200,215,.55)';
      ctx.fillText(name, bx, by+i*(bh+gap)-2);
      ctx.fillStyle='rgba(255,255,255,.08)'; ctx.fillRect(bx,by+i*(bh+gap),bw,bh);
      const hg2=ctx.createLinearGradient(bx,0,bx+bw,0);
      hg2.addColorStop(0,'rgba(232,53,109,.8)'); hg2.addColorStop(1,'rgba(255,150,70,.6)');
      ctx.fillStyle=hg2; ctx.fillRect(bx,by+i*(bh+gap),bw*val,bh);
      ctx.restore();
    });
  }

  // Step data
  const stepData = STEPS;

  // Build nav
  const nav = document.getElementById('pg-nav');
  const navLabels = ['ðŸŒ¸ Womb','ðŸŠ Journey','ðŸƒ Race','âš¡ Fertilise','ðŸ”¬ Divide','ðŸ”µ Blastocyst','ðŸ  Home'];
  navLabels.forEach((lbl,i)=>{
    const btn = document.createElement('button');
    btn.className = 'pg-step-btn' + (i===0?' active':'');
    btn.innerHTML = `<span class="pg-step-num">${i+1}</span>${lbl}`;
    btn.addEventListener('click',()=>{ setStep(i); });
    nav.appendChild(btn);
  });

  function setStep(i){
    currentStep = i;
    pgT = 0;
    clickPoints = [];
    // Update nav
    nav.querySelectorAll('.pg-step-btn').forEach((b,bi)=> b.classList.toggle('active', bi===i));
    // Update info
    const s = stepData[i];
    document.getElementById('pg-phase-tag').textContent = s.tag;
    document.getElementById('pg-title').innerHTML = s.title;
    document.getElementById('pg-body').textContent = s.body;
    document.getElementById('pg-evidence').innerHTML = s.evidence;
    document.getElementById('pg-canvas-label').textContent = s.canvasLabel;
    // Stats
    const statsEl = document.getElementById('pg-stats');
    statsEl.innerHTML = s.stats.map(st=>`<div class="pg-stat"><span class="pg-stat-num">${st.n}</span><div class="pg-stat-label">${st.l}</div></div>`).join('');
  }

  document.getElementById('pg-btn-next').addEventListener('click',()=>{
    setStep((currentStep+1) % STEPS.length);
  });
  document.getElementById('pg-btn-restart').addEventListener('click',()=>{ setStep(0); });

  canvas.addEventListener('click', e=>{
    const rect = canvas.getBoundingClientRect();
    const scaleX = W/rect.width, scaleY = H/rect.height;
    clickPoints.push({ x:(e.clientX-rect.left)*scaleX, y:(e.clientY-rect.top)*scaleY, t:pgT });
  });
  canvas.addEventListener('touchstart', e=>{
    e.preventDefault();
    const rect = canvas.getBoundingClientRect();
    const scaleX = W/rect.width, scaleY = H/rect.height;
    const t = e.touches[0];
    clickPoints.push({ x:(t.clientX-rect.left)*scaleX, y:(t.clientY-rect.top)*scaleY, t:pgT });
  },{passive:false});

  function pgLoop(){
    pgT += 0.016;
    clear();
    const drawFn = STEPS[currentStep].draw;
    if(drawFn) drawFn();
    pgRAF = requestAnimationFrame(pgLoop);
  }
  pgLoop();
  setStep(0);

  // Stars
  const starsEl = document.getElementById('pg-stars');
  if(starsEl){
    for(let i=0;i<60;i++){
      const s=document.createElement('div');
      s.className='pstar';
      const sz=Math.random()*2.5+.5;
      s.style.cssText=`left:${Math.random()*100}%;top:${Math.random()*100}%;width:${sz}px;height:${sz}px;animation-duration:${2+Math.random()*4}s;animation-delay:${Math.random()*4}s`;
      starsEl.appendChild(s);
    }
  }
})();

/* â”€â”€ 4. EVIDENCE SCORECARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function(){
  const grid = document.getElementById('evidence-grid');
  if(!grid) return;

  const CARDS = [
    {
      rank:'01', icon:'ðŸ“…', color:'linear-gradient(135deg,rgba(232,53,109,.12),rgba(181,18,74,.06))',
      iconBg:'linear-gradient(135deg,#e8356d,#b5124a)',
      title:'Timed Intercourse During Fertile Window',
      body:'Having intercourse on the 2 days before ovulation (peak fertile window) increases per-cycle conception probability by up to 15 percentage points vs random timing.',
      impact:95, impactLabel:'Very High Impact',
      source:'Wilcox AJ et al. NEJM 1995 Â· ACOG Practice Bulletin 2022'
    },
    {
      rank:'02', icon:'ðŸ’Š', color:'linear-gradient(135deg,rgba(245,166,35,.1),rgba(230,92,0,.05))',
      iconBg:'linear-gradient(135deg,#f5a623,#e65c00)',
      title:'Folic Acid 400Î¼g Daily (Pre-Conception)',
      body:'WHO and ICMR mandate 400Î¼g folic acid for at least 3 months before conception. Reduces neural tube defects by 70% and supports early embryo DNA synthesis.',
      impact:90, impactLabel:'Very High Impact',
      source:'WHO 2023 Antenatal Guidelines Â· ICMR National Guidelines 2020'
    },
    {
      rank:'03', icon:'âš–ï¸', color:'linear-gradient(135deg,rgba(0,201,177,.1),rgba(0,125,111,.05))',
      iconBg:'linear-gradient(135deg,#00c9b1,#007d6f)',
      title:'Maintain BMI 18.5â€“24.9',
      body:'Both obesity (BMI>30) and underweight (BMI<18.5) significantly disrupt ovulation. NFHS-5 data shows 14.7% of Indian women of reproductive age are obese, associated with PCOS and anovulation.',
      impact:85, impactLabel:'High Impact',
      source:'NFHS-5 2019â€“21 Â· Harvard School of Public Health Â· ACOG Obesity in Pregnancy 2021'
    },
    {
      rank:'04', icon:'ðŸš­', color:'linear-gradient(135deg,rgba(124,58,237,.1),rgba(88,28,180,.05))',
      iconBg:'linear-gradient(135deg,#7c3aed,#5b21b6)',
      title:'Eliminate Smoking â€” Both Partners',
      body:'Smoking reduces female fertility by up to 40% (accelerates follicular depletion) and reduces male sperm motility by 17%. Even passive smoke exposure impairs endometrial receptivity.',
      impact:88, impactLabel:'High Impact',
      source:'British Medical Journal Meta-analysis 2020 Â· Johns Hopkins Medicine Reproductive Health'
    },
    {
      rank:'05', icon:'ðŸ˜´', color:'linear-gradient(135deg,rgba(99,102,241,.1),rgba(67,56,202,.05))',
      iconBg:'linear-gradient(135deg,#6366f1,#4338ca)',
      title:'Sleep 7â€“9 Hours â€” Melatonin & FSH',
      body:'Melatonin protects oocyte quality; sleep deprivation elevates cortisol which suppresses GnRH pulses. Women sleeping <6h have 20% lower AMH levels (Chung et al., Fertil Steril 2019).',
      impact:72, impactLabel:'Moderate-High',
      source:'Chung FF et al. Fertil Steril 2019 Â· Oxford Sleep Research Unit'
    },
    {
      rank:'06', icon:'ðŸ§˜', color:'linear-gradient(135deg,rgba(236,72,153,.1),rgba(219,39,119,.05))',
      iconBg:'linear-gradient(135deg,#ec4899,#db2777)',
      title:'Stress Reduction â€” HPA Axis',
      body:'Chronic stress elevates CRH which suppresses GnRH, directly reducing LH pulse frequency. Harvard Mind-Body Institute studies show psychological interventions can increase conception rates by 29%.',
      impact:68, impactLabel:'Moderate Impact',
      source:'Domar AD et al. Harvard Mind-Body Institute Â· Neuroendocrinology Reviews 2020'
    },
    {
      rank:'07', icon:'ðŸƒ', color:'linear-gradient(135deg,rgba(16,185,129,.1),rgba(5,150,105,.05))',
      iconBg:'linear-gradient(135deg,#10b981,#059669)',
      title:'Moderate Exercise â€” 150 min/week',
      body:'WHO recommends 150 min/week moderate activity. Moderate exercise improves insulin sensitivity (critical for PCOS) and reduces oxidative stress. Strenuous exercise (>60% VO2 max) can suppress ovulation.',
      impact:70, impactLabel:'Moderate Impact',
      source:'WHO Physical Activity Guidelines 2020 Â· ACOG Exercise in Pregnancy Â· Vigeh et al. 2021'
    },
    {
      rank:'08', icon:'ðŸ¥—', color:'linear-gradient(135deg,rgba(245,158,11,.1),rgba(217,119,6,.05))',
      iconBg:'linear-gradient(135deg,#f59e0b,#d97706)',
      title:'Mediterranean Diet Pattern',
      body:'A prospective cohort (Chavarro et al., Fertil Steril 2018, n=18,555) found women adhering to a "fertility diet" (whole grains, plant protein, full-fat dairy, low-glycaemic) had 66% lower risk of ovulatory infertility.',
      impact:76, impactLabel:'High Impact',
      source:'Chavarro JE et al. Fertil Steril 2018 Â· Harvard Nurses\' Health Study II'
    },
    {
      rank:'09', icon:'ðŸŒ¡ï¸', color:'linear-gradient(135deg,rgba(239,68,68,.1),rgba(185,28,28,.05))',
      iconBg:'linear-gradient(135deg,#ef4444,#b91c1c)',
      title:'BBT + LH Strip Tracking',
      body:'Combining basal body temperature charting with urinary LH strips identifies the fertile window with 96% accuracy. Digital apps validated against reference ultrasound show 95.3% specificity for ovulation detection.',
      impact:82, impactLabel:'High Impact',
      source:'Stanford F et al. Am J Obstet Gynecol 2003 Â· Oxford Fertility Unit App Validation Study 2022'
    },
    {
      rank:'10', icon:'ðŸ§¬', color:'linear-gradient(135deg,rgba(14,165,233,.1),rgba(2,132,199,.05))',
      iconBg:'linear-gradient(135deg,#0ea5e9,#0284c7)',
      title:'Partner Sperm Health â€” Antioxidants',
      body:'Male factor contributes to ~50% of infertility cases. Antioxidant supplementation (Vitamin C, E, CoQ10, zinc) improves sperm DNA fragmentation by 25% and motility by 18% (Cochrane Review 2019, 61 RCTs).',
      impact:80, impactLabel:'High Impact',
      source:'Smits RM et al. Cochrane Database Syst Rev 2019 Â· WHO Semen Analysis Manual 2021'
    },
  ];

  CARDS.forEach(c=>{
    const el = document.createElement('div');
    el.className = 'evidence-card reveal';
    el.setAttribute('data-rank', c.rank);
    el.style.background = c.color;
    el.innerHTML = `
      <div class="ec-icon" style="background:${c.iconBg}">${c.icon}</div>
      <div class="ec-title">${c.title}</div>
      <div class="ec-body">${c.body}</div>
      <div class="ec-impact">
        <div class="ec-impact-bar-bg">
          <div class="ec-impact-bar" style="width:0%" data-width="${c.impact}%"></div>
        </div>
        <span class="ec-impact-label">${c.impactLabel}</span>
      </div>
      <div class="ec-source">ðŸ“š ${c.source}</div>
    `;
    grid.appendChild(el);
  });

  // Animate impact bars on scroll
  const observer = new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        e.target.querySelectorAll('.ec-impact-bar').forEach(bar=>{
          bar.style.width = bar.dataset.width;
        });
        observer.unobserve(e.target);
      }
    });
  },{threshold:0.3});
  grid.querySelectorAll('.evidence-card').forEach(el=>observer.observe(el));
})();

})(); // end main IIFE
</script>
    <!-- Essential Nutrients -->
    <div class="section-header">
      <div class="section-label-pill green"><i class="fa-solid fa-wheat-awn"></i> Evidence-Based Nutrition</div>
      <h2 class="section-heading-j">ðŸ¥— Essential <span class="em">Pre-Conception Nutrients</span></h2>
      <p class="section-subtitle">
        These nutrients prepare your body for healthy conception and pregnancy
      </p>
    </div>

    <div class="nutrient-grid reveal">
      <div class="nutrient-card" style="--nutrient-color: #ff6b9d;">
        <div class="nutrient-header">
          <div class="nutrient-icon">ðŸƒ</div>
          <div>
            <div class="nutrient-name">Folic Acid</div>
          </div>
        </div>
        <div class="nutrient-benefit">
          Prevents neural tube defects. START 3 months before trying! Helps egg quality and implantation.
        </div>
        <div style="background: rgba(255,107,157,0.1); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
          <strong style="color: #ff6b9d;">Daily Need:</strong> 400-800 mcg (supplement recommended)
        </div>
        <div class="food-list">
          <span class="food-item">ðŸ¥¬ Spinach</span>
          <span class="food-item">ðŸ¥¦ Broccoli</span>
          <span class="food-item">ðŸŠ Oranges</span>
          <span class="food-item">ðŸ¥œ Beans</span>
          <span class="food-item">ðŸž Fortified Bread</span>
        </div>
      </div>

      <div class="nutrient-card" style="--nutrient-color: #4caf50;">
        <div class="nutrient-header">
          <div class="nutrient-icon">ðŸ’ª</div>
          <div>
            <div class="nutrient-name">Iron</div>
          </div>
        </div>
        <div class="nutrient-benefit">
          Builds blood volume, prevents anemia. Low iron linked to ovulation problems and miscarriage risk.
        </div>
        <div style="background: rgba(76,175,80,0.1); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
          <strong style="color: #4caf50;">Daily Need:</strong> 18 mg (27 mg if anemic)
        </div>
        <div class="food-list">
          <span class="food-item">ðŸ¥© Red Meat</span>
          <span class="food-item">ðŸ¦ª Oysters</span>
          <span class="food-item">ðŸ¥¬ Kale</span>
          <span class="food-item">ðŸ«˜ Lentils</span>
          <span class="food-item">ðŸ« Dark Chocolate</span>
        </div>
      </div>

      <div class="nutrient-card" style="--nutrient-color: #ff9800;">
        <div class="nutrient-header">
          <div class="nutrient-icon">ðŸŸ</div>
          <div>
            <div class="nutrient-name">Omega-3 (DHA)</div>
          </div>
        </div>
        <div class="nutrient-benefit">
          Improves egg quality, regulates hormones, reduces inflammation. Critical for baby's brain development.
        </div>
        <div style="background: rgba(255,152,0,0.1); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
          <strong style="color: #ff9800;">Daily Need:</strong> 200-300 mg DHA
        </div>
        <div class="food-list">
          <span class="food-item">ðŸŸ Salmon</span>
          <span class="food-item">ðŸ  Sardines</span>
          <span class="food-item">ðŸ¥š Omega Eggs</span>
          <span class="food-item">ðŸ¥‘ Walnuts</span>
          <span class="food-item">ðŸŒ° Chia Seeds</span>
        </div>
      </div>

      <div class="nutrient-card" style="--nutrient-color: #9c27b0;">
        <div class="nutrient-header">
          <div class="nutrient-icon">â˜€ï¸</div>
          <div>
            <div class="nutrient-name">Vitamin D</div>
          </div>
        </div>
        <div class="nutrient-benefit">
          Regulates menstrual cycles, improves egg quality. Deficiency linked to PCOS and fertility issues.
        </div>
        <div style="background: rgba(156,39,176,0.1); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
          <strong style="color: #9c27b0;">Daily Need:</strong> 600-1000 IU (test levels!)
        </div>
        <div class="food-list">
          <span class="food-item">â˜€ï¸ Sunlight 15min</span>
          <span class="food-item">ðŸŸ Fatty Fish</span>
          <span class="food-item">ðŸ¥š Egg Yolks</span>
          <span class="food-item">ðŸ¥› Fortified Milk</span>
          <span class="food-item">ðŸ„ Mushrooms</span>
        </div>
      </div>

      <div class="nutrient-card" style="--nutrient-color: #00bcd4;">
        <div class="nutrient-header">
          <div class="nutrient-icon">ðŸ¦´</div>
          <div>
            <div class="nutrient-name">Calcium</div>
          </div>
        </div>
        <div class="nutrient-benefit">
          Supports egg maturation, fertilization. Needed for baby's bones, teeth, heart, muscles later.
        </div>
        <div style="background: rgba(0,188,212,0.1); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
          <strong style="color: #00bcd4;">Daily Need:</strong> 1000 mg
        </div>
        <div class="food-list">
          <span class="food-item">ðŸ¥› Milk</span>
          <span class="food-item">ðŸ§€ Cheese</span>
          <span class="food-item">ðŸ¥¦ Broccoli</span>
          <span class="food-item">ðŸŒ° Almonds</span>
          <span class="food-item">ðŸŸ Sardines</span>
        </div>
      </div>

      <div class="nutrient-card" style="--nutrient-color: #e91e63;">
        <div class="nutrient-header">
          <div class="nutrient-icon">ðŸ”‹</div>
          <div>
            <div class="nutrient-name">Coenzyme Q10</div>
          </div>
        </div>
        <div class="nutrient-benefit">
          Powerful antioxidant! Improves egg quality especially in women 35+. Boosts mitochondrial energy.
        </div>
        <div style="background: rgba(233,30,99,0.1); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
          <strong style="color: #e91e63;">Daily Need:</strong> 100-600 mg (supplement)
        </div>
        <div class="food-list">
          <span class="food-item">ðŸ¥© Organ Meats</span>
          <span class="food-item">ðŸŸ Fatty Fish</span>
          <span class="food-item">ðŸ¥œ Peanuts</span>
          <span class="food-item">ðŸ¥¦ Broccoli</span>
          <span class="food-item">ðŸ’Š Supplement</span>
        </div>
      </div>
    </div>

    <!-- Do's and Don'ts -->
    <div class="section-header">
      <div class="section-label-pill purple"><i class="fa-solid fa-list-check"></i> Daily Habits</div>
      <h2 class="section-heading-j">âœ… Daily Habits: <span class="em">Do's &amp; Don'ts</span></h2>
      <p class="section-subtitle">
        Simple lifestyle changes that significantly impact your fertility
      </p>
    </div>

    <div class="dos-donts reveal">
      <!-- DO's -->
      <div class="do-card">
        <div class="card-title">
          <span>âœ…</span>
          <span>DEFINITELY DO</span>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ’§</div>
          <div class="action-text">
            <div class="action-title">Stay Hydrated</div>
            <div class="action-desc">8-10 glasses daily. Improves cervical mucus quality for sperm transport.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ˜´</div>
          <div class="action-text">
            <div class="action-title">Sleep 7-9 Hours</div>
            <div class="action-desc">Regulates hormones (leptin, melatonin). Poor sleep disrupts ovulation.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ§˜</div>
          <div class="action-text">
            <div class="action-title">Manage Stress</div>
            <div class="action-desc">Yoga, meditation, therapy. High cortisol blocks ovulation hormones.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸƒâ€â™€ï¸</div>
          <div class="action-text">
            <div class="action-title">Moderate Exercise</div>
            <div class="action-desc">30 min daily - walking, swimming, yoga. Maintains healthy weight.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ’Š</div>
          <div class="action-text">
            <div class="action-title">Take Prenatal Vitamins</div>
            <div class="action-desc">Start 3 months before trying. Fills nutritional gaps.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ©º</div>
          <div class="action-text">
            <div class="action-title">Get Pre-Conception Check</div>
            <div class="action-desc">Blood tests, vaccinations, chronic condition management.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ¦·</div>
          <div class="action-text">
            <div class="action-title">Visit Dentist</div>
            <div class="action-desc">Gum disease linked to infertility and pregnancy complications.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ“Š</div>
          <div class="action-text">
            <div class="action-title">Track Your Cycle</div>
            <div class="action-desc">Apps, basal temp, ovulation tests. Know your fertile window!</div>
          </div>
        </div>
      </div>

      <!-- DON'Ts -->
      <div class="dont-card">
        <div class="card-title">
          <span>âŒ</span>
          <span>ABSOLUTELY AVOID</span>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸš¬</div>
          <div class="action-text">
            <div class="action-title">No Smoking</div>
            <div class="action-desc">Damages eggs permanently. Accelerates egg loss. Increases miscarriage 50%.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ·</div>
          <div class="action-text">
            <div class="action-title">Limit Alcohol</div>
            <div class="action-desc">Even moderate drinking (>4 drinks/week) reduces conception by 18%.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">â˜•</div>
          <div class="action-text">
            <div class="action-title">Reduce Caffeine</div>
            <div class="action-desc">Max 200mg/day (1 cup coffee). High intake delays conception.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ©</div>
          <div class="action-text">
            <div class="action-title">Avoid Trans Fats</div>
            <div class="action-desc">Fried foods, pastries. Cause inflammation, worsen ovulation.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ‹ï¸</div>
          <div class="action-text">
            <div class="action-title">No Extreme Exercise</div>
            <div class="action-desc">>7 hrs/week vigorous exercise disrupts cycles. Moderate intensity only.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ§´</div>
          <div class="action-text">
            <div class="action-title">Avoid Toxic Chemicals</div>
            <div class="action-desc">BPA plastics, pesticides, parabens. Disrupt endocrine system.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ›</div>
          <div class="action-text">
            <div class="action-title">No Hot Tubs/Saunas</div>
            <div class="action-desc">High heat affects egg quality. Warm baths OK, but not scalding.</div>
          </div>
        </div>

        <div class="action-item">
          <div class="action-icon">ðŸ’Š</div>
          <div class="action-text">
            <div class="action-title">Check Medications</div>
            <div class="action-desc">Some meds harm fertility. Ask doctor about safer alternatives.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Exercise Recommendations -->
    <div class="section-header">
      <div class="section-label-pill teal"><i class="fa-solid fa-person-running"></i> Movement &amp; Wellness</div>
      <h2 class="section-heading-j">ðŸƒâ€â™€ï¸ Fertility-Friendly <span class="em">Exercises</span></h2>
      <p class="section-subtitle">
        Activities that boost circulation, reduce stress, and support hormonal balance
      </p>
    </div>

    <div class="exercise-grid reveal">
      <div class="exercise-card">
        <div class="exercise-visual" style="background: linear-gradient(135deg, #81c784 0%, #4caf50 100%);">
          <div class="exercise-icon">ðŸ§˜â€â™€ï¸</div>
        </div>
        <div class="exercise-content">
          <div class="exercise-title">Yoga</div>
          <div class="exercise-duration">
            <i class="fas fa-clock"></i>
            <span>20-30 min daily</span>
          </div>
          <div class="exercise-benefit">
            Reduces stress hormones by 20-30%. Specific poses (legs-up-wall, reclining goddess) improve pelvic blood flow. Regulates menstrual cycles.
          </div>
        </div>
      </div>

      <div class="exercise-card">
        <div class="exercise-visual" style="background: linear-gradient(135deg, #64b5f6 0%, #2196f3 100%);">
          <div class="exercise-icon">ðŸš¶â€â™€ï¸</div>
        </div>
        <div class="exercise-content">
          <div class="exercise-title">Brisk Walking</div>
          <div class="exercise-duration">
            <i class="fas fa-clock"></i>
            <span>30-45 min daily</span>
          </div>
          <div class="exercise-benefit">
            Gentle cardio that doesn't stress body. Improves insulin sensitivity (good for PCOS). Maintains healthy BMI without disrupting hormones.
          </div>
        </div>
      </div>

      <div class="exercise-card">
        <div class="exercise-visual" style="background: linear-gradient(135deg, #4dd0e1 0%, #00bcd4 100%);">
          <div class="exercise-icon">ðŸŠâ€â™€ï¸</div>
        </div>
        <div class="exercise-content">
          <div class="exercise-title">Swimming</div>
          <div class="exercise-duration">
            <i class="fas fa-clock"></i>
            <span>3-4 times/week</span>
          </div>
          <div class="exercise-benefit">
            Low-impact full-body workout. Reduces inflammation, improves circulation. Excellent for women with joint pain or overweight.
          </div>
        </div>
      </div>

      <div class="exercise-card">
        <div class="exercise-visual" style="background: linear-gradient(135deg, #ba68c8 0%, #9c27b0 100%);">
          <div class="exercise-icon">ðŸ’ª</div>
        </div>
        <div class="exercise-content">
          <div class="exercise-title">Light Strength Training</div>
          <div class="exercise-duration">
            <i class="fas fa-clock"></i>
            <span>2-3 times/week</span>
          </div>
          <div class="exercise-benefit">
            Builds lean muscle, improves insulin resistance. Use lighter weights, higher reps. Avoid excessive core exercises once pregnant.
          </div>
        </div>
      </div>

      <div class="exercise-card">
        <div class="exercise-visual" style="background: linear-gradient(135deg, #ffb74d 0%, #ff9800 100%);">
          <div class="exercise-icon">ðŸŒ¬ï¸</div>
        </div>
        <div class="exercise-content">
          <div class="exercise-title">Breathing Exercises</div>
          <div class="exercise-duration">
            <i class="fas fa-clock"></i>
            <span>10 min, 2x daily</span>
          </div>
          <div class="exercise-benefit">
            Activates parasympathetic nervous system. Lowers cortisol fast. Box breathing: 4 counts in, hold 4, out 4, hold 4. Repeat 10 cycles.
          </div>
        </div>
      </div>

      <div class="exercise-card">
        <div class="exercise-visual" style="background: linear-gradient(135deg, #e57373 0%, #f44336 100%);">
          <div class="exercise-icon">ðŸš«</div>
        </div>
        <div class="exercise-content">
          <div class="exercise-title">AVOID: High Intensity</div>
          <div class="exercise-duration">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Too strenuous</span>
          </div>
          <div class="exercise-benefit">
            CrossFit, marathon training, spin classes >5x/week can stop ovulation. If your period becomes irregular, reduce intensity immediately.
          </div>
        </div>
      </div>
    </div>

    <!-- Pregnancy Loss Education -->
    <div class="section-header">
      <div class="section-label-pill red"><i class="fa-solid fa-circle-exclamation"></i> Awareness &amp; Support</div>
      <h2 class="section-heading-j">ðŸ’” Understanding <span class="em">Pregnancy Loss</span> Types</h2>
      <p class="section-subtitle">
        Education for awareness - know the signs and when to seek immediate help
      </p>
    </div>

    <div class="loss-types reveal">
      <div class="loss-card" style="--loss-color: #f44336;">
        <div class="loss-header">
          <div class="loss-icon">ðŸ©¸</div>
          <div>
            <div class="loss-name">Early Miscarriage</div>
            <div style="font-size: 0.85rem; color: var(--text-soft);">Before 12 weeks (10-20% of pregnancies)</div>
          </div>
        </div>
        <div class="loss-description">
          Most common loss type. Usually caused by chromosomal abnormalities (not your fault!). Body's natural selection process.
        </div>
        <div class="loss-signs">
          <div class="loss-signs-title">
            <i class="fas fa-exclamation-circle"></i>
            Warning Signs:
          </div>
          <ul class="loss-signs-list">
            <li>Heavy bleeding with clots</li>
            <li>Severe cramping worse than period</li>
            <li>Loss of pregnancy symptoms suddenly</li>
            <li>Tissue passing from vagina</li>
          </ul>
        </div>
        <div class="loss-action">
          <i class="fas fa-phone-alt"></i>
          <span>Call doctor immediately if bleeding heavily or severe pain</span>
        </div>
      </div>

      <div class="loss-card" style="--loss-color: #ff9800;">
        <div class="loss-header">
          <div class="loss-icon">ðŸ«¥</div>
          <div>
            <div class="loss-name">Chemical Pregnancy</div>
            <div style="font-size: 0.85rem; color: var(--text-soft);">Very early loss (50-75% of all miscarriages)</div>
          </div>
        </div>
        <div class="loss-description">
          Pregnancy ends shortly after implantation, before 5 weeks. Positive test, then period arrives. Often mistaken for late period.
        </div>
        <div class="loss-signs">
          <div class="loss-signs-title">
            <i class="fas fa-exclamation-circle"></i>
            Signs:
          </div>
          <ul class="loss-signs-list">
            <li>Faint positive pregnancy test</li>
            <li>Period arrives 1 week late</li>
            <li>Heavier than usual period</li>
            <li>HCG levels drop before rising</li>
          </ul>
        </div>
        <div class="loss-action">
          <i class="fas fa-heart"></i>
          <span>Usually no treatment needed. Body completes naturally. Try again next cycle.</span>
        </div>
      </div>

      <div class="loss-card" style="--loss-color: #9c27b0;">
        <div class="loss-header">
          <div class="loss-icon">âš ï¸</div>
          <div>
            <div class="loss-name">Molar Pregnancy</div>
            <div style="font-size: 0.85rem; color: var(--text-soft);">Rare: 1 in 1,000 pregnancies</div>
          </div>
        </div>
        <div class="loss-description">
          Abnormal tissue grows instead of baby. Caused by genetic error at conception. Two types: complete (no fetus) or partial (abnormal fetus).
        </div>
        <div class="loss-signs">
          <div class="loss-signs-title">
            <i class="fas fa-exclamation-circle"></i>
            Warning Signs:
          </div>
          <ul class="loss-signs-list">
            <li>Very high HCG levels</li>
            <li>Severe nausea/vomiting</li>
            <li>Grape-like tissue passing</li>
            <li>Uterus larger than expected</li>
            <li>No fetal heartbeat on ultrasound</li>
          </ul>
        </div>
        <div class="loss-action" style="background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%); color: #c62828;">
          <i class="fas fa-hospital"></i>
          <span>URGENT: Requires D&C surgery + HCG monitoring for months. Can become cancerous.</span>
        </div>
      </div>

      <div class="loss-card" style="--loss-color: #00bcd4;">
        <div class="loss-header">
          <div class="loss-icon">ðŸ¥</div>
          <div>
            <div class="loss-name">Ectopic Pregnancy</div>
            <div style="font-size: 0.85rem; color: var(--text-soft);">EMERGENCY: 1-2% of pregnancies</div>
          </div>
        </div>
        <div class="loss-description">
          Embryo implants outside uterus (usually fallopian tube). NOT viable - cannot become baby. Life-threatening if tube ruptures.
        </div>
        <div class="loss-signs">
          <div class="loss-signs-title">
            <i class="fas fa-exclamation-circle"></i>
            EMERGENCY Signs:
          </div>
          <ul class="loss-signs-list">
            <li>Sharp, stabbing pelvic pain (one side)</li>
            <li>Shoulder pain (internal bleeding)</li>
            <li>Dizziness, fainting</li>
            <li>Rectal pressure</li>
            <li>Light bleeding + severe pain</li>
          </ul>
        </div>
        <div class="loss-action" style="background: linear-gradient(135deg, #ffebee 0%, #ef9a9a 100%); color: #b71c1c;">
          <i class="fas fa-ambulance"></i>
          <span>CALL 911 or GO TO ER! Needs immediate surgery or methotrexate injection.</span>
        </div>
      </div>

      <div class="loss-card" style="--loss-color: #607d8b;">
        <div class="loss-header">
          <div class="loss-icon">ðŸ’”</div>
          <div>
            <div class="loss-name">Missed Miscarriage</div>
            <div style="font-size: 0.85rem; color: var(--text-soft);">Silent loss (1-5% of pregnancies)</div>
          </div>
        </div>
        <div class="loss-description">
          Fetus stops developing but body doesn't recognize loss. No bleeding or cramping. Often discovered at routine ultrasound.
        </div>
        <div class="loss-signs">
          <div class="loss-signs-title">
            <i class="fas fa-exclamation-circle"></i>
            Signs:
          </div>
          <ul class="loss-signs-list">
            <li>No fetal heartbeat on ultrasound</li>
            <li>Pregnancy symptoms disappear</li>
            <li>HCG levels plateau or drop</li>
            <li>Uterus stops growing</li>
            <li>Often no obvious symptoms</li>
          </ul>
        </div>
        <div class="loss-action">
          <i class="fas fa-user-md"></i>
          <span>Options: Wait for natural miscarriage, medication, or D&C procedure. Discuss with doctor.</span>
        </div>
      </div>

      <div class="loss-card" style="--loss-color: #4caf50;">
        <div class="loss-header">
          <div class="loss-icon">ðŸŒ±</div>
          <div>
            <div class="loss-name">Recurrent Loss</div>
            <div style="font-size: 0.85rem; color: var(--text-soft);">3+ consecutive miscarriages (1% of couples)</div>
          </div>
        </div>
        <div class="loss-description">
          Multiple losses indicate underlying issue. Causes: chromosomal, uterine abnormalities, hormonal, immune, blood clotting disorders.
        </div>
        <div class="loss-signs">
          <div class="loss-signs-title">
            <i class="fas fa-vial"></i>
            Tests Needed:
          </div>
          <ul class="loss-signs-list">
            <li>Genetic karyotyping (both partners)</li>
            <li>Thyroid, progesterone levels</li>
            <li>Blood clotting disorders panel</li>
            <li>Uterine imaging (HSG, sonogram)</li>
            <li>Autoimmune antibodies test</li>
          </ul>
        </div>
        <div class="loss-action">
          <i class="fas fa-stethoscope"></i>
          <span>See reproductive endocrinologist (fertility specialist) after 2nd loss if over 35, after 3rd if younger.</span>
        </div>
      </div>
    </div>

    <!-- Deep-Dive Button -->
    <div class="pl-btn-wrap reveal">
      <style>
        .pl-btn-wrap {
          display: flex;
          justify-content: center;
          padding: 2rem 0 2.5rem;
        }
        .pl-3d-btn {
          --btn-rose: #e8356d;
          --btn-deep: #8b0030;
          --btn-face: #c41e52;
          --btn-side: #7a001f;
          --btn-shine: rgba(255,255,255,0.22);
          position: relative;
          display: inline-flex;
          align-items: center;
          gap: .85rem;
          padding: 1.05rem 2.4rem 1.05rem 2rem;
          font-family: 'Manrope', system-ui, sans-serif;
          font-size: 1rem;
          font-weight: 800;
          color: white;
          text-decoration: none;
          letter-spacing: .03em;
          border: none;
          cursor: pointer;
          border-radius: 16px;
          /* 3-D layered box-shadow stack */
          background: linear-gradient(160deg, #f04278 0%, var(--btn-face) 55%, #a8173e 100%);
          box-shadow:
            0   1px 0  0   rgba(255,255,255,.18) inset,          /* top inner highlight */
            0  -1px 0  0   rgba(0,0,0,.25) inset,                 /* bottom inner shadow */
            0   6px 0  0   var(--btn-side),                        /* 3-D bottom face */
            0   7px 6px 0  rgba(0,0,0,.38),                        /* drop shadow */
            0  16px 32px   rgba(196, 30, 82, .35);                 /* ambient glow */
          transform: translateY(0);
          transition:
            transform .12s cubic-bezier(.34,1.56,.64,1),
            box-shadow .12s cubic-bezier(.34,1.56,.64,1);
          user-select: none;
          -webkit-tap-highlight-color: transparent;
        }
        /* Shine overlay */
        .pl-3d-btn::before {
          content: '';
          position: absolute;
          inset: 0;
          border-radius: inherit;
          background: linear-gradient(160deg, var(--btn-shine) 0%, transparent 55%);
          pointer-events: none;
        }
        /* Hover: button rises, shadow shrinks */
        .pl-3d-btn:hover {
          transform: translateY(-4px);
          box-shadow:
            0   1px 0  0   rgba(255,255,255,.22) inset,
            0  -1px 0  0   rgba(0,0,0,.22) inset,
            0  10px 0  0   var(--btn-side),
            0  11px 10px 0 rgba(0,0,0,.3),
            0  24px 40px   rgba(196,30,82,.45);
        }
        /* Press: button sinks into surface */
        .pl-3d-btn:active {
          transform: translateY(5px);
          box-shadow:
            0   1px 0  0   rgba(255,255,255,.14) inset,
            0  -1px 0  0   rgba(0,0,0,.3) inset,
            0   1px 0  0   var(--btn-side),
            0   2px 4px 0  rgba(0,0,0,.28),
            0   6px 16px   rgba(196,30,82,.2);
        }
        /* Icon circle */
        .pl-btn-icon {
          width: 36px; height: 36px;
          background: rgba(0,0,0,.22);
          border-radius: 50%;
          display: flex; align-items: center; justify-content: center;
          font-size: 1.1rem;
          flex-shrink: 0;
          box-shadow: 0 0 0 1.5px rgba(255,255,255,.15) inset;
          transition: transform .12s;
        }
        .pl-3d-btn:hover .pl-btn-icon { transform: scale(1.12) rotate(-8deg); }
        /* Text stack */
        .pl-btn-text { display: flex; flex-direction: column; gap: .1rem; }
        .pl-btn-label {
          font-size: 1rem; font-weight: 800; line-height: 1.1;
        }
        .pl-btn-sub {
          font-size: .68rem; font-weight: 600;
          opacity: .78; letter-spacing: .04em; text-transform: uppercase;
        }
        /* Arrow */
        .pl-btn-arrow {
          margin-left: .2rem;
          font-size: 1.1rem;
          transition: transform .18s;
        }
        .pl-3d-btn:hover .pl-btn-arrow { transform: translateX(5px); }
        /* Mobile */
        @media(max-width: 480px) {
          .pl-3d-btn {
            padding: .9rem 1.6rem .9rem 1.4rem;
            font-size: .9rem;
            border-radius: 14px;
          }
          .pl-btn-icon { width: 30px; height: 30px; font-size: .95rem; }
          .pl-btn-label { font-size: .9rem; }
        }
        @media(hover: none) and (pointer: coarse) {
          .pl-3d-btn:hover { transform: translateY(0); }
          .pl-3d-btn:hover .pl-btn-icon { transform: none; }
          .pl-3d-btn:hover .pl-btn-arrow { transform: none; }
        }
      </style>
      <a href="pregnancy_loss.html" class="pl-3d-btn" role="button" aria-label="Learn more about pregnancy loss types">
        <span class="pl-btn-icon">ðŸ’”</span>
        <span class="pl-btn-text">
          <span class="pl-btn-label">Deep Dive: Pregnancy Loss Guide</span>
          <span class="pl-btn-sub">Evidence-based Â· Support resources Â· Recovery</span>
        </span>
        <span class="pl-btn-arrow">â†’</span>
      </a>
    </div>

    <!-- When to See Doctor -->
    <div class="doctor-section">
      <div class="section-header" style="margin-top: 0;">
        <div class="section-label-pill purple"><i class="fa-solid fa-stethoscope"></i> Clinical Guidance</div>
        <h2 class="section-heading-j">ðŸ¥ When to <span class="em">See a Doctor</span></h2>
        <p class="section-subtitle">
          Don't wait too long - early intervention improves success rates significantly
        </p>
      </div>

      <div class="trigger-grid reveal">
        <div class="trigger-card" style="--trigger-color: #f44336;">
          <div class="trigger-icon">â°</div>
          <div class="trigger-text">
            <strong>After 12 months</strong> of trying (under age 35) without conception
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #ff9800;">
          <div class="trigger-icon">ðŸŽ‚</div>
          <div class="trigger-text">
            <strong>After 6 months</strong> of trying if you're 35-40 years old
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #9c27b0;">
          <div class="trigger-icon">ðŸ“…</div>
          <div class="trigger-text">
            <strong>Immediately</strong> if you're over 40 and want to conceive
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #e91e63;">
          <div class="trigger-icon">ðŸ©¸</div>
          <div class="trigger-text">
            <strong>Irregular periods</strong> or cycles shorter than 21 days or longer than 35 days
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #2196f3;">
          <div class="trigger-icon">ðŸš«</div>
          <div class="trigger-text">
            <strong>Absent periods</strong> for 3+ months (not pregnant) - could be PCOS or hormonal
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #4caf50;">
          <div class="trigger-icon">ðŸ’”</div>
          <div class="trigger-text">
            <strong>2+ miscarriages</strong> - testing can identify treatable causes
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #00bcd4;">
          <div class="trigger-icon">âš ï¸</div>
          <div class="trigger-text">
            <strong>Painful periods</strong> with heavy bleeding - could be endometriosis
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #ff5722;">
          <div class="trigger-icon">ðŸ©º</div>
          <div class="trigger-text">
            <strong>Known conditions</strong> like PCOS, endometriosis, thyroid disease, diabetes
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #607d8b;">
          <div class="trigger-icon">ðŸ§¬</div>
          <div class="trigger-text">
            <strong>Partner issues</strong> - low sperm count, erectile dysfunction, past vasectomy
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #795548;">
          <div class="trigger-icon">ðŸ¥</div>
          <div class="trigger-text">
            <strong>Past pelvic infections</strong>, STIs, or pelvic inflammatory disease
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #3f51b5;">
          <div class="trigger-icon">ðŸ’Š</div>
          <div class="trigger-text">
            <strong>Cancer treatment history</strong> - chemo/radiation may affect fertility
          </div>
        </div>

        <div class="trigger-card" style="--trigger-color: #009688;">
          <div class="trigger-icon">âš•ï¸</div>
          <div class="trigger-text">
            <strong>Pre-conception checkup</strong> - recommended 3 months before trying
          </div>
        </div>
      </div>

      <div style="background: white; border-radius: 25px; padding: 2rem; margin-top: 2rem; box-shadow: 0 8px 25px rgba(0,0,0,0.08);">
        <div class="doctor-visit-inner" style="display: flex; align-items: start; gap: 1.5rem;">
          <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%); display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white; flex-shrink: 0;">
            ðŸ’¡
          </div>
          <div>
            <div style="font-size: 1.3rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text);">
              What to Expect at Fertility Doctor Visit
            </div>
            <div style="font-size: 0.95rem; color: var(--text-soft); line-height: 1.7;">
              <strong>Blood tests:</strong> Hormone levels (FSH, LH, AMH, thyroid, prolactin)<br>
              <strong>Ultrasound:</strong> Check ovaries, uterus, antral follicle count<br>
              <strong>Semen analysis:</strong> Partner's sperm count, motility, morphology<br>
              <strong>HSG test:</strong> X-ray to check if fallopian tubes are open<br>
              <strong>Treatment options:</strong> May include fertility meds, IUI, or IVF depending on diagnosis
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pre-Conception Timeline -->
    <div class="section-header">
      <div class="section-label-pill gold"><i class="fa-solid fa-calendar-days"></i> Your Roadmap</div>
      <h2 class="section-heading-j">ðŸ—“ï¸ Your 3-Month <span class="em">Pre-Conception Timeline</span></h2>
      <p class="section-subtitle">
        Prepare your body step-by-step for the healthiest pregnancy
      </p>
    </div>

    <div class="timeline reveal">
      <div class="timeline-item">
        <div class="timeline-content">
          <div class="timeline-title" style="--timeline-color: #f44336;">Schedule Check-Up</div>
          <div class="timeline-desc">
            Book pre-conception visit. Update vaccinations (MMR, Tdap, flu). Get blood tests (STIs, immunity, anemia). Discuss chronic conditions.
          </div>
        </div>
        
        <div class="timeline-marker" style="--timeline-color: #f44336;">
          <div class="timeline-icon">ðŸ©º</div>
          <div class="timeline-label">Month 1</div>
        </div>
        
        <div class="timeline-content ev-card">
          <div class="timeline-evidence">
            <div class="ev-badges">
              <span class="ev-badge pink">WHO</span>
              <span class="ev-badge blue">ACOG</span>
            </div>
            <p class="ev-fact">Pre-conception care reduces adverse perinatal outcomes by 35%; ~10% of reproductive-age women remain rubella-susceptible.</p>
            <p class="ev-source">WHO Preconception Care Guidelines (2013); ACOG Practice Bulletin No. 762 (2019)</p>
          </div>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-content ev-card">
          <div class="timeline-evidence">
            <div class="ev-badges">
              <span class="ev-badge pink">WHO</span>
              <span class="ev-badge amber">ICMR</span>
            </div>
            <p class="ev-fact">400 Âµg folic acid â‰¥4 weeks before conception cuts neural tube defect risk by 70%; ICMR recommends 500 Âµg for Indian women.</p>
            <p class="ev-source">WHO Rec. (2016); ICMR-NIN Dietary Guidelines (2020); Czeizel &amp; DudÃ¡s, NEJM (1992)</p>
          </div>
        </div>
        
        <div class="timeline-marker" style="--timeline-color: #ff9800;">
          <div class="timeline-icon">ðŸ’Š</div>
          <div class="timeline-label">Month 1-3</div>
        </div>
        
        <div class="timeline-content">
          <div class="timeline-title" style="--timeline-color: #ff9800;">Start Supplements</div>
          <div class="timeline-desc">
            Begin prenatal vitamin with 400-800mcg folic acid DAILY. Add Vitamin D (test levels first), Omega-3, CoQ10 if 35+. No mega-doses!
          </div>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-content">
          <div class="timeline-title" style="--timeline-color: #9c27b0;">Optimize Weight</div>
          <div class="timeline-desc">
            Achieve healthy BMI (18.5-24.9). Even 5-10% weight loss if overweight improves ovulation. Underweight? Gain slowly to restore cycles.
          </div>
        </div>
        
        <div class="timeline-marker" style="--timeline-color: #9c27b0;">
          <div class="timeline-icon">âš–ï¸</div>
          <div class="timeline-label">Month 2</div>
        </div>
        
        <div class="timeline-content ev-card">
          <div class="timeline-evidence">
            <div class="ev-badges">
              <span class="ev-badge blue">ACOG</span>
              <span class="ev-badge pink">Lancet</span>
            </div>
            <p class="ev-fact">Obesity (BMI â‰¥30) raises miscarriage risk 67% and gestational diabetes 7Ã—; just 5â€“10% weight loss restores ovulation.</p>
            <p class="ev-source">ACOG Committee Opinion No. 804 (2020); Cnattingius et al., Lancet (1996)</p>
          </div>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-content ev-card">
          <div class="timeline-evidence">
            <div class="ev-badges">
              <span class="ev-badge teal">CDC</span>
              <span class="ev-badge blue">ACOG</span>
              <span class="ev-badge green">RCOG</span>
            </div>
            <p class="ev-fact">Smoking raises miscarriage risk 27% and doubles ectopic pregnancy risk; caffeine &gt;200 mg/day doubles miscarriage risk.</p>
            <p class="ev-source">CDC (2016); ACOG PB No. 106 (2010); RCOG Scientific Impact Paper No. 57 (2015)</p>
          </div>
        </div>
        
        <div class="timeline-marker" style="--timeline-color: #2196f3;">
          <div class="timeline-icon">ðŸš«</div>
          <div class="timeline-label">Month 2</div>
        </div>
        
        <div class="timeline-content">
          <div class="timeline-title" style="--timeline-color: #2196f3;">Eliminate Toxins</div>
          <div class="timeline-desc">
            Stop smoking, limit alcohol to zero, reduce caffeine <200mg. Switch to BPA-free containers. Avoid raw fish, deli meats, soft cheeses.
          </div>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-content">
          <div class="timeline-title" style="--timeline-color: #4caf50;">Track Ovulation</div>
          <div class="timeline-desc">
            Use ovulation predictor kits or basal thermometer. Chart cervical mucus. Identify your 5-6 day fertile window. Time intercourse every 1-2 days.
          </div>
        </div>
        
        <div class="timeline-marker" style="--timeline-color: #4caf50;">
          <div class="timeline-icon">ðŸ“Š</div>
          <div class="timeline-label">Month 3</div>
        </div>
        
        <div class="timeline-content ev-card">
          <div class="timeline-evidence">
            <div class="ev-badges">
              <span class="ev-badge teal">NICE</span>
              <span class="ev-badge blue">ASRM</span>
            </div>
            <p class="ev-fact">LH-surge OPKs detect ovulation with ~97% specificity; intercourse 2 days before ovulation yields ~30% conception probability per cycle.</p>
            <p class="ev-source">NICE NG156 (2020); ASRM Practice Committee Opinion (2017); Wilcox et al., NEJM (1995)</p>
          </div>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-content ev-card">
          <div class="timeline-evidence">
            <div class="ev-badges">
              <span class="ev-badge teal">NICE</span>
              <span class="ev-badge purple">ESHRE</span>
            </div>
            <p class="ev-fact">84% of couples conceive within 12 months; elevated cortisol suppresses GnRH pulsatility â€” mindfulness interventions improve conception rates.</p>
            <p class="ev-source">NICE NG156 (2020); ESHRE Capri Workshop (2000); Domar et al., Fertil Steril (2011)</p>
          </div>
        </div>
        
        <div class="timeline-marker" style="--timeline-color: #00bcd4;">
          <div class="timeline-icon">ðŸŽ¯</div>
          <div class="timeline-label">Month 3+</div>
        </div>
        
        <div class="timeline-content">
          <div class="timeline-title" style="--timeline-color: #00bcd4;">Start Trying!</div>
          <div class="timeline-desc">
            Have sex every 1-2 days during fertile window. Don't stress timing too much - stress blocks conception. Stay relaxed and enjoy the process!
          </div>
        </div>
      </div>
    </div>


    <!-- CTA Section -->
    <div class="cta-section">
      <div class="cta-title">ðŸŒŸ Ready to Start Your Journey?</div>
      <div class="cta-text">
        You have all the knowledge you need. Trust your body, stay consistent with healthy habits, and be patient. Most couples conceive within 6-12 months. You've got this! ðŸ’•
      </div>
      <button class="cta-button" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        â†‘ Back to Top
      </button>
    </div>

  </div>

  <script>
    // Cycle day positioning (distributed around circle)
    document.addEventListener('DOMContentLoaded', function() {
      // All interactive features are CSS-based for simplicity
      // This ensures the page works even for users with limited tech literacy
      
      console.log('Fertility Journey Guide loaded successfully! ðŸŒ¸');
    });
  </script>

<footer class="ns-footer" aria-label="Site footer">
  <div class="footer-main">
    <div class="footer-col">
      <h3>About This Guide</h3>
      <p>Comprehensive, evidence-based information synthesized from WHO, ACOG, ICMR guidelines, peer-reviewed research, and NFHS-5 data (724,115+ women).</p>
    </div>
    <div class="footer-col">
      <h3>Evidence Sources</h3>
      <ul>
        <li>World Health Organization</li>
        <li>ACOG Guidelines</li>
        <li>ICMR India</li>
        <li>NFHS-5 Survey</li>
      </ul>
    </div>
    <div class="footer-col">
      <h3>Important Disclaimer</h3>
      <p class="disclaimer-text">This provides general information only. Each pregnancy is unique. Medical decisions should be made with qualified healthcare providers who can assess your individual circumstances.</p>
    </div>
    <div class="footer-col">
      <h3>Emergency</h3>
      <p class="emergency-alert">Heavy bleeding, fever, chest pain, or severe abdominal pain require immediate medical attention. <strong>Don't delay.</strong></p>
    </div>
  </div>
  <div class="footer-meta">
    <p class="meta-line">Last Updated: February 2026 <span class="sep">|</span> Evidence-Based <span class="sep">â€¢</span> Comprehensive <span class="sep">â€¢</span> Empowering</p>
    <p class="tagline"><span class="heart">ðŸ©·</span> Dedicated to empowering every mother</p>
  </div>
  <div class="footer-bottom">
    <div class="footer-bottom-inner">
      <nav class="footer-links" aria-label="Legal and support links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Contact Support</a>
      </nav>
      <p class="footer-copy">&copy; 2026 Nari Swasthya. Empowering Women's Health.</p>
    </div>
  </div>
</footer>

  <script>
/* Mobile menu toggle */
function toggleMobile(){
  const menu=document.getElementById('mobileMenu');
  const b1=document.getElementById('hb1'),b2=document.getElementById('hb2'),b3=document.getElementById('hb3');
  const open=menu.classList.toggle('open');
  if(open){
    b1.style.cssText='transform:rotate(45deg) translate(4px,4px);';
    b2.style.cssText='opacity:0;';
    b3.style.cssText='transform:rotate(-45deg) translate(4px,-4px);';
  } else {
    b1.style.cssText=''; b2.style.cssText=''; b3.style.cssText='';
  }
}
document.addEventListener('click',function(e){
  const menu=document.getElementById('mobileMenu');
  const btn=document.getElementById('hamburgerBtn');
  if(menu&&menu.classList.contains('open')&&!menu.contains(e.target)&&!btn.contains(e.target)){
    menu.classList.remove('open');
    document.getElementById('hb1').style.cssText='';
    document.getElementById('hb2').style.cssText='';
    document.getElementById('hb3').style.cssText='';
  }
});
  </script>

<script>
/* ============================================================
   CONCEPTION HERO â€” Background Life Spark Particles
   Tiny glowing orbs that drift like life-energy across the hero
============================================================ */
(function(){
  const canvas = document.getElementById('heroParticleCanvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');

  function resize(){
    const hero = canvas.closest('.hero') || canvas.parentElement;
    canvas.width  = hero.offsetWidth;
    canvas.height = hero.offsetHeight;
  }
  resize();
  window.addEventListener('resize', resize);

  const particleCount = 80;
  const particles = [];

  class Particle {
    constructor(){
      this.x  = Math.random() * canvas.width;
      this.y  = Math.random() * canvas.height;
      this.vx = (Math.random() - 0.5) * 0.5;
      this.vy = (Math.random() - 0.5) * 0.5;
      this.radius = Math.random() * 2 + 1;
    }
    update(){
      this.x += this.vx;
      this.y += this.vy;
      if(this.x < 0 || this.x > canvas.width)  this.vx *= -1;
      if(this.y < 0 || this.y > canvas.height) this.vy *= -1;
    }
    draw(){
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(236, 64, 122, 0.6)';
      ctx.fill();
    }
  }

  for(let i = 0; i < particleCount; i++){
    particles.push(new Particle());
  }

  function connectParticles(){
    for(let i = 0; i < particles.length; i++){
      for(let j = i + 1; j < particles.length; j++){
        const dx = particles[i].x - particles[j].x;
        const dy = particles[i].y - particles[j].y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        if(distance < 100){
          ctx.beginPath();
          ctx.moveTo(particles[i].x, particles[i].y);
          ctx.lineTo(particles[j].x, particles[j].y);
          ctx.strokeStyle = `rgba(236, 64, 122, ${0.2 * (1 - distance / 100)})`;
          ctx.lineWidth = 1;
          ctx.stroke();
        }
      }
    }
  }

  function animate(){
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach(p => { p.update(); p.draw(); });
    connectParticles();
    requestAnimationFrame(animate);
  }
  animate();
})();

/* ============================================================
   PETAL LAYER â€” Re-purposed as floating DNA/cell fragments
============================================================ */
(function(){
  const layer = document.getElementById('heroPetalLayer');
  if(!layer) return;
  // We'll render small glowing circles (cells) via the canvas above
  // This layer used for subtle floating chromosome-like shapes
  const colors=['rgba(252,228,236,0.6)','rgba(248,187,208,0.5)','rgba(237,231,246,0.5)','rgba(244,143,177,0.4)'];
  function createCell(){
    const el=document.createElement('div');
    const sz = Math.random()*8+4;
    const dur=Math.random()*14+10, delay=Math.random()*6;
    el.style.cssText=`position:absolute;border-radius:50%;left:${Math.random()*100}%;width:${sz}px;height:${sz}px;background:${colors[Math.floor(Math.random()*colors.length)]};animation:petal-fall ${dur}s ${delay}s linear infinite;border:1px solid rgba(236,64,122,0.15);`;
    layer.appendChild(el);
    setTimeout(()=>el.remove(),(dur+delay+1)*1000);
  }
  for(let i=0;i<10;i++) setTimeout(createCell, i*500);
  setInterval(createCell, 1200);
})();

/* ============================================================
   THE MIRACLE OF CONCEPTION â€” Cinematic Living Canvas v4
   All 7 acts fully visible, debugged, inside circle
============================================================ */
(function(){
  const canvas = document.getElementById('fertilityHeroCanvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  const DPR = window.devicePixelRatio || 1;
  const SIZE = 420;
  canvas.width  = SIZE * DPR;
  canvas.height = SIZE * DPR;
  canvas.style.width  = SIZE + 'px';
  canvas.style.height = SIZE + 'px';
  ctx.scale(DPR, DPR);

  const cx = SIZE / 2, cy = SIZE / 2, R = SIZE / 2;

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     THE MIRACLE OF CONCEPTION â€” v5
     7 acts Ã— 3s each = 21s loop
     Every act: large bold visuals + in-canvas title + description
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  /* â”€â”€ Phase label strip (external DOM) â”€â”€ */
  const phaseEl = document.getElementById('heroPhaseText');
  const PHASE_NAMES = [
    'Womb Awakening','The Journey Begins','The Race to Life',
    'The Miraculous Moment','First Division','Blastocyst Forms','Implantation â€” Home'
  ];
  let _phIdx = -1, _loopCount = 0;
  function setPhase(i, loop){
    const key = loop * 10 + i;
    if(key === _phIdx || !phaseEl) return;
    _phIdx = key;
    phaseEl.style.opacity = '0';
    setTimeout(() => { phaseEl.textContent = PHASE_NAMES[i]; phaseEl.style.opacity = '1'; }, 200);
  }
  if(phaseEl) phaseEl.style.transition = 'opacity 0.35s';

  /* â”€â”€ Math helpers â”€â”€ */
  const PI2=Math.PI*2;
  function cl(v,a,b){return v<a?a:v>b?b:v;}
  function lp(a,b,t){return a+(b-a)*t;}
  function eO(t){t=cl(t,0,1); return 1-Math.pow(1-t,3);}
  function eIO(t){t=cl(t,0,1); return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2;}
  function sm(t){t=cl(t,0,1); return t*t*(3-2*t);}
  function fade(t,start,end){return cl((t-start)/(end-start),0,1);}

  /* â”€â”€ Static data (seeded so consistent each loop) â”€â”€ */
  // Villi: 34 finger projections from wall pointing inward
  const VILLI=Array.from({length:34},(_,i)=>({
    ang:(i/34)*PI2,
    len:28+((i*7919)%100)*.22,       // 28-50px inward length
    w:3.5+(( i*3571)%100)*.03,        // 3.5-6.5px width
    ph:((i*2741)%628)*.01,
    sp:.5+(( i*1427)%100)*.012,
    bulb:4+(( i*9001)%100)*.025
  }));

  // Sperm: 8, all starting INSIDE circle at 70% radius
  const SPERM=Array.from({length:8},(_,i)=>({
    bAng:(i/8)*PI2+(((i*37)%20)-.10)*.3,
    sDist:R*.70+(( i*541)%100)*.001*R*.08,
    phOff:((i*1231)%628)*.01,
    tFreq:5+(( i*739)%100)*.025,
    tAmp:.30+(( i*421)%100)*.002,
    spd:.88+(( i*317)%100)*.002,
    wAmp:.15+(( i*613)%100)*.002,
    wSpd:.35+(( i*827)%100)*.005,
    win:i===0,
    col:i===0?'#e91e8c':`hsl(${295+i*18},72%,${55+i*4}%)`
  }));

  // Ambient sparkle orbs
  const ORBS=Array.from({length:12},(_,i)=>({
    ang:(i/12)*PI2,
    dist:R*.38+((i*619)%100)*.0028*R,
    spd:(.003+(( i*311)%100)*.00004)*(i%2?1:-1),
    r:2+(( i*773)%100)*.02,
    ph:((i*1009)%628)*.01,
    hue:305+i*16
  }));

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DRAW FUNCTIONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  /* Background â€” warm uterine glow, shifts per phase */
  function wombBg(phase, pt){
    // Background color shifts with phase
    const colors=[
      ['#fff5f0','#ffe4ec','#f5d0e0','#eac0d2'],  // p0 warm pink
      ['#fff8f0','#ffeade','#f8d8c8','#eecab8'],  // p1 amber
      ['#fff6ee','#fde8d0','#f5d5b8','#e8c8a8'],  // p2 deep amber
      ['#fffde8','#fff5b0','#fde890','#f0d860'],  // p3 golden flash
      ['#f0f8ff','#e8f4ff','#d8ecff','#c8e0f8'],  // p4 cool blue-white
      ['#fff0fa','#fce4ff','#f0d0ff','#e4beff'],  // p5 lavender
      ['#fff0f5','#ffe4ec','#f8d0e0','#ecc0d4'],  // p6 rose home
    ];
    const c=colors[phase]||colors[0];
    const g=ctx.createRadialGradient(cx,cy-15,5,cx,cy,R);
    g.addColorStop(0,c[0]); g.addColorStop(.45,c[1]);
    g.addColorStop(.8,c[2]); g.addColorStop(1,c[3]);
    ctx.fillStyle=g; ctx.fillRect(0,0,SIZE,SIZE);
    // Breathing central glow
    const b=.18+.1*Math.sin(pt*PI2*.5);
    const w=ctx.createRadialGradient(cx,cy,0,cx,cy,R*.7);
    w.addColorStop(0,`rgba(255,210,170,${b})`); w.addColorStop(1,'rgba(255,210,170,0)');
    ctx.fillStyle=w; ctx.fillRect(0,0,SIZE,SIZE);
  }

  /* Villi: sway like sea anemones, clearly visible */
  function drawVilli(t, alpha){
    if(alpha<=0) return;
    VILLI.forEach((v,i)=>{
      const sway=Math.sin(t*v.sp+v.ph)*.2;
      const rx=cx+Math.cos(v.ang)*(R-2);
      const ry=cy+Math.sin(v.ang)*(R-2);
      // Point INWARD (reversed direction)
      const iAng=v.ang+Math.PI+sway;
      const tx=rx+Math.cos(iAng)*v.len;
      const ty=ry+Math.sin(iAng)*v.len;
      // Organic curve control point
      const cpx=(rx+tx)/2+Math.cos(v.ang+Math.PI/2)*12*Math.sin(t*.6+v.ph);
      const cpy=(ry+ty)/2+Math.sin(v.ang+Math.PI/2)*12*Math.sin(t*.6+v.ph);

      const a2=alpha*(.7+.25*Math.sin(t*1.1+v.ph));
      ctx.save();
      // Rich pink-to-light gradient stroke
      const vg=ctx.createLinearGradient(rx,ry,tx,ty);
      vg.addColorStop(0,`rgba(200,40,100,${a2*.95})`);
      vg.addColorStop(.6,`rgba(230,80,130,${a2*.65})`);
      vg.addColorStop(1,`rgba(255,145,175,${a2*.2})`);
      ctx.beginPath(); ctx.moveTo(rx,ry); ctx.quadraticCurveTo(cpx,cpy,tx,ty);
      ctx.strokeStyle=vg; ctx.lineWidth=v.w; ctx.lineCap='round'; ctx.stroke();
      // Glowing bulb tip
      ctx.beginPath(); ctx.arc(tx,ty,v.bulb,0,PI2);
      const bg=ctx.createRadialGradient(tx,ty,0,tx,ty,v.bulb*1.5);
      bg.addColorStop(0,`rgba(255,160,195,${a2*.92})`);
      bg.addColorStop(1,`rgba(200,40,100,0)`);
      ctx.fillStyle=bg; ctx.fill();
      ctx.restore();
    });
  }

  /* Egg: golden sun, 28 corona rays, zona pellucida, bright nucleus */
  function drawEgg(x,y,r,glow,t,alpha=1){
    if(alpha<=0) return;
    ctx.save(); ctx.globalAlpha=alpha;
    // Outer radiance halo
    const halo=ctx.createRadialGradient(x,y,r,x,y,r*3+glow*40);
    halo.addColorStop(0,`rgba(255,210,80,${.28+glow*.25})`);
    halo.addColorStop(.5,`rgba(255,185,50,${.12+glow*.1})`);
    halo.addColorStop(1,'rgba(255,185,50,0)');
    ctx.beginPath(); ctx.arc(x,y,r*3+glow*40,0,PI2); ctx.fillStyle=halo; ctx.fill();
    // 28 Corona radiata rays
    for(let i=0;i<28;i++){
      const a=(i/28)*PI2+t*.38;
      const len=r*.52+r*.2*Math.sin(t*2+i*.85);
      ctx.save(); ctx.globalAlpha=alpha*(.38+.14*Math.sin(t+i));
      ctx.beginPath();
      ctx.moveTo(x+Math.cos(a)*r*1.1,y+Math.sin(a)*r*1.1);
      ctx.lineTo(x+Math.cos(a)*(r*1.1+len),y+Math.sin(a)*(r*1.1+len));
      ctx.strokeStyle=`rgba(255,185,50,1)`;
      ctx.lineWidth=2.5+Math.sin(t+i)*.8; ctx.lineCap='round'; ctx.stroke(); ctx.restore();
    }
    // Zona pellucida (outer shell)
    ctx.beginPath(); ctx.arc(x,y,r*1.14,0,PI2);
    ctx.strokeStyle=`rgba(255,196,60,${.72+glow*.28})`; ctx.lineWidth=6+glow*5; ctx.stroke();
    // Cytoplasm body
    const eg=ctx.createRadialGradient(x-r*.28,y-r*.22,0,x,y,r);
    eg.addColorStop(0,'#fffae8'); eg.addColorStop(.3,'#ffd860');
    eg.addColorStop(.7,'#ffaa30'); eg.addColorStop(1,'#f07890');
    ctx.beginPath(); ctx.arc(x,y,r,0,PI2); ctx.fillStyle=eg;
    ctx.shadowColor='rgba(255,160,40,.8)'; ctx.shadowBlur=28+glow*20; ctx.fill(); ctx.shadowBlur=0;
    // Bright nucleus
    const ng=ctx.createRadialGradient(x,y,0,x,y,r*.48);
    ng.addColorStop(0,'rgba(255,255,225,.98)'); ng.addColorStop(1,'rgba(255,215,100,0)');
    ctx.beginPath(); ctx.arc(x,y,r*.48,0,PI2); ctx.fillStyle=ng; ctx.fill();
    ctx.restore();
  }

  /* Sperm: large, clearly visible teardrop head + whipping tail + bioluminescent trail */
  function drawSperm(x,y,hAng,tPh,tAmp,alpha,col,sz=1){
    if(alpha<=0) return;
    ctx.save(); ctx.globalAlpha=alpha;
    ctx.translate(x,y); ctx.rotate(hAng+Math.PI);
    const hl=16*sz, hw=7*sz;
    // Bioluminescent comet trail (12 dots)
    for(let tr=0;tr<12;tr++){
      const td=(tr+1)*5*sz;
      const ty2=Math.sin(tPh-tr*.28)*tAmp*td*.55;
      const ta=alpha*(1-tr/12)*.3; if(ta<=0) continue;
      ctx.beginPath(); ctx.arc(td,ty2,(3.5-tr*.22)*sz,0,PI2);
      ctx.fillStyle=col; ctx.globalAlpha=ta; ctx.fill();
    }
    ctx.globalAlpha=alpha;
    // Teardrop head with glow
    const hg=ctx.createRadialGradient(-hl*.32,0,0,0,0,hl*.9);
    hg.addColorStop(0,'#fff'); hg.addColorStop(.3,col); hg.addColorStop(1,col+'22');
    ctx.beginPath(); ctx.moveTo(hl,0);
    ctx.bezierCurveTo(hl*.65,hw,-hl*.45,hw*.8,-hl*.2,0);
    ctx.bezierCurveTo(-hl*.45,-hw*.8,hl*.65,-hw,hl,0);
    ctx.fillStyle=hg; ctx.shadowColor=col; ctx.shadowBlur=14*sz; ctx.fill(); ctx.shadowBlur=0;
    // Whipping sinusoidal tail
    const tLen=65*sz;
    ctx.beginPath();
    for(let s=0;s<=24;s++){
      const tf=s/24;
      const tx2=-hl*.2-tf*tLen;
      const ty2=Math.sin(tPh+tf*PI2*1.6)*tAmp*tLen*(tf*.82+.18);
      s===0?ctx.moveTo(tx2,ty2):ctx.lineTo(tx2,ty2);
    }
    const tg=ctx.createLinearGradient(-hl*.2,0,-hl*.2-tLen,0);
    tg.addColorStop(0,col); tg.addColorStop(.5,col+'aa'); tg.addColorStop(1,col+'00');
    ctx.strokeStyle=tg; ctx.lineWidth=3*sz; ctx.lineCap='round'; ctx.stroke();
    ctx.restore();
  }

  /* Shockwave: 5 rings + central flash + 18 starburst rays */
  function drawShockwave(prog,t){
    // 5 concentric expanding rings, staggered
    for(let w=0;w<5;w++){
      const wp=cl((prog-w*.12)/(1-w*.12),0,1); if(wp<=0) continue;
      const wr=eO(wp)*R*.95;
      const wa=Math.pow(1-wp,1.3)*(1.05-w*.18)*.9;
      ctx.beginPath(); ctx.arc(cx,cy,wr,0,PI2);
      ctx.strokeStyle=`rgba(255,${lp(225,130,wp)|0},${lp(50,20,wp)|0},${wa})`;
      ctx.lineWidth=5-w*.7; ctx.stroke();
    }
    // Central golden flash
    const fA=cl(1-prog*2.2,0,1);
    if(fA>0){
      const fR=Math.max(2,eO(prog)*R*.62);
      const fg=ctx.createRadialGradient(cx,cy,0,cx,cy,fR);
      fg.addColorStop(0,`rgba(255,255,210,${fA})`);
      fg.addColorStop(.25,`rgba(255,230,80,${fA*.9})`);
      fg.addColorStop(.65,`rgba(255,150,40,${fA*.45})`);
      fg.addColorStop(1,'rgba(255,100,40,0)');
      ctx.beginPath(); ctx.arc(cx,cy,fR,0,PI2); ctx.fillStyle=fg; ctx.fill();
    }
    // 18 starburst rays
    const rayR=eO(cl(prog*.9,0,1))*R*.88;
    const rayA=cl(1-prog*1.6,0,1)*.95;
    if(rayA>0&&rayR>3){
      for(let i=0;i<18;i++){
        const ra=(i/18)*PI2+t*.15;
        const rLen=rayR*(i%3===0?1:.62);
        ctx.save(); ctx.globalAlpha=rayA;
        ctx.beginPath();
        ctx.moveTo(cx+Math.cos(ra)*10,cy+Math.sin(ra)*10);
        ctx.lineTo(cx+Math.cos(ra)*rLen,cy+Math.sin(ra)*rLen);
        const rg=ctx.createLinearGradient(cx,cy,cx+Math.cos(ra)*rLen,cy+Math.sin(ra)*rLen);
        rg.addColorStop(0,'rgba(255,255,160,1)'); rg.addColorStop(1,'rgba(255,170,30,0)');
        ctx.strokeStyle=rg; ctx.lineWidth=2.8; ctx.stroke(); ctx.restore();
      }
    }
  }

  /* Cell cluster: large visible cells, bright junction lines, heartbeat */
  function cellPos(n,r){
    if(n===1) return [{x:0,y:0}];
    return Array.from({length:n},(_,i)=>{
      const a=(i/n)*PI2-Math.PI/2; return {x:Math.cos(a)*r,y:Math.sin(a)*r};
    });
  }
  function drawCells(n,cellR,t,alpha=1){
    if(alpha<=0) return;
    ctx.save(); ctx.globalAlpha=alpha;
    const spread=n===1?0:cellR*(1.05+(n/16)*.55);
    const pos=cellPos(n,spread);
    const hb=1+.1*Math.max(0,Math.sin(t*5.5)); // heartbeat

    // JUNCTION LINES â€” thick bright pink
    if(n>1){
      pos.forEach((a,i)=>pos.forEach((b,j)=>{
        if(j<=i) return;
        const d=Math.hypot(b.x-a.x,b.y-a.y);
        if(d<cellR*5){
          ctx.save(); ctx.globalAlpha=alpha*.55*(1-d/(cellR*5));
          ctx.beginPath(); ctx.moveTo(cx+a.x*hb,cy+a.y*hb); ctx.lineTo(cx+b.x*hb,cy+b.y*hb);
          ctx.strokeStyle='rgba(236,30,110,.95)'; ctx.lineWidth=2.5; ctx.stroke(); ctx.restore();
        }
      }));
    }

    pos.forEach((p,i)=>{
      const px=cx+p.x*hb, py=cy+p.y*hb, r=cellR*hb;
      // Large outer glow
      const gg=ctx.createRadialGradient(px,py,0,px,py,r*3.2);
      gg.addColorStop(0,`hsla(${335+i*18},88%,70%,.42)`);
      gg.addColorStop(1,`hsla(${335+i*18},88%,70%,0)`);
      ctx.beginPath(); ctx.arc(px,py,r*3.2,0,PI2); ctx.fillStyle=gg; ctx.fill();
      // Cell body â€” vibrant
      const cg=ctx.createRadialGradient(px-r*.35,py-r*.3,0,px,py,r);
      cg.addColorStop(0,'rgba(255,255,252,1)');
      cg.addColorStop(.35,`hsla(${335+i*18},95%,85%,.97)`);
      cg.addColorStop(1,`hsla(${335+i*18},80%,60%,.94)`);
      ctx.beginPath(); ctx.arc(px,py,r,0,PI2); ctx.fillStyle=cg;
      ctx.shadowColor=`hsla(${335+i*18},90%,55%,.7)`; ctx.shadowBlur=18; ctx.fill(); ctx.shadowBlur=0;
      // Membrane ring
      ctx.beginPath(); ctx.arc(px,py,r,0,PI2);
      ctx.strokeStyle=`hsla(${335+i*18},72%,48%,.65)`; ctx.lineWidth=2.2; ctx.stroke();
      // Nucleus
      ctx.beginPath(); ctx.arc(px+r*.1,py+r*.08,r*.42,0,PI2);
      ctx.fillStyle=`hsla(${315+i*18},82%,45%,.8)`; ctx.fill();
      // Nucleolus
      ctx.beginPath(); ctx.arc(px+r*.12,py+r*.06,r*.15,0,PI2);
      ctx.fillStyle='rgba(255,210,140,.95)'; ctx.fill();
    });
    ctx.restore();
  }

  /* Blastocyst: trophoblast ring + blue fluid cavity + golden ICM */
  function drawBlastocyst(x,y,r,t,alpha){
    if(alpha<=0) return;
    ctx.save(); ctx.globalAlpha=alpha;
    // Outer radiance
    const og=ctx.createRadialGradient(x,y,r*.5,x,y,r*2.1);
    og.addColorStop(0,'rgba(255,185,130,.32)'); og.addColorStop(1,'rgba(255,185,130,0)');
    ctx.beginPath(); ctx.arc(x,y,r*2.1,0,PI2); ctx.fillStyle=og; ctx.fill();
    // Trophoblast: 22 pink outer cells
    for(let i=0;i<22;i++){
      const a=(i/22)*PI2+t*.2;
      const ro=r+Math.sin(t*2.2+i*.62)*5.5;
      const bx=x+Math.cos(a)*ro, by=y+Math.sin(a)*ro;
      const tg=ctx.createRadialGradient(bx,by,0,bx,by,11);
      tg.addColorStop(0,`hsla(${314+i*7},88%,74%,.98)`);
      tg.addColorStop(.55,`hsla(${314+i*7},75%,64%,.65)`);
      tg.addColorStop(1,'rgba(255,180,195,0)');
      ctx.beginPath(); ctx.arc(bx,by,11,0,PI2); ctx.fillStyle=tg; ctx.fill();
      ctx.beginPath(); ctx.arc(bx,by,11,0,PI2);
      ctx.strokeStyle=`hsla(${314+i*7},62%,50%,.42)`; ctx.lineWidth=1.4; ctx.stroke();
    }
    // Blastocoel fluid cavity â€” sky blue
    const bv=ctx.createRadialGradient(x+r*.22,y-r*.15,0,x,y,r*.78);
    bv.addColorStop(0,'rgba(200,232,255,.96)');
    bv.addColorStop(.55,'rgba(175,215,255,.62)');
    bv.addColorStop(1,'rgba(148,195,255,0)');
    ctx.beginPath(); ctx.arc(x,y,r*.78,0,PI2); ctx.fillStyle=bv; ctx.fill();
    // Label inside fluid: "Blastocoel"
    ctx.save(); ctx.globalAlpha=alpha*.7;
    ctx.font='bold 8px Manrope,sans-serif';
    ctx.textAlign='center'; ctx.fillStyle='rgba(40,100,200,.7)';
    ctx.fillText('blastocoel',x+r*.25,y+r*.35); ctx.restore();
    // ICM â€” offset golden cluster
    const ix=x-r*.32, iy=y-r*.2;
    const ig=ctx.createRadialGradient(ix,iy,0,ix,iy,r*.52);
    ig.addColorStop(0,'rgba(255,218,142,.99)');
    ig.addColorStop(.45,'rgba(255,185,100,.92)');
    ig.addColorStop(1,'rgba(255,148,72,0)');
    ctx.beginPath(); ctx.arc(ix,iy,r*.52,0,PI2); ctx.fillStyle=ig; ctx.fill();
    // ICM label
    ctx.save(); ctx.globalAlpha=alpha*.75;
    ctx.font='bold 8px Manrope,sans-serif'; ctx.textAlign='center';
    ctx.fillStyle='rgba(140,70,10,.8)'; ctx.fillText('ICM',ix,iy+2); ctx.restore();
    // ICM 7 micro-cells
    for(let i=0;i<7;i++){
      const ia=(i/7)*PI2+t*.65; const id=r*.28;
      const icx=ix+Math.cos(ia)*id, icy=iy+Math.sin(ia)*id;
      const mc=ctx.createRadialGradient(icx,icy,0,icx,icy,r*.12);
      mc.addColorStop(0,'rgba(255,250,205,.99)'); mc.addColorStop(1,'rgba(255,205,125,.5)');
      ctx.beginPath(); ctx.arc(icx,icy,r*.13,0,PI2); ctx.fillStyle=mc; ctx.fill();
    }
    ctx.restore();
  }

  /* Implantation: 9 tendrils + anchor glow + villi reawaken */
  function drawImplantation(bx,by,prog,t){
    if(prog<=0) return;
    const topY=by-66;
    for(let i=0;i<9;i++){
      const off=((i-4)/4)*.72;
      const tx1=bx+off*32;
      const ty1=topY;
      const len=prog*58;
      const ty2=ty1-len;
      const tx2=tx1+Math.sin(t*1.8+i*.9)*8;
      const cpx=tx1+Math.sin(t*1.1+i)*13, cpy=(ty1+ty2)/2;
      const ta=prog*.85*(1-Math.abs(off)*.38);
      ctx.save(); ctx.globalAlpha=ta;
      // Tendril
      ctx.beginPath(); ctx.moveTo(tx1,ty1); ctx.quadraticCurveTo(cpx,cpy,tx2,ty2);
      ctx.strokeStyle='rgba(225,45,108,.9)'; ctx.lineWidth=3+Math.sin(t+i)*.9;
      ctx.lineCap='round'; ctx.stroke();
      // Anchor blob at tip
      if(prog>.22){
        ctx.beginPath(); ctx.arc(tx2,ty2,5+prog*4.5,0,PI2);
        const ag=ctx.createRadialGradient(tx2,ty2,0,tx2,ty2,5+prog*4.5);
        ag.addColorStop(0,`rgba(255,130,175,${prog*.9})`);
        ag.addColorStop(1,`rgba(225,45,108,0)`);
        ctx.fillStyle=ag; ctx.fill();
      }
      ctx.restore();
    }
    // Wall attachment luminous halo
    if(prog>.3){
      const hA=sm((prog-.3)/.7);
      const wallY=topY-prog*35;
      const hg=ctx.createRadialGradient(bx,wallY,0,bx,wallY,62);
      hg.addColorStop(0,`rgba(255,160,210,${hA*.65})`);
      hg.addColorStop(1,'rgba(255,160,210,0)');
      ctx.beginPath(); ctx.arc(bx,wallY,62,0,PI2); ctx.fillStyle=hg; ctx.fill();
    }
  }

  /* â”€â”€ In-canvas phase title + description banner â”€â”€
     Shows at top of circle: title line + 1 short description line
     Fades in at 0.15 of each phase, stays, fades out at 0.85 */
  const PHASE_CAPTIONS=[
    {title:'â‘  Womb Awakening', desc:'34 villi sway like sea anemones, lit from within'},
    {title:'â‘¡ The Journey',    desc:'8 sperm enter with bioluminescent trails'},
    {title:'â‘¢ The Race',       desc:'Tails whip faster â€” one sperm wins the race'},
    {title:'â‘£ Fertilisation',  desc:'5 shockwaves + 18 rays explode at the moment of union'},
    {title:'â‘¤ First Division', desc:'1 â†’ 2 â†’ 4 â†’ 8 cells, each split flashes with light'},
    {title:'â‘¥ Blastocyst',    desc:'Fluid cavity forms, ICM & trophoblast differentiate'},
    {title:'â‘¦ Implantation',  desc:'9 tendrils anchor â€” a new life finds its home â™¡'},
  ];

  function drawCaption(phase, pt){
    const cap=PHASE_CAPTIONS[phase]; if(!cap) return;
    // Fade in 0â†’0.18, hold, fade out 0.82â†’1
    let a;
    if(pt<.18)      a=sm(pt/.18);
    else if(pt<.82) a=1;
    else            a=sm(1-(pt-.82)/.18);
    if(a<=0) return;

    // Semi-transparent pill at top of canvas
    const bw=SIZE-28, bh=48, bx2=14, by2=12;
    ctx.save();
    ctx.globalAlpha=a*.88;
    // Pill background
    ctx.beginPath();
    ctx.roundRect(bx2,by2,bw,bh,12);
    ctx.fillStyle='rgba(255,255,255,.78)';
    ctx.shadowColor='rgba(200,30,100,.18)'; ctx.shadowBlur=16;
    ctx.fill(); ctx.shadowBlur=0;
    // Top accent line
    ctx.beginPath(); ctx.roundRect(bx2,by2,bw,3,2);
    ctx.fillStyle='rgba(220,40,110,.75)'; ctx.fill();
    // Phase title
    ctx.globalAlpha=a;
    ctx.textAlign='center'; ctx.textBaseline='middle';
    ctx.font=`700 12.5px 'Manrope',system-ui,sans-serif`;
    ctx.fillStyle='rgba(180,20,80,1)';
    ctx.fillText(cap.title, SIZE/2, by2+16);
    // Description
    ctx.font=`500 10.5px 'Manrope',system-ui,sans-serif`;
    ctx.fillStyle='rgba(80,40,60,.85)';
    ctx.fillText(cap.desc, SIZE/2, by2+34);
    ctx.restore();
  }

  /* Glow text utility */
  function glowText(txt,x,y,alpha,sz,col){
    if(alpha<=0) return;
    ctx.save(); ctx.globalAlpha=alpha;
    ctx.textAlign='center'; ctx.textBaseline='middle';
    ctx.font=`900 ${sz}px 'Playfair Display',Georgia,serif`;
    ctx.shadowColor=col; ctx.shadowBlur=28; ctx.fillStyle=col;
    ctx.fillText(txt,x,y); ctx.shadowBlur=0; ctx.restore();
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN RENDER LOOP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     7 phases with individual durations (+1s each from original spec):
       P0 Womb Awakening     : 1.5 + 1 = 2.5s
       P1 The Journey Begins : 2.5 + 1 = 3.5s
       P2 The Race           : 2.0 + 1 = 3.0s
       P3 Miraculous Moment  : 1.5 + 1 = 2.5s
       P4 First Division     : 2.0 + 1 = 3.0s
       P5 Blastocyst Forms   : 2.0 + 1 = 3.0s
       P6 Implantationâ€”Home  : 2.5 + 1 = 3.5s
     Total = 21s loop, infinite
  */
  // Phase end times (cumulative seconds) â€” 7 phases, each +1s from original spec
  const PHASE_ENDS = [2.5, 6.0, 9.0, 11.5, 14.5, 17.5, 21.0];

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     RENDER STATE MACHINE
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     STATE = 'PLAYING'  â†’  run 0..TOTAL (21s), draw all 7 phases
     STATE = 'PAUSING'  â†’  hold the frozen last frame for 1s
     After pause ends   â†’  switch back to PLAYING, reset cycleStart

     ALL timing is based on timestamps from requestAnimationFrame.
     We never use mutable counters for the main flow â€” only
     cycleStart and pauseStart (both set from rAF timestamps).
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  const TOTAL      = 21.0;   // seconds for one full cycle
  const PAUSE_DUR  = 1.0;    // seconds to hold last frame between cycles

  let STATE       = 'PLAYING';   // 'PLAYING' | 'PAUSING'
  let cycleStart  = null;        // rAF timestamp (ms) when current cycle began
  let pauseStart  = null;        // rAF timestamp (ms) when current pause began
  let loopCount   = 0;

  // Compute which phase we're in and local progress 0â†’1
  function getPhaseAndPt(t) {
    for(let i = 0; i < PHASE_ENDS.length; i++) {
      if(t < PHASE_ENDS[i]) {
        const start = i === 0 ? 0 : PHASE_ENDS[i - 1];
        const dur   = PHASE_ENDS[i] - start;
        return { phase: i, pt: cl((t - start) / dur, 0, 1) };
      }
    }
    return { phase: 6, pt: 1 };
  }

  // When tab comes back into focus, restart cleanly
  document.addEventListener('visibilitychange', () => {
    if(!document.hidden) {
      STATE      = 'PLAYING';
      cycleStart = null;
      pauseStart = null;
    }
  });

  /* â”€â”€ Draw the frozen last frame (implantation complete) â”€â”€ */
  function drawFrozenLastFrame() {
    ctx.clearRect(0, 0, SIZE, SIZE);
    ctx.save();
    ctx.beginPath(); ctx.arc(cx, cy, R - 1, 0, PI2); ctx.clip();
    wombBg(6, 1);
    drawVilli(0, 0.78);
    drawBlastocyst(cx, cy - 52, 66, 0, 1);
    drawImplantation(cx, cy - 52, 1, 0);
    const tg = ctx.createRadialGradient(cx, cy+R*.3, 0, cx, cy+R*.3, R*.46);
    tg.addColorStop(0, 'rgba(255,255,255,0.72)');
    tg.addColorStop(1, 'rgba(255,255,255,0)');
    ctx.fillStyle = tg; ctx.fillRect(0, 0, SIZE, SIZE);
    glowText('You are becoming', cx, cy+R*.3,    0.96, 14.5, '#ad1457');
    glowText('a mother  â™¡',      cx, cy+R*.3+26, 1,    20,   '#d81b60');
    ctx.restore();
    const vig = ctx.createRadialGradient(cx,cy,R*.65,cx,cy,R);
    vig.addColorStop(0,'rgba(0,0,0,0)');
    vig.addColorStop(.88,'rgba(0,0,0,0)');
    vig.addColorStop(1,'rgba(175,65,95,.13)');
    ctx.beginPath(); ctx.arc(cx,cy,R,0,PI2);
    ctx.fillStyle=vig; ctx.fill();
  }

  /* â”€â”€ Main render function â”€â”€ */
  function render(ts) {

    /* â”€â”€â”€ STATE: PAUSING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    if(STATE === 'PAUSING') {
      if(pauseStart === null) pauseStart = ts;

      drawFrozenLastFrame();   // hold last frame visually

      if((ts - pauseStart) / 1000 >= PAUSE_DUR) {
        // Pause over â†’ begin next cycle
        STATE      = 'PLAYING';
        cycleStart = ts;       // next cycle starts right now
        pauseStart = null;
        loopCount++;
      }

      requestAnimationFrame(render);
      return;
    }

    /* â”€â”€â”€ STATE: PLAYING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    if(cycleStart === null) cycleStart = ts;   // first frame ever

    const elapsed = (ts - cycleStart) / 1000;

    // Cycle complete â†’ enter pause
    if(elapsed >= TOTAL) {
      STATE      = 'PAUSING';
      pauseStart = ts;
      drawFrozenLastFrame();   // show last frame immediately, no blank gap
      requestAnimationFrame(render);
      return;
    }

    const t             = elapsed;
    const { phase, pt } = getPhaseAndPt(t);
    setPhase(phase, loopCount);

    ctx.clearRect(0, 0, SIZE, SIZE);
    ctx.save();
    ctx.beginPath(); ctx.arc(cx, cy, R - 1, 0, PI2); ctx.clip();

    /* Background shifts colour per phase */
    wombBg(phase, pt);

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PHASE 0 â€” WOMB AWAKENING (t: 0â€“3s)
       34 villi bloom inward from wall like sea anemones
       Warm amber glow expands from centre
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    if(phase === 0){
      const v = eO(pt);
      // Amber radiance expanding
      const wb = ctx.createRadialGradient(cx,cy,0,cx,cy,R*(.2+v*.72));
      wb.addColorStop(0,`rgba(255,195,120,${v*.58})`);
      wb.addColorStop(.55,`rgba(255,168,95,${v*.28})`);
      wb.addColorStop(1,'rgba(255,168,95,0)');
      ctx.fillStyle=wb; ctx.fillRect(0,0,SIZE,SIZE);
      // All 34 villi swaying
      drawVilli(t, v);
      // Sparkling ring blooming outward
      for(let i=0;i<22;i++){
        const sa=(i/22)*PI2+t*.65;
        const sd=R*(.12+v*.52);
        const sA=v*.68*(.5+.4*Math.sin(t*4.2+i));
        ctx.beginPath(); ctx.arc(cx+Math.cos(sa)*sd,cy+Math.sin(sa)*sd,3+v*3.2,0,PI2);
        ctx.fillStyle=`rgba(255,140,178,${sA})`; ctx.fill();
      }
      // Heartbeat pulse at centre
      const pulse = .5+.5*Math.sin(t*4.8);
      const pg = ctx.createRadialGradient(cx,cy,0,cx,cy,R*.38*pulse);
      pg.addColorStop(0,`rgba(255,218,175,${pulse*.45})`);
      pg.addColorStop(1,'rgba(255,218,175,0)');
      ctx.fillStyle=pg; ctx.fillRect(0,0,SIZE,SIZE);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PHASE 1 â€” THE JOURNEY (t: 3â€“6s)
       Egg glows at centre. 8 sperm enter from periphery.
       Each has organic wobble noise + bioluminescent trail.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    if(phase === 1){
      drawVilli(t, 1);
      const eA = sm(cl(pt * 1.8, 0, 1));
      drawEgg(cx, cy, 42, .32+.2*Math.sin(t*2.2), t*1.5, eA);
      // 8 sperm swim from ~75% radius inward to egg edge
      SPERM.forEach(sp => {
        const prog = eIO(pt) * sp.spd;            // 0â†’~1 over phase
        const dist = lp(sp.sDist, 54, cl(prog,0,1));
        const wob  = Math.sin(t * sp.wSpd + sp.phOff) * sp.wAmp;
        const ang  = sp.bAng + wob;
        const sx = cx + Math.cos(ang)*dist;
        const sy = cy + Math.sin(ang)*dist;
        drawSperm(sx, sy, Math.atan2(cy-sy,cx-sx),
                  t*sp.tFreq + sp.phOff, sp.tAmp, eA, sp.col, .96);
      });
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PHASE 2 â€” THE RACE (t: 6â€“9s)
       Tails whip 1.6Ã— faster. Egg blazes golden.
       Non-winners visibly fade. One sperm reaches the egg.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    if(phase === 2){
      drawVilli(t, .78);
      drawEgg(cx, cy, 44, .72+.4*Math.sin(t*3.2), t*2.2, 1);
      SPERM.forEach(sp => {
        const prog = sp.spd * (.52 + eIO(pt)*.48);
        const dist = lp(sp.sDist, 54, cl(prog,0,1));
        const wob  = Math.sin(t * sp.wSpd*1.7 + sp.phOff) * sp.wAmp * 1.45;
        const ang  = sp.bAng + wob;
        const sx = cx + Math.cos(ang)*dist;
        const sy = cy + Math.sin(ang)*dist;
        const tPh = t * sp.tFreq * 1.62 + sp.phOff;
        // Non-winners fade after 58% of phase
        let alpha = 1;
        if(!sp.win && pt>.58) alpha = cl(1-(pt-.58)/.42,0,1);
        if(!sp.win && dist<76) alpha *= cl((dist-54)/22,0,1);
        drawSperm(sx, sy, Math.atan2(cy-sy,cx-sx),
                  tPh, sp.tAmp*1.42, alpha, sp.col, .98);
      });
      // "â†‘ accelerating" nudge text
      if(pt > .42){
        const fA = sm((pt-.42)/.58)*.72;
        ctx.save(); ctx.globalAlpha=fA;
        ctx.font='bold 10px Manrope,sans-serif'; ctx.textAlign='center';
        ctx.fillStyle='rgba(195,35,95,.85)';
        ctx.fillText('â†‘ accelerating', cx, cy-R*.5);
        ctx.restore();
      }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PHASE 3 â€” THE MIRACULOUS MOMENT (t: 9â€“12s)
       5 concentric golden shockwaves radiate outward.
       18 starburst rays explode from the union point.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    if(phase === 3){
      // First 20%: egg + winner still visible before flash
      if(pt < .2){
        const ap = pt/.2;
        drawVilli(t, 1-ap);
        drawEgg(cx, cy, 44, 1+ap*.85, t*2.5, 1);
        const ws = SPERM[0];
        const wd = lp(54, 40, ap);
        const sx = cx+Math.cos(ws.bAng)*wd, sy = cy+Math.sin(ws.bAng)*wd;
        drawSperm(sx, sy, Math.atan2(cy-sy,cx-sx),
                  t*ws.tFreq*2.2, ws.tAmp, 1-ap*.9, ws.col, 1.1);
      }
      // Shockwave erupts from 10%
      const swP = cl((pt-.08)/.9, 0, 1);
      if(swP > 0) drawShockwave(swP, t);
      // âœ¦ flash at union moment
      if(pt>.08 && pt<.48){
        const ua = sm(cl((pt-.08)/.2,0,1)) * sm(cl(1-(pt-.3)/.18,0,1));
        glowText('âœ¦', cx, cy, ua*.88, 54, 'rgba(255,225,45,1)');
      }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PHASE 4 â€” FIRST DIVISION (t: 12â€“15s)
       1 â†’ 2 â†’ 4 â†’ 8 cells. Each split: bright flash ring.
       Junction lines connect adjacent cells. Heartbeat pulses.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    if(phase === 4){
      const dp = eO(pt);
      let cellN;
      if(dp < .25)      cellN = 1;
      else if(dp < .52) cellN = 2;
      else if(dp < .78) cellN = 4;
      else              cellN = 8;

      // Bright flash rings at each division moment
      [.25, .52, .78].forEach(sp2 => {
        if(dp > sp2 && dp < sp2+.1){
          const fp = (dp-sp2)/.1;
          const fA = cl(1-fp,0,1)*.96;
          ctx.save(); ctx.globalAlpha=fA;
          ctx.beginPath(); ctx.arc(cx,cy,fp*R*.88,0,PI2);
          ctx.strokeStyle='rgba(255,220,50,1)'; ctx.lineWidth=6; ctx.stroke();
          ctx.beginPath(); ctx.arc(cx,cy,fp*R*.5,0,PI2);
          ctx.strokeStyle='rgba(255,175,70,.82)'; ctx.lineWidth=4; ctx.stroke();
          const fg=ctx.createRadialGradient(cx,cy,0,cx,cy,fp*R*.5);
          fg.addColorStop(0,`rgba(255,250,175,${fA*.55})`);
          fg.addColorStop(1,'rgba(255,250,175,0)');
          ctx.fillStyle=fg; ctx.fillRect(0,0,SIZE,SIZE);
          ctx.restore();
        }
      });

      // Cell count indicator
      ctx.save();
      ctx.font='bold 11px Manrope,sans-serif'; ctx.textAlign='center';
      ctx.globalAlpha=.82; ctx.fillStyle='rgba(155,25,85,.8)';
      ctx.fillText(`${cellN} ${cellN===1?'cell':'cells'}`, cx, cy+R*.5);
      ctx.restore();

      drawCells(cellN, 34, t*2.2, 1);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PHASE 5 â€” BLASTOCYST FORMS (t: 15â€“18s)
       Trophoblast ring of 22 cells surrounds a blue fluid
       blastocoel cavity. ICM cluster glows golden, offset.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    if(phase === 5){
      const ba = eO(pt);
      drawBlastocyst(cx, cy, 68 + ba*14, t*1.1, ba);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PHASE 6 â€” IMPLANTATION â€” HOME (t: 18â€“21s)
       Blastocyst drifts upward. 9 tendrils anchor to wall.
       Villi reawaken. "You are becoming a mother â™¡" fades in.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    if(phase === 6){
      const ia  = eO(pt);
      const bcy = cy - ia*52;   // drift toward top wall
      drawVilli(t, ia*.78);
      drawBlastocyst(cx, bcy, 66, t*.88, 1);
      drawImplantation(cx, bcy, ia, t);
      if(pt > .38){
        const ca = sm((pt-.38)/.62);
        // Soft white glow behind caption
        const tg=ctx.createRadialGradient(cx,cy+R*.3,0,cx,cy+R*.3,R*.46);
        tg.addColorStop(0,`rgba(255,255,255,${ca*.72})`);
        tg.addColorStop(1,'rgba(255,255,255,0)');
        ctx.fillStyle=tg; ctx.fillRect(0,0,SIZE,SIZE);
        glowText('You are becoming', cx, cy+R*.3,  ca*.96, 14.5, '#ad1457');
        glowText('a mother  â™¡',     cx, cy+R*.3+26, ca,    20,   '#d81b60');
      }
    }

    /* Phase caption pill drawn on top of everything */
    drawCaption(phase, pt);

    /* Ambient orbs â€” angle driven by t (no mutable state) */
    ORBS.forEach(o => {
      const ang = o.ang + t * o.spd * 60;   // drive by t, not mutation
      const ox = cx + Math.cos(ang)*o.dist + Math.sin(t*.44+o.ph)*10;
      const oy = cy + Math.sin(ang)*o.dist + Math.cos(t*.38+o.ph)*8;
      const oa = .14 + .1*Math.sin(t*.9+o.ph);
      const og = ctx.createRadialGradient(ox,oy,0,ox,oy,o.r*3.2);
      og.addColorStop(0,`hsla(${o.hue},78%,76%,${oa})`);
      og.addColorStop(1,`hsla(${o.hue},78%,76%,0)`);
      ctx.beginPath(); ctx.arc(ox,oy,o.r*3.2,0,PI2);
      ctx.fillStyle=og; ctx.fill();
    });

    ctx.restore();  // end circle clip

    // Subtle edge vignette
    const vig = ctx.createRadialGradient(cx,cy,R*.65,cx,cy,R);
    vig.addColorStop(0,'rgba(0,0,0,0)');
    vig.addColorStop(.88,'rgba(0,0,0,0)');
    vig.addColorStop(1,'rgba(175,65,95,.13)');
    ctx.beginPath(); ctx.arc(cx,cy,R,0,PI2);
    ctx.fillStyle=vig; ctx.fill();

    requestAnimationFrame(render);
  }
  requestAnimationFrame(render);
})();

/* ============================================================
   SCROLL REVEAL â€” IntersectionObserver for .reveal elements
============================================================ */
(function(){
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){ e.target.classList.add('visible'); observer.unobserve(e.target); }
    });
  },{threshold:0.08,rootMargin:'0px 0px -40px 0px'});
  document.querySelectorAll('.reveal').forEach(el=>observer.observe(el));
  // Also reveal section labels
  document.querySelectorAll('.section-label-pill, .section-heading-j, .section-sub-j').forEach((el,i)=>{
    el.classList.add('reveal'); el.style.transitionDelay=(i%3*.15)+'s'; observer.observe(el);
  });
})();
</script>
  <script>
    (function initHeaderSparkle() {
      const header = document.querySelector('.site-header');
      if (!header) return;
      header.addEventListener('mousemove', (e) => {
        const rect = header.getBoundingClientRect();
        const x = ((e.clientX - rect.left) / rect.width) * 100;
        const y = ((e.clientY - rect.top) / rect.height) * 100;
        header.style.setProperty('--mouse-x', `${x}%`);
        header.style.setProperty('--mouse-y', `${y}%`);
      });
    })();
  </script>
</body>
</html>