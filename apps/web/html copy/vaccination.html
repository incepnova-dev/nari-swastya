<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ShieldHer – Your Immunity, Your Journey</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="vaccination.css"/>
</head>
<style>

/* ================================================================
   ShieldHer — vaccination.css
   Theme: Nari Swasthya Light  (depression.html design system)
   ================================================================ */

/* ──────────── CORE VARIABLES (exact from depression.html) ──────── */
:root {
  --pink:       #ec407a;
  --deep-pink:  #d81b60;
  --lavender:   #ede7f6;
  --bg:         #faf5fb;
  --card-bg:    #ffffff;
  --text-main:  #212121;
  --text-soft:  #555;
  --border-soft:#e0e0e0;
  --chip-bg:    #f3e5f5;
  --mild:       #4caf50;
  --moderate:   #ff9800;
  --serious:    #9c27b0;
  --neuron-blue:#2196f3;
}

*{ box-sizing:border-box; margin:0; padding:0; }

/* ──────────── BASE ─────────────────────────────────────────────── */
body {
  font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background: var(--bg);
  color: var(--text-main);
  line-height:1.6;
  overflow-x:hidden;
}
h1,h2,h3,h4{ font-weight:700; }

/* ──────────── HEADER ────────────── */
.site-header{
  background:rgba(255,255,255,0.95);
  backdrop-filter:blur(24px);
  -webkit-backdrop-filter:blur(24px);
  padding:0;
  box-shadow:0 2px 24px rgba(236,64,122,0.09);
  position:sticky; top:0; z-index:1000;
  border-bottom:1px solid rgba(236,64,122,0.08);
}
.nav-container{
  max-width:1400px; margin:0 auto;
  padding:0 1.5rem;
  display:flex; justify-content:space-between; align-items:center;
  height:64px;
}
.logo{display:flex; align-items:center; gap:.65rem; flex-shrink:0;}
.logo-icon{
  width:40px; height:40px; border-radius:12px;
  background:linear-gradient(135deg,#ec407a,#ad1457);
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 4px 14px rgba(236,64,122,0.35);
  flex-shrink:0;
}
.logo-icon svg{width:22px; height:22px; fill:white;}
.logo-text{display:flex; flex-direction:column; gap:0;}
.logo-text a{
  text-decoration:none;
  font-family:'Playfair Display',serif;
  font-weight:900; font-size:1.25rem; line-height:1.1;
  background:linear-gradient(135deg,#ec407a,#ad1457);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
}
.logo-text span{
  font-size:.62rem; color:var(--text-soft);
  font-weight:500; letter-spacing:.1em; text-transform:uppercase;
}
.main-nav{display:flex; align-items:center; gap:.2rem;}
.nav-item{position:relative;}
.nav-link{
  display:flex; align-items:center; gap:.3rem;
  text-decoration:none; color:var(--text-main);
  font-weight:500; font-size:.875rem;
  padding:.55rem .75rem; border-radius:8px;
  transition:all .25s; white-space:nowrap;
  cursor:pointer; background:none; border:none; font-family:inherit;
}
.nav-link:hover,.nav-link.active{color:var(--deep-pink); background:rgba(236,64,122,0.06);}
.nav-link .chevron{font-size:.6rem; transition:transform .25s; color:var(--text-soft); margin-top:1px;}
.nav-item:hover .chevron{transform:rotate(180deg);}
.nav-dropdown{
  position:absolute; top:calc(100% + 8px); left:50%;
  transform:translateX(-50%) translateY(-6px);
  min-width:220px; background:white; border-radius:16px;
  box-shadow:0 16px 50px rgba(0,0,0,0.12),0 4px 16px rgba(236,64,122,0.1);
  border:1px solid rgba(236,64,122,0.1); padding:.5rem;
  opacity:0; pointer-events:none;
  transition:all .25s cubic-bezier(.23,1.01,.32,1); z-index:200;
}
.nav-dropdown::before{
  content:''; position:absolute; top:-6px; left:50%; transform:translateX(-50%);
  border:6px solid transparent; border-bottom-color:white; border-top:none;
  filter:drop-shadow(0 -2px 4px rgba(0,0,0,0.06));
}
.nav-item:hover .nav-dropdown,.nav-item:focus-within .nav-dropdown{
  opacity:1; pointer-events:all; transform:translateX(-50%) translateY(0);
}
.dd-item{
  display:flex; align-items:center; gap:.75rem;
  padding:.65rem .9rem; border-radius:10px;
  text-decoration:none; color:var(--text-main);
  font-size:.85rem; font-weight:500; transition:all .2s;
}
.dd-item:hover{background:rgba(236,64,122,0.07); color:var(--deep-pink); padding-left:1.1rem;}
.dd-icon{
  width:28px; height:28px; border-radius:8px;
  display:flex; align-items:center; justify-content:center;
  font-size:.8rem; flex-shrink:0;
}
.dd-sep{height:1px; background:var(--border-soft); margin:.3rem .5rem;}
.dd-has-flyout{position:relative;}
.dd-has-flyout>.dd-flyout-arrow{font-size:.6rem;color:#aaa;margin-left:auto;transition:transform .2s;}
.dd-flyout{
  display:none;position:absolute;top:0;left:calc(100% + 4px);
  min-width:190px;background:white;border-radius:12px;
  box-shadow:0 12px 36px rgba(0,0,0,0.12),0 4px 12px rgba(236,64,122,0.1);
  border:1px solid rgba(236,64,122,0.12);padding:.4rem;z-index:300;
}
.dd-has-flyout:hover>.dd-flyout,
.dd-has-flyout:focus-within>.dd-flyout{display:block;}
.dd-has-flyout:hover{background:rgba(236,64,122,0.07);color:var(--deep-pink);}
.dd-flyout .dd-item{padding:.55rem .8rem;font-size:.82rem;}
.dd-flyout .dd-item:hover{background:rgba(236,64,122,0.07);color:var(--deep-pink);padding-left:1rem;}
.nav-actions{display:flex; gap:.6rem; align-items:center;}
.btn-nav{
  padding:.46rem 1.1rem; border-radius:50px; text-decoration:none;
  font-weight:600; font-size:.82rem; transition:all .3s; border:none; cursor:pointer;
  font-family:inherit; display:inline-flex; align-items:center; gap:.4rem;
}
.btn-nav.outline{
  background:linear-gradient(135deg,#ec407a,#ad1457);
  color:#fff; box-shadow:0 4px 15px rgba(236,64,122,0.3); border:none;
}
.btn-nav.outline:hover{transform:translateY(-2px); box-shadow:0 8px 25px rgba(236,64,122,0.4); color:#fff;}
.btn-nav.primary{border:1.5px solid var(--deep-pink); color:var(--deep-pink); background:#fff; box-shadow:none;}
.btn-nav.primary:hover{background:rgba(236,64,122,0.05); border-color:var(--deep-pink);}
.hamburger{
  display:none; width:38px; height:38px; border-radius:10px;
  background:none; border:1.5px solid var(--border-soft);
  align-items:center; justify-content:center; cursor:pointer;
  flex-direction:column; gap:4px; padding:8px;
}
.hamburger span{display:block; height:2px; background:var(--text-main); border-radius:2px; transition:all .3s;}
.mobile-menu{
  display:none; position:fixed; inset:0; top:64px;
  background:rgba(255,255,255,0.98); backdrop-filter:blur(20px);
  z-index:999; padding:1.5rem; overflow-y:auto;
}
.mm-action-btn{display:inline-flex !important;}
.mobile-menu.open{display:block;}
.mm-link{
  display:flex; align-items:center; gap:.75rem;
  padding:.85rem 1rem; border-radius:12px;
  text-decoration:none; color:var(--text-main);
  font-weight:500; font-size:1rem;
  transition:all .2s; border-bottom:1px solid var(--border-soft);
}
.mm-link:hover{color:var(--deep-pink); background:rgba(236,64,122,0.05);}
.mm-section{font-size:.72rem; font-weight:700; color:var(--text-soft); text-transform:uppercase; letter-spacing:.1em; padding:.6rem 1rem .3rem;}
@media(max-width:1060px){
  .main-nav{display:none;}
  .hamburger{display:flex;}
  /* Hide both header buttons at tablet/mobile — accessible via mobile menu */
  .nav-actions .btn-nav{display:none;}
}

/* ──────────── FOOTER ────────────── */
:root{
  --bg-footer:#1e1a1e; --bg-bottom:#161316;
  --pink-primary:#e8517a; --pink-soft:#f0748e;
  --text-main-f:#c9bfc9; --text-muted-f:#7c7080;
  --divider-f:rgba(232,81,122,0.18);
  --font-display-f:'Playfair Display',Georgia,serif;
  --font-body-f:'DM Sans',sans-serif;
}
footer.ns-footer{background:var(--bg-footer); color:var(--text-main-f); font-family:var(--font-body-f); border-top:1px solid var(--divider-f);}
.footer-main{max-width:1200px; margin:0 auto; padding:56px 32px 48px; display:grid; grid-template-columns:repeat(4,1fr); gap:40px;}
.footer-col h3{font-family:var(--font-display-f); font-size:1.05rem; font-weight:600; color:var(--pink-primary); margin-bottom:18px; letter-spacing:.01em;}
.footer-col p{font-size:.875rem; line-height:1.75; color:var(--text-main-f); font-weight:300;}
.footer-col ul{list-style:none;}
.footer-col ul li{font-size:.875rem; color:var(--text-main-f); padding:5px 0; font-weight:300; position:relative; padding-left:14px; transition:color .2s;}
.footer-col ul li::before{content:''; position:absolute; left:0; top:50%; transform:translateY(-50%); width:5px; height:5px; border-radius:50%; background:var(--pink-primary); opacity:.5;}
.footer-col ul li:hover{color:var(--pink-soft);}
.disclaimer-text{font-size:.875rem; line-height:1.75; color:var(--text-main-f); font-weight:300;}
.emergency-alert{font-size:.875rem; line-height:1.7; color:var(--pink-primary); font-weight:500;}
.emergency-alert strong{font-weight:600;}
.footer-meta{border-top:1px solid var(--divider-f); max-width:1200px; margin:0 auto; padding:28px 32px; text-align:center;}
.footer-meta .meta-line{font-size:.8rem; color:var(--text-muted-f); letter-spacing:.04em; margin-bottom:10px;}
.footer-meta .meta-line .sep{color:var(--pink-primary); margin:0 6px;}
.footer-meta .tagline{font-size:.82rem; color:var(--text-muted-f); display:flex; align-items:center; justify-content:center; gap:6px;}
.footer-meta .tagline .heart{color:var(--pink-primary); font-size:1rem; animation:footerPulse 2s ease-in-out infinite;}
@keyframes footerPulse{0%,100%{transform:scale(1); opacity:1;} 50%{transform:scale(1.25); opacity:.8;}}
.footer-bottom{background:var(--bg-bottom); border-top:1px solid rgba(255,255,255,.04);}
.footer-bottom-inner{max-width:1200px; margin:0 auto; padding:22px 32px; display:flex; flex-direction:column; align-items:center; gap:10px;}
.footer-links{display:flex; gap:36px; flex-wrap:wrap; justify-content:center;}
.footer-links a{font-size:.82rem; color:var(--text-muted-f); text-decoration:none; letter-spacing:.03em; transition:color .2s;}
.footer-links a:hover{color:var(--pink-soft);}
.footer-copy{font-size:.78rem; color:var(--text-muted-f); opacity:.7; letter-spacing:.02em;}
@media(max-width:900px){.footer-main{grid-template-columns:repeat(2,1fr); gap:32px;}}
@media(max-width:540px){.footer-main{grid-template-columns:1fr; padding:40px 20px 32px;} .footer-meta{padding:20px;} .footer-bottom-inner{padding:18px 20px;} .footer-links{gap:20px;}}

/* ──────────── HERO CONSTELLATION ───────────────────────────────── */
.hero-constellation {
  position:relative;
  min-height:100vh;
  display:flex; align-items:center; justify-content:center;
  padding:3rem 1.5rem;
  background:linear-gradient(135deg,#faf5fb 0%,#e8eaf6 50%,#fce4ec 100%);
  overflow:hidden;
}

/* bg layer */
.constellation-bg{ position:absolute; inset:0; pointer-events:none; z-index:1; }

#particleCanvas {
  position:absolute; inset:0;
  width:100%; height:100%;
  opacity:.42;
}

.gradient-morph {
  position:absolute; inset:0;
  background:radial-gradient(circle at 50% 50%, rgba(236,64,122,.12) 0%, transparent 60%);
  animation:morph-pulse 8s ease-in-out infinite;
  z-index:1;
}
@keyframes morph-pulse {
  0%,100%{ opacity:.5; transform:scale(1); }
  50%    { opacity:1;   transform:scale(1.15); }
}

/* content grid */
.hero-content-wrapper {
  position:relative; z-index:2;
  max-width:1200px; margin:0 auto; width:100%;
  display:grid; grid-template-columns:1fr 1fr;
  gap:4rem; align-items:center;
}
@media(max-width:968px){
  .hero-content-wrapper{ grid-template-columns:1fr; gap:2rem; }
}

/* left col */
.hero-left{ display:flex; flex-direction:column; gap:1.5rem; }

.hero-eyebrow {
  display:inline-flex; align-items:center; gap:.5rem;
  font-size:.85rem; font-weight:600; color:var(--deep-pink);
  text-transform:uppercase; letter-spacing:.08em;
}

.pulse-dot {
  width:8px; height:8px; border-radius:50%;
  background:var(--deep-pink);
  animation:pulse-glow 2s infinite;
}
@keyframes pulse-glow {
  0%,100%{ opacity:1; transform:scale(1); box-shadow:0 0 0 0 rgba(236,64,122,.7); }
  50%    { opacity:.7; transform:scale(1.3); box-shadow:0 0 0 10px rgba(236,64,122,0); }
}

.hero-title-3d {
  font-size:clamp(2.2rem,5vw,4rem);
  font-weight:800; line-height:1.1;
  background:linear-gradient(135deg,#212121 0%,#555 100%);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
}

.title-emphasis {
  background:linear-gradient(135deg,#ec407a 0%,#d81b60 50%,#ad1457 100%);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
  display:inline-block;
  animation:title-shimmer 3s ease-in-out infinite;
  filter:drop-shadow(0 2px 8px rgba(236,64,122,.3));
}
@keyframes title-shimmer {
  0%,100%{ filter:brightness(1) drop-shadow(0 2px 8px rgba(236,64,122,.3)); }
  50%    { filter:brightness(1.3) drop-shadow(0 4px 16px rgba(236,64,122,.5)); }
}

.hero-description {
  font-size:1.1rem; line-height:1.7;
  color:var(--text-soft); max-width:48ch;
}

/* floating badges */
.badge-constellation{ display:flex; flex-wrap:wrap; gap:.8rem; }

.hero-badge-3d {
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.6rem 1.2rem; border-radius:50px;
  background:rgba(255,255,255,.85);
  backdrop-filter:blur(10px);
  border:1px solid rgba(236,64,122,.2);
  box-shadow:0 4px 15px rgba(236,64,122,.15), inset 0 1px 0 rgba(255,255,255,.6);
  font-size:.9rem; font-weight:600; color:var(--deep-pink);
  transition:all .3s cubic-bezier(.4,0,.2,1);
  animation:badge-float 4s ease-in-out infinite;
}
.hero-badge-3d:nth-child(1){ animation-delay:0s; }
.hero-badge-3d:nth-child(2){ animation-delay:.5s; }
.hero-badge-3d:nth-child(3){ animation-delay:1s; }

@keyframes badge-float {
  0%,100%{ transform:translateY(0); }
  50%    { transform:translateY(-8px); }
}
.hero-badge-3d:hover {
  transform:translateY(-3px) scale(1.05);
  box-shadow:0 8px 25px rgba(236,64,122,.25), inset 0 1px 0 rgba(255,255,255,.8);
  border-color:var(--deep-pink);
}

/* CTA btn-family-guide (exact depression.html) */
.btn-family-guide {
  display:inline-flex; align-items:center; gap:.75rem;
  margin-top:.5rem; padding:1rem 2.5rem;
  background:linear-gradient(135deg,var(--deep-pink),#f06292);
  color:#fff; border:none; border-radius:50px;
  font-weight:700; font-size:1.1rem; cursor:pointer;
  font-family:inherit;
  box-shadow:0 10px 25px rgba(216,27,96,.3);
  transition:all .3s ease;
  animation:float-btn 3s ease-in-out infinite;
}
.btn-family-guide:hover {
  transform:translateY(-3px);
  box-shadow:0 15px 35px rgba(216,27,96,.4);
}
@keyframes float-btn {
  0%,100%{ transform:translateY(0); }
  50%    { transform:translateY(-5px); }
}

/* ──────────── SHIELD CONSTELLATION (right col) ─────────────────── */
.hero-right {
  position:relative; min-height:480px;
  display:flex; align-items:center; justify-content:center;
}

.shield-constellation {
  position:relative; width:100%; max-width:440px;
  aspect-ratio:1; margin:0 auto;
  overflow:visible; /* orbs sit outside the core but inside this box */
}

/* core + pulse rings */
.shield-core {
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%);
  width:200px; height:200px; border-radius:50%;
  background:radial-gradient(circle, rgba(236,64,122,.12) 0%, transparent 70%);
  display:flex; align-items:center; justify-content:center;
  z-index:2;
}
.shield-svg{ filter:drop-shadow(0 10px 40px rgba(236,64,122,.2)); }

.core-pulse-ring {
  position:absolute; inset:-30px; border-radius:50%;
  border:2px solid rgba(236,64,122,.2);
  animation:pulse-ring 3s ease-out infinite;
}
.core-pulse-ring:nth-child(2){ animation-delay:1s; }
.core-pulse-ring:nth-child(3){ animation-delay:2s; }

@keyframes pulse-ring {
  0%  { transform:scale(.8); opacity:1; }
  100%{ transform:scale(1.5); opacity:0; }
}

/* ── PER-ORB COLOUR TOKENS ─────────────────────────────── */
.orb-hpv  { --oc:#ec407a; --oc-bg:#fce4ec; --oc-border:rgba(236,64,122,.3);  }
.orb-mmr  { --oc:#7b1fa2; --oc-bg:#f3e5f5; --oc-border:rgba(123,31,162,.3);  }
.orb-tdap { --oc:#1565c0; --oc-bg:#e3f2fd; --oc-border:rgba(21,101,192,.3);  }
.orb-flu  { --oc:#2e7d32; --oc-bg:#e8f5e9; --oc-border:rgba(46,125,50,.3);   }
.orb-hepb { --oc:#e65100; --oc-bg:#fff3e0; --oc-border:rgba(230,81,0,.3);    }
.orb-covid{ --oc:#283593; --oc-bg:#e8eaf6; --oc-border:rgba(40,53,147,.3);   }

/* vaccine orbs container */
.vaccine-orbs{ position:absolute; inset:0; pointer-events:none; }

/* base orb — fly-in then float, staggered per orb */
.vaccine-orb {
  position:absolute; width:104px; height:104px;
  cursor:pointer; pointer-events:all;
  transition:transform .3s ease;
}
.vaccine-orb:hover{ z-index:10; }

/* corner orbs: fly-in + float (translateY only) */
.orb-hpv  { animation: orb-fly-in .7s cubic-bezier(.22,1.5,.36,1) 0s   both, orb-float 4s ease-in-out 0s   infinite; }
.orb-tdap { animation: orb-fly-in .7s cubic-bezier(.22,1.5,.36,1) .24s both, orb-float 4s ease-in-out 1s   infinite; }
.orb-flu  { animation: orb-fly-in .7s cubic-bezier(.22,1.5,.36,1) .36s both, orb-float 4s ease-in-out 1.5s infinite; }
.orb-covid{ animation: orb-fly-in .7s cubic-bezier(.22,1.5,.36,1) .60s both, orb-float 4s ease-in-out 2.5s infinite; }

/* centre orbs: fly-in + float that preserves translateX(-50%) */
.orb-mmr  { animation: orb-fly-in .7s cubic-bezier(.22,1.5,.36,1) .12s both, orb-float-cx 4s ease-in-out .5s  infinite; }
.orb-hepb { animation: orb-fly-in .7s cubic-bezier(.22,1.5,.36,1) .48s both, orb-float-cx 4s ease-in-out 2s   infinite; }

/* 6-orb layout: 3-top / 3-bottom arc */
.orb-hpv  { top:4%;    left:5%;                                    }
.orb-mmr  { top:0%;    left:50%; transform:translateX(-50%);        }
.orb-tdap { top:4%;    right:5%;                                    }
.orb-flu  { bottom:8%; left:5%;                                     }
.orb-hepb { bottom:4%; left:50%; transform:translateX(-50%);        }
.orb-covid{ bottom:8%; right:5%;                                    }

/* keyframes — all outside any @media so they work on all browsers */
@keyframes orb-fly-in {
  0%  { opacity:0; transform:scale(.4) translateY(40px); }
  60% { opacity:1; }
  100%{ opacity:1; transform:scale(1)  translateY(0);    }
}
@keyframes orb-float {
  0%,100%{ transform:translateY(0);    }
  50%    { transform:translateY(-15px);}
}
@keyframes orb-float-cx {
  0%,100%{ transform:translateX(-50%) translateY(0);    }
  50%    { transform:translateX(-50%) translateY(-15px);}
}
/* small-screen variants — reduced amplitude */
@keyframes orb-float-sm {
  0%,100%{ transform:translateY(0);   }
  50%    { transform:translateY(-7px);}
}
@keyframes orb-float-sm-cx {
  0%,100%{ transform:translateX(-50%) translateY(0);   }
  50%    { transform:translateX(-50%) translateY(-7px);}
}

/* orb inner — uses colour token */
.orb-inner {
  position:relative; width:100%; height:100%; border-radius:50%;
  background:var(--oc-bg, rgba(255,255,255,.95));
  backdrop-filter:blur(10px);
  border:2px solid var(--oc-border, rgba(236,64,122,.2));
  box-shadow:0 10px 30px rgba(0,0,0,.08), inset 0 2px 0 rgba(255,255,255,.8);
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.3rem;
  transition:all .3s ease;
}
.vaccine-orb:hover .orb-inner {
  border-width:3px;
  box-shadow:0 15px 50px rgba(0,0,0,.14), inset 0 2px 0 rgba(255,255,255,1);
  background:white;
}
.orb-icon {
  font-size:1.5rem;
  color: var(--oc, var(--deep-pink));
  transition:transform .3s;
}
.vaccine-orb:hover .orb-icon{ transform:scale(1.2) rotate(10deg); }
.orb-label{
  font-size:.74rem; font-weight:700; text-align:center;
  color: var(--oc, var(--text-main));
}
.orb-glow {
  position:absolute; inset:-16px; border-radius:50%;
  background: var(--oc, var(--deep-pink));
  opacity:0; filter:blur(22px);
  transition:opacity .3s;
}
.vaccine-orb:hover .orb-glow {
  opacity:.35; animation:glow-pulse 1.5s ease-in-out infinite;
}
@keyframes glow-pulse {
  0%,100%{ transform:scale(1);   opacity:.3; }
  50%    { transform:scale(1.2); opacity:.6; }
}

/* ──────────── APP CONTAINER ────────────────────────────────────── */
.app{ position:relative; z-index:1; }
.app.hidden{ display:none; }

.page-container {
  max-width:1400px; margin:0 auto; padding:2rem 1.5rem;
}

/* ──────────── PHASE TOGGLE NAV ─────────────────────────────────── */
.section-nav-wrap{ text-align:center; margin-bottom:1.5rem; }

.phase-toggles {
  display:inline-flex; gap:.5rem;
  background:rgba(255,255,255,.6); padding:6px;
  border-radius:50px;
  box-shadow:0 4px 20px rgba(0,0,0,.08);
}
.toggle-btn {
  border:none; background:transparent;
  padding:.8rem 1.6rem; border-radius:40px;
  cursor:pointer; font-weight:600; color:#666;
  transition:all .3s ease; font-size:.92rem;
  font-family:inherit;
  display:flex; align-items:center; gap:.4rem;
}
.toggle-btn:hover{ background:rgba(236,64,122,.1); color:var(--deep-pink); }
.toggle-btn.active {
  background:linear-gradient(135deg,var(--deep-pink),#f06292);
  color:#fff;
  box-shadow:0 4px 15px rgba(216,27,96,.3);
}

/* ──────────── SCORE + PROGRESS ─────────────────────────────────── */
.score-progress-bar {
  display:flex; align-items:center; gap:1.5rem;
  background:#fff; border-radius:16px; padding:1rem 1.5rem;
  box-shadow:0 4px 20px rgba(0,0,0,.06);
  margin-bottom:2rem;
  border:1px solid rgba(236,64,122,.1);
}

.score-pill {
  display:flex; align-items:center; gap:.5rem;
  background:linear-gradient(135deg,rgba(236,64,122,.08),rgba(156,39,176,.08));
  padding:.5rem 1rem; border-radius:50px; flex-shrink:0;
}
.score-pill i{ color:var(--deep-pink); font-size:1rem; }
.score-val{ font-weight:800; font-size:1.2rem; color:var(--deep-pink); }
.score-label{ font-size:.72rem; color:var(--text-soft); text-transform:uppercase; letter-spacing:.5px; }

.progress-track-wrap{ flex:1; display:flex; align-items:center; gap:1rem; }
.progress-track{ flex:1; height:10px; background:rgba(0,0,0,.06); border-radius:5px; overflow:hidden; }
.progress-fill {
  height:100%; border-radius:5px;
  background:linear-gradient(90deg,var(--deep-pink),#f06292);
  transition:width .6s cubic-bezier(.4,0,.2,1);
  position:relative; overflow:hidden;
}
.progress-fill::after {
  content:''; position:absolute; inset:0;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.4), transparent);
  animation:shimmer 2s infinite;
}
@keyframes shimmer {
  0%  { transform:translateX(-100%); }
  100%{ transform:translateX(100%);  }
}
.progress-text{ font-weight:700; font-size:.85rem; color:var(--deep-pink); min-width:90px; text-align:right; }

/* ──────────── SECTIONS ─────────────────────────────────────────── */
.section{ display:none; }
.section.active{ display:block; animation:fade-in-up .4s ease forwards; }

@keyframes fade-in-up {
  from{ opacity:0; transform:translateY(20px); }
  to  { opacity:1; transform:translateY(0);    }
}

.section-header{ text-align:center; margin-bottom:2rem; }
.section-title {
  font-size:clamp(1.8rem,3.5vw,2.6rem); font-weight:800;
  background:linear-gradient(135deg,#212121 0%,#555 100%);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
  margin-bottom:.6rem;
}
.section-subtitle{ font-size:1rem; color:var(--text-soft); max-width:56ch; margin:0 auto; }

/* ──────────── AGE WHEEL ────────────────────────────────────────── */
.age-wheel {
  display:flex; flex-wrap:wrap; justify-content:center;
  gap:1rem; max-width:900px; margin:0 auto 1rem;
}

.age-card {
  position:relative; background:var(--card-bg);
  border-radius:20px; padding:1.2rem 1rem 1rem;
  box-shadow:0 8px 30px rgba(0,0,0,.06);
  border:1px solid rgba(0,0,0,.05);
  cursor:pointer; text-align:center; width:115px;
  transition:all .35s cubic-bezier(.4,0,.2,1);
  overflow:hidden;
}
.age-card::before {
  content:''; position:absolute; top:0; left:0; right:0; height:4px;
  background:linear-gradient(90deg,var(--deep-pink),#f06292);
  opacity:0; transition:opacity .3s;
}
.age-card:hover{ transform:translateY(-6px) scale(1.03); box-shadow:0 16px 45px rgba(0,0,0,.1); }
.age-card:hover::before{ opacity:1; }

.age-card.active {
  border-color:var(--deep-pink);
  background:linear-gradient(135deg,rgba(236,64,122,.06),rgba(156,39,176,.06));
  box-shadow:0 8px 30px rgba(236,64,122,.18);
}
.age-card.active::before{ opacity:1; }

.age-emoji{ font-size:1.9rem; display:block; margin-bottom:.4rem; }
.age-label{ font-size:.72rem; font-weight:600; color:var(--text-soft); }
.age-card.active .age-label{ color:var(--deep-pink); }

.selected-stage-label{ text-align:center; font-size:.82rem; color:var(--text-soft); font-style:italic; margin-bottom:.5rem; }

/* ──────────── BODY VIZ CONTAINER (depression.html grid) ────────── */
.body-viz-container {
  display:grid;
  grid-template-columns:1fr 1.4fr;
  gap:2.5rem; margin-top:1rem; align-items:start;
}
@media(max-width:900px){ .body-viz-container{ grid-template-columns:1fr; } }

/* left: silhouette */
.body-silhouette{ position:relative; width:100%; max-width:320px; margin:0 auto; }
.body-svg{ width:100%; height:auto; }

.hotspot{ cursor:pointer; transition:opacity .2s; }
.hotspot:hover{ opacity:.6; }

.glow-zone{ transition:opacity .4s; pointer-events:none; }
.glow-zone.active{ opacity:1 !important; animation:glowPulse 2.2s ease-in-out infinite; }
@keyframes glowPulse {
  0%,100%{ opacity:.5; }
  50%    { opacity:1;   }
}

.shield-badge{ animation:shieldFloat 3s ease-in-out infinite; }
@keyframes shieldFloat {
  0%,100%{ transform:translateY(0); }
  50%    { transform:translateY(-3px); }
}

/* orbit cards */
.orbit-cards-wrap{ position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; }
.orbit-item {
  position:absolute; width:78px; height:78px; border-radius:50%;
  background:rgba(255,255,255,.95); backdrop-filter:blur(8px);
  border:2px solid rgba(236,64,122,.2);
  box-shadow:0 6px 20px rgba(0,0,0,.1), inset 0 1px 0 rgba(255,255,255,.8);
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:3px;
  pointer-events:auto; cursor:pointer; z-index:2;
  transition:all .3s cubic-bezier(.4,0,.2,1);
}
.orbit-item:hover {
  transform:scale(1.18);
  border-color:var(--deep-pink);
  box-shadow:0 10px 35px rgba(236,64,122,.3), inset 0 1px 0 rgba(255,255,255,1);
}
.oi-emoji{ font-size:1.5rem; }
.oi-label{ font-size:.56rem; font-weight:600; color:var(--text-soft); text-align:center; line-height:1.2; max-width:62px; }

/* ──────────── BODY INFO PANEL + SCAN (depression.html exact) ───── */
.body-info-panel {
  background:#fff; border-radius:24px; padding:2rem;
  box-shadow:0 15px 50px rgba(0,0,0,.08);
  border:1px solid rgba(0,0,0,.05);
  min-height:440px; position:relative; overflow:hidden;
}

/* SCAN OVERLAY BEAM */
.scan-overlay {
  position:absolute; top:0; left:0; width:100%; height:100%;
  background:linear-gradient(to bottom, transparent, rgba(236,64,122,.18), transparent);
  transform:translateY(-100%);
  transition:none; pointer-events:none; z-index:5;
}
.scan-overlay.scanning{ animation:scan-down 1s ease-in-out; }
@keyframes scan-down {
  0%  { transform:translateY(-100%); }
  100%{ transform:translateY(100%);  }
}

/* empty state */
.info-empty-state {
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  height:100%; min-height:360px; text-align:center;
}
.info-empty-icon{ font-size:2.5rem; color:var(--deep-pink); opacity:.35; margin-bottom:1rem; }
.info-empty-title{ font-size:1rem; font-weight:600; color:var(--text-main); opacity:.45; margin-bottom:.3rem; }
.info-empty-sub{ font-size:.82rem; color:var(--text-soft); opacity:.4; }

/* info content */
.info-content{ display:none; animation:fade-in-up .4s ease forwards; position:relative; z-index:2; }
.info-content.active{ display:block; }

.info-header {
  display:flex; align-items:center; gap:1rem;
  margin-bottom:1.5rem;
  border-bottom:2px solid var(--bg); padding-bottom:1rem;
}
.info-icon-large {
  width:60px; height:60px;
  background:linear-gradient(135deg,var(--deep-pink),#f06292);
  color:#fff; border-radius:16px;
  display:flex; align-items:center; justify-content:center;
  font-size:1.8rem;
  box-shadow:0 10px 20px rgba(233,30,99,.2); flex-shrink:0;
}
.info-title h3{ margin:0; font-size:1.4rem; color:var(--text-main); }
.info-subtitle{ color:var(--text-soft); font-size:.9rem; }

/* ──────────── VACCINE CARDS (inside panel) ─────────────────────── */
.detail-vaccines{ display:flex; flex-direction:column; gap:.75rem; }

.vax-card {
  background:var(--bg); border:1px solid rgba(0,0,0,.06);
  border-radius:14px; padding:1rem 1.1rem;
  cursor:pointer; transition:all .3s ease;
  position:relative; overflow:hidden;
}
.vax-card::before {
  content:''; position:absolute; left:0; top:0; bottom:0; width:4px;
  background:linear-gradient(180deg,var(--deep-pink),#f06292);
  border-radius:0 4px 4px 0;
}
.vax-card:hover {
  background:#fff;
  box-shadow:0 6px 20px rgba(236,64,122,.1);
  border-color:rgba(236,64,122,.25);
  transform:translateX(4px);
}

.vax-card-header{ display:flex; align-items:center; gap:.75rem; }
.vax-card-emoji{ font-size:1.4rem; }
.vax-card-name{ font-weight:600; font-size:.92rem; color:var(--text-main); }
.vax-card-target{ font-size:.72rem; color:var(--text-soft); }
.vax-card-chevron{ margin-left:auto; color:var(--text-soft); font-size:.75rem; transition:transform .25s; }
.vax-card.expanded .vax-card-chevron{ transform:rotate(180deg); }

.vax-card-body{ max-height:0; overflow:hidden; transition:max-height .4s ease, padding .25s; }
.vax-card.expanded .vax-card-body{ max-height:280px; padding-top:.8rem; }

.vax-stat{ display:flex; align-items:center; gap:.5rem; margin:.3rem 0; }
.vax-stat-dot{ width:7px; height:7px; border-radius:50%; background:var(--mild); flex-shrink:0; }
.vax-stat-dot.warn{ background:var(--moderate); }
.vax-stat-text{ font-size:.78rem; color:var(--text-soft); line-height:1.5; }

/* ──────────── MYTHS ────────────────────────────────────────────── */
.myth-cards-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(280px,1fr));
  gap:1rem; margin-bottom:2rem;
}

.myth-card{ perspective:800px; height:200px; cursor:pointer; }
.myth-card-inner {
  width:100%; height:100%; border-radius:20px;
  position:relative; transform-style:preserve-3d;
  transition:transform .55s cubic-bezier(.4,0,.2,1);
}
.myth-card.flipped .myth-card-inner{ transform:rotateY(180deg); }

.myth-card-front, .myth-card-back {
  position:absolute; inset:0; border-radius:20px;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  padding:1.4rem; text-align:center; backface-visibility:hidden;
}

.myth-card-front {
  background:var(--card-bg);
  border:1px solid rgba(0,0,0,.06);
  box-shadow:0 8px 30px rgba(0,0,0,.06);
  transition:all .3s ease;
}
.myth-card:hover .myth-card-front {
  transform:translateY(-4px);
  box-shadow:0 16px 45px rgba(236,64,122,.12);
  border-color:rgba(236,64,122,.25);
}
.myth-icon{ font-size:1.8rem; margin-bottom:.5rem; }
.myth-text{ font-size:.82rem; color:var(--text-main); font-weight:500; line-height:1.5; }
.myth-tap{ font-size:.65rem; color:var(--text-soft); margin-top:.6rem; opacity:.6; }

.myth-card-back{ transform:rotateY(180deg); color:#fff; }
.myth-card-back.is-myth{ background:linear-gradient(135deg,#c62828,#b71c1c); }
.myth-card-back.is-fact{ background:linear-gradient(135deg,#2e7d32,#1b5e20); }
.myth-verdict{ font-size:1.05rem; font-weight:700; margin-bottom:.5rem; }
.myth-explain{ font-size:.74rem; line-height:1.55; opacity:.9; }

.myth-stats{ display:flex; justify-content:center; gap:3rem; margin-top:1.5rem; }
.myth-stat{ text-align:center; }
.myth-stat-num{ display:block; font-size:1.7rem; font-weight:800; color:var(--deep-pink); }
.myth-stat-label{ font-size:.7rem; color:var(--text-soft); text-transform:uppercase; letter-spacing:.8px; }

/* ──────────── QUIZ ─────────────────────────────────────────────── */
.quiz-container{ max-width:600px; margin:0 auto; }

.quiz-progress-bar{ height:6px; background:rgba(0,0,0,.06); border-radius:3px; margin-bottom:2rem; overflow:hidden; }
.quiz-progress-fill {
  height:100%; background:linear-gradient(90deg,var(--deep-pink),#f06292);
  border-radius:3px; transition:width .4s ease;
}

.quiz-number{ font-size:.72rem; color:var(--text-soft); text-transform:uppercase; letter-spacing:1px; margin-bottom:.6rem; font-weight:600; }
.quiz-question{ font-size:1.15rem; font-weight:700; color:var(--text-main); margin-bottom:1.2rem; line-height:1.5; }

.quiz-options{ display:flex; flex-direction:column; gap:.65rem; }
.quiz-option {
  padding:.9rem 1.1rem; border-radius:14px;
  background:var(--card-bg); border:1.5px solid rgba(0,0,0,.08);
  color:var(--text-main); font-size:.9rem; cursor:pointer;
  transition:all .25s ease; text-align:left;
  display:flex; align-items:center; gap:.7rem;
  font-family:inherit;
  box-shadow:0 2px 8px rgba(0,0,0,.04);
}
.quiz-option:hover {
  border-color:var(--deep-pink);
  background:rgba(236,64,122,.04);
  box-shadow:0 4px 16px rgba(236,64,122,.12);
}

.opt-letter {
  width:30px; height:30px; border-radius:50%;
  background:rgba(236,64,122,.08);
  display:flex; align-items:center; justify-content:center;
  font-size:.72rem; font-weight:700; color:var(--deep-pink); flex-shrink:0;
}

.quiz-option.correct{ border-color:var(--mild); background:rgba(76,175,80,.08); }
.quiz-option.correct .opt-letter{ background:var(--mild); color:#fff; }
.quiz-option.wrong{ border-color:#e53935; background:rgba(229,57,53,.08); }
.quiz-option.wrong .opt-letter{ background:#e53935; color:#fff; }
.quiz-option.disabled{ pointer-events:none; opacity:.45; }
.quiz-option.correct.disabled{ opacity:1; }

.quiz-result-wrap{ text-align:center; }
.quiz-result-wrap.hidden{ display:none; }
.quiz-result-icon{ font-size:3.5rem; margin-bottom:.5rem; }
.quiz-result-title{ font-size:1.5rem; color:var(--text-main); margin-bottom:.4rem; }
.quiz-result-score{ color:var(--text-soft); margin-bottom:1.5rem; font-size:.95rem; }
.quiz-restart-btn {
  padding:.75rem 2rem; border-radius:50px; border:none;
  background:linear-gradient(135deg,var(--deep-pink),#f06292);
  color:#fff; font-size:.95rem; font-weight:600; cursor:pointer;
  font-family:inherit;
  box-shadow:0 6px 20px rgba(216,27,96,.3);
  transition:all .3s ease;
}
.quiz-restart-btn:hover{ transform:translateY(-2px) scale(1.04); box-shadow:0 10px 30px rgba(216,27,96,.4); }

/* ──────────── PLANNER ──────────────────────────────────────────── */
.planner-age-select{ text-align:center; margin-bottom:1.8rem; }
.planner-age-chips{ display:flex; flex-wrap:wrap; justify-content:center; gap:.5rem; }

.age-chip {
  padding:.55rem 1rem; border-radius:50px;
  border:1.5px solid var(--border-soft); background:#fff;
  color:var(--text-soft); font-size:.8rem; font-weight:600;
  cursor:pointer; transition:all .3s ease; font-family:inherit;
  box-shadow:0 2px 8px rgba(0,0,0,.04);
}
.age-chip:hover{ border-color:var(--deep-pink); color:var(--deep-pink); }
.age-chip.active {
  background:var(--deep-pink); color:#fff; border-color:var(--deep-pink);
  box-shadow:0 4px 15px rgba(216,27,96,.3);
}

/* timeline */
.planner-timeline{ position:relative; padding-left:2rem; margin-bottom:2rem; }
.planner-timeline::before {
  content:''; position:absolute; left:9px; top:0; bottom:0; width:3px;
  background:linear-gradient(180deg,var(--deep-pink),#f06292,var(--serious));
  border-radius:2px;
}

.timeline-item{ position:relative; margin-bottom:1.1rem; animation:fade-in-up .35s ease both; }
.timeline-item::before {
  content:''; position:absolute;
  left:-1.55rem; top:.75rem;
  width:13px; height:13px; border-radius:50%;
  background:var(--deep-pink); border:3px solid #fff;
  box-shadow:0 0 0 2px var(--deep-pink), 0 2px 8px rgba(236,64,122,.35);
}

.timeline-card {
  background:#fff; border:1px solid rgba(0,0,0,.06);
  border-radius:14px; padding:.85rem 1rem;
  box-shadow:0 4px 15px rgba(0,0,0,.05);
  transition:all .3s ease;
}
.timeline-card:hover {
  transform:translateX(4px);
  box-shadow:0 6px 25px rgba(236,64,122,.1);
  border-color:rgba(236,64,122,.2);
}
.tl-time{ font-size:.68rem; color:var(--deep-pink); font-weight:700; text-transform:uppercase; letter-spacing:.6px; margin-bottom:.2rem; }
.tl-name{ font-size:.88rem; font-weight:600; color:var(--text-main); margin-bottom:.2rem; }
.tl-desc{ font-size:.76rem; color:var(--text-soft); line-height:1.5; }

/* checklist */
.planner-checklist-wrap{ margin-top:.5rem; }
.planner-checklist-title{ font-size:1rem; color:var(--text-main); margin-bottom:.8rem; }
.planner-checklist{ display:flex; flex-direction:column; gap:.45rem; }

.checklist-item {
  display:flex; align-items:center; gap:.7rem;
  padding:.7rem .9rem; background:#fff;
  border:1px solid rgba(0,0,0,.06); border-radius:12px;
  cursor:pointer; transition:all .25s ease;
  box-shadow:0 2px 8px rgba(0,0,0,.04);
}
.checklist-item:hover{ border-color:rgba(236,64,122,.2); background:rgba(236,64,122,.02); }
.checklist-item.done{ opacity:.5; }
.checklist-item.done .cl-check{ background:var(--mild); border-color:var(--mild); }
.checklist-item.done .cl-check::after{ content:'✓'; color:#fff; font-size:.7rem; font-weight:700; }

.cl-check {
  width:22px; height:22px; border-radius:6px;
  border:2px solid var(--border-soft); flex-shrink:0;
  display:flex; align-items:center; justify-content:center;
  transition:all .2s; background:#fff;
}
.cl-text{ font-size:.82rem; color:var(--text-main); flex:1; }
.cl-age{ font-size:.68rem; color:var(--text-soft); font-weight:600; flex-shrink:0; }

/* ──────────── TOAST ────────────────────────────────────────────── */
.toast {
  position:fixed; bottom:1.8rem; left:50%;
  transform:translateX(-50%) translateY(100px);
  background:#fff; border:1px solid rgba(236,64,122,.15);
  border-radius:50px; padding:.7rem 1.5rem;
  display:flex; align-items:center; gap:.6rem;
  color:var(--text-main); font-size:.82rem; font-weight:600;
  box-shadow:0 8px 35px rgba(0,0,0,.12);
  transition:transform .4s cubic-bezier(.4,0,.2,1);
  z-index:500; white-space:nowrap;
}
.toast.show{ transform:translateX(-50%) translateY(0); }
.toast-icon{ font-size:1rem; }

/* ──────────── RESPONSIVE ───────────────────────────────────────── */

/* ── 1024px: tablet landscape ── */
@media(max-width:1024px){
  .page-container{ padding:1.75rem 1.25rem; }
  .hero-content-wrapper{ gap:2.5rem; }
  .body-viz-container{ gap:1.75rem; }
  .phase-toggles{ gap:.35rem; }
  .toggle-btn{ padding:.7rem 1.2rem; font-size:.86rem; }
}

/* ── 968px: stacked hero ── */
@media(max-width:968px){
  /* hero */
  .hero-constellation{ padding:2.5rem 1.25rem 3rem; min-height:auto; }
  .hero-left{ gap:1.25rem; align-items:center; text-align:center; }
  .hero-description{ max-width:52ch; margin:0 auto; }
  .badge-constellation{ justify-content:center; }
  .btn-family-guide{ align-self:center; }
  /* shield visual */
  .hero-right{ min-height:360px; }
  .shield-constellation{ max-width:340px; }
  .vaccine-orb{ width:88px; height:88px; }
  .orb-hpv  { top:4%;    left:4%;  }
  .orb-mmr  { top:0%;    left:50%; }
  .orb-tdap { top:4%;    right:4%; }
  .orb-flu  { bottom:7%; left:4%;  }
  .orb-hepb { bottom:3%; left:50%; }
  .orb-covid{ bottom:7%; right:4%; }
}

/* ── 768px: tablet portrait ── */
@media(max-width:768px){
  /* hero */
  .hero-constellation{ padding:2rem 1rem 2.5rem; }
  .hero-title-3d{ font-size:clamp(1.9rem,5.5vw,2.8rem); }
  .hero-description{ font-size:1rem; }
  .hero-badge-3d{ padding:.5rem 1rem; font-size:.82rem; }
  .btn-family-guide{ padding:.9rem 2rem; font-size:1rem; }

  /* right visual smaller */
  .hero-right{ min-height:300px; }
  .shield-constellation{ max-width:280px; }
  .vaccine-orb{ width:76px; height:76px; }
  .orb-icon{ font-size:1.3rem; }
  .orb-label{ font-size:.66rem; }
  .orb-hpv  { top:4%;    left:3%;  }
  .orb-mmr  { top:0%;    left:50%; }
  .orb-tdap { top:4%;    right:3%; }
  .orb-flu  { bottom:7%; left:3%;  }
  .orb-hepb { bottom:3%; left:50%; }
  .orb-covid{ bottom:7%; right:3%; }
  /* app nav */
  .section-nav-wrap{ overflow-x:auto; -webkit-overflow-scrolling:touch; padding-bottom:.25rem; }
  .phase-toggles{
    display:flex; flex-wrap:nowrap; min-width:max-content;
    gap:.3rem; padding:5px;
  }
  .toggle-btn{ padding:.65rem 1rem; font-size:.8rem; white-space:nowrap; }

  /* score bar */
  .score-progress-bar{ flex-direction:column; align-items:stretch; gap:.75rem; padding:.9rem 1.1rem; }
  .progress-track-wrap{ flex-direction:column; gap:.4rem; }
  .progress-text{ text-align:left; min-width:auto; }

  /* age wheel */
  .age-wheel{ gap:.6rem; }
  .age-card{ width:100px; padding:1rem .7rem .8rem; }
  .age-emoji{ font-size:1.65rem; }
  .age-label{ font-size:.68rem; }

  /* body viz — stack */
  .body-viz-container{ grid-template-columns:1fr; gap:1.5rem; }
  .body-silhouette{ max-width:260px; }
  .body-info-panel{ min-height:340px; padding:1.5rem; }

  /* orbit items — shrink slightly */
  .orbit-item{ width:66px; height:66px; }
  .oi-emoji{ font-size:1.3rem; }
  .oi-label{ font-size:.5rem; }

  /* myths */
  .myth-cards-grid{ grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:.85rem; }
  .myth-card{ height:185px; }
  .myth-stats{ gap:2rem; }

  /* quiz */
  .quiz-container{ max-width:100%; }
  .quiz-question{ font-size:1.05rem; }
  .quiz-option{ padding:.8rem 1rem; font-size:.88rem; }

  /* planner */
  .planner-age-chips{ gap:.4rem; }
  .age-chip{ padding:.5rem .85rem; font-size:.78rem; }
  .planner-timeline{ padding-left:1.6rem; }
  .timeline-card{ padding:.75rem .9rem; }

  /* scheduler modal */
  .scheduler-modal-content{ width:96%; max-height:96vh; border-radius:18px; }
  .scheduler-header{ padding:1.75rem 1.25rem 1.5rem; }
  .scheduler-header h2{ font-size:1.4rem; }
  .scheduler-subtitle{ font-size:.9rem; }
  .scheduler-body{ padding:1.25rem; }
  .scheduler-icon{ width:64px; height:64px; font-size:2rem; }
  .step-title{ font-size:1.25rem; }
  .step-desc{ font-size:.9rem; margin-bottom:1.5rem; }
  .checkbox-group{ grid-template-columns:1fr; }
  .vaccine-info-grid{ grid-template-columns:1fr; }
  .schedule-item{ flex-direction:column; gap:1rem; }
  .schedule-date{ align-self:flex-start; padding:.75rem 1rem; min-width:auto; }
  .scheduler-nav{ flex-direction:column; gap:.75rem; }
  .scheduler-btn-primary,.scheduler-btn-secondary{ width:100%; justify-content:center; }
  .vaccines-filter{ gap:.4rem; }
  .filter-tag{ padding:.45rem .85rem; font-size:.8rem; }

  /* section titles */
  .section-title{ font-size:clamp(1.6rem,4vw,2.2rem); }
  .section-subtitle{ font-size:.92rem; }

  /* footer */
  .footer-main{ grid-template-columns:repeat(2,1fr); gap:28px; }
}

/* ── 600px: large mobile ── */
@media(max-width:600px){
  /* hero */
  .hero-constellation{ padding:1.75rem .875rem 2rem; }
  .hero-title-3d{ font-size:2rem; }
  .hero-eyebrow{ font-size:.78rem; }
  .hero-description{ font-size:.95rem; }
  .badge-constellation{ gap:.5rem; }
  .hero-badge-3d{ padding:.45rem .85rem; font-size:.78rem; gap:.35rem; }

  /* hide right visual on very small screens — it overlaps */
  .hero-right{ min-height:240px; }
  .shield-constellation{ max-width:230px; }
  .vaccine-orb{ width:64px; height:64px; }
  .orb-icon{ font-size:1.2rem; }
  .orb-label{ display:none; }
  .orb-hpv  { top:3%;    left:2%;  }
  .orb-mmr  { top:0%;    left:50%; }
  .orb-tdap { top:3%;    right:2%; }
  .orb-flu  { bottom:6%; left:2%;  }
  .orb-hepb { bottom:2%; left:50%; }
  .orb-covid{ bottom:6%; right:2%; }
  /* switch corner orbs to smaller float amplitude */
  .orb-hpv, .orb-tdap, .orb-flu, .orb-covid {
    animation-name: orb-fly-in, orb-float-sm;
  }
  .orb-mmr, .orb-hepb {
    animation-name: orb-fly-in, orb-float-sm-cx;
  }

  /* phase toggles — horizontally scrollable pill strip */
  .toggle-btn{ padding:.6rem .9rem; font-size:.78rem; }

  /* age cards */
  .age-card{ width:95px; padding:1rem .6rem .8rem; }
  .age-emoji{ font-size:1.5rem; }

  /* body map */
  .body-silhouette{ max-width:220px; }
  .body-info-panel{ padding:1.2rem; border-radius:18px; }
  .info-icon-large{ width:48px; height:48px; font-size:1.5rem; border-radius:12px; }
  .info-title h3{ font-size:1.15rem; }
  .info-subtitle{ font-size:.8rem; }

  /* myths */
  .myth-cards-grid{ grid-template-columns:1fr; gap:.75rem; }
  .myth-card{ height:175px; }
  .myth-stat-num{ font-size:1.4rem; }
  .myth-stats{ gap:1.5rem; margin-top:1.25rem; }

  /* planner */
  .planner-age-chips{ gap:.35rem; }
  .age-chip{ padding:.45rem .75rem; font-size:.75rem; }
  .checklist-item{ padding:.6rem .75rem; }
  .cl-text{ font-size:.8rem; }
  .cl-age{ font-size:.65rem; }

  /* score bar */
  .score-pill{ padding:.45rem .85rem; }
  .score-val{ font-size:1.05rem; }

  /* quiz */
  .opt-letter{ width:26px; height:26px; font-size:.68rem; }

  /* scheduler modal */
  .scheduler-modal-content{ width:100%; max-height:100vh; border-radius:0; }
  .scheduler-close{ top:1rem; right:1rem; }
  .scheduler-header{ padding:1.5rem 1rem 1.25rem; }
  .scheduler-header h2{ font-size:1.25rem; }
  .scheduler-body{ padding:1rem; }
  .form-input,.form-select{ padding:.8rem .9rem; font-size:.9rem; }
  .schedule-day{ font-size:1.5rem; }
  .schedule-vaccine{ font-size:1rem; }
  .schedule-desc{ font-size:.85rem; }
  .schedule-tags{ gap:.4rem; }
  .important-notes{ padding:1.1rem; }
  .precaution-item{ padding:.85rem; }
  .precaution-title{ font-size:.9rem; }
  .precaution-desc{ font-size:.8rem; }

  /* section header */
  .section-header{ margin-bottom:1.5rem; }
  .section-title{ font-size:1.6rem; }

  /* page container */
  .page-container{ padding:1.25rem .875rem; }

  /* footer */
  .footer-main{ grid-template-columns:1fr; padding:36px 18px 28px; gap:24px; }
  .footer-meta{ padding:18px; }
  .footer-bottom-inner{ padding:16px 18px; }
  .footer-links{ gap:18px; }
}

/* ── 400px: small mobile ── */
@media(max-width:400px){
  .hero-constellation{ padding:1.5rem .75rem 1.75rem; }
  .hero-title-3d{ font-size:1.75rem; }
  .btn-family-guide{ padding:.8rem 1.6rem; font-size:.95rem; }
  .age-card{ width:82px; font-size:.65rem; }
  .age-emoji{ font-size:1.35rem; }
  .phase-toggles{ gap:.2rem; }
  .toggle-btn{ padding:.55rem .75rem; font-size:.74rem; }
  .body-silhouette{ max-width:190px; }
  .body-info-panel{ padding:1rem; }
  .myth-card{ height:165px; }
  .myth-text{ font-size:.78rem; }
  .quiz-question{ font-size:1rem; }
  .quiz-option{ font-size:.84rem; padding:.7rem .9rem; }
  .scheduler-icon{ width:54px; height:54px; font-size:1.7rem; }
  .score-progress-bar{ padding:.75rem 1rem; }
}

/* ================================================================
   VACCINE SCHEDULER MODAL STYLES
   ================================================================ */

.scheduler-modal {
  display:none;
  position:fixed;
  z-index:2000;
  left:0; top:0;
  width:100%; height:100%;
  background:rgba(33,33,33,.75);
  backdrop-filter:blur(8px);
  align-items:center;
  justify-content:center;
  animation:fadeIn .3s ease;
}

.scheduler-modal.active {
  display:flex;
}

.scheduler-modal-content {
  background:var(--card-bg);
  width:90%;
  max-width:900px;
  max-height:90vh;
  border-radius:24px;
  box-shadow:0 25px 60px rgba(0,0,0,.3);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  position:relative;
  animation:slideUp .4s cubic-bezier(.4,0,.2,1);
}

@keyframes slideUp {
  from { opacity:0; transform:translateY(30px); }
  to { opacity:1; transform:translateY(0); }
}

.scheduler-close {
  position:absolute;
  top:1.5rem; right:1.5rem;
  background:rgba(0,0,0,.05);
  border:none;
  font-size:1.3rem;
  cursor:pointer;
  color:var(--text-soft);
  width:40px; height:40px;
  border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  transition:all .3s;
  z-index:10;
}

.scheduler-close:hover {
  background:rgba(0,0,0,.1);
  transform:rotate(90deg);
}

.scheduler-header {
  background:linear-gradient(135deg, var(--deep-pink), #f06292);
  padding:2.5rem 2rem 2rem;
  text-align:center;
  color:white;
  position:relative;
}

.scheduler-icon {
  width:80px; height:80px;
  background:rgba(255,255,255,.2);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:0 auto 1rem;
  font-size:2.5rem;
  border:3px solid rgba(255,255,255,.3);
  animation:pulse-icon 2s infinite;
}

@keyframes pulse-icon {
  0%,100% { transform:scale(1); box-shadow:0 0 0 0 rgba(255,255,255,.7); }
  50% { transform:scale(1.05); box-shadow:0 0 0 15px rgba(255,255,255,0); }
}

.scheduler-header h2 {
  font-size:2rem;
  margin-bottom:.5rem;
  font-weight:800;
}

.scheduler-subtitle {
  font-size:1rem;
  opacity:.9;
}

.scheduler-body {
  padding:2rem;
  overflow-y:auto;
  flex:1;
}

/* Steps */
.scheduler-step {
  display:none;
}

.scheduler-step.active {
  display:block;
  animation:fadeInSlide .4s ease;
}

@keyframes fadeInSlide {
  from { opacity:0; transform:translateX(20px); }
  to { opacity:1; transform:translateX(0); }
}

.step-title {
  font-size:1.5rem;
  color:var(--text-main);
  margin-bottom:.5rem;
  font-weight:700;
}

.step-desc {
  color:var(--text-soft);
  margin-bottom:2rem;
  font-size:1rem;
}

/* Form Styles */
.profile-form {
  display:flex;
  flex-direction:column;
  gap:1.5rem;
  margin-bottom:2rem;
}

.form-group {
  display:flex;
  flex-direction:column;
  gap:.5rem;
}

.form-group label {
  font-weight:600;
  color:var(--text-main);
  font-size:.95rem;
  display:flex;
  align-items:center;
  gap:.5rem;
}

.form-group label i {
  color:var(--deep-pink);
  font-size:.9rem;
}

.form-input, .form-select {
  padding:.9rem 1.1rem;
  border:2px solid var(--border-soft);
  border-radius:12px;
  font-size:.95rem;
  font-family:inherit;
  color:var(--text-main);
  background:white;
  transition:all .3s;
}

.form-input:focus, .form-select:focus {
  outline:none;
  border-color:var(--deep-pink);
  box-shadow:0 0 0 4px rgba(236,64,122,.1);
}

.age-input-group {
  display:flex;
  align-items:center;
  gap:.8rem;
  position:relative;
}

.age-input-group .form-input {
  flex:1;
}

.input-unit {
  color:var(--text-soft);
  font-weight:600;
  font-size:.9rem;
}

.checkbox-group {
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));
  gap:.7rem;
}

.checkbox-label {
  display:flex;
  align-items:center;
  gap:.6rem;
  padding:.7rem;
  border:1px solid var(--border-soft);
  border-radius:8px;
  cursor:pointer;
  transition:all .3s;
  font-weight:500;
  font-size:.9rem;
}

.checkbox-label:hover {
  border-color:var(--deep-pink);
  background:rgba(236,64,122,.03);
}

.checkbox-label input[type="checkbox"] {
  width:18px;
  height:18px;
  cursor:pointer;
  accent-color:var(--deep-pink);
}

/* Buttons */
.scheduler-btn-primary, .scheduler-btn-secondary {
  padding:1rem 2rem;
  border-radius:50px;
  font-weight:600;
  font-size:.95rem;
  cursor:pointer;
  border:none;
  transition:all .3s;
  display:inline-flex;
  align-items:center;
  gap:.7rem;
  font-family:inherit;
}

.scheduler-btn-primary {
  background:linear-gradient(135deg, var(--deep-pink), #f06292);
  color:white;
  box-shadow:0 6px 20px rgba(236,64,122,.3);
}

.scheduler-btn-primary:hover {
  transform:translateY(-2px);
  box-shadow:0 10px 30px rgba(236,64,122,.4);
}

.scheduler-btn-secondary {
  background:white;
  border:2px solid var(--border-soft);
  color:var(--text-main);
}

.scheduler-btn-secondary:hover {
  border-color:var(--deep-pink);
  color:var(--deep-pink);
}

.scheduler-nav {
  display:flex;
  justify-content:space-between;
  gap:1rem;
  margin-top:2rem;
}

/* Vaccine List */
.vaccines-filter {
  display:flex;
  gap:.6rem;
  margin-bottom:1.5rem;
  flex-wrap:wrap;
}

.filter-tag {
  padding:.5rem 1rem;
  border-radius:50px;
  border:1.5px solid var(--border-soft);
  background:white;
  color:var(--text-soft);
  font-size:.85rem;
  font-weight:600;
  cursor:pointer;
  transition:all .3s;
  font-family:inherit;
}

.filter-tag:hover {
  border-color:var(--deep-pink);
  color:var(--deep-pink);
}

.filter-tag.active {
  background:var(--deep-pink);
  color:white;
  border-color:var(--deep-pink);
}

.vaccine-list {
  display:flex;
  flex-direction:column;
  gap:1rem;
  max-height:400px;
  overflow-y:auto;
  padding-right:.5rem;
}

.vaccine-item {
  background:white;
  border:2px solid var(--border-soft);
  border-radius:16px;
  padding:1.2rem;
  transition:all .3s;
  cursor:pointer;
  position:relative;
}

.vaccine-item:hover {
  border-color:var(--deep-pink);
  box-shadow:0 4px 20px rgba(236,64,122,.1);
  transform:translateX(4px);
}

.vaccine-item.selected {
  border-color:var(--deep-pink);
  background:rgba(236,64,122,.05);
}

.vaccine-item-header {
  display:flex;
  justify-content:space-between;
  align-items:start;
  margin-bottom:.8rem;
}

.vaccine-name {
  font-weight:700;
  font-size:1.05rem;
  color:var(--text-main);
  flex:1;
}

.vaccine-status {
  padding:.3rem .8rem;
  border-radius:20px;
  font-size:.75rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.5px;
}

.vaccine-status.due {
  background:#ffebee;
  color:#c62828;
}

.vaccine-status.upcoming {
  background:#fff3e0;
  color:#e65100;
}

.vaccine-status.completed {
  background:#e8f5e9;
  color:#2e7d32;
}

.vaccine-details {
  font-size:.9rem;
  color:var(--text-soft);
  line-height:1.6;
  margin-bottom:.8rem;
}

.vaccine-info-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));
  gap:.8rem;
  margin-top:1rem;
  padding-top:1rem;
  border-top:1px solid var(--border-soft);
}

.vaccine-info-item {
  display:flex;
  align-items:center;
  gap:.5rem;
  font-size:.85rem;
}

.vaccine-info-item i {
  color:var(--deep-pink);
  font-size:.9rem;
}

.vaccine-info-label {
  color:var(--text-soft);
  font-weight:500;
}

.vaccine-info-value {
  color:var(--text-main);
  font-weight:700;
}

.precaution-badge {
  display:inline-flex;
  align-items:center;
  gap:.4rem;
  padding:.4rem .8rem;
  background:#fff3e0;
  color:#e65100;
  border-radius:20px;
  font-size:.8rem;
  font-weight:600;
  margin-top:.5rem;
}

.precaution-badge i {
  font-size:.75rem;
}

/* Schedule Summary */
.schedule-summary {
  display:flex;
  flex-direction:column;
  gap:1.2rem;
  margin-bottom:2rem;
}

.schedule-item {
  background:white;
  border:2px solid var(--border-soft);
  border-radius:16px;
  padding:1.5rem;
  display:flex;
  gap:1.5rem;
  align-items:start;
}

.schedule-date {
  background:linear-gradient(135deg, var(--deep-pink), #f06292);
  color:white;
  padding:1rem;
  border-radius:12px;
  text-align:center;
  min-width:80px;
  flex-shrink:0;
}

.schedule-day {
  font-size:2rem;
  font-weight:800;
  line-height:1;
}

.schedule-month {
  font-size:.85rem;
  opacity:.9;
  text-transform:uppercase;
  letter-spacing:.5px;
}

.schedule-info {
  flex:1;
}

.schedule-vaccine {
  font-size:1.15rem;
  font-weight:700;
  color:var(--text-main);
  margin-bottom:.5rem;
}

.schedule-desc {
  font-size:.9rem;
  color:var(--text-soft);
  line-height:1.5;
  margin-bottom:.8rem;
}

.schedule-tags {
  display:flex;
  gap:.5rem;
  flex-wrap:wrap;
}

.schedule-tag {
  padding:.3rem .7rem;
  background:var(--chip-bg);
  color:var(--deep-pink);
  border-radius:20px;
  font-size:.75rem;
  font-weight:600;
}

/* Important Notes */
.important-notes {
  background:#fff3e0;
  border:2px solid #ffb74d;
  border-radius:16px;
  padding:1.5rem;
  margin-bottom:2rem;
}

.important-notes h4 {
  color:#e65100;
  font-size:1.1rem;
  margin-bottom:1rem;
  display:flex;
  align-items:center;
  gap:.6rem;
}

.important-notes h4 i {
  font-size:1.2rem;
}

.precaution-item {
  background:white;
  padding:1rem;
  border-radius:10px;
  margin-bottom:.8rem;
  border-left:4px solid #ff9800;
}

.precaution-item:last-child {
  margin-bottom:0;
}

.precaution-title {
  font-weight:700;
  color:var(--text-main);
  margin-bottom:.3rem;
  font-size:.95rem;
}

.precaution-desc {
  font-size:.85rem;
  color:var(--text-soft);
  line-height:1.5;
}

/* Scrollbar styling */
.vaccine-list::-webkit-scrollbar,
.scheduler-body::-webkit-scrollbar {
  width:6px;
}

.vaccine-list::-webkit-scrollbar-track,
.scheduler-body::-webkit-scrollbar-track {
  background:rgba(0,0,0,.05);
  border-radius:3px;
}

.vaccine-list::-webkit-scrollbar-thumb,
.scheduler-body::-webkit-scrollbar-thumb {
  background:rgba(236,64,122,.3);
  border-radius:3px;
}

.vaccine-list::-webkit-scrollbar-thumb:hover,
.scheduler-body::-webkit-scrollbar-thumb:hover {
  background:rgba(236,64,122,.5);
}

/* Responsive */
@media(max-width:768px){
  .scheduler-modal-content {
    width:95%;
    max-height:95vh;
  }
  
  .scheduler-header {
    padding:2rem 1.5rem 1.5rem;
  }
  
  .scheduler-header h2 {
    font-size:1.5rem;
  }
  
  .scheduler-body {
    padding:1.5rem;
  }
  
  .checkbox-group {
    grid-template-columns:1fr;
  }
  
  .vaccine-info-grid {
    grid-template-columns:1fr;
  }
  
  .schedule-item {
    flex-direction:column;
  }
  
  .scheduler-nav {
    flex-direction:column;
  }
}


/* ================================================================
   MOBILE RESPONSIVENESS FIXES — Vaccination.html
   Additions only — no existing code removed or altered
   ================================================================ */

/* ── HERO: Shield SVG responsive sizing ── */
.shield-svg {
  width: 150px;
  height: 170px;
  max-width: 100%;
}

/* ── HERO: btn-family-guide full-width on very small screens ── */
@media(max-width:480px){
  .btn-family-guide {
    width: 100%;
    justify-content: center;
    padding: .85rem 1.5rem;
    font-size: 1rem;
  }
  /* hero description max-width unconstrained on small mobile */
  .hero-description {
    max-width: 100%;
  }
  /* badge constellation: tighter gap */
  .badge-constellation {
    gap: .4rem;
  }
  .hero-badge-3d {
    padding: .4rem .75rem;
    font-size: .76rem;
    gap: .3rem;
  }
}

/* ── HERO: vaccine orbs & shield core at 400px ── */
/* At 400px existing rules give: hero-right min-height not defined → fallback */
/* New: scale down core, orbs, pulse rings at very small sizes */
@media(max-width:480px){
  .hero-right {
    min-height: 220px;
  }
  .shield-constellation {
    max-width: 220px;
  }
  .shield-core {
    width: 140px;
    height: 140px;
  }
  /* Reduce pulse-ring extension so it doesn't clip outside hero */
  .core-pulse-ring {
    inset: -16px;
  }
  .shield-svg {
    width: 110px;
    height: 124px;
  }
  /* Orbs: smaller at 480px */
  .vaccine-orb {
    width: 56px;
    height: 56px;
  }
  .orb-icon {
    font-size: 1.1rem;
  }
  /* Switch to small-amplitude float animations (no nested @keyframes) */
  .orb-hpv, .orb-tdap, .orb-flu, .orb-covid {
    animation-name: orb-fly-in, orb-float-sm;
  }
  .orb-mmr, .orb-hepb {
    animation-name: orb-fly-in, orb-float-sm-cx;
  }
  /* Reposition all 6 orbs to stay within bounds */
  .orb-hpv  { top: 3%;    left: 3%;  }
  .orb-mmr  { top: 0%;    left: 50%; }
  .orb-tdap { top: 3%;    right: 3%; }
  .orb-flu  { bottom: 6%; left: 3%;  }
  .orb-hepb { bottom: 2%; left: 50%; }
  .orb-covid{ bottom: 6%; right: 3%; }
}

@media(max-width:400px){
  .hero-right {
    min-height: 190px;
  }
  .shield-constellation {
    max-width: 190px;
  }
  .shield-core {
    width: 115px;
    height: 115px;
  }
  .core-pulse-ring {
    inset: -12px;
  }
  .shield-svg {
    width: 90px;
    height: 102px;
  }
  .vaccine-orb {
    width: 46px;
    height: 46px;
  }
  .orb-icon {
    font-size: .9rem;
  }
  .orb-label {
    display: none;
  }
  /* Switch to small-amplitude float animations */
  .orb-hpv, .orb-tdap, .orb-flu, .orb-covid {
    animation-name: orb-fly-in, orb-float-sm;
  }
  .orb-mmr, .orb-hepb {
    animation-name: orb-fly-in, orb-float-sm-cx;
  }
  .orb-hpv  { top: 2%;    left: 1%;  }
  .orb-mmr  { top: 0%;    left: 50%; }
  .orb-tdap { top: 2%;    right: 1%; }
  .orb-flu  { bottom: 4%; left: 1%;  }
  .orb-hepb { bottom: 1%; left: 50%; }
  .orb-covid{ bottom: 4%; right: 1%; }
}

/* ── BODY SILHOUETTE: orbit-cards-wrap overflow fix ── */
/* Prevent orbit items from escaping the silhouette wrapper */
.body-silhouette {
  overflow: visible; /* allow orbit items to overlap visually */
}
/* On mobile, orbit cards wrap needs to not cause horizontal scroll */
@media(max-width:600px){
  .orbit-cards-wrap {
    /* Keep pointer-events but prevent layout overflow causing page scroll */
    overflow: visible;
  }
  /* Shrink orbit items on mobile */
  .orbit-item {
    width: 58px;
    height: 58px;
  }
  .oi-emoji {
    font-size: 1.1rem;
  }
  .oi-label {
    font-size: .46rem;
    max-width: 50px;
  }
}
@media(max-width:400px){
  .orbit-item {
    width: 50px;
    height: 50px;
  }
  .oi-emoji {
    font-size: .95rem;
  }
  .oi-label {
    display: none;
  }
}

/* ── BODY INFO PANEL: min-height reduction on small mobile ── */
@media(max-width:600px){
  .body-info-panel {
    min-height: 280px;
  }
  .info-empty-state {
    min-height: 260px;
  }
}
@media(max-width:400px){
  .body-info-panel {
    min-height: 240px;
  }
  .info-empty-state {
    min-height: 220px;
  }
}

/* ── PHASE TOGGLES: section-nav-wrap alignment fix for overflow-x ── */
@media(max-width:768px){
  .section-nav-wrap {
    text-align: left; /* prevents centering from fighting overflow-x:auto */
    display: flex;
    justify-content: center;
  }
}

/* ── MYTH CARDS: fix fixed height clipping long text ── */
/* Allow cards to grow instead of clipping overflow */
@media(max-width:600px){
  .myth-card {
    height: auto;
    min-height: 175px;
  }
  .myth-card-inner {
    /* For auto height flip cards we need absolute positioning on both faces */
  }
  .myth-card-front,
  .myth-card-back {
    position: relative;   /* override absolute so card grows with content */
  }
  /* Restore flip behaviour: keep inner as relative and use JS-flipped transform */
  .myth-card-inner {
    min-height: 175px;
  }
}
/* At 400px — existing rule sets height:165px, bump it to auto too */
@media(max-width:400px){
  .myth-card {
    height: auto;
    min-height: 165px;
  }
  .myth-card-inner {
    min-height: 165px;
  }
}
/* For unflipped cards the front covers the full card; for flipped the back needs to show */
/* We use a specific approach: ensure both faces share absolute+full-height within inner */
/* Re-affirm backface-visibility so flip still works */
.myth-card-front,
.myth-card-back {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* ── TOAST: prevent overflow on narrow screens & iPhone safe area ── */
@media(max-width:480px){
  .toast {
    white-space: normal;
    max-width: 88vw;
    width: max-content;
    max-width: min(88vw, 380px);
    text-align: center;
    border-radius: 16px;
    padding: .65rem 1.1rem;
    font-size: .78rem;
    flex-wrap: wrap;
    justify-content: center;
  }
}
/* iPhone safe-area bottom inset so toast isn't hidden by home bar */
@supports(padding-bottom: env(safe-area-inset-bottom)){
  .toast {
    bottom: calc(1.8rem + env(safe-area-inset-bottom));
  }
}

/* ── SCHEDULER MODAL: checkbox & info grid on very small screens ── */
@media(max-width:480px){
  /* Force single column for checkbox-group on 320–480px */
  .checkbox-group {
    grid-template-columns: 1fr;
  }
  /* Force single column for vaccine-info-grid */
  .vaccine-info-grid {
    grid-template-columns: 1fr;
  }
  /* Scheduler header adjustments */
  .scheduler-header {
    padding: 1.5rem 1rem 1.25rem;
  }
  .scheduler-header h2 {
    font-size: 1.2rem;
  }
  .scheduler-subtitle {
    font-size: .85rem;
  }
  .scheduler-icon {
    width: 56px;
    height: 56px;
    font-size: 1.6rem;
  }
  /* Close button — move slightly so it doesn't overlap title */
  .scheduler-close {
    top: .85rem;
    right: .85rem;
    width: 34px;
    height: 34px;
    font-size: 1.1rem;
  }
  /* Age input group wrapping */
  .age-input-group {
    flex-wrap: wrap;
  }
  .age-input-group .form-input {
    min-width: 0;
  }
  /* Scheduler body padding */
  .scheduler-body {
    padding: 1rem .875rem;
  }
  /* Step title & desc */
  .step-title {
    font-size: 1.2rem;
  }
  .step-desc {
    font-size: .9rem;
    margin-bottom: 1.25rem;
  }
  /* Full-width nav buttons already done at 768px — ensure on very small too */
  .scheduler-btn-primary,
  .scheduler-btn-secondary {
    width: 100%;
    justify-content: center;
    padding: .85rem 1.25rem;
    font-size: .9rem;
  }
  .scheduler-nav {
    flex-direction: column;
    gap: .65rem;
    margin-top: 1.5rem;
  }
  /* Vaccine list height */
  .vaccine-list {
    max-height: 320px;
  }
  /* Form inputs */
  .form-input,
  .form-select {
    font-size: .9rem;
    padding: .8rem .9rem;
  }
}

/* ── SCHEDULER MODAL: schedule-item on 400px ── */
@media(max-width:400px){
  .schedule-date {
    padding: .75rem;
    min-width: auto;
    align-self: stretch;
  }
  .schedule-day {
    font-size: 1.6rem;
  }
  .schedule-vaccine {
    font-size: 1rem;
  }
  .scheduler-modal-content {
    border-radius: 0; /* full screen on very small */
  }
}

/* ── SECTION BODY MAP: section-header margin on small mobile ── */
@media(max-width:480px){
  #bodyMapWrap .section-header {
    margin-top: 1.5rem;
  }
}

/* ── SCORE PROGRESS BAR: prevent pill overflow on tiny screens ── */
@media(max-width:360px){
  .score-progress-bar {
    padding: .7rem .85rem;
  }
  .score-pill {
    flex-shrink: 1;
  }
  .score-val {
    font-size: 1rem;
  }
}

/* ── PAGE CONTAINER: tighter padding on very small phones ── */
@media(max-width:360px){
  .page-container {
    padding: 1rem .75rem;
  }
}

/* ── AGE WHEEL: prevent awkward wrapping on very narrow screens ── */
@media(max-width:360px){
  .age-wheel {
    justify-content: flex-start;
    overflow-x: auto;
    flex-wrap: nowrap;
    padding-bottom: .4rem;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  .age-wheel::-webkit-scrollbar {
    display: none;
  }
  .age-card {
    flex-shrink: 0;
    width: 78px;
  }
}

/* ── PLANNER AGE CHIPS: scrollable on very small screens ── */
@media(max-width:400px){
  .planner-age-chips {
    flex-wrap: nowrap;
    overflow-x: auto;
    justify-content: flex-start;
    padding-bottom: .35rem;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  .planner-age-chips::-webkit-scrollbar {
    display: none;
  }
  .age-chip {
    flex-shrink: 0;
  }
}

/* ── BODY VIZ CONTAINER: tighter spacing on small mobile ── */
@media(max-width:480px){
  .body-viz-container {
    gap: 1rem;
  }
}

/* ── VACCINES FILTER TAGS: scrollable strip on small screens ── */
@media(max-width:480px){
  .vaccines-filter {
    flex-wrap: nowrap;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: .35rem;
    scrollbar-width: none;
  }
  .vaccines-filter::-webkit-scrollbar {
    display: none;
  }
  .filter-tag {
    flex-shrink: 0;
    white-space: nowrap;
  }
}

/* ── MYTHS STATS: tighter gap on small mobile ── */
@media(max-width:400px){
  .myth-stats {
    gap: 1.25rem;
    flex-wrap: wrap;
    justify-content: center;
  }
  .myth-stat-num {
    font-size: 1.3rem;
  }
  .myth-stat-label {
    font-size: .65rem;
  }
}

/* ── QUIZ: ensure option text wraps cleanly on small screens ── */
@media(max-width:360px){
  .quiz-option {
    font-size: .82rem;
    padding: .65rem .85rem;
    gap: .5rem;
  }
  .opt-letter {
    width: 24px;
    height: 24px;
    font-size: .65rem;
    flex-shrink: 0;
  }
  .quiz-question {
    font-size: .95rem;
  }
  .quiz-restart-btn {
    width: 100%;
    padding: .75rem 1rem;
  }
}

/* ── FOOTER: safe-area padding for modern iPhones ── */
@supports(padding-bottom: env(safe-area-inset-bottom)){
  .footer-bottom-inner {
    padding-bottom: calc(16px + env(safe-area-inset-bottom));
  }
}

/* ── NAV: safe-area for sticky header on notched phones ── */
@supports(padding-top: env(safe-area-inset-top)){
  .site-header {
    padding-top: env(safe-area-inset-top);
  }
  .nav-container {
    height: calc(64px + env(safe-area-inset-top));
  }
  /* Reset mobile-menu top to account for taller header */
  .mobile-menu {
    top: calc(64px + env(safe-area-inset-top));
  }
}

/* ── REDUCED MOTION: respect user preference, preserve all animations ── */
/* Only reduce motion, never remove animations */
@media(prefers-reduced-motion: reduce){
  .hero-badge-3d,
  .btn-family-guide,
  .shield-badge {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
  /* Freeze all 6 vaccine orbs */
  .orb-hpv, .orb-mmr, .orb-tdap, .orb-flu, .orb-hepb, .orb-covid {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
  .core-pulse-ring {
    animation-duration: 4s;
  }
  .gradient-morph {
    animation-duration: 16s;
  }
  /* Quiz and section transitions still play but slower */
  .section.active {
    animation-duration: .15s;
  }
}

/* ── MYTH CARD FLIP: preserve 3D transform at all sizes ── */
/* Ensure the flip animation works correctly with auto height */
.myth-card {
  -webkit-perspective: 800px;
  perspective: 800px;
}
.myth-card-inner {
  -webkit-transform-style: preserve-3d;
  transform-style: preserve-3d;
}
/* On mobile where we set position:relative on front/back, 
   use a different approach — keep absolute but ensure min-height propagates */
@media(max-width:600px){
  .myth-card {
    height: auto;
    min-height: 175px;
  }
  .myth-card-inner {
    position: relative;
    height: auto;
    min-height: 175px;
  }
  .myth-card-front,
  .myth-card-back {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    min-height: 175px;
    height: 100%;
  }
  /* When not flipped ensure the card wrapper has enough height 
     to show front content (use padding-bottom trick) */
  .myth-card:not(.flipped) .myth-card-inner {
    min-height: max(175px, fit-content);
  }
}

/* ── GENERAL: prevent any horizontal overflow on page ── */
html, body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* ── SCHEDULER: vaccine list items on narrow screens ── */
@media(max-width:480px){
  .vaccine-item {
    padding: 1rem;
    border-radius: 12px;
  }
  .vaccine-name {
    font-size: .95rem;
  }
  .vaccine-details {
    font-size: .82rem;
  }
  .vaccine-item-header {
    flex-wrap: wrap;
    gap: .4rem;
  }
  .vaccine-status {
    font-size: .7rem;
  }
  .precaution-badge {
    font-size: .75rem;
    padding: .35rem .7rem;
  }
}

/* ── CHECKLIST ITEM: text wrapping on small screens ── */
@media(max-width:400px){
  .checklist-item {
    flex-wrap: wrap;
    gap: .4rem;
  }
  .cl-age {
    width: 100%;
    text-align: right;
    font-size: .62rem;
  }
}

/* ── TIMELINE: tighter padding on very small screens ── */
@media(max-width:360px){
  .planner-timeline {
    padding-left: 1.4rem;
  }
  .timeline-item::before {
    left: -1.38rem;
  }
  .tl-name {
    font-size: .84rem;
  }
  .tl-desc {
    font-size: .72rem;
  }
}

/* ── IMPORTANT NOTES: padding on small screens ── */
@media(max-width:480px){
  .important-notes {
    padding: 1rem;
    border-radius: 12px;
  }
  .important-notes h4 {
    font-size: 1rem;
  }
  .precaution-item {
    padding: .85rem;
  }
  .precaution-title {
    font-size: .88rem;
  }
  .precaution-desc {
    font-size: .8rem;
  }
}

</style>
<body>

<!-- ===== HEADER ===== -->
<header class="site-header">
  <div class="nav-container">
    <div class="logo">
      <div class="logo-icon">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="white">
          <circle cx="12" cy="5.5" r="2.8"/>
          <path d="M9.3 4.8 Q9.1 2.5 12 2.2 Q14.9 2.5 14.7 4.8" opacity="0.7"/>
          <path d="M9.5 13.2 Q9 10.5 10 9.3 Q11 8.6 12 8.6 Q13 8.6 14 9.3 Q15 10.5 14.5 13.2Z"/>
          <path d="M9.5 13.2 Q7.2 13.8 6.8 16.2 Q7.8 16.4 8.8 15Z" opacity="0.85"/>
          <path d="M14.5 13.2 Q16.8 13.8 17.2 16.2 Q16.2 16.4 15.2 15Z" opacity="0.85"/>
          <path d="M8.2 22 Q7.6 17.2 8.8 15 Q10.2 13 12 13 Q13.8 13 15.2 15 Q16.4 17.2 15.8 22Z"/>
        </svg>
      </div>
      <div class="logo-text">
        <a href="index.html">Nari Swasthya</a>
        <span>Women's Complete Health</span>
      </div>
    </div>

    <nav class="main-nav">

      <div class="nav-item">
        <a href="index.html" class="nav-link">Home</a>
      </div>

      <!-- Journeys dropdown -->
      <div class="nav-item">
        <button class="nav-link" aria-haspopup="true">Journeys <i class="fa-solid fa-chevron-down chevron"></i></button>
        <div class="nav-dropdown">
          <a href="journeys.html" class="dd-item" style="background:linear-gradient(135deg,rgba(236,64,122,0.08),rgba(173,20,87,0.04));border-radius:10px;margin-bottom:.3rem;">
            <div class="dd-icon" style="background:linear-gradient(135deg,#ec407a,#ad1457);color:white;"><i class="fa-solid fa-map"></i></div>
            <div><strong style="display:block;font-size:.82rem;color:var(--deep-pink);">View Full Journeys</strong><span style="font-size:.73rem;color:var(--text-soft);">Browse all her journeys</span></div>
          </a>
          <div class="dd-sep"></div>
          <a href="conceiving.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-seedling"></i></div><div><strong style="display:block;font-size:.82rem;">Conceiving</strong><span style="font-size:.73rem;color:var(--text-soft);">Preparation &amp; planning</span></div></a>
          <a href="fertility.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-dna"></i></div><div><strong style="display:block;font-size:.82rem;">Fertility</strong><span style="font-size:.73rem;color:var(--text-soft);">Cycle &amp; ovulation</span></div></a>
          <!-- Pregnancy Journey with flyout sub-items -->
          <div class="dd-item dd-has-flyout">
            <div class="dd-icon" style="background:#fce4ec;color:#ec407a;"><i class="fa-solid fa-baby-carriage"></i></div>
            <a href="pregnancy_journey.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Pregnancy Journey</strong><span style="font-size:.73rem;color:var(--text-soft);">Week by week guide</span></a>
            <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
            <div class="dd-flyout">
              <a href="normal_delivery.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-circle-check"></i></div><div><strong style="display:block;font-size:.82rem;">Normal Delivery</strong><span style="font-size:.73rem;color:var(--text-soft);">Vaginal birth guide</span></div></a>
              <a href="csection.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-hospital"></i></div><div><strong style="display:block;font-size:.82rem;">C-Section</strong><span style="font-size:.73rem;color:var(--text-soft);">Surgical birth info</span></div></a>
              <a href="pregnancy_loss.html" class="dd-item"><div class="dd-icon" style="background:#fafafa;color:#9e9e9e;"><i class="fa-solid fa-hands-holding-heart"></i></div><div><strong style="display:block;font-size:.82rem;">Pregnancy Loss</strong><span style="font-size:.73rem;color:var(--text-soft);">Support &amp; care</span></div></a>
            </div>
          </div>
          <a href="antenatal_care.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-clipboard-list"></i></div><div><strong style="display:block;font-size:.82rem;">Antenatal Care</strong><span style="font-size:.73rem;color:var(--text-soft);">ANC visits &amp; checklist</span></div></a>
          <!-- NCD with flyout sub-items -->
          <div class="dd-item dd-has-flyout">
            <div class="dd-icon" style="background:#e8eaf6;color:#283593;"><i class="fa-solid fa-heart-pulse"></i></div>
            <a href="ncd_pregnancy.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Non Communicable Diseases</strong><span style="font-size:.73rem;color:var(--text-soft);">Diabetes, hypertension &amp; more</span></a>
            <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
            <div class="dd-flyout">
              <a href="gestational_diabetes.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-droplet"></i></div><div><strong style="display:block;font-size:.82rem;">Gestational Diabetes</strong><span style="font-size:.73rem;color:var(--text-soft);">Manage blood sugar</span></div></a>
              <a href="preeclampsia_education.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-heart-circle-exclamation"></i></div><div><strong style="display:block;font-size:.82rem;">Preeclampsia</strong><span style="font-size:.73rem;color:var(--text-soft);">Blood pressure care</span></div></a>
              <a href="cancer_simulation_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#6a1b9a;"><i class="fa-solid fa-ribbon"></i></div><div><strong style="display:block;font-size:.82rem;">Cancer</strong><span style="font-size:.73rem;color:var(--text-soft);">Simulation journey</span></div></a>
            </div>
          </div>
          <a href="newborn_postpartum_care.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-baby"></i></div><div><strong style="display:block;font-size:.82rem;">Newborn &amp; Postpartum</strong><span style="font-size:.73rem;color:var(--text-soft);">4th trimester care</span></div></a>
          <a href="breastfeeding_journey.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57c00;"><i class="fa-solid fa-heart"></i></div><div><strong style="display:block;font-size:.82rem;">Breastfeeding</strong><span style="font-size:.73rem;color:var(--text-soft);">Latch, supply, nutrition</span></div></a>
          <a href="menopause.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#ad1457;"><i class="fa-solid fa-fire-flame-curved"></i></div><div><strong style="display:block;font-size:.82rem;">Menopause</strong><span style="font-size:.73rem;color:var(--text-soft);">Perimenopause &amp; beyond</span></div></a>
        </div>
      </div>

      <div class="nav-item">
        <button class="nav-link" aria-haspopup="true">
          Services <i class="fa-solid fa-chevron-down chevron"></i>
        </button>
        <div class="nav-dropdown">
          <a href="services.html" class="dd-item" style="background:linear-gradient(135deg,rgba(236,64,122,0.08),rgba(173,20,87,0.04));border-radius:10px;margin-bottom:.3rem;">
            <div class="dd-icon" style="background:linear-gradient(135deg,#ec407a,#ad1457);color:white;box-shadow:0 4px 12px rgba(236,64,122,0.35);"><i class="fa-solid fa-grid-2"></i></div>
            <div><strong style="display:block;font-size:.82rem;color:var(--deep-pink);">Services Available</strong><span style="font-size:.73rem;color:var(--text-soft);">Browse all our services</span></div>
          </a>
          <div class="dd-sep"></div>
          <a href="symptom_checker.html" class="dd-item">
            <div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-stethoscope"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Symptom Checker</strong><span style="font-size:.73rem;color:var(--text-soft);">AI-powered diagnosis</span></div>
          </a>
          <a href="dashboard.html" class="dd-item">
            <div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-gauge-high"></i></div>
            <div><strong style="display:block;font-size:.82rem;">My Dashboard</strong><span style="font-size:.73rem;color:var(--text-soft);">Track your health</span></div>
          </a>
          <a href="screening.html" class="dd-item">
            <div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-magnifying-glass-plus"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Health Screening</strong><span style="font-size:.73rem;color:var(--text-soft);">Cancer &amp; preventive</span></div>
          </a>
          <a href="vaccination.html" class="dd-item">
            <div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-syringe"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Vaccination</strong><span style="font-size:.73rem;color:var(--text-soft);">Immunization schedule</span></div>
          </a>
          <a href="otc.html" class="dd-item">
            <div class="dd-icon" style="background:#e0f7fa;color:#006064;"><i class="fa-solid fa-pills"></i></div>
            <div><strong style="display:block;font-size:.82rem;">OTC Medicine Guide</strong><span style="font-size:.73rem;color:var(--text-soft);">Safe self-care options</span></div>
          </a>
          <a href="government_schemes.html" class="dd-item">
            <div class="dd-icon" style="background:#fff8e1;color:#e65100;"><i class="fa-solid fa-landmark"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Govt Schemes</strong><span style="font-size:.73rem;color:var(--text-soft);">Benefits you deserve</span></div>
          </a>
          <a href="insurance.html" class="dd-item">
            <div class="dd-icon" style="background:#e8f5e9;color:#1b5e20;"><i class="fa-solid fa-shield-halved"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Insurance</strong><span style="font-size:.73rem;color:var(--text-soft);">Coverage &amp; claims guide</span></div>
          </a>
        </div>
      </div>

      <div class="nav-item">
        <a href="stories.html" class="nav-link">Stories</a>
      </div>

      <div class="nav-item">
        <a href="about.html" class="nav-link">About Us</a>
      </div>

      <div class="nav-item">
        <button class="nav-link" aria-haspopup="true">
          Additional Info <i class="fa-solid fa-chevron-down chevron"></i>
        </button>
        <div class="nav-dropdown" style="min-width:240px;">
          <div style="padding:.4rem .9rem .2rem;font-size:.7rem;font-weight:700;color:var(--text-soft);text-transform:uppercase;letter-spacing:.08em;">Health Topics</div>
          <a href="fertility.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#ec407a;"><i class="fa-solid fa-seedling"></i></div><div><strong style="display:block;font-size:.82rem;">Fertility</strong><span style="font-size:.73rem;color:var(--text-soft);">Cycle, conceiving &amp; IVF</span></div></a>
          <a href="pregnancy_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-baby-carriage"></i></div><div><strong style="display:block;font-size:.82rem;">Pregnancy</strong><span style="font-size:.73rem;color:var(--text-soft);">All trimesters covered</span></div></a>
          <a href="newborn_postpartum_care.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-baby"></i></div><div><strong style="display:block;font-size:.82rem;">Motherhood</strong><span style="font-size:.73rem;color:var(--text-soft);">Newborn &amp; postpartum</span></div></a>
          <a href="menopause.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-spa"></i></div><div><strong style="display:block;font-size:.82rem;">Wellness</strong><span style="font-size:.73rem;color:var(--text-soft);">Menopause, bone, mental</span></div></a>
          <div class="dd-sep"></div>
          <a href="community.html" class="dd-item"><div class="dd-icon" style="background:#ede7f6;color:#4527a0;"><i class="fa-solid fa-users"></i></div><div><strong style="display:block;font-size:.82rem;">Community</strong><span style="font-size:.73rem;color:var(--text-soft);">Share &amp; connect</span></div></a>
          <div class="dd-sep"></div>
          <div style="padding:.4rem .9rem .2rem;font-size:.7rem;font-weight:700;color:var(--text-soft);text-transform:uppercase;letter-spacing:.08em;">Specialised Care</div>
          <!-- NCD with flyout sub-items -->
          <div class="dd-item dd-has-flyout">
            <div class="dd-icon" style="background:#e8eaf6;color:#283593;"><i class="fa-solid fa-heart-pulse"></i></div>
            <a href="ncd_pregnancy.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Non Communicable Diseases</strong><span style="font-size:.73rem;color:var(--text-soft);">Diabetes, hypertension &amp; more</span></a>
            <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
            <div class="dd-flyout">
              <a href="gestational_diabetes.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-droplet"></i></div><div><strong style="display:block;font-size:.82rem;">Gestational Diabetes</strong><span style="font-size:.73rem;color:var(--text-soft);">Manage blood sugar</span></div></a>
              <a href="preeclampsia_education.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-heart-circle-exclamation"></i></div><div><strong style="display:block;font-size:.82rem;">Preeclampsia</strong><span style="font-size:.73rem;color:var(--text-soft);">Blood pressure care</span></div></a>
              <a href="cancer_simulation_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#6a1b9a;"><i class="fa-solid fa-ribbon"></i></div><div><strong style="display:block;font-size:.82rem;">Cancer</strong><span style="font-size:.73rem;color:var(--text-soft);">Simulation journey</span></div></a>
            </div>
          </div>
          <a href="bone_health.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#ad1457;"><i class="fa-solid fa-bone"></i></div><div><strong style="display:block;font-size:.82rem;">Bone Health</strong><span style="font-size:.73rem;color:var(--text-soft);">Osteoporosis prevention</span></div></a>
          <a href="depression.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-brain"></i></div><div><strong style="display:block;font-size:.82rem;">Mental Health</strong><span style="font-size:.73rem;color:var(--text-soft);">Anxiety, depression, support</span></div></a>
          <a href="loss_support.html" class="dd-item"><div class="dd-icon" style="background:#fafafa;color:#9e9e9e;"><i class="fa-solid fa-hands-holding-heart"></i></div><div><strong style="display:block;font-size:.82rem;">Loss Support</strong><span style="font-size:.73rem;color:var(--text-soft);">You are never alone</span></div></a>
        </div>
      </div>

    </nav>

    <div class="nav-actions">
      <a class="btn-nav outline" href="signin.html">
        <i class="fa-regular fa-user"></i> Sign In
      </a>
      <a class="btn-nav primary" href="contact.html">
        <i class="fa-solid fa-envelope"></i> Contact Us
      </a>
      <button class="hamburger" id="hamburgerBtn" aria-label="Menu" onclick="toggleMobile()">
        <span id="hb1"></span><span id="hb2"></span><span id="hb3"></span>
      </button>
    </div>
  </div>
</header>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu">
  <div class="mm-section">Navigation</div>
  <a href="index.html" class="mm-link"><i class="fa-solid fa-house" style="color:var(--deep-pink);width:20px;"></i> Home</a>
  <div class="mm-section">Journeys</div>
  <a href="conceiving.html" class="mm-link"><i class="fa-solid fa-seedling" style="color:var(--deep-pink);width:20px;"></i> Conceiving</a>
  <a href="fertility.html" class="mm-link"><i class="fa-solid fa-dna" style="color:var(--deep-pink);width:20px;"></i> Fertility</a>
  <a href="pregnancy_journey.html" class="mm-link"><i class="fa-solid fa-baby-carriage" style="color:var(--deep-pink);width:20px;"></i> Pregnancy Journey</a>
  <a href="normal_delivery.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#ec407a;width:20px;"></i> Normal Delivery</a>
  <a href="csection.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#ec407a;width:20px;"></i> C-Section</a>
  <a href="pregnancy_loss.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#9e9e9e;width:20px;"></i> Pregnancy Loss</a>
  <a href="antenatal_care.html" class="mm-link"><i class="fa-solid fa-clipboard-list" style="color:var(--deep-pink);width:20px;"></i> Antenatal Care</a>
  <a href="newborn_postpartum_care.html" class="mm-link"><i class="fa-solid fa-baby" style="color:var(--deep-pink);width:20px;"></i> Newborn &amp; Postpartum</a>
  <a href="breastfeeding_journey.html" class="mm-link"><i class="fa-solid fa-heart" style="color:var(--deep-pink);width:20px;"></i> Breastfeeding</a>
  <a href="menopause.html" class="mm-link"><i class="fa-solid fa-fire-flame-curved" style="color:var(--deep-pink);width:20px;"></i> Menopause</a>
  <div class="mm-section">Services</div>
  <a href="symptom_checker.html" class="mm-link"><i class="fa-solid fa-stethoscope" style="color:var(--deep-pink);width:20px;"></i> Symptom Checker</a>
  <a href="dashboard.html" class="mm-link"><i class="fa-solid fa-gauge-high" style="color:var(--deep-pink);width:20px;"></i> My Dashboard</a>
  <a href="screening.html" class="mm-link"><i class="fa-solid fa-magnifying-glass-plus" style="color:var(--deep-pink);width:20px;"></i> Health Screening</a>
  <a href="government_schemes.html" class="mm-link"><i class="fa-solid fa-landmark" style="color:var(--deep-pink);width:20px;"></i> Govt Schemes</a>
  <a href="insurance.html" class="mm-link"><i class="fa-solid fa-shield-halved" style="color:#1b5e20;width:20px;"></i> Insurance</a>
  <div class="mm-section">Specialised Care</div>
  <a href="bone_health.html" class="mm-link"><i class="fa-solid fa-bone" style="color:#ad1457;width:20px;"></i> Bone Health</a>
  <a href="depression.html" class="mm-link"><i class="fa-solid fa-brain" style="color:#f57f17;width:20px;"></i> Mental Health</a>
  <a href="loss_support.html" class="mm-link"><i class="fa-solid fa-hands-holding-heart" style="color:#9e9e9e;width:20px;"></i> Loss Support</a>
  <a href="ncd_pregnancy.html" class="mm-link"><i class="fa-solid fa-heart-pulse" style="color:#283593;width:20px;"></i> Non Communicable Diseases</a>
  <a href="gestational_diabetes.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#283593;width:20px;"></i> Gestational Diabetes</a>
  <a href="preeclampsia_education.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#283593;width:20px;"></i> Preeclampsia</a>
  <div class="mm-section">More</div>
  <a href="stories.html" class="mm-link"><i class="fa-solid fa-book-open" style="color:var(--deep-pink);width:20px;"></i> Stories</a>
  <a href="community.html" class="mm-link"><i class="fa-solid fa-users" style="color:var(--deep-pink);width:20px;"></i> Community</a>
  <a href="about.html" class="mm-link"><i class="fa-solid fa-circle-info" style="color:var(--deep-pink);width:20px;"></i> About Us</a>
  <div style="display:flex;gap:.75rem;margin-top:1rem;padding:.5rem;">
    <a href="signin.html" class="btn-nav outline mm-action-btn" style="flex:1;justify-content:center;"><i class="fa-regular fa-user"></i> Sign In</a>
    <a href="contact.html" class="btn-nav primary mm-action-btn" style="flex:1;justify-content:center;"><i class="fa-solid fa-envelope"></i> Contact Us</a>
  </div>
</div>

<!-- ================================================
     HERO CONSTELLATION — mirrors depression.html hero exactly
     canvas + gradient-morph bg | 2-col grid content
     ================================================ -->
<div class="hero-constellation" id="heroConstellation">
  <!-- background layer: particle network + morph blob -->
  <div class="constellation-bg">
    <canvas id="particleCanvas"></canvas>
    <div class="gradient-morph" id="gradientMorph"></div>
  </div>

  <div class="hero-content-wrapper">
    <!-- LEFT — eyebrow, title, description, badges, CTA -->
    <div class="hero-left">
      <div class="hero-eyebrow">
        <span class="pulse-dot"></span>
        Vaccination Guide for Women
      </div>

      <h1 class="hero-title-3d">
        Shield Every<br>
        <span class="title-emphasis">Stage of Life</span>
      </h1>

      <p class="hero-description">
        An interactive journey through the vaccines that protect you — from birth to beyond.
        Understand, explore, and plan your immunity with confidence.
      </p>

      <div class="badge-constellation">
        <div class="hero-badge-3d"><i class="fas fa-shield-halved"></i> 50+ Vaccines Mapped</div>
        <div class="hero-badge-3d"><i class="fas fa-circle-check"></i> WHO &amp; CDC Backed</div>
        <div class="hero-badge-3d"><i class="fas fa-heart"></i> Every Life Stage</div>
      </div>

      <button class="btn-family-guide" id="heroEnter">
        <i class="fas fa-play-circle"></i> Begin Your Shield Journey
      </button>
    </div>

    <!-- RIGHT — shield core with pulse rings + 4 floating vaccine orbs -->
    <div class="hero-right">
      <div class="shield-constellation">
        <!-- central shield -->
        <div class="shield-core">
          <div class="core-pulse-ring"></div>
          <div class="core-pulse-ring"></div>
          <div class="core-pulse-ring"></div>
          <svg class="shield-svg" viewBox="0 0 120 140" width="150" height="170">
            <defs>
              <linearGradient id="shGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#ec407a"/>
                <stop offset="100%" stop-color="#d81b60"/>
              </linearGradient>
            </defs>
            <path d="M60 6 C28 6,6 30,6 62 C6 98,28 122,60 137 C92 122,114 98,114 62 C114 30,92 6,60 6Z"
                  fill="url(#shGrad)" opacity="0.14" stroke="url(#shGrad)" stroke-width="2.5"/>
            <path d="M60 28 C40 28,26 43,26 60 C26 82,40 98,60 110 C80 98,94 82,94 60 C94 43,80 28,60 28Z"
                  fill="url(#shGrad)" opacity="0.07"/>
            <path d="M40 64 L53 77 L80 48" fill="none" stroke="url(#shGrad)" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>

        <!-- 6 floating vaccine orbs — multicolour, fly-in entrance -->
        <div class="vaccine-orbs">
          <div class="vaccine-orb orb-hpv">
            <div class="orb-glow"></div>
            <div class="orb-inner">
              <i class="fas fa-syringe orb-icon"></i>
              <span class="orb-label">HPV</span>
            </div>
          </div>
          <div class="vaccine-orb orb-mmr">
            <div class="orb-glow"></div>
            <div class="orb-inner">
              <i class="fas fa-shield-halved orb-icon"></i>
              <span class="orb-label">MMR</span>
            </div>
          </div>
          <div class="vaccine-orb orb-tdap">
            <div class="orb-glow"></div>
            <div class="orb-inner">
              <i class="fas fa-heart-pulse orb-icon"></i>
              <span class="orb-label">Tdap</span>
            </div>
          </div>
          <div class="vaccine-orb orb-flu">
            <div class="orb-glow"></div>
            <div class="orb-inner">
              <i class="fas fa-lungs orb-icon"></i>
              <span class="orb-label">Flu</span>
            </div>
          </div>
          <div class="vaccine-orb orb-hepb">
            <div class="orb-glow"></div>
            <div class="orb-inner">
              <i class="fas fa-droplet orb-icon"></i>
              <span class="orb-label">Hep-B</span>
            </div>
          </div>
          <div class="vaccine-orb orb-covid">
            <div class="orb-glow"></div>
            <div class="orb-inner">
              <i class="fas fa-virus-covid orb-icon"></i>
              <span class="orb-label">COVID</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ================================================
     MAIN APP (revealed on hero CTA click)
     ================================================ -->
<div id="app" class="app hidden">
<div class="page-container">

  <!-- PHASE TOGGLE NAV (depression.html .phase-toggles pattern) -->
  <div class="section-nav-wrap">
    <div class="phase-toggles" id="navTabs">
      <button class="toggle-btn active" data-section="journey"><i class="fas fa-seedling"></i> Journey</button>
      <button class="toggle-btn"        data-section="myths"  ><i class="fas fa-microscope"></i> Myths</button>
      <button class="toggle-btn"        data-section="quiz"   ><i class="fas fa-bullseye"></i> Quiz</button>
      <button class="toggle-btn"        data-section="planner"><i class="fas fa-clipboard-list"></i> Planner</button>
      <button class="toggle-btn"        id="schedulerBtn"><i class="fas fa-calendar-check"></i> Scheduler</button>
    </div>
  </div>

  <!-- SCORE + PROGRESS BAR -->
  <div class="score-progress-bar">
    <div class="score-pill">
      <i class="fas fa-shield-halved"></i>
      <span class="score-val" id="scoreVal">0</span>
      <span class="score-label">Shields</span>
    </div>
    <div class="progress-track-wrap">
      <div class="progress-track">
        <div class="progress-fill" id="progressFill" style="width:0%"></div>
      </div>
      <span class="progress-text" id="progressText">0% Protected</span>
    </div>
  </div>

  <!-- ============= SECTION: JOURNEY ============= -->
  <section id="section-journey" class="section active">
    <div class="section-header">
      <h2 class="section-title">Who Are You?</h2>
      <p class="section-subtitle">Pick your life stage to see the shields that protect you right now.</p>
    </div>

    <!-- Age wheel cards (JS-populated) -->
    <div class="age-wheel" id="ageWheel"></div>
    <div class="selected-stage-label" id="selectedStageLabel">Select a stage above</div>

    <!-- BODY MAP — uses depression.html body-viz-container 2-col grid -->
    <div class="body-map-section" id="bodyMapWrap" style="display:none">
      <div class="section-header" style="margin-top:2.5rem">
        <h2 class="section-title" id="bodyMapTitle">Your Shield Map</h2>
        <p class="section-subtitle" id="bodyMapSubtitle"></p>
      </div>

      <div class="body-viz-container">
        <!-- ─── LEFT COL: body silhouette + orbit cards ─── -->
        <div class="body-silhouette">
          <svg class="body-svg" id="bodySvg" viewBox="0 0 320 560">
            <!-- Head -->
            <ellipse cx="160" cy="62" rx="42" ry="48" fill="#f5c6a0" stroke="#e0a882" stroke-width="2"/>
            <!-- Hair -->
            <ellipse cx="160" cy="38" rx="44" ry="30" fill="#5c3d2e"/>
            <rect x="116" y="30" width="12" height="55" rx="6" fill="#5c3d2e"/>
            <rect x="192" y="30" width="12" height="55" rx="6" fill="#5c3d2e"/>
            <!-- Eyes -->
            <circle cx="143" cy="65" r="4" fill="#3a2520"/>
            <circle cx="177" cy="65" r="4" fill="#3a2520"/>
            <!-- Smile -->
            <path d="M148 78 Q160 86 172 78" fill="none" stroke="#3a2520" stroke-width="2" stroke-linecap="round"/>
            <!-- Neck -->
            <rect x="148" y="106" width="24" height="28" rx="4" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5"/>
            <!-- Torso -->
            <path d="M100 134 Q100 128 130 128 L190 128 Q220 128 220 134 L225 300 Q225 310 215 310 L105 310 Q95 310 95 300 Z" fill="#e8a0b8" stroke="#d47a9a" stroke-width="2"/>
            <!-- Collar detail -->
            <path d="M148 128 L148 148 Q160 156 172 148 L172 128" fill="none" stroke="#d47a9a" stroke-width="1.5"/>
            <!-- Arms -->
            <path d="M100 140 Q70 170 60 240 Q55 270 65 290 L82 290 Q85 270 90 240 Q100 175 118 145" fill="#f5c6a0" stroke="#e0a882" stroke-width="2"/>
            <path d="M220 140 Q250 170 260 240 Q265 270 255 290 L238 290 Q235 270 230 240 Q220 175 202 145" fill="#f5c6a0" stroke="#e0a882" stroke-width="2"/>
            <!-- Hands -->
            <ellipse cx="74"  cy="298" rx="14" ry="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5"/>
            <ellipse cx="246" cy="298" rx="14" ry="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5"/>
            <!-- Skirt -->
            <path d="M95 305 L88 420 Q88 430 100 430 L220 430 Q232 430 232 420 L225 305" fill="#c077a8" stroke="#a85d8a" stroke-width="2"/>
            <!-- Legs -->
            <rect x="118" y="428" width="34" height="100" rx="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="2"/>
            <rect x="168" y="428" width="34" height="100" rx="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="2"/>
            <!-- Shoes -->
            <ellipse cx="135" cy="536" rx="22" ry="10" fill="#8b5e83"/>
            <ellipse cx="185" cy="536" rx="22" ry="10" fill="#8b5e83"/>

            <!-- GLOW ZONES -->
            <circle class="glow-zone" data-zone="head"         cx="160" cy="62"  r="50" fill="url(#glowHead)"    opacity="0"/>
            <circle class="glow-zone" data-zone="chest"        cx="160" cy="200" r="58" fill="url(#glowChest)"   opacity="0"/>
            <circle class="glow-zone" data-zone="abdomen"      cx="160" cy="280" r="42" fill="url(#glowAbdomen)" opacity="0"/>
            <circle class="glow-zone" data-zone="reproductive" cx="160" cy="370" r="40" fill="url(#glowRepro)"   opacity="0"/>
            <circle class="glow-zone" data-zone="arms"         cx="75"  cy="220" r="32" fill="url(#glowArms)"    opacity="0"/>
            <circle class="glow-zone" data-zone="arms"         cx="245" cy="220" r="32" fill="url(#glowArms)"    opacity="0"/>
            <circle class="glow-zone" data-zone="legs"         cx="135" cy="470" r="37" fill="url(#glowLegs)"    opacity="0"/>
            <circle class="glow-zone" data-zone="legs"         cx="185" cy="470" r="37" fill="url(#glowLegs)"    opacity="0"/>

            <!-- SHIELD ICONS -->
            <g class="shield-icon" data-zone="head">
              <circle cx="160" cy="30" r="16" fill="rgba(236,64,122,0.18)" stroke="rgba(236,64,122,0.6)" stroke-width="1.5" class="shield-badge"/>
              <text x="160" y="35" text-anchor="middle" font-size="14">🧠</text>
            </g>
            <g class="shield-icon" data-zone="chest">
              <circle cx="160" cy="185" r="18" fill="rgba(236,64,122,0.18)" stroke="rgba(236,64,122,0.6)" stroke-width="1.5" class="shield-badge"/>
              <text x="160" y="190" text-anchor="middle" font-size="16">🫁</text>
            </g>
            <g class="shield-icon" data-zone="abdomen">
              <circle cx="160" cy="270" r="16" fill="rgba(76,175,80,0.18)" stroke="rgba(76,175,80,0.6)" stroke-width="1.5" class="shield-badge"/>
              <text x="160" y="275" text-anchor="middle" font-size="14">🩺</text>
            </g>
            <g class="shield-icon" data-zone="reproductive">
              <circle cx="160" cy="365" r="18" fill="rgba(156,39,176,0.18)" stroke="rgba(156,39,176,0.6)" stroke-width="1.5" class="shield-badge"/>
              <text x="160" y="370" text-anchor="middle" font-size="16">💜</text>
            </g>

            <!-- INVISIBLE HOTSPOTS -->
            <circle class="hotspot" data-zone="head"         cx="160" cy="62"  r="48" opacity="0"/>
            <circle class="hotspot" data-zone="chest"        cx="160" cy="200" r="55" opacity="0"/>
            <circle class="hotspot" data-zone="abdomen"      cx="160" cy="280" r="40" opacity="0"/>
            <circle class="hotspot" data-zone="arms"         cx="75"  cy="220" r="30" opacity="0"/>
            <circle class="hotspot" data-zone="arms"         cx="245" cy="220" r="30" opacity="0"/>
            <circle class="hotspot" data-zone="legs"         cx="135" cy="470" r="35" opacity="0"/>
            <circle class="hotspot" data-zone="legs"         cx="185" cy="470" r="35" opacity="0"/>
            <circle class="hotspot" data-zone="reproductive" cx="160" cy="370" r="38" opacity="0"/>

            <defs>
              <radialGradient id="glowHead">    <stop offset="0%" stop-color="#ec407a" stop-opacity="0.45"/><stop offset="100%" stop-color="#ec407a" stop-opacity="0"/></radialGradient>
              <radialGradient id="glowChest">   <stop offset="0%" stop-color="#ec407a" stop-opacity="0.45"/><stop offset="100%" stop-color="#ec407a" stop-opacity="0"/></radialGradient>
              <radialGradient id="glowAbdomen"> <stop offset="0%" stop-color="#4caf50" stop-opacity="0.40"/><stop offset="100%" stop-color="#4caf50" stop-opacity="0"/></radialGradient>
              <radialGradient id="glowRepro">   <stop offset="0%" stop-color="#9c27b0" stop-opacity="0.40"/><stop offset="100%" stop-color="#9c27b0" stop-opacity="0"/></radialGradient>
              <radialGradient id="glowArms">    <stop offset="0%" stop-color="#ff9800" stop-opacity="0.35"/><stop offset="100%" stop-color="#ff9800" stop-opacity="0"/></radialGradient>
              <radialGradient id="glowLegs">    <stop offset="0%" stop-color="#2196f3" stop-opacity="0.35"/><stop offset="100%" stop-color="#2196f3" stop-opacity="0"/></radialGradient>
            </defs>
          </svg>

          <!-- orbit cards (JS-populated) -->
          <div class="orbit-cards-wrap" id="orbitCards"></div>
        </div>

        <!-- ─── RIGHT COL: info panel + scan overlay (depression.html pattern) ─── -->
        <div class="body-info-panel" id="detailPanelInline">
          <!-- scanning beam -->
          <div class="scan-overlay" id="scanOverlay"></div>

          <!-- empty state (shown before first tap) -->
          <div class="info-empty-state" id="infoEmpty">
            <i class="fas fa-hand-pointer info-empty-icon"></i>
            <p class="info-empty-title">Tap a glowing zone</p>
            <p class="info-empty-sub">on the body to scan &amp; reveal vaccines</p>
          </div>

          <!-- populated content (hidden until zone tapped) -->
          <div class="info-content" id="infoContent">
            <div class="info-header">
              <div class="info-icon-large" id="detailZoneBadge">🫁</div>
              <div class="info-title">
                <h3 id="detailTitle">Chest &amp; Lungs</h3>
                <span class="info-subtitle">Tap a vaccine card to expand</span>
              </div>
            </div>
            <div class="detail-vaccines" id="detailVaccines"><!-- JS --></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============= SECTION: MYTHS ============= -->
  <section id="section-myths" class="section hidden">
    <div class="section-header">
      <h2 class="section-title">Myth vs. Shield Truth</h2>
      <p class="section-subtitle">Tap each card to flip and reveal — is it a myth or a proven fact?</p>
    </div>
    <div class="myth-cards-grid" id="mythCards"><!-- JS --></div>
    <div class="myth-stats">
      <div class="myth-stat"><span class="myth-stat-num" id="mythsUnbusted">0</span><span class="myth-stat-label">myths busted</span></div>
      <div class="myth-stat"><span class="myth-stat-num" id="mythsTotal">0</span><span class="myth-stat-label">total myths</span></div>
    </div>
  </section>

  <!-- ============= SECTION: QUIZ ============= -->
  <section id="section-quiz" class="section hidden">
    <div class="section-header">
      <h2 class="section-title">Shield Quiz</h2>
      <p class="section-subtitle">Test what you know. Each correct answer earns a shield!</p>
    </div>
    <div class="quiz-container">
      <div class="quiz-progress-bar"><div class="quiz-progress-fill" id="quizProgressFill" style="width:0%"></div></div>
      <div class="quiz-question-wrap" id="quizQuestionWrap">
        <div class="quiz-number" id="quizNumber">Question 1 / 8</div>
        <h3 class="quiz-question" id="quizQuestion">Loading…</h3>
        <div class="quiz-options" id="quizOptions"></div>
      </div>
      <div class="quiz-result-wrap hidden" id="quizResultWrap">
        <div class="quiz-result-icon" id="quizResultIcon">🎉</div>
        <h3 class="quiz-result-title" id="quizResultTitle">Quiz Complete!</h3>
        <p class="quiz-result-score" id="quizResultScore">You earned 6 shields!</p>
        <button class="quiz-restart-btn" id="quizRestartBtn">Play Again</button>
      </div>
    </div>
  </section>

  <!-- ============= SECTION: PLANNER ============= -->
  <section id="section-planner" class="section hidden">
    <div class="section-header">
      <h2 class="section-title">My Vaccine Planner</h2>
      <p class="section-subtitle">Select your age range to generate your personalised shield timeline.</p>
    </div>
    <div class="planner-age-select">
      <div class="planner-age-chips" id="plannerAgeChips">
        <button class="age-chip active" data-age="0-2">👶 Birth–2yr</button>
        <button class="age-chip" data-age="2-5">🧒 2–5yr</button>
        <button class="age-chip" data-age="5-12">👧 5–12yr</button>
        <button class="age-chip" data-age="11-18">👩 11–18yr</button>
        <button class="age-chip" data-age="18-45">👩‍💼 18–45yr</button>
        <button class="age-chip" data-age="pregnant">🤰 Pregnant</button>
        <button class="age-chip" data-age="50-65">🧑‍🦳 50–65yr</button>
        <button class="age-chip" data-age="65+">👵 65+</button>
      </div>
    </div>
    <div class="planner-timeline" id="plannerTimeline"><!-- JS --></div>
    <div class="planner-checklist-wrap">
      <h3 class="planner-checklist-title">📋 My Shield Checklist</h3>
      <div class="planner-checklist" id="plannerChecklist"><!-- JS --></div>
    </div>
  </section>

</div><!-- /page-container -->
</div><!-- /app -->

<!-- TOAST -->
<div class="toast" id="toast">
  <span class="toast-icon">✨</span>
  <span class="toast-msg" id="toastMsg">Shield earned!</span>
</div>

<!-- VACCINE SCHEDULER MODAL -->
<div id="schedulerModal" class="scheduler-modal">
  <div class="scheduler-modal-content">
    <button class="scheduler-close" onclick="closeScheduler()">✕</button>
    
    <div class="scheduler-header">
      <div class="scheduler-icon">
        <i class="fas fa-calendar-check"></i>
      </div>
      <h2>Vaccine Scheduler</h2>
      <p class="scheduler-subtitle">Plan your vaccination journey based on your profile</p>
    </div>

    <div class="scheduler-body" id="schedulerBody">
      <!-- STEP 1: Profile Selection -->
      <div class="scheduler-step active" id="step1">
        <h3 class="step-title">Step 1: Your Profile</h3>
        <p class="step-desc">Tell us about yourself to get personalized recommendations</p>
        
        <div class="profile-form">
          <div class="form-group">
            <label><i class="fas fa-birthday-cake"></i> Age</label>
            <div class="age-input-group">
              <input type="number" id="schedulerAge" min="0" max="100" value="25" class="form-input">
              <span class="input-unit">years</span>
            </div>
          </div>

          <div class="form-group">
            <label><i class="fas fa-venus"></i> Life Stage</label>
            <select id="lifeStage" class="form-select">
              <option value="infant">Infant (0-2 years)</option>
              <option value="child">Child (2-12 years)</option>
              <option value="adolescent">Adolescent (13-18 years)</option>
              <option value="adult" selected>Adult (18-65 years, not pregnant)</option>
              <option value="pregnant">Pregnant</option>
              <option value="postpartum">Postpartum (within 6 months)</option>
              <option value="elderly">Elderly (65+ years)</option>
            </select>
          </div>

          <div class="form-group" id="pregnancyWeeks" style="display:none;">
            <label><i class="fas fa-baby"></i> Pregnancy Week (if applicable)</label>
            <input type="number" id="pregWeek" min="1" max="42" placeholder="Enter week" class="form-input">
          </div>

          <div class="form-group">
            <label><i class="fas fa-flag"></i> Priority</label>
            <select id="priority" class="form-select">
              <option value="routine">Routine Vaccination</option>
              <option value="catch-up">Catch-up / Missed Vaccines</option>
              <option value="travel">Travel-related</option>
              <option value="outbreak">Outbreak/Emergency</option>
              <option value="high-risk">High-risk Condition</option>
            </select>
          </div>

          <div class="form-group">
            <label><i class="fas fa-notes-medical"></i> Health Conditions (Optional)</label>
            <div class="checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" value="immunocompromised"> Immunocompromised
              </label>
              <label class="checkbox-label">
                <input type="checkbox" value="diabetes"> Diabetes
              </label>
              <label class="checkbox-label">
                <input type="checkbox" value="heart"> Heart Disease
              </label>
              <label class="checkbox-label">
                <input type="checkbox" value="asthma"> Asthma/Respiratory
              </label>
              <label class="checkbox-label">
                <input type="checkbox" value="allergies"> Severe Allergies
              </label>
            </div>
          </div>
        </div>

        <button class="scheduler-btn-primary" onclick="goToStep2()">
          Next: Select Vaccines <i class="fas fa-arrow-right"></i>
        </button>
      </div>

      <!-- STEP 2: Vaccine Selection -->
      <div class="scheduler-step" id="step2">
        <h3 class="step-title">Step 2: Recommended Vaccines</h3>
        <p class="step-desc">Based on your profile, here are your recommended vaccines</p>

        <div class="vaccines-filter">
          <button class="filter-tag active" data-filter="all">All</button>
          <button class="filter-tag" data-filter="due">Due Now</button>
          <button class="filter-tag" data-filter="upcoming">Upcoming</button>
          <button class="filter-tag" data-filter="completed">Completed</button>
        </div>

        <div id="vaccineList" class="vaccine-list">
          <!-- JS populated -->
        </div>

        <div class="scheduler-nav">
          <button class="scheduler-btn-secondary" onclick="goToStep1()">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="scheduler-btn-primary" onclick="goToStep3()">
            Review Schedule <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- STEP 3: Review & Schedule -->
      <div class="scheduler-step" id="step3">
        <h3 class="step-title">Step 3: Your Vaccination Schedule</h3>
        <p class="step-desc">Review and book your appointments</p>

        <div class="schedule-summary" id="scheduleSummary">
          <!-- JS populated -->
        </div>

        <div class="important-notes" id="importantNotes">
          <h4><i class="fas fa-exclamation-triangle"></i> Important Precautions</h4>
          <div id="precautionsList">
            <!-- JS populated -->
          </div>
        </div>

        <div class="scheduler-nav">
          <button class="scheduler-btn-secondary" onclick="goToStep2()">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="scheduler-btn-primary" onclick="downloadSchedule()">
            <i class="fas fa-download"></i> Download Schedule
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>

  /* ================================================================
   ShieldHer — vaccination.js
   Theme: Nari Swasthya Light  |  All original data & game logic preserved
   Changes: connected-particle hero, heroEnter reveal, scan-overlay, morph-tracker
   ================================================================ */

// ─── PARTICLE NETWORK (depression.html connected-constellation style) ───
(function(){
  const canvas = document.getElementById('particleCanvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  let W, H;

  function resize(){
    // size canvas to its parent (hero-constellation)
    const hero = canvas.parentElement.parentElement;
    W = canvas.width  = hero.offsetWidth;
    H = canvas.height = hero.offsetHeight;
  }
  resize();
  window.addEventListener('resize', resize);

  const particles = [];
  const COUNT = 100;

  class Particle {
    constructor(){
      this.x  = Math.random() * W;
      this.y  = Math.random() * H;
      this.vx = (Math.random() - 0.5) * 0.5;
      this.vy = (Math.random() - 0.5) * 0.5;
      this.r  = Math.random() * 2 + 1;
    }
    update(){
      this.x += this.vx;
      this.y += this.vy;
      if(this.x < 0 || this.x > W) this.vx *= -1;
      if(this.y < 0 || this.y > H) this.vy *= -1;
    }
    draw(){
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.r, 0, Math.PI*2);
      ctx.fillStyle = 'rgba(236, 64, 122, 0.6)';
      ctx.fill();
    }
  }

  for(let i=0; i<COUNT; i++) particles.push(new Particle());

  function connectParticles(){
    for(let i=0; i<particles.length; i++){
      for(let j=i+1; j<particles.length; j++){
        const dx = particles[i].x - particles[j].x;
        const dy = particles[i].y - particles[j].y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        if(dist < 100){
          ctx.beginPath();
          ctx.strokeStyle = `rgba(236, 64, 122, ${0.2 * (1 - dist/100)})`;
          ctx.lineWidth = 1;
          ctx.moveTo(particles[i].x, particles[i].y);
          ctx.lineTo(particles[j].x, particles[j].y);
          ctx.stroke();
        }
      }
    }
  }

  function loop(){
    ctx.clearRect(0, 0, W, H);
    particles.forEach(p => { p.update(); p.draw(); });
    connectParticles();
    requestAnimationFrame(loop);
  }
  loop();
})();

// ─── GRADIENT MORPH MOUSE TRACKER (depression.html pattern) ─────────────
(function(){
  const hero  = document.getElementById('heroConstellation');
  const morph = document.getElementById('gradientMorph');
  if(!hero || !morph) return;
  hero.addEventListener('mousemove', e => {
    const r = hero.getBoundingClientRect();
    const x = ((e.clientX - r.left) / r.width)  * 100;
    const y = ((e.clientY - r.top)  / r.height) * 100;
    morph.style.background =
      `radial-gradient(circle at ${x}% ${y}%, rgba(236,64,122,0.12) 0%, transparent 60%)`;
  });
})();

// ─── HERO ENTER → REVEAL APP ─────────────────────────────────────────────
// Wrap in DOMContentLoaded to ensure element exists
document.addEventListener('DOMContentLoaded', () => {
  const heroEnterBtn = document.getElementById('heroEnter');
  if (heroEnterBtn) {
    heroEnterBtn.addEventListener('click', () => {
      const hero = document.getElementById('heroConstellation');
      hero.style.transition = 'opacity .5s ease, transform .5s ease';
      hero.style.opacity    = '0';
      hero.style.transform  = 'translateY(-30px)';
      setTimeout(() => {
        hero.style.display = 'none';
        document.getElementById('app').classList.remove('hidden');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }, 520);
    });
  }
});

// ─── TOAST UTILITY ───────────────────────────────────────────────────────
let toastTimeout;
function showToast(msg, icon = '✨') {
  const toast = document.getElementById('toast');
  document.getElementById('toastMsg').textContent = msg;
  toast.querySelector('.toast-icon').textContent = icon;
  toast.classList.add('show');
  clearTimeout(toastTimeout);
  toastTimeout = setTimeout(() => toast.classList.remove('show'), 2400);
}

// ─── SCORE SYSTEM ────────────────────────────────────────────────────────
let score = 0;
function addScore(n) {
  score += n;
  document.getElementById('scoreVal').textContent = score;
  showToast(`+${n} shield${n > 1 ? 's' : ''} earned!`, '🛡️');
}
function updateProgress(pct) {
  document.getElementById('progressFill').style.width  = Math.min(pct, 100) + '%';
  document.getElementById('progressText').textContent  = Math.min(Math.round(pct), 100) + '% Protected';
}

// ─── NAV TABS (toggle-btn class) ─────────────────────────────────────────
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.toggle-btn').forEach(tab => {
    tab.addEventListener('click', () => {
      document.querySelectorAll('.toggle-btn').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.section').forEach(s => { s.classList.remove('active'); s.classList.add('hidden'); });
      tab.classList.add('active');
      const target = document.getElementById('section-' + tab.dataset.section);
      if(target){ target.classList.remove('hidden'); target.classList.add('active'); }
    });
  });
});

// ═══════════════════════════════════════════════════════════════════════════
//  DATA — all original constants preserved exactly
// ═══════════════════════════════════════════════════════════════════════════

// ─── VACCINES BY BODY ZONE ───────────────────────────────────────────────
// ─── VACCINES BY BODY ZONE ───────────────────────────────────────────────
const VACCINES_BY_ZONE = {
  head: {
    emoji: '🧠',
    title: 'Head & Brain',
    vaccines: [
      {
        emoji: '🩸',
        name: 'BCG',
        target: 'Tuberculosis (TB) in brain & body',
        protection: '70–80% against severe TB in children [file:1]',
        consequence: 'TB meningitis and miliary TB carry ~50% mortality even with treatment [file:1]',
        timing: 'At birth (or as soon as possible in 1st year) [file:1]'
      },
      {
        emoji: '🧬',
        name: 'Hib Vaccine',
        target: 'Bacterial Meningitis & Epiglottitis',
        protection: '≈95% protection against invasive Hib disease [file:1]',
        consequence: 'Hib meningitis: 15–30% fatal; 20–40% survivors have permanent neurological damage [file:1]',
        timing: '6, 10, 14 weeks; booster at 15–18 months [file:1]'
      },
      {
        emoji: '🛡️',
        name: 'Meningococcal (MenACWY)',
        target: 'Bacterial Meningitis & Septicemia',
        protection: '85–95% against vaccine serogroups [file:1]',
        consequence: 'Can kill within 24 hours; survivors may have deafness, limb loss or brain damage [file:1]',
        timing: 'Age 11–12, booster at 16 (earlier for high‑risk) [file:1]'
      },
      {
        emoji: '🌾',
        name: 'Japanese Encephalitis',
        target: 'Viral Brain Inflammation',
        protection: '≈90–95% after complete series [file:1]',
        consequence: 'About 20–30% die; up to 50% of survivors have permanent brain or movement problems [file:1]',
        timing: 'From 9 months in endemic rural areas; booster as per local program [file:1]'
      },
      {
        emoji: '🌈',
        name: 'MMR (Measles component)',
        target: 'Measles Encephalitis & SSPE',
        protection: '≈97% against measles after 2 doses [file:1]',
        consequence: 'Measles can cause pneumonia, encephalitis and rare fatal brain degeneration (SSPE) [file:1]',
        timing: '9–12 months; 2nd dose at 15–18 months or 4–6 years [file:1]'
      }
    ]
  },

  chest: {
    emoji: '🫁',
    title: 'Chest & Lungs',
    vaccines: [
      {
        emoji: '🧷',
        name: 'Pneumococcal (PCV)',
        target: 'Bacterial Pneumonia & Sepsis',
        protection: '≈75–85% reduction in invasive pneumococcal disease [file:1]',
        consequence: 'Pneumococcal meningitis ~30% fatal; pneumonia is a leading infectious killer [file:1]',
        timing: '6, 10, 14 weeks + booster at 12–15 months; adult doses at 65+ [file:1]'
      },
      {
        emoji: '🛠️',
        name: 'DTaP / Tdap',
        target: 'Diphtheria, Tetanus, Whooping Cough',
        protection: 'Near 100% for diphtheria & tetanus; 85–90% against pertussis after full series [file:1]',
        consequence: 'Pertussis is a leading cause of vaccine‑preventable infant death; tetanus is 10–20% fatal [file:1]',
        timing: 'DTaP at 6, 10, 14 wks; boosters at 15–18 mo & 4–6 yr; Tdap at 11–12 yr, then Td/Tdap every 10 yr [file:1]'
      },
      {
        emoji: '🍂',
        name: 'Influenza (Annual)',
        target: 'Seasonal Flu & Flu Pneumonia',
        protection: '≈40–60% reduction in flu illness; higher against severe outcomes [file:1]',
        consequence: 'Pregnant women have ~5× higher risk of severe flu; flu causes hundreds of thousands of deaths yearly [file:1]',
        timing: 'Annually from 6 months of age, before and during flu season [file:1]'
      },
      {
        emoji: '🫧',
        name: 'COVID-19',
        target: 'SARS-CoV-2 (COVID-19)',
        protection: '≈90–95% reduction in severe disease & death with up‑to‑date doses [file:1]',
        consequence: 'Risk of pneumonia, ARDS, long COVID, and in pregnancy: preterm birth and stillbirth [file:1]',
        timing: 'Primary series from 6 months + updated boosters as per guidance [file:1]'
      },
      {
        emoji: '🌬️',
        name: 'RSV (Maternal / Older Adult)',
        target: 'Severe RSV Bronchiolitis & Pneumonia',
        protection: 'Strong reduction in infant RSV hospitalizations and severe disease in older adults [file:1]',
        consequence: 'RSV is a major cause of hospitalization in infants and frail elderly [file:1]',
        timing: 'Maternal dose at 32–36 weeks; older‑adult vaccine per local recommendations [file:1]'
      }
    ]
  },

  abdomen: {
    emoji: '🩺',
    title: 'Digestive System',
    vaccines: [
      {
        emoji: '🫀',
        name: 'Hepatitis B',
        target: 'Chronic Liver Inflammation & Liver Cancer',
        protection: '≈95% protection; cuts liver cancer risk by about 90% [file:1]',
        consequence: '≈90% of infected infants become chronic carriers, leading to cirrhosis and liver cancer [file:1]',
        timing: 'Birth (within 24 h), 1–2 months, 6–18 months [file:1]'
      },
      {
        emoji: '🥗',
        name: 'Hepatitis A',
        target: 'Acute Viral Hepatitis A',
        protection: '≈95–100% after 2 doses [file:1]',
        consequence: 'Can cause weeks of jaundice and fatigue; rare but real risk of fulminant liver failure [file:1]',
        timing: '12–23 months; 2nd dose 6–18 months later; catch‑up any time [file:1]'
      },
      {
        emoji: '🚰',
        name: 'Rotavirus',
        target: 'Severe Diarrhea & Dehydration',
        protection: '≈85–98% against severe rotavirus disease [file:1]',
        consequence: 'Severe dehydration, seizures and ~200,000 child deaths annually worldwide [file:1]',
        timing: '6 & 10 weeks (or 6, 10, 14 weeks by brand); must finish by 8 months [file:1]'
      },
      {
        emoji: '🍛',
        name: 'Typhoid (incl. TCV)',
        target: 'Typhoid Fever & Intestinal Complications',
        protection: '≈50–80% for older vaccines; ≈85% with conjugate (TCV) [file:1]',
        consequence: 'Can cause weeks of high fever; intestinal perforation in 3–5% and up to 10–30% fatality if untreated [file:1]',
        timing: 'From 6–9 months or 1–2 years in endemic areas; boosters per product/travel risk [file:1]'
      },
      {
        emoji: '🌊',
        name: 'Cholera (Travel / Outbreak)',
        target: 'Severe Watery Diarrhea (Cholera)',
        protection: 'Good protection against severe cholera in high‑risk settings [file:1]',
        consequence: 'Profound dehydration and shock in hours without treatment [file:1]',
        timing: 'From 1 year in travelers or outbreak settings; 2‑dose oral series [file:1]'
      }
    ]
  },

  reproductive: {
    emoji: '💜',
    title: 'Reproductive Health',
    vaccines: [
      {
        emoji: '🎗️',
        name: 'HPV Vaccine',
        target: 'Cervical Cancer & Other HPV Cancers',
        protection: 'Nearly 100% against HPV 16/18 (≈70% of cervical cancers) [file:1]',
        consequence: 'Cervical cancer is the 2nd leading cancer killer of Indian women; HPV also causes vulvar, vaginal and anal cancers [file:1]',
        timing: 'Ages 9–14 (2 doses); 15–26 (3 doses); 27–45 case‑by‑case [file:1]'
      },
      {
        emoji: '🤰',
        name: 'MMR (Rubella component)',
        target: 'Rubella & Congenital Rubella Syndrome',
        protection: '≈97% protection against rubella after 2 doses [file:1]',
        consequence: 'Rubella in 1st trimester can cause CRS in up to 90% (deafness, heart defects, cataracts, intellectual disability) [file:1]',
        timing: '9–12 months; 2nd dose at 15–18 months or 4–6 years; check & vaccinate pre‑conception if non‑immune [file:1]'
      },
      {
        emoji: '🌸',
        name: 'Varicella (Chickenpox)',
        target: 'Chickenpox & Later Shingles',
        protection: '≈90% against any chickenpox; ≈95–100% against severe disease [file:1]',
        consequence: 'Varicella in pregnancy can cause birth defects and severe maternal pneumonia; adults have 10–20× higher complication rates [file:1]',
        timing: '12–15 months; booster at 4–6 years; 2‑dose catch‑up for non‑immune teens/adults (avoid in pregnancy) [file:1]'
      },
      {
        emoji: '🫄',
        name: 'Tdap in Pregnancy',
        target: 'Infant Whooping Cough',
        protection: '≈91% reduction in infant pertussis; ≈95% reduction in infant hospitalizations [file:1]',
        consequence: 'Around 90% of pertussis deaths occur in infants <6 months [file:1]',
        timing: 'Every pregnancy at 27–36 weeks (prefer early in window) [file:1]'
      },
      {
        emoji: '🩹',
        name: 'COVID-19 in Pregnancy',
        target: 'Severe Maternal COVID & Pregnancy Complications',
        protection: 'Marked reduction in ICU admission, severe disease and stillbirth [file:1]',
        consequence: 'Unvaccinated pregnant women face higher risk of severe COVID‑19, preterm birth and stillbirth [file:1]',
        timing: 'Any trimester with the most recent recommended dose [file:1]'
      }
    ]
  },

  arms: {
    emoji: '💪',
    title: 'General Immunity',
    vaccines: [
      {
        emoji: '🏃‍♀️',
        name: 'Polio (IPV/OPV)',
        target: 'Paralytic Poliomyelitis',
        protection: '≈99% protection with full IPV/OPV series [file:1]',
        consequence: 'About 1 in 200 infections causes irreversible paralysis; 5–10% of paralytic cases are fatal [file:1]',
        timing: 'IPV at 2, 4, 6–18 months & 4–6 years; OPV at birth, 6, 10, 14 weeks in some programs [file:1]'
      },
      {
        emoji: '🧪',
        name: 'Hib Vaccine',
        target: 'Invasive Hib (Meningitis, Pneumonia, Sepsis)',
        protection: '≈95% against invasive disease [file:1]',
        consequence: 'Can cause life‑threatening meningitis or sepsis with permanent disability or death [file:1]',
        timing: '6, 10, 14 weeks; booster at 15–18 months [file:1]'
      },
      {
        emoji: '🐕',
        name: 'Rabies',
        target: 'Fatal Viral Encephalitis',
        protection: 'Nearly 100% prevention if post‑exposure series completed before symptoms [file:1]',
        consequence: 'Once symptoms appear, rabies is almost 100% fatal; India sees ~20,000 deaths/year [file:1]',
        timing: 'Post‑exposure: immediate after bite; Pre‑exposure: for high‑risk jobs and travelers [file:1]'
      },
      {
        emoji: '✨',
        name: 'MMR (Measles & Mumps components)',
        target: 'Measles, Mumps & Their Complications',
        protection: '≈97% against measles; ≈88% against mumps after 2 doses [file:1]',
        consequence: 'Measles can cause pneumonia and encephalitis; mumps can cause deafness and, rarely, infertility [file:1]',
        timing: '9–12 months; 2nd dose at 15–18 months or 4–6 years; catch‑up any time [file:1]'
      }
    ]
  },

  legs: {
    emoji: '🦶',
    title: 'Long-Term Protection',
    vaccines: [
      {
        emoji: '🕒',
        name: 'Shingles (Shingrix)',
        target: 'Herpes Zoster & Chronic Nerve Pain',
        protection: '≈97% protection ages 50–69; ≈91% in ages 70+ [file:1]',
        consequence: '1 in 3 people develop shingles; postherpetic neuralgia can cause severe pain for months or years [file:1]',
        timing: 'Age 50+ (2‑dose series, 2–6 months apart) [file:1]'
      },
      {
        emoji: '🏥',
        name: 'Pneumococcal (PPSV23 with PCV)',
        target: 'Pneumonia, Sepsis & Meningitis in Older Adults',
        protection: '≈60–70% against invasive disease in healthy elderly when used with conjugate vaccine [file:1]',
        consequence: 'Pneumococcal pneumonia and sepsis have 15–30% mortality in older adults [file:1]',
        timing: 'Age 65+ after PCV15 (or PCV20 alone per schedule); earlier for high‑risk [file:1]'
      },
      {
        emoji: '🧣',
        name: 'High-Dose / Adjuvanted Influenza',
        target: 'Severe Seasonal Flu in 65+',
        protection: 'Stronger immune response and better protection than standard flu vaccine in elderly [file:1]',
        consequence: 'Adults 65+ are at highest risk of flu‑related hospitalization and death [file:1]',
        timing: 'Annually from age 65 [file:1]'
      },
      {
        emoji: '🔁',
        name: 'Td / Tdap Lifelong Boosters',
        target: 'Tetanus & Diphtheria in Later Life',
        protection: 'Maintains near‑complete protection when boosted every 10 years [file:1]',
        consequence: 'Tetanus remains 10–20% fatal and does not confer natural immunity after infection [file:1]',
        timing: 'Every 10 years throughout adulthood; one Tdap if never received [file:1]'
      }
    ]
  }
};


// ─── AGE STAGES ──────────────────────────────────────────────────────────
const AGE_STAGES = [
  { id:'birth',    emoji:'👶', label:'Birth–2yr',  zones:['head','chest','abdomen','arms'],                        color:'var(--neuron-blue)' },
  { id:'toddler',  emoji:'🧒', label:'2–5 yrs',   zones:['head','chest','abdomen','reproductive','arms'],         color:'var(--mild)' },
  { id:'child',    emoji:'👧', label:'5–12 yrs',  zones:['head','chest','abdomen','arms','legs'],                  color:'var(--moderate)' },
  { id:'teen',     emoji:'👩', label:'11–18 yrs', zones:['head','reproductive','chest','arms'],                    color:'var(--serious)' },
  { id:'adult',    emoji:'👩‍💼', label:'18–45 yrs', zones:['chest','reproductive','abdomen'],                      color:'var(--deep-pink)' },
  { id:'pregnant', emoji:'🤰', label:'Pregnant',  zones:['reproductive','chest','abdomen'],                       color:'#e88cb4' },
  { id:'middle',   emoji:'🧑‍🦳', label:'50–65 yrs', zones:['legs','chest','head'],                                color:'var(--neuron-blue)' },
  { id:'senior',   emoji:'👵', label:'65+ yrs',   zones:['legs','chest','head'],                                   color:'var(--serious)' }
];

// ─── BUILD AGE WHEEL ─────────────────────────────────────────────────────
document.addEventListener('DOMContentLoaded', () => {
  const ageWheel = document.getElementById('ageWheel');
  if (ageWheel) {
    AGE_STAGES.forEach((stage, i) => {
      const card = document.createElement('div');
      card.className = 'age-card' + (i === 0 ? ' active' : '');
      card.innerHTML = `<span class="age-emoji">${stage.emoji}</span><span class="age-label">${stage.label}</span>`;
      card.addEventListener('click', () => selectAgeStage(stage));
      ageWheel.appendChild(card);
    });
  }
});

let currentStage = AGE_STAGES[0];

function selectAgeStage(stage) {
  currentStage = stage;
  document.querySelectorAll('.age-card').forEach((c, i) => c.classList.toggle('active', AGE_STAGES[i] === stage));
  document.getElementById('selectedStageLabel').textContent = `Selected: ${stage.emoji} ${stage.label}`;
  showBodyMap(stage);
  showToast(`Viewing: ${stage.label}`, stage.emoji);
}

// ─── BODY MAP ────────────────────────────────────────────────────────────
function showBodyMap(stage) {
  const wrap = document.getElementById('bodyMapWrap');
  wrap.style.display = 'block';
  document.getElementById('bodyMapTitle').textContent = 'Your Shield Map';
  document.getElementById('bodyMapSubtitle').textContent = `Tap a glowing zone or a floating card to explore vaccines for ${stage.label}`;

  // glow zones
  document.querySelectorAll('.glow-zone').forEach(g => {
    g.classList.toggle('active', stage.zones.includes(g.dataset.zone));
    g.style.opacity = stage.zones.includes(g.dataset.zone) ? '0.7' : '0';
  });

  // shield icons
  document.querySelectorAll('.shield-icon').forEach(si => {
    si.style.opacity = stage.zones.includes(si.dataset.zone) ? '1' : '0.15';
  });

  buildOrbitCards(stage);
  updateProgress((stage.zones.length / 6) * 100);
}

function buildOrbitCards(stage) {
  const container = document.getElementById('orbitCards');
  container.innerHTML = '';

  const positions = [
    { x:'5%',  y:'15%' },
    { x:'82%', y:'12%' },
    { x:'-8%', y:'45%' },
    { x:'85%', y:'42%' },
    { x:'2%',  y:'72%' },
    { x:'80%', y:'72%' },
    { x:'30%', y:'-6%' },
    { x:'60%', y:'-4%' }
  ];

  let idx = 0;
  stage.zones.forEach(zone => {
    const zoneData = VACCINES_BY_ZONE[zone];
    if(!zoneData || idx >= positions.length) return;
    const pos = positions[idx++];
    const card = document.createElement('div');
    card.className = 'orbit-item';
    card.style.left = pos.x;
    card.style.top  = pos.y;
    card.innerHTML  = `<span class="oi-emoji">${zoneData.emoji}</span><span class="oi-label">${zoneData.title}</span>`;
    card.addEventListener('click', () => openDetailPanel(zone));
    container.appendChild(card);
  });
}

// ─── BODY HOTSPOT CLICKS ─────────────────────────────────────────────────
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.hotspot').forEach(hp => {
    hp.addEventListener('click', () => {
      const zone = hp.dataset.zone;
      if(currentStage.zones.includes(zone)){
        openDetailPanel(zone);
      } else {
        showToast('This zone is not active for your age stage.', '💡');
      }
    });
  });
});

// ─── DETAIL PANEL (inline info panel with scan overlay) ─────────────────
function openDetailPanel(zone) {
  const data = VACCINES_BY_ZONE[zone];
  if(!data) return;

  // ── trigger scan beam ──
  const scanEl = document.getElementById('scanOverlay');
  scanEl.classList.remove('scanning');
  void scanEl.offsetWidth; // force reflow
  scanEl.classList.add('scanning');

  // ── populate header ──
  document.getElementById('detailZoneBadge').textContent = data.emoji;
  document.getElementById('detailTitle').textContent     = data.title;

  // ── populate vaccine cards ──
  const container = document.getElementById('detailVaccines');
  container.innerHTML = '';

  data.vaccines.forEach(v => {
    const card = document.createElement('div');
    card.className = 'vax-card';
    card.innerHTML = `
      <div class="vax-card-header">
        <span class="vax-card-emoji">${v.emoji}</span>
        <div>
          <div class="vax-card-name">${v.name}</div>
          <div class="vax-card-target">${v.target}</div>
        </div>
        <span class="vax-card-chevron">▼</span>
      </div>
      <div class="vax-card-body">
        <div class="vax-stat"><span class="vax-stat-dot"></span><span class="vax-stat-text">✅ <strong>Protection:</strong> ${v.protection}</span></div>
        <div class="vax-stat"><span class="vax-stat-dot warn"></span><span class="vax-stat-text">⚠️ <strong>Without it:</strong> ${v.consequence}</span></div>
        <div class="vax-stat"><span class="vax-stat-dot"></span><span class="vax-stat-text">⏰ <strong>When:</strong> ${v.timing}</span></div>
      </div>`;
    card.addEventListener('click', () => {
      card.classList.toggle('expanded');
      if(card.classList.contains('expanded')) addScore(1);
    });
    container.appendChild(card);
  });

  // ── swap empty → content ──
  document.getElementById('infoEmpty').style.display  = 'none';
  const ic = document.getElementById('infoContent');
  ic.classList.remove('active');
  void ic.offsetWidth;
  ic.classList.add('active');
}

// ─── MYTHS DATA ──────────────────────────────────────────────────────────
// ─── MYTHS ───────────────────────────────────────────────────────────────
const MYTHS = [
  {
    text: 'Vaccines cause autism.',
    isMyth: true,
    explain: 'The original study was retracted and the author lost his medical license for fraud. Large studies in over a million children show zero link. Autism has genetic and environmental causes completely unrelated to vaccines. [file:1]'
  },
  {
    text: 'Natural immunity is always better than vaccine immunity.',
    isMyth: true,
    explain: 'Natural infection means getting the disease first — risking death, disability, or lifelong complications. Vaccines give immunity without that danger. For tetanus and HPV, vaccine‑induced immunity is actually more reliable and safer. [file:1]'
  },
  {
    text: "Vaccines overwhelm a baby's immune system.",
    isMyth: true,
    explain: "A baby's immune system meets thousands of antigens daily from food, air, and normal bacteria. Modern vaccines use far fewer antigens than older schedules — the immune system handles them effortlessly. [file:1]"
  },
  {
    text: 'HPV vaccine prevents cervical cancer.',
    isMyth: false,
    explain: 'TRUE! HPV vaccine blocks high‑risk types like 16 and 18 that cause about 70% of cervical cancers. It can reduce cervical precancers by ~90% when given before sexual debut — one of the strongest cancer‑prevention tools we have. [file:1]'
  },
  {
    text: "You can't get vaccinated while pregnant.",
    isMyth: true,
    explain: 'Inactivated vaccines like Tdap, influenza, and COVID‑19 are not only safe but specifically recommended in pregnancy. They lower the mother’s risk and pass protective antibodies to the baby before birth. [file:1]'
  },
  {
    text: 'Breastfeeding moms must avoid vaccines.',
    isMyth: true,
    explain: 'FALSE. Routine vaccines are safe in breastfeeding. Antibodies in breast milk actually complement infant vaccines and enhance protection; there is no need to stop or interrupt breastfeeding. [file:1]'
  },
  {
    text: 'Vaccines save 2–3 million lives every year.',
    isMyth: false,
    explain: 'TRUE. WHO estimates vaccines prevent 2–3 million deaths annually. Smallpox has been eradicated, polio is nearly gone, and measles deaths fell by more than 70% between 2000 and 2018. [file:1]'
  },
  {
    text: 'Vaccine ingredients like aluminum are toxic.',
    isMyth: true,
    explain: 'The tiny amounts of aluminum used as adjuvants are far below everyday exposure from food and water. These ingredients have been studied for decades and are used to make vaccines work better, not to poison the body. [file:1]'
  },
  {
    text: 'One vaccine dose is enough for full protection.',
    isMyth: true,
    explain: 'Most vaccines need multiple doses and boosters to build strong, long‑lasting immunity. Each dose reminds and strengthens the immune system; stopping after one shot often leaves only partial protection. [file:1]'
  },
  {
    text: 'Maternal Tdap vaccination protects newborns from whooping cough.',
    isMyth: false,
    explain: 'TRUE. Tdap in every pregnancy (27–36 weeks) cuts infant pertussis by about 91% and hospitalizations by 95%. Newborns are too young for their own DTaP; maternal antibodies bridge that vulnerable period. [file:1]'
  },

  // NEW ITEMS

  {
    text: 'If most other people are vaccinated, my child doesn’t need vaccines.',
    isMyth: true,
    explain: 'Herd immunity only works when very high coverage is maintained. Clusters of unvaccinated people fuel outbreaks of measles, pertussis, and other diseases — and the most vulnerable (newborns, immunocompromised) pay the price. [file:1]'
  },
  {
    text: 'Delaying or spreading out vaccines is safer than following the routine schedule.',
    isMyth: true,
    explain: 'Alternative schedules have no evidence of better safety and leave children unprotected for longer during the highest‑risk months. Official schedules are based on decades of data on immune development and disease risk. [file:1]'
  },
  {
    text: 'Once you miss childhood vaccines, it’s too late to catch up as an adult.',
    isMyth: true,
    explain: 'Catch‑up vaccination works at any age. You usually don’t need to restart a series; previous doses still count, and accelerated schedules can close gaps quickly. It is almost never “too late” to vaccinate. [file:1]'
  },
  {
    text: 'Getting the disease once gives lifelong protection, so vaccines are unnecessary.',
    isMyth: true,
    explain: 'Some infections do not give reliable lifelong immunity (e.g., tetanus), and others carry huge risks the first time (measles, HPV, hepatitis B). Vaccines give protection without risking intensive care, disability, or death. [file:1]'
  },
  {
    text: 'HPV vaccine is only for sexually active women.',
    isMyth: true,
    explain: 'HPV vaccine works best when given before sexual debut, typically between 9 and 14 years. Even sexually active women still benefit, but starting early gives the strongest and longest protection against HPV‑related cancers. [file:1]'
  },
  {
    text: 'Only children need vaccines; adults don’t.',
    isMyth: true,
    explain: 'Adults need regular boosters (like Td/Tdap every 10 years), annual flu shots, and age‑ or risk‑specific vaccines such as HPV, pneumococcal, COVID‑19, and shingles. Immunization is a lifelong process, not just a childhood event. [file:1]'
  },
  {
    text: 'Live vaccines are dangerous for everyone.',
    isMyth: true,
    explain: 'Live vaccines like MMR and varicella are safe and very effective in people with healthy immune systems. They are simply avoided or timed carefully in pregnancy and in those with serious immunodeficiency. [file:1]'
  },
  {
    text: 'Vaccines commonly cause severe long-term side effects.',
    isMyth: true,
    explain: 'Serious vaccine reactions are extremely rare — often in the range of 1 per hundreds of thousands to millions of doses. The diseases they prevent carry far higher risks of death, hospitalization, or lifelong disability. [file:1]'
  },
  {
    text: 'If a child is “healthy,” they don’t need vaccines.',
    isMyth: true,
    explain: 'Most children who land in hospital with measles, meningitis, or pertussis were previously healthy. Good nutrition and lifestyle cannot stop highly contagious viruses and bacteria — vaccines are the specific shield they need. [file:1]'
  },
  {
    text: 'You should stop breastfeeding around vaccination appointments.',
    isMyth: true,
    explain: 'There is no need to pause breastfeeding for any routine vaccine in mother or baby. Breast milk can actually help soothe the child and provide additional passive immunity alongside vaccines. [file:1]'
  },
  {
    text: 'Flu vaccine can give you the flu.',
    isMyth: true,
    explain: 'Inactivated flu shots do not contain live virus that can replicate. Mild fever or aches are signs of your immune system responding, not actual flu infection. You are far more likely to get real flu if you skip the shot. [file:1]'
  },
  {
    text: 'COVID-19 vaccines cause infertility.',
    isMyth: true,
    explain: 'There is no biological mechanism or clinical evidence linking COVID‑19 vaccines with infertility. Large studies show no reduction in fertility rates, IVF success, or pregnancy outcomes in vaccinated women. [file:1]'
  },
  {
    text: 'Shingles vaccine is unnecessary if I already had chickenpox.',
    isMyth: true,
    explain: 'Anyone who had chickenpox carries dormant varicella‑zoster virus and can develop shingles later. Shingrix significantly reduces both shingles and long‑term nerve pain even in people with past chickenpox. [file:1]'
  },
  {
    text: 'Pneumococcal vaccines are only for very sick people.',
    isMyth: true,
    explain: 'All adults 65+ are recommended to receive pneumococcal vaccination, and many younger adults with diabetes, heart, lung, or kidney disease also qualify. These shots prevent pneumonia, sepsis, and meningitis in high‑risk groups. [file:1]'
  }
];

let mythsUnbusted = 0;

// ─── MYTHS ───────────────────────────────────────────────────────────────
document.addEventListener('DOMContentLoaded', () => {
  const mythGrid = document.getElementById('mythCards');
  const mythsTotalEl = document.getElementById('mythsTotal');
  
  if (mythGrid && mythsTotalEl) {
    mythsTotalEl.textContent = MYTHS.length;
    
    MYTHS.forEach((myth) => {
      const card = document.createElement('div');
      card.className = 'myth-card';
      card.innerHTML = `
        <div class="myth-card-inner">
          <div class="myth-card-front">
            <span class="myth-icon">🤔</span>
            <p class="myth-text">${myth.text}</p>
            <span class="myth-tap">Tap to reveal</span>
          </div>
          <div class="myth-card-back ${myth.isMyth ? 'is-myth' : 'is-fact'}">
            <span class="myth-verdict">${myth.isMyth ? '🚫 MYTH' : '✅ FACT'}</span>
            <p class="myth-explain">${myth.explain}</p>
          </div>
        </div>`;
      card.addEventListener('click', () => {
        if(!card.classList.contains('flipped')){
          card.classList.add('flipped');
          mythsUnbusted++;
          document.getElementById('mythsUnbusted').textContent = mythsUnbusted;
          addScore(1);
        }
      });
      mythGrid.appendChild(card);
    });
  }
});

// ─── QUIZ ────────────────────────────────────────────────────────────────
const QUIZ_QUESTIONS = [
  { q: 'Which vaccine prevents cervical cancer?', options: ['BCG', 'HPV Vaccine', 'Influenza', 'Hepatitis A'], correct: 1 },
  { q: 'At what age is HPV vaccine most effective?', options: ['Before sexual debut (9–14 yrs)', 'After age 30', 'Only in pregnancy', 'After age 50'], correct: 0 },
  { q: 'How many lives do vaccines save annually worldwide?', options: ['About 500', '2–3 million', '50,000', '100 million'], correct: 1 },
  { q: 'Which vaccines are recommended DURING pregnancy?', options: ['MMR and Varicella', 'Tdap and Influenza', 'BCG and Polio', 'Only after delivery'], correct: 1 },
  { q: 'What is the mortality rate of rabies once symptoms appear?', options: ['10%', '50%', '100%', '5%'], correct: 2 },
  { q: 'Shingrix (shingles vaccine) provides what % protection in ages 50–69?', options: ['40%', '60%', '80%', '97%'], correct: 3 },
  { q: 'Which myth has been COMPLETELY debunked by science?', options: ['Vaccines cause autism', 'Vaccines are dangerous', 'Vaccines alter DNA permanently', 'All of the above are debunked'], correct: 0 },
  { q: 'Maternal Tdap reduces infant pertussis by how much?', options: ['25%', '50%', '91%', '100%'], correct: 2 }
];

let quizIndex = 0, quizEarned = 0;

function renderQuiz() {
  quizIndex = 0; quizEarned = 0;
  const quizResultWrap = document.getElementById('quizResultWrap');
  const quizQuestionWrap = document.getElementById('quizQuestionWrap');
  if (quizResultWrap && quizQuestionWrap) {
    quizResultWrap.classList.add('hidden');
    quizQuestionWrap.classList.remove('hidden');
    showQuizQuestion();
  }
}

// Initialize quiz when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  renderQuiz();
  
  const quizRestartBtn = document.getElementById('quizRestartBtn');
  if (quizRestartBtn) {
    quizRestartBtn.addEventListener('click', renderQuiz);
  }
});

function showQuizQuestion() {
  const q = QUIZ_QUESTIONS[quizIndex];
  document.getElementById('quizNumber').textContent   = `Question ${quizIndex + 1} / ${QUIZ_QUESTIONS.length}`;
  document.getElementById('quizQuestion').textContent = q.q;
  document.getElementById('quizProgressFill').style.width = (quizIndex / QUIZ_QUESTIONS.length * 100) + '%';

  const optContainer = document.getElementById('quizOptions');
  optContainer.innerHTML = '';
  const letters = ['A','B','C','D'];

  q.options.forEach((opt, i) => {
    const btn = document.createElement('button');
    btn.className = 'quiz-option';
    btn.innerHTML = `<span class="opt-letter">${letters[i]}</span><span>${opt}</span>`;
    btn.addEventListener('click', () => handleQuizAnswer(i, q.correct, btn));
    optContainer.appendChild(btn);
  });
}

function handleQuizAnswer(chosen, correct, btn) {
  const allOpts = document.querySelectorAll('.quiz-option');
  allOpts.forEach(o => o.classList.add('disabled'));

  if(chosen === correct){
    btn.classList.add('correct');
    quizEarned++;
    addScore(2);
  } else {
    btn.classList.add('wrong');
    allOpts[correct].classList.add('correct');
    allOpts[correct].classList.remove('disabled');
  }

  setTimeout(() => {
    quizIndex++;
    if(quizIndex < QUIZ_QUESTIONS.length) showQuizQuestion();
    else endQuiz();
  }, 1200);
}

function endQuiz() {
  document.getElementById('quizQuestionWrap').classList.add('hidden');
  const wrap = document.getElementById('quizResultWrap');
  wrap.classList.remove('hidden');

  const pct = Math.round((quizEarned / QUIZ_QUESTIONS.length) * 100);
  let icon = '🎉', title = 'Amazing!';
  if(pct < 50){ icon = '📚'; title = 'Keep Learning!'; }
  else if(pct < 75){ icon = '👏'; title = 'Well Done!'; }

  document.getElementById('quizResultIcon').textContent  = icon;
  document.getElementById('quizResultTitle').textContent = title;
  document.getElementById('quizResultScore').textContent = `You got ${quizEarned}/${QUIZ_QUESTIONS.length} correct — earned ${quizEarned * 2} shields!`;
  document.getElementById('quizProgressFill').style.width = '100%';
}

// ─── PLANNER ─────────────────────────────────────────────────────────────
// ─── PLANNER ─────────────────────────────────────────────────────────────
const PLANNER_DATA = {
  '0-2': [
    {
      time: 'At Birth (within 24 hours)',
      name: 'Hepatitis B (Birth dose)',
      desc: 'Given within 24 hours of birth to prevent mother‑to‑child transmission; dramatically reduces chronic liver disease and liver cancer risk later in life.'
    },
    {
      time: 'At Birth',
      name: 'BCG',
      desc: 'Protects against severe forms of childhood TB like TB meningitis and miliary TB — especially critical in high‑burden countries like India.'
    },
    {
      time: '6 Weeks',
      name: 'Pentavalent (DTP + HepB + Hib) + OPV/IPV + PCV + Rotavirus',
      desc: 'Foundation visit: combination shot plus polio, pneumonia and severe diarrhea protection; early doses close the “window of vulnerability” as maternal antibodies wane.'
    },
    {
      time: '10 Weeks',
      name: 'Pentavalent + OPV/IPV + PCV + Rotavirus (2nd dose)',
      desc: 'Builds stronger, longer‑lasting immunity against 7+ serious infections including whooping cough, Hib meningitis, and severe rotavirus diarrhea.'
    },
    {
      time: '14 Weeks',
      name: 'Pentavalent + OPV/IPV + PCV (3rd dose)',
      desc: 'Completes the primary 3‑dose series for DTP, Hepatitis B, Hib, polio and pneumococcal disease — key milestone for infant survival.'
    },
    {
      time: '6–9 Months (if recommended locally)',
      name: 'Influenza (1st pediatric dose)',
      desc: 'Optional in some programs but strongly recommended; protects infants from flu‑related pneumonia, hospitalization and complications.'
    },
    {
      time: '9 Months',
      name: 'Measles / MR or MMR (1st dose)',
      desc: 'Measles is one of the most contagious infections; this dose prevents severe measles complications and contributes to elimination goals.'
    },
    {
      time: '9 Months (endemic areas / travelers)',
      name: 'Japanese Encephalitis (JE) (1st dose)',
      desc: 'Protects against viral brain infection with high death and disability rates; essential for children in rural or JE‑endemic regions.'
    },
    {
      time: '9–12 Months (as per schedule)',
      name: 'Hepatitis A (1st dose)',
      desc: 'Prevents acute viral hepatitis spread through contaminated food and water; reduces risk of jaundice, prolonged fatigue and rare liver failure.'
    },
    {
      time: '12–15 Months',
      name: 'PCV Booster',
      desc: 'Reinforces protection against pneumococcal pneumonia, meningitis and ear infections during peak toddler exposure years.'
    },
    {
      time: '12–15 Months',
      name: 'MMR (2nd dose, if schedule uses 12–15 months)',
      desc: 'Ensures near‑complete protection against measles, mumps and rubella; critical to prevent congenital rubella syndrome in future pregnancies.'
    },
    {
      time: '12–15 Months',
      name: 'Varicella (1st dose)',
      desc: 'Prevents chickenpox, hospitalizations and later shingles; adults have 10–20× higher complication rates, so early protection matters.'
    },
    {
      time: '15–18 Months',
      name: 'DTP / Pentavalent + Hib Booster',
      desc: 'Boosts diphtheria, tetanus, pertussis and Hib protection as early immunity begins to wane; essential to keep whooping cough at bay.'
    },
    {
      time: '16–18 Months',
      name: 'Polio Booster (OPV/IPV) + MMR (2nd dose if not given earlier)',
      desc: 'Strengthens polio and MMR immunity before preschool; contributes to keeping India polio‑free.'
    },
    {
      time: '16–24 Months (depending on product)',
      name: 'Hepatitis A (2nd dose)',
      desc: 'Completes the series and gives long‑term protection against Hepatitis A, especially relevant in countries with intermediate or high transmission.'
    },
    {
      time: '18–24 Months (endemic areas)',
      name: 'Typhoid Conjugate Vaccine (TCV)',
      desc: 'Single‑dose typhoid conjugate vaccine from 6–9 months or 1–2 years (per local policy) protects against high, drug‑resistant typhoid burden.'
    }
  ],

  '2-5': [
    {
      time: '2 Years',
      name: 'Typhoid (TCV or polysaccharide, per program)',
      desc: 'Important in India and other endemic regions; prevents prolonged high fever, intestinal perforation and drug‑resistant infections.'
    },
    {
      time: '2–3 Years (if not completed earlier)',
      name: 'Hepatitis A (2nd dose)',
      desc: 'Ensures durable immunity against food‑ and water‑borne hepatitis A; particularly relevant before preschool/school entry and travel.'
    },
    {
      time: '2–3 Years (endemic, rural or high‑risk travel)',
      name: 'Japanese Encephalitis (Booster)',
      desc: 'Maintains strong protection against JE‑related brain damage in children living in or frequently visiting endemic rural areas.'
    },
    {
      time: 'Annual (6 months+)',
      name: 'Influenza (Yearly)',
      desc: 'Recommended every year; reduces flu‑related pneumonia, hospitalizations and missed school days — especially in children with asthma or chronic illness.'
    },
    {
      time: '4–6 Years',
      name: 'DTaP / DTP Booster + Polio Booster + MMR (2nd dose if pending)',
      desc: '“School‑entry” visit: final childhood boosters that top‑up defense against diphtheria, tetanus, whooping cough, polio, measles, mumps and rubella.'
    },
    {
      time: '4–6 Years',
      name: 'Varicella (2nd dose)',
      desc: 'Second dose greatly reduces breakthrough chickenpox and future shingles risk; important before starting school.'
    }
  ],

  '5-12': [
    {
      time: '5–6 Years',
      name: 'Catch‑up check',
      desc: 'Review records for any missed infant or preschool doses (HepB, DTP, Hib, PCV, MMR, Varicella, HepA, Typhoid, JE) and complete on an accelerated schedule.'
    },
    {
      time: 'Any time 5–12 Years',
      name: 'Varicella (2 doses if never vaccinated / no past disease)',
      desc: 'Before adolescence, ensure two documented doses; adults have far higher complication rates from primary chickenpox.'
    },
    {
      time: 'Any time 5–12 Years',
      name: 'Hepatitis A & B (catch‑up)',
      desc: 'Essential for children who missed early series, those with liver disease, or before international travel.'
    },
    {
      time: 'School age (per local risk)',
      name: 'Typhoid Booster (if polysaccharide vaccine used)',
      desc: 'Booster every 3 years for polysaccharide typhoid vaccine in high‑risk regions; conjugate vaccines offer longer protection with fewer boosters.'
    },
    {
      time: 'Annual',
      name: 'Influenza',
      desc: 'Continued yearly flu shots lower the risk of severe illness, absenteeism and complications in school‑age children.'
    }
  ],

  '11-18': [
    {
      time: '9–14 Years (ideal: 11–13)',
      name: 'HPV Vaccine (2 doses if started before 15)',
      desc: 'Cancer‑prevention vaccine that can prevent ~90% of cervical cancers plus many vulvar, vaginal, anal and throat cancers; best given before sexual debut.'
    },
    {
      time: '15–26 Years (if starting later)',
      name: 'HPV Vaccine (3‑dose schedule)',
      desc: 'For girls and young women starting HPV vaccination at 15 or later, three doses are needed to build full protection.'
    },
    {
      time: '11–12 Years',
      name: 'Tdap Booster',
      desc: 'Replaces one routine Td booster; renews protection against whooping cough, diphtheria and tetanus and prepares for future pregnancy protection.'
    },
    {
      time: '11–12 Years',
      name: 'Meningococcal ACWY (MenACWY)',
      desc: 'Protects against rapidly fatal meningitis and bloodstream infection; especially important before crowded school/hostel environments and for Hajj travelers.'
    },
    {
      time: '16 Years',
      name: 'Meningococcal ACWY Booster',
      desc: 'Re‑boosts protection during late teen years when risk spikes due to hostel life, close contact and travel.'
    },
    {
      time: '16–18 Years',
      name: 'Meningococcal B (MenB, if available / indicated)',
      desc: 'Additional protection against serogroup B meningitis used in some countries and high‑risk or outbreak settings.'
    },
    {
      time: '11–18 Years (catch‑up)',
      name: 'MMR, Varicella, Hepatitis A & B, Polio (as needed)',
      desc: 'Adolescence is an excellent time to close all childhood gaps; previous doses count, series are not restarted.'
    },
    {
      time: 'Annual',
      name: 'Influenza',
      desc: 'Recommended every year, particularly for adolescents with asthma, heart disease, diabetes or those living in hostels.'
    }
  ],

  '18-45': [
    {
      time: 'Every 10 Years',
      name: 'Td or Tdap Booster',
      desc: 'Lifelong tetanus and diphtheria protection is non‑negotiable; at least one booster in adulthood should be Tdap to cover pertussis.'
    },
    {
      time: 'Annual',
      name: 'Influenza',
      desc: 'Yearly flu shots are strongly recommended, especially for healthcare workers, caregivers, and anyone planning or undergoing pregnancy.'
    },
    {
      time: 'Once in young adulthood (or catch‑up)',
      name: 'HPV (if not fully vaccinated earlier)',
      desc: 'Catch‑up recommended up to age 26; 27–45 years may still benefit based on shared decision‑making with a doctor.'
    },
    {
      time: 'Any time (no upper age for safety)',
      name: 'Hepatitis B (3‑dose series, or combination with HepA)',
      desc: 'Crucial for healthcare workers, those with multiple partners, chronic liver disease, diabetes, and anyone never vaccinated in childhood.'
    },
    {
      time: 'Any time',
      name: 'Hepatitis A (2‑dose series)',
      desc: 'Important for travelers, people with chronic liver disease and those in regions with intermediate HepA transmission.'
    },
    {
      time: 'Pre‑conception (ideally 3+ months before pregnancy)',
      name: 'Check and update: Rubella, Varicella, MMR',
      desc: 'Women not immune should receive MMR and/or Varicella before pregnancy to prevent devastating birth defects; avoid conception for 1 month after each live vaccine.'
    },
    {
      time: 'As risk / travel requires',
      name: 'Typhoid, JE, Rabies, Cholera, Yellow Fever, Dengue (where available)',
      desc: 'Travel and occupation‑based vaccines tailored to destination (e.g., typhoid and HepA for India, Yellow Fever certificate for certain African/South American countries).'
    },
    {
      time: 'As per public‑health updates',
      name: 'COVID‑19 Primary Series + Boosters',
      desc: 'Keeps protection up‑to‑date against severe COVID‑19, hospitalization, long‑COVID and pregnancy‑related complications.'
    }
  ],

  'pregnant': [
    {
      time: '27–36 Weeks (every pregnancy)',
      name: 'Tdap',
      desc: 'Given in each pregnancy; passes high levels of pertussis antibody to the baby, cutting newborn whooping cough risk by around 90%.'
    },
    {
      time: 'Any Trimester (prefer early in season)',
      name: 'Influenza',
      desc: 'Pregnancy increases flu‑related hospitalization risk about five‑fold; this vaccine protects both mother and baby for the first 6 months of life.'
    },
    {
      time: 'Any Trimester',
      name: 'COVID‑19 (latest recommended dose)',
      desc: 'Reduces risk of severe COVID‑19, ICU admission, preterm birth and stillbirth; antibodies cross the placenta and protect the newborn.'
    },
    {
      time: '32–36 Weeks (where available)',
      name: 'RSV Maternal Vaccine',
      desc: 'Newer maternal vaccine that protects infants from severe RSV bronchiolitis and pneumonia in the first 6 months of life.'
    },
    {
      time: 'After Delivery (postpartum, if non‑immune)',
      name: 'MMR',
      desc: 'Safe during breastfeeding; ensures rubella immunity before the next pregnancy and prevents congenital rubella syndrome in future babies.'
    },
    {
      time: 'After Delivery (postpartum, if non‑immune)',
      name: 'Varicella (2 doses, 4–8 weeks apart)',
      desc: 'Postpartum varicella vaccination protects against severe chickenpox in future pregnancies; avoid pregnancy for 1 month after each dose.'
    },
    {
      time: 'Any time in pregnancy (after exposure)',
      name: 'Rabies Post‑Exposure (if bitten/scratched by animal)',
      desc: 'Life‑saving and not contraindicated in pregnancy; rabies is almost 100% fatal once symptoms start.'
    }
  ],

  '50-65': [
    {
      time: 'Age 50+',
      name: 'Shingles (Shingrix) — 2 doses',
      desc: 'Strongly recommended at 50 and above; prevents most shingles cases and dramatically lowers risk of years‑long nerve pain (postherpetic neuralgia).'
    },
    {
      time: 'Annual',
      name: 'Influenza (standard or high‑dose as advised)',
      desc: 'Older adults have higher hospitalization and death rates from flu; yearly vaccination is a key healthy‑aging habit.'
    },
    {
      time: 'Every 10 Years',
      name: 'Td or Tdap Booster',
      desc: 'Continues tetanus and diphtheria protection; consider Tdap once in this age band if never received in adulthood.'
    },
    {
      time: 'Once between 50–59 (if not earlier and at risk)',
      name: 'Pneumococcal (PCV15/PCV20 ± PPSV23, per risk profile)',
      desc: 'Adults with diabetes, heart, lung, kidney or liver disease, asplenia or other high‑risk conditions may need pneumococcal vaccines before 65.'
    },
    {
      time: 'As needed',
      name: 'Catch‑up: HPV (up to 45 in some settings), Hepatitis A & B, MMR, Varicella',
      desc: 'It is rarely “too late” to benefit; review life‑course immunization and close any important gaps with your clinician.'
    },
    {
      time: 'Per guidance',
      name: 'COVID‑19 Boosters',
      desc: 'Continued boosters reduce severe outcomes, hospitalization and death, especially in those with chronic conditions.'
    }
  ],

  '65+': [
    {
      time: 'Age 65 (or earlier if high‑risk)',
      name: 'Pneumococcal (PCV15 or PCV20)',
      desc: 'Core adult vaccine at this age; protects against pneumonia, sepsis and meningitis — leading infectious causes of death in older adults.'
    },
    {
      time: '1 Year After PCV15 (if that product used)',
      name: 'PPSV23',
      desc: 'Adds coverage against additional pneumococcal strains; together, PCV + PPSV23 give broader protection than either alone.'
    },
    {
      time: 'Age 65+',
      name: 'High‑Dose or Adjuvanted Influenza',
      desc: 'Designed specifically for older immune systems; provides stronger protection than standard flu shots in this age group.'
    },
    {
      time: 'If not already done at 50+',
      name: 'Shingles (Shingrix) — 2 doses',
      desc: 'Still highly effective in the 70s and beyond; significantly reduces both shingles episodes and chronic post‑herpetic pain.'
    },
    {
      time: 'Every 10 Years',
      name: 'Td Booster (or Tdap once)',
      desc: 'Maintains tetanus and diphtheria protection for life; a single Tdap in later adulthood can also top up pertussis immunity.'
    },
    {
      time: 'Per guidance',
      name: 'COVID‑19 Boosters (including additional doses for immunocompromised)',
      desc: 'Older adults and those with chronic conditions benefit from updated boosters to keep protection against severe COVID‑19 high.'
    }
  ]
};

const plannerAgeChips = document.querySelectorAll('.age-chip');

function renderPlanner(age) {
  const data = PLANNER_DATA[age] || [];
  const timeline  = document.getElementById('plannerTimeline');
  const checklist = document.getElementById('plannerChecklist');
  if (!timeline || !checklist) return;
  
  timeline.innerHTML  = '';
  checklist.innerHTML = '';

  data.forEach((item, i) => {
    // timeline card
    const tl = document.createElement('div');
    tl.className = 'timeline-item';
    tl.style.animationDelay = (i * 0.08) + 's';
    tl.innerHTML = `<div class="timeline-card"><div class="tl-time">${item.time}</div><div class="tl-name">${item.name}</div><div class="tl-desc">${item.desc}</div></div>`;
    timeline.appendChild(tl);

    // checklist row
    const cl = document.createElement('div');
    cl.className = 'checklist-item';
    cl.innerHTML = `<div class="cl-check"></div><span class="cl-text">${item.name}</span><span class="cl-age">${item.time}</span>`;
    cl.addEventListener('click', () => {
      cl.classList.toggle('done');
      if(cl.classList.contains('done')) addScore(1);
    });
    checklist.appendChild(cl);
  });
}

// Initialize planner when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  const plannerAgeChips = document.querySelectorAll('.age-chip');
  plannerAgeChips.forEach(chip => {
    chip.addEventListener('click', () => {
      plannerAgeChips.forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
      renderPlanner(chip.dataset.age);
    });
  });
  
  // Initial render
  renderPlanner('0-2');
});

// ─── INITIAL LOAD ────────────────────────────────────────────────────────
selectAgeStage(AGE_STAGES[0]);

// ═══════════════════════════════════════════════════════════════════════════
//  VACCINE SCHEDULER FUNCTIONALITY
// ═══════════════════════════════════════════════════════════════════════════

// Vaccine Database with detailed information
const VACCINE_DATABASE = {
  infant: [
    { name: 'Hepatitis B', doses: 3, schedule: 'Birth, 1-2mo, 6-18mo', status: 'due', priority: 'high', precautions: 'Check for maternal HBsAg status. Administer within 24 hours of birth for HBsAg+ mothers.', sideEffects: 'Mild soreness, low fever', contraindications: 'Severe allergic reaction to yeast', prepNotes: 'No fasting required' },
    { name: 'Rotavirus (RV)', doses: 2-3, schedule: '2mo, 4mo, (6mo)', status: 'due', priority: 'high', precautions: 'First dose must be given before 15 weeks. Complete series by 8 months.', sideEffects: 'Mild diarrhea, irritability', contraindications: 'SCID, intussusception history', prepNotes: 'Oral vaccine - no injection' },
    { name: 'DTaP', doses: 5, schedule: '2mo, 4mo, 6mo, 15-18mo, 4-6yr', status: 'due', priority: 'high', precautions: 'Monitor for fever after vaccination. Space doses appropriately.', sideEffects: 'Injection site swelling, fever, fussiness', contraindications: 'Encephalopathy within 7 days of dose', prepNotes: 'Acetaminophen available if needed' },
    { name: 'Hib', doses: 3-4, schedule: '2mo, 4mo, 6mo, 12-15mo', status: 'due', priority: 'high', precautions: 'Brand matters - complete series with same brand when possible.', sideEffects: 'Mild redness, fever', contraindications: 'Age < 6 weeks', prepNotes: 'Combination vaccines available' },
    { name: 'PCV13', doses: 4, schedule: '2mo, 4mo, 6mo, 12-15mo', status: 'due', priority: 'high', precautions: 'Important for daycare children. Protects against pneumonia and meningitis.', sideEffects: 'Drowsiness, decreased appetite', contraindications: 'Severe allergic reaction to any component', prepNotes: 'Can be given with other vaccines' },
    { name: 'Polio (IPV)', doses: 4, schedule: '2mo, 4mo, 6-18mo, 4-6yr', status: 'due', priority: 'high', precautions: 'Inactivated vaccine - safe for immunocompromised. Last dose at 4-6 years.', sideEffects: 'Soreness at injection site', contraindications: 'Severe allergic reaction to neomycin, streptomycin, or polymyxin B', prepNotes: 'Injectable vaccine' }
  ],
  child: [
    { name: 'MMR', doses: 2, schedule: '12-15mo, 4-6yr', status: 'due', priority: 'high', precautions: 'Live vaccine - avoid in pregnancy. Second dose critical for measles immunity.', sideEffects: 'Fever (7-12 days after), mild rash', contraindications: 'Pregnancy, severe immunodeficiency', prepNotes: 'Avoid pregnancy for 4 weeks after' },
    { name: 'Varicella', doses: 2, schedule: '12-15mo, 4-6yr', status: 'due', priority: 'high', precautions: 'Live vaccine. Avoid aspirin for 6 weeks after vaccination.', sideEffects: 'Mild rash, fever', contraindications: 'Pregnancy, immunodeficiency, active TB', prepNotes: 'Avoid salicylates' },
    { name: 'Hepatitis A', doses: 2, schedule: '12-23mo, 6-18mo later', status: 'upcoming', priority: 'medium', precautions: 'Important for travel and in outbreak areas.', sideEffects: 'Injection site tenderness, headache', contraindications: 'Severe allergic reaction to alum or 2-phenoxyethanol', prepNotes: 'Especially important before international travel' },
    { name: 'Influenza', doses: 'Annual', schedule: 'Yearly in fall', status: 'due', priority: 'medium', precautions: 'Children 6mo-8yr need 2 doses first year. Then annual. Egg allergy usually OK.', sideEffects: 'Soreness, low fever, fatigue', contraindications: 'Severe egg allergy (for egg-based vaccines)', prepNotes: 'Protects child and family members' }
  ],
  adolescent: [
    { name: 'HPV', doses: 2-3, schedule: '11-12yr (2 doses 6-12mo apart)', status: 'due', priority: 'high', precautions: 'Best given before sexual debut. Prevents cervical, anal, throat cancers. 2 doses if started before 15, 3 if after.', sideEffects: 'Arm pain, dizziness, fainting (stay seated 15min)', contraindications: 'Pregnancy', prepNotes: 'Sit or lie down for 15min after to prevent fainting' },
    { name: 'Meningococcal (MenACWY)', doses: 2, schedule: '11-12yr, 16yr booster', status: 'due', priority: 'high', precautions: 'Critical for college-bound students. Booster at 16 essential.', sideEffects: 'Arm redness, fatigue, headache', contraindications: 'Severe reaction to previous dose', prepNotes: 'College dorms require this' },
    { name: 'Tdap Booster', doses: 1, schedule: '11-12yr', status: 'due', priority: 'high', precautions: 'Replaces Td booster. Protects against pertussis (whooping cough).', sideEffects: 'Arm soreness, body aches', contraindications: 'Severe neurologic reaction to previous pertussis vaccine', prepNotes: 'Then Td every 10 years' },
    { name: 'MenB', doses: 2-3, schedule: '16-18yr (optional)', status: 'upcoming', priority: 'medium', precautions: 'Recommended for outbreak areas and high-risk groups. Not routine but beneficial.', sideEffects: 'Fatigue, headache, muscle pain', contraindications: 'Severe allergic reaction to components', prepNotes: 'Discuss with provider - outbreaks common in colleges' }
  ],
  adult: [
    { name: 'Influenza', doses: 'Annual', schedule: 'Every fall/winter', status: 'due', priority: 'high', precautions: 'High-dose available for 65+. Protects vulnerable family members.', sideEffects: 'Arm soreness, low fever, fatigue', contraindications: 'Severe egg allergy (some formulations)', prepNotes: 'Get before flu season peaks' },
    { name: 'Tdap/Td', doses: '1 Tdap, then Td every 10yr', schedule: 'Once, then every 10yr', status: 'due', priority: 'high', precautions: 'Tdap once in adulthood, especially if around infants. Td every 10 years or after wounds.', sideEffects: 'Arm soreness, fatigue', contraindications: 'Severe reaction to previous dose', prepNotes: 'Update if wound or travel' },
    { name: 'MMR', doses: 1-2, schedule: 'If no immunity', status: 'completed', priority: 'medium', precautions: 'Check immunity if born after 1957. Especially important for healthcare workers.', sideEffects: 'Fever, rash', contraindications: 'Pregnancy, immunodeficiency', prepNotes: 'Avoid pregnancy 4 weeks after' },
    { name: 'Varicella', doses: 2, schedule: 'If no immunity', status: 'completed', priority: 'medium', precautions: 'For adults without chickenpox history. 2 doses 4-8 weeks apart.', sideEffects: 'Injection site reaction, fever', contraindications: 'Pregnancy, immunodeficiency', prepNotes: 'Avoid pregnancy 4 weeks after' },
    { name: 'HPV', doses: 2-3, schedule: 'Up to age 26 (discuss to 45)', status: 'upcoming', priority: 'medium', precautions: 'Catch-up through age 26. FDA approved to 45 - discuss with provider.', sideEffects: 'Arm pain, dizziness', contraindications: 'Pregnancy', prepNotes: 'Still beneficial even if sexually active' },
    { name: 'Shingles (Shingrix)', doses: 2, schedule: '50+ years (2-6mo apart)', status: 'upcoming', priority: 'high', precautions: 'Recommended at age 50+. Even if had shingles before. Much better than old vaccine.', sideEffects: 'Arm pain (common and intense), fatigue, fever', contraindications: 'Current shingles outbreak', prepNotes: 'Side effects common but temporary. Schedule when you can rest.' },
    { name: 'Pneumococcal (PCV20/PPSV23)', doses: '1-2', schedule: '65+ or high-risk', status: 'upcoming', priority: 'high', precautions: 'PCV20 alone OR PCV15+PPSV23. Protects against pneumonia and bloodstream infections.', sideEffects: 'Injection site soreness, fatigue', contraindications: 'Severe allergic reaction', prepNotes: 'Especially important for chronic conditions' }
  ],
  pregnant: [
    { name: 'Tdap', doses: 1, schedule: 'Each pregnancy 27-36 weeks', status: 'due', priority: 'high', precautions: 'CRITICAL - give EVERY pregnancy. Antibodies protect newborn from whooping cough. Ideally 27-36 weeks.', sideEffects: 'Arm soreness, body aches', contraindications: 'Severe reaction to previous dose (rare)', prepNotes: 'Safe at any trimester if needed urgently' },
    { name: 'Influenza', doses: 1, schedule: 'Any trimester during flu season', status: 'due', priority: 'high', precautions: 'Pregnancy increases flu complications. Inactivated vaccine only (not nasal spray). Protects mother and baby.', sideEffects: 'Arm soreness, low fever', contraindications: 'Severe egg allergy (rare)', prepNotes: 'Especially important in fall/winter' },
    { name: 'COVID-19', doses: 'Per current guidelines', schedule: 'Any trimester', status: 'due', priority: 'high', precautions: 'Recommended during pregnancy. Reduces severe illness and protects newborn.', sideEffects: 'Arm soreness, fatigue, possible fever', contraindications: 'Severe allergic reaction to components', prepNotes: 'mRNA vaccines preferred' },
    { name: 'Hepatitis B', doses: 3, schedule: 'If at risk', status: 'upcoming', priority: 'medium', precautions: 'Safe during pregnancy if at risk (healthcare worker, certain exposures).', sideEffects: 'Injection site soreness', contraindications: 'Severe yeast allergy', prepNotes: 'Discuss risk with provider' }
  ],
  postpartum: [
    { name: 'MMR', doses: 1-2, schedule: 'If not immune', status: 'due', priority: 'high', precautions: 'Give if rubella non-immune on pregnancy screening. Live vaccine - give AFTER delivery. OK while breastfeeding.', sideEffects: 'Fever, rash', contraindications: 'Pregnancy (but you just delivered!), immunodeficiency', prepNotes: 'Avoid pregnancy 4 weeks after. Breastfeeding OK.' },
    { name: 'Varicella', doses: 2, schedule: 'If not immune', status: 'due', priority: 'high', precautions: 'If no chickenpox history. Give after delivery. 2 doses 4-8 weeks apart. Safe while breastfeeding.', sideEffects: 'Injection site reaction, mild rash', contraindications: 'Pregnancy (use contraception), immunodeficiency', prepNotes: 'Avoid pregnancy 4 weeks after each dose' },
    { name: 'Tdap', doses: 1, schedule: 'If not given during pregnancy', status: 'due', priority: 'high', precautions: 'If Tdap was not given during pregnancy, give immediately postpartum. Protects mother and close contact with baby.', sideEffects: 'Arm soreness', contraindications: 'Severe reaction', prepNotes: 'Especially if caregivers also need it' },
    { name: 'Influenza', doses: 1, schedule: 'If not given during pregnancy', status: 'due', priority: 'high', precautions: 'If missed during pregnancy and it\'s flu season. Protects mother and infant.', sideEffects: 'Arm soreness, fatigue', contraindications: 'Severe egg allergy', prepNotes: 'Annual vaccine' }
  ],
  elderly: [
    { name: 'Influenza (High-Dose)', doses: 'Annual', schedule: 'Every fall', status: 'due', priority: 'high', precautions: 'High-dose or adjuvanted formulations for 65+. Better immune response than standard dose.', sideEffects: 'Arm soreness, fatigue, low fever', contraindications: 'Severe egg allergy', prepNotes: 'Ask specifically for high-dose version' },
    { name: 'Pneumococcal (PCV20/PPSV23)', doses: '1-2', schedule: 'Age 65+', status: 'due', priority: 'high', precautions: 'PCV20 alone OR PCV15 followed by PPSV23. Discuss sequence with provider. Prevents pneumonia, meningitis.', sideEffects: 'Injection site pain, fatigue', contraindications: 'Severe allergic reaction', prepNotes: 'Timing between vaccines matters if using 2-vaccine series' },
    { name: 'Shingles (Shingrix)', doses: 2, schedule: '2-6 months apart', status: 'due', priority: 'high', precautions: 'Recommended for all 50+. Even if had shingles or old Zostavax. Side effects intense but worth it.', sideEffects: 'Arm pain (very common), fatigue, fever, chills', contraindications: 'Active shingles', prepNotes: 'Plan for side effects - may feel unwell 1-2 days. Second dose often worse.' },
    { name: 'Tdap/Td', doses: 'Tdap once, Td every 10yr', schedule: 'Booster every 10yr', status: 'upcoming', priority: 'medium', precautions: 'One-time Tdap if not received in adulthood. Especially if around infants. Then Td every 10 years.', sideEffects: 'Arm soreness', contraindications: 'Severe reaction', prepNotes: 'Important if caregiving for grandchildren' },
    { name: 'RSV (Respiratory Syncytial Virus)', doses: 1, schedule: 'Age 60+ (new)', status: 'upcoming', priority: 'medium', precautions: 'New vaccine as of 2023. Discuss with provider. For 60+ or those with chronic conditions.', sideEffects: 'Injection site pain, fatigue, headache', contraindications: 'Severe allergic reaction', prepNotes: 'Especially for those with heart/lung disease' },
    { name: 'COVID-19', doses: 'Per current guidelines', schedule: 'Updated boosters', status: 'due', priority: 'high', precautions: 'Stay current with boosters. Elderly at highest risk for severe COVID.', sideEffects: 'Arm soreness, fatigue, possible fever', contraindications: 'Severe allergic reaction', prepNotes: 'Updated vaccines available seasonally' }
  ]
};

// Global state
let selectedVaccines = [];
let userProfile = {};

// Open Scheduler Modal
document.getElementById('schedulerBtn').addEventListener('click', () => {
  document.getElementById('schedulerModal').classList.add('active');
  resetScheduler();
});

// Close Scheduler
function closeScheduler() {
  document.getElementById('schedulerModal').classList.remove('active');
}

// Reset scheduler to step 1
function resetScheduler() {
  goToStep1();
  selectedVaccines = [];
  userProfile = {};
}

// Navigation functions
function goToStep1() {
  document.querySelectorAll('.scheduler-step').forEach(s => s.classList.remove('active'));
  document.getElementById('step1').classList.add('active');
}

function goToStep2() {
  // Collect profile data
  userProfile = {
    age: parseInt(document.getElementById('schedulerAge').value),
    lifeStage: document.getElementById('lifeStage').value,
    pregWeek: document.getElementById('pregWeek').value,
    priority: document.getElementById('priority').value,
    healthConditions: Array.from(document.querySelectorAll('.checkbox-label input:checked')).map(cb => cb.value)
  };

  // Show step 2
  document.querySelectorAll('.scheduler-step').forEach(s => s.classList.remove('active'));
  document.getElementById('step2').classList.add('active');
  
  // Render vaccines
  renderVaccineList();
}

function goToStep3() {
  document.querySelectorAll('.scheduler-step').forEach(s => s.classList.remove('active'));
  document.getElementById('step3').classList.add('active');
  renderScheduleSummary();
  renderPrecautions();
}

// ─── SCHEDULER EVENT LISTENERS ───────────────────────────────────────────
document.addEventListener('DOMContentLoaded', () => {
  // Show/hide pregnancy weeks field
  const lifeStageEl = document.getElementById('lifeStage');
  if (lifeStageEl) {
    lifeStageEl.addEventListener('change', (e) => {
      const pregField = document.getElementById('pregnancyWeeks');
      if (pregField) {
        if(e.target.value === 'pregnant') {
          pregField.style.display = 'block';
        } else {
          pregField.style.display = 'none';
        }
      }
    });
  }
  
  // Filter vaccines in step 2
  document.querySelectorAll('.filter-tag').forEach(tag => {
    tag.addEventListener('click', () => {
      document.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('active'));
      tag.classList.add('active');
      
      const filter = tag.dataset.filter;
      const items = document.querySelectorAll('.vaccine-item');
      
      items.forEach(item => {
        const status = item.querySelector('.vaccine-status').textContent.trim();
        if(filter === 'all' || status === filter) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      });
    });
  });

  // Close modal on outside click
  const schedulerModal = document.getElementById('schedulerModal');
  if (schedulerModal) {
    schedulerModal.addEventListener('click', (e) => {
      if(e.target.id === 'schedulerModal') {
        closeScheduler();
      }
    });
  }
  
  // Initialize body map with first age stage
  if (AGE_STAGES && AGE_STAGES.length > 0) {
    selectAgeStage(AGE_STAGES[0]);
  }
});
function renderVaccineList() {
  const vaccines = VACCINE_DATABASE[userProfile.lifeStage] || [];
  const container = document.getElementById('vaccineList');
  
  container.innerHTML = vaccines.map((v, idx) => `
    <div class="vaccine-item" data-index="${idx}" onclick="toggleVaccineSelection(${idx})">
      <div class="vaccine-item-header">
        <div class="vaccine-name">${v.name}</div>
        <span class="vaccine-status ${v.status}">${v.status}</span>
      </div>
      <div class="vaccine-details">${v.precautions}</div>
      <div class="vaccine-info-grid">
        <div class="vaccine-info-item">
          <i class="fas fa-syringe"></i>
          <span class="vaccine-info-label">Doses:</span>
          <span class="vaccine-info-value">${v.doses}</span>
        </div>
        <div class="vaccine-info-item">
          <i class="fas fa-calendar"></i>
          <span class="vaccine-info-label">Schedule:</span>
          <span class="vaccine-info-value">${v.schedule}</span>
        </div>
      </div>
      ${v.contraindications ? `<div class="precaution-badge"><i class="fas fa-exclamation-circle"></i> ${v.contraindications}</div>` : ''}
    </div>
  `).join('');
  
  // Pre-select due vaccines
  vaccines.forEach((v, idx) => {
    if(v.status === 'due') {
      selectedVaccines.push(idx);
      document.querySelector(`[data-index="${idx}"]`).classList.add('selected');
    }
  });
}

// Toggle vaccine selection
function toggleVaccineSelection(index) {
  const item = document.querySelector(`[data-index="${index}"]`);
  item.classList.toggle('selected');
  
  if(selectedVaccines.includes(index)) {
    selectedVaccines = selectedVaccines.filter(i => i !== index);
  } else {
    selectedVaccines.push(index);
  }
}

// Render schedule summary
function renderScheduleSummary() {
  const vaccines = VACCINE_DATABASE[userProfile.lifeStage] || [];
  const selected = selectedVaccines.map(idx => vaccines[idx]);
  const container = document.getElementById('scheduleSummary');
  
  if(selected.length === 0) {
    container.innerHTML = '<p style="text-align:center; color:var(--text-soft); padding:2rem;">No vaccines selected</p>';
    return;
  }
  
  // Generate schedule with dates
  const today = new Date();
  container.innerHTML = selected.map((v, idx) => {
    const appointmentDate = new Date(today);
    appointmentDate.setDate(today.getDate() + (idx * 14)); // 2 weeks apart
    
    const day = appointmentDate.getDate();
    const month = appointmentDate.toLocaleDateString('en-US', { month: 'short' });
    
    return `
      <div class="schedule-item">
        <div class="schedule-date">
          <div class="schedule-day">${day}</div>
          <div class="schedule-month">${month}</div>
        </div>
        <div class="schedule-info">
          <div class="schedule-vaccine">${v.name}</div>
          <div class="schedule-desc">${v.precautions}</div>
          <div class="schedule-tags">
            <span class="schedule-tag">${v.doses} dose(s)</span>
            <span class="schedule-tag">${v.priority} priority</span>
          </div>
        </div>
      </div>
    `;
  }).join('');
}

// Render precautions
function renderPrecautions() {
  const vaccines = VACCINE_DATABASE[userProfile.lifeStage] || [];
  const selected = selectedVaccines.map(idx => vaccines[idx]);
  const container = document.getElementById('precautionsList');
  
  const allPrecautions = [];
  
  // General precautions
  allPrecautions.push({
    title: 'Before Vaccination',
    desc: 'Inform your provider of any allergies, current medications, or if you\'re feeling ill. ' + document.getElementById('prepNotes')?.value || 'Most vaccines can be given when you have a mild cold.'
  });
  
  selected.forEach(v => {
    if(v.prepNotes) {
      allPrecautions.push({
        title: `${v.name} - Preparation`,
        desc: v.prepNotes
      });
    }
    
    if(v.sideEffects) {
      allPrecautions.push({
        title: `${v.name} - Expected Side Effects`,
        desc: v.sideEffects + '. These are normal and show your immune system is working.'
      });
    }
  });
  
  // Add health condition-specific warnings
  if(userProfile.healthConditions.includes('immunocompromised')) {
    allPrecautions.push({
      title: 'Important: Immunocompromised Status',
      desc: 'Avoid live vaccines (MMR, Varicella). Discuss timing with your specialist. Some vaccines may need higher doses or additional boosters.'
    });
  }
  
  if(userProfile.lifeStage === 'pregnant') {
    allPrecautions.push({
      title: 'Pregnancy-Specific',
      desc: 'Only inactivated vaccines. Tdap ideally at 27-36 weeks. Flu vaccine any trimester. Avoid live vaccines until after delivery.'
    });
  }
  
  container.innerHTML = allPrecautions.map(p => `
    <div class="precaution-item">
      <div class="precaution-title">${p.title}</div>
      <div class="precaution-desc">${p.desc}</div>
    </div>
  `).join('');
}

// Download schedule as text
function downloadSchedule() {
  const vaccines = VACCINE_DATABASE[userProfile.lifeStage] || [];
  const selected = selectedVaccines.map(idx => vaccines[idx]);
  
  let scheduleText = '═══════════════════════════════════════\n';
  scheduleText += '     YOUR VACCINATION SCHEDULE\n';
  scheduleText += '═══════════════════════════════════════\n\n';
  scheduleText += `Profile:\n`;
  scheduleText += `  Age: ${userProfile.age} years\n`;
  scheduleText += `  Life Stage: ${userProfile.lifeStage}\n`;
  scheduleText += `  Priority: ${userProfile.priority}\n\n`;
  
  scheduleText += `Scheduled Vaccines (${selected.length}):\n`;
  scheduleText += `───────────────────────────────────────\n\n`;
  
  const today = new Date();
  selected.forEach((v, idx) => {
    const appointmentDate = new Date(today);
    appointmentDate.setDate(today.getDate() + (idx * 14));
    
    scheduleText += `${idx + 1}. ${v.name}\n`;
    scheduleText += `   Date: ${appointmentDate.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}\n`;
    scheduleText += `   Doses: ${v.doses}\n`;
    scheduleText += `   Schedule: ${v.schedule}\n`;
    scheduleText += `   Preparation: ${v.prepNotes}\n`;
    scheduleText += `   Side Effects: ${v.sideEffects}\n`;
    scheduleText += `   Contraindications: ${v.contraindications}\n\n`;
  });
  
  scheduleText += '═══════════════════════════════════════\n';
  scheduleText += 'Generated by ShieldHer Vaccine Scheduler\n';
  scheduleText += new Date().toLocaleDateString() + '\n';
  
  // Create download
  const blob = new Blob([scheduleText], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `vaccine-schedule-${new Date().toISOString().split('T')[0]}.txt`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
  
  showToast('✅ Schedule downloaded successfully!');
}

/* Mobile menu toggle */
function toggleMobile(){
  const menu=document.getElementById('mobileMenu');
  const b1=document.getElementById('hb1'),b2=document.getElementById('hb2'),b3=document.getElementById('hb3');
  const open=menu.classList.toggle('open');
  if(open){
    b1.style.cssText='transform:rotate(45deg) translate(4px,4px);';
    b2.style.cssText='opacity:0;';
    b3.style.cssText='transform:rotate(-45deg) translate(4px,-4px);';
  } else {
    b1.style.cssText=''; b2.style.cssText=''; b3.style.cssText='';
  }
}
document.addEventListener('click',function(e){
  const menu=document.getElementById('mobileMenu');
  const btn=document.getElementById('hamburgerBtn');
  if(menu&&menu.classList.contains('open')&&!menu.contains(e.target)&&!btn.contains(e.target)){
    menu.classList.remove('open');
    document.getElementById('hb1').style.cssText='';
    document.getElementById('hb2').style.cssText='';
    document.getElementById('hb3').style.cssText='';
  }
});

</script>

<footer class="ns-footer" aria-label="Site footer">
  <div class="footer-main">
    <div class="footer-col">
      <h3>About This Guide</h3>
      <p>Comprehensive, evidence-based information synthesized from WHO, ACOG, ICMR guidelines, peer-reviewed research, and NFHS-5 data (724,115+ women).</p>
    </div>
    <div class="footer-col">
      <h3>Evidence Sources</h3>
      <ul>
        <li>World Health Organization</li>
        <li>ACOG Guidelines</li>
        <li>ICMR India</li>
        <li>NFHS-5 Survey</li>
      </ul>
    </div>
    <div class="footer-col">
      <h3>Important Disclaimer</h3>
      <p class="disclaimer-text">This provides general information only. Each pregnancy is unique. Medical decisions should be made with qualified healthcare providers who can assess your individual circumstances.</p>
    </div>
    <div class="footer-col">
      <h3>Emergency</h3>
      <p class="emergency-alert">Heavy bleeding, fever, chest pain, or severe abdominal pain require immediate medical attention. <strong>Don't delay.</strong></p>
    </div>
  </div>
  <div class="footer-meta">
    <p class="meta-line">Last Updated: February 2026 <span class="sep">|</span> Evidence-Based <span class="sep">•</span> Comprehensive <span class="sep">•</span> Empowering</p>
    <p class="tagline"><span class="heart">🩷</span> Dedicated to empowering every mother</p>
  </div>
  <div class="footer-bottom">
    <div class="footer-bottom-inner">
      <nav class="footer-links" aria-label="Legal and support links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Contact Support</a>
      </nav>
      <p class="footer-copy">&copy; 2026 Nari Swasthya. Empowering Women's Health.</p>
    </div>
  </div>
</footer>
</body>
</html>
