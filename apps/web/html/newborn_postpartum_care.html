<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Postpartum & Newborn Care Journey | Comprehensive Medical Guide</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <!-- Three.js for 3D Visualizations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>

<!-- ================================================ -->
<!-- STYLES SECTION -->
<!-- ================================================ -->
<style>

/* ===================== HEADER CSS (from milk_supply_nutrition.html) ===================== */
.site-header {
  background: rgba(255,255,255,0.95);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  padding: 0;
  box-shadow: 0 2px 24px rgba(236,64,122,0.09);
  position: sticky; top: 0; z-index: 1000;
  border-bottom: 1px solid rgba(236,64,122,0.08);
  margin-bottom: 0;
}
.nav-container {
  max-width: 1400px; margin: 0 auto;
  padding: 0 1.5rem;
  display: flex; justify-content: space-between; align-items: center;
  height: 64px;
}
.logo { display: flex; align-items: center; gap: .65rem; flex-shrink: 0; }
.logo-icon {
  width: 40px; height: 40px; border-radius: 12px;
  background: linear-gradient(135deg,#ec407a,#ad1457);
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 4px 14px rgba(236,64,122,0.35);
  flex-shrink: 0;
}
.logo-icon svg { width: 22px; height: 22px; fill: white; }
.logo-text { display: flex; flex-direction: column; gap: 0; }
.logo-text a {
  text-decoration: none;
  font-family: 'Playfair Display', serif;
  font-weight: 900; font-size: 1.25rem; line-height: 1.1;
  background: linear-gradient(135deg,#ec407a,#ad1457);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.logo-text span {
  font-size: .62rem; color: #555;
  font-family: 'Manrope', sans-serif; font-weight: 500;
  letter-spacing: .1em; text-transform: uppercase;
}
.main-nav { display: flex; align-items: center; gap: .2rem; }
.nav-item { position: relative; }
.nav-link {
  display: flex; align-items: center; gap: .3rem;
  text-decoration: none; color: #212121;
  font-weight: 500; font-size: .875rem;
  padding: .55rem .75rem; border-radius: 8px;
  transition: all .25s; white-space: nowrap;
  cursor: pointer; background: none; border: none; font-family: inherit;
}
.nav-link:hover, .nav-link.active { color: #d81b60; background: rgba(236,64,122,0.06); }
.nav-link .chevron { font-size: .6rem; transition: transform .25s; color: #555; margin-top: 1px; }
.nav-item:hover .chevron { transform: rotate(180deg); }
.nav-dropdown {
  position: absolute; top: calc(100% + 8px); left: 50%;
  transform: translateX(-50%) translateY(-6px);
  min-width: 220px; background: white;
  border-radius: 16px;
  box-shadow: 0 16px 50px rgba(0,0,0,0.12), 0 4px 16px rgba(236,64,122,0.1);
  border: 1px solid rgba(236,64,122,0.1);
  padding: .5rem; opacity: 0; pointer-events: none;
  transition: all .25s cubic-bezier(.23,1.01,.32,1); z-index: 200;
}
.nav-dropdown::before {
  content: ''; position: absolute; top: -6px; left: 50%; transform: translateX(-50%);
  border: 6px solid transparent; border-bottom-color: white;
  border-top: none; filter: drop-shadow(0 -2px 4px rgba(0,0,0,0.06));
}
.nav-item:hover .nav-dropdown, .nav-item:focus-within .nav-dropdown {
  opacity: 1; pointer-events: all; transform: translateX(-50%) translateY(0);
}
.dd-item {
  display: flex; align-items: center; gap: .75rem;
  padding: .65rem .9rem; border-radius: 10px;
  text-decoration: none; color: #212121;
  font-size: .85rem; font-weight: 500; transition: all .2s;
}
.dd-item:hover { background: rgba(236,64,122,0.07); color: #d81b60; padding-left: 1.1rem; }
.dd-icon {
  width: 28px; height: 28px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: .8rem; flex-shrink: 0;
}
.dd-sep { height: 1px; background: #f0e6f0; margin: .3rem .5rem; }
/* Flyout submenu — appears to the right of the parent row */
.dd-has-flyout { position: relative; }
.dd-has-flyout > .dd-flyout-arrow { font-size: .6rem; color: #aaa; margin-left: auto; transition: transform .2s; }
.dd-flyout {
  display: none; position: absolute; top: 0; left: calc(100% + 4px);
  min-width: 190px; background: white; border-radius: 12px;
  box-shadow: 0 12px 36px rgba(0,0,0,0.12), 0 4px 12px rgba(236,64,122,0.1);
  border: 1px solid rgba(236,64,122,0.12); padding: .4rem; z-index: 300;
}
.dd-has-flyout:hover > .dd-flyout,
.dd-has-flyout:focus-within > .dd-flyout { display: block; }
.dd-has-flyout:hover { background: rgba(236,64,122,0.07); color: #d81b60; }
.dd-flyout .dd-item { padding: .55rem .8rem; font-size: .82rem; }
.dd-flyout .dd-item:hover { background: rgba(236,64,122,0.07); color: #d81b60; padding-left: 1rem; }
.nav-actions { display: flex; gap: .6rem; align-items: center; }
.btn-nav {
  padding: .46rem 1.1rem; border-radius: 50px; text-decoration: none;
  font-weight: 600; font-size: .82rem; transition: all .3s; border: none; cursor: pointer;
  font-family: inherit; display: inline-flex; align-items: center; gap: .4rem;
}
.btn-nav.outline {
  background: linear-gradient(135deg,#ec407a,#ad1457);
  color: #fff; box-shadow: 0 4px 15px rgba(236,64,122,0.3); border: 1.5px solid #d81b60;
}
.btn-nav.outline:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(236,64,122,0.4); color: #fff; }
.btn-nav.primary {
  border: 1.5px solid #d81b60; color: #d81b60; background: #fff;
}
.btn-nav.primary:hover { background: rgba(236,64,122,0.05); }
.hamburger {
  display: none; width: 38px; height: 38px; border-radius: 10px;
  background: none; border: 1.5px solid #f0e6f0;
  align-items: center; justify-content: center; cursor: pointer;
  flex-direction: column; gap: 4px; padding: 8px;
}
.hamburger span { display: block; height: 2px; background: #212121; border-radius: 2px; transition: all .3s; }
.mobile-menu {
  display: none; position: fixed; inset: 0; top: 64px;
  background: rgba(255,255,255,0.98); backdrop-filter: blur(20px);
  z-index: 999; padding: 1.5rem; overflow-y: auto;
}
.mm-action-btn { display: inline-flex !important; }
.mobile-menu.open { display: block; }
.mm-link {
  display: flex; align-items: center; gap: .75rem;
  padding: .85rem 1rem; border-radius: 12px;
  text-decoration: none; color: #212121;
  font-weight: 500; font-size: 1rem;
  transition: all .2s; border-bottom: 1px solid #f0e6f0;
}
.mm-link:hover { color: #d81b60; background: rgba(236,64,122,0.05); }
.mm-section { font-size: .72rem; font-weight: 700; color: #555; text-transform: uppercase; letter-spacing: .1em; padding: .6rem 1rem .3rem; }
@media(max-width:1060px) {
  .main-nav { display: none; }
  .hamburger { display: flex; }
  /* Hide both header buttons at tablet/mobile — accessible via mobile menu */
  .nav-actions .btn-nav { display: none; }
}

/* ===================== FOOTER CSS (from milk_supply_nutrition.html) ===================== */
footer.ns-footer {
  background: #1e1a1e;
  color: #c9bfc9;
  border-top: 1px solid rgba(232,81,122,0.18);
  margin-top: 4rem;
}
.footer-main {
  max-width: 1200px; margin: 0 auto;
  padding: 56px 32px 48px;
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px;
}
.footer-col h3 {
  font-family: 'Playfair Display', Georgia, serif;
  font-size: 1.05rem; font-weight: 600;
  color: #e8517a; margin-bottom: 18px; letter-spacing: 0.01em;
}
.footer-col p { font-size: 0.875rem; line-height: 1.75; color: #c9bfc9; font-weight: 300; }
.footer-col ul { list-style: none; padding: 0; }
.footer-col ul li {
  font-size: 0.875rem; color: #c9bfc9;
  padding: 5px 0 5px 14px; font-weight: 300;
  position: relative; transition: color 0.2s;
}
.footer-col ul li::before {
  content: ''; position: absolute; left: 0; top: 50%; transform: translateY(-50%);
  width: 5px; height: 5px; border-radius: 50%; background: #e8517a; opacity: 0.5;
}
.footer-col ul li:hover { color: #f0748e; }
.disclaimer-text { font-size: 0.875rem; line-height: 1.75; color: #c9bfc9; font-weight: 300; }
.emergency-alert { font-size: 0.875rem; line-height: 1.7; color: #e8517a; font-weight: 500; }
.emergency-alert strong { font-weight: 600; }
.footer-meta {
  border-top: 1px solid rgba(232,81,122,0.18);
  max-width: 1200px; margin: 0 auto; padding: 28px 32px; text-align: center;
}
.footer-meta .meta-line { font-size: 0.8rem; color: #7c7080; letter-spacing: 0.04em; margin-bottom: 10px; }
.footer-meta .meta-line .sep { color: #e8517a; margin: 0 6px; }
.footer-meta .tagline { font-size: 0.82rem; color: #7c7080; display: flex; align-items: center; justify-content: center; gap: 6px; }
.footer-meta .tagline .heart { color: #e8517a; font-size: 1rem; animation: footerPulse 2s ease-in-out infinite; }
@keyframes footerPulse { 0%,100%{transform:scale(1);opacity:1;} 50%{transform:scale(1.25);opacity:0.8;} }
.footer-bottom { background: #161316; border-top: 1px solid rgba(255,255,255,0.04); }
.footer-bottom-inner { max-width: 1200px; margin: 0 auto; padding: 22px 32px; display: flex; flex-direction: column; align-items: center; gap: 10px; }
.footer-links { display: flex; gap: 36px; flex-wrap: wrap; justify-content: center; }
.footer-links a { font-size: 0.82rem; color: #7c7080; text-decoration: none; letter-spacing: 0.03em; transition: color 0.2s; }
.footer-links a:hover { color: #f0748e; }
.footer-copy { font-size: 0.78rem; color: #7c7080; opacity: 0.7; letter-spacing: 0.02em; }
@media(max-width:900px){.footer-main{grid-template-columns:repeat(2,1fr);gap:32px;}}
@media(max-width:540px){.footer-main{grid-template-columns:1fr;padding:40px 20px 32px;}.footer-meta{padding:20px;}.footer-bottom-inner{padding:18px 20px;}.footer-links{gap:20px;}}
/* ===================== END HEADER/FOOTER CSS ===================== */

/* ═══════════════════════════════════════════════════════════════════════
   CANONICAL TYPOGRAPHY SYSTEM — exact antenatal_care.html match
   Inserted at top of sheet to be the source of truth.
   All later .hero-title-3d / .title-emphasis / .section-title-prominent etc
   rules are deleted below so these are the only definitions.
   ═══════════════════════════════════════════════════════════════════════ */

/* ── Hero badge floating pill ── */
.hero-badge{
  display:inline-flex;
  align-items:center;
  gap:.6rem;
  background:linear-gradient(135deg,rgba(236,64,122,0.10),rgba(168,230,207,0.10));
  padding:.6rem 1.2rem;
  border-radius:999px;
  border:2px solid rgba(236,64,122,0.18);
  margin-bottom:1.5rem;
  animation:badge-float 3s ease-in-out infinite;
}
.badge-icon{font-size:1.4rem;}
.badge-text{font-weight:800;color:var(--primary-dark);font-size:.92rem;}
@keyframes badge-float{0%,100%{transform:translateY(0);}50%{transform:translateY(-10px);}}

/* ── HERO TITLE ── */
.hero-title-3d{
  font-family:'Playfair Display',Georgia,serif !important;
  font-size:clamp(2.4rem,5vw,4rem) !important;
  font-weight:900 !important;
  line-height:1.08 !important;
  margin-bottom:1.2rem;
  color:transparent !important;
  background:linear-gradient(135deg,#212121 0%,#555 100%) !important;
  -webkit-background-clip:text !important;
  -webkit-text-fill-color:transparent !important;
  background-clip:text !important;
}

/* ── Pink animated emphasis inside hero title ── */
.title-emphasis{
  font-family:inherit;
  background:linear-gradient(135deg,#ec407a 0%,#d81b60 50%,#ad1457 100%) !important;
  -webkit-background-clip:text !important;
  -webkit-text-fill-color:transparent !important;
  background-clip:text !important;
  animation:title-shimmer 3s ease-in-out infinite;
  filter:drop-shadow(0 2px 10px rgba(236,64,122,.35));
  display:inline;
}
@keyframes title-shimmer{
  0%,100%{filter:brightness(1)   drop-shadow(0 2px 10px  rgba(236,64,122,.35));}
  50%    {filter:brightness(1.35) drop-shadow(0 5px 18px rgba(236,64,122,.55));}
}

/* ── Hero subtitle ── */
.hero-subtitle{
  font-size:1.15rem !important;
  color:var(--text-soft) !important;
  -webkit-text-fill-color:var(--text-soft) !important;
  margin-bottom:2rem;
  line-height:1.85;
  font-family:'Manrope',sans-serif;
  font-weight:500;
}

/* ── Hero stats 3-col ── */
.hero-stats{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:1rem;
  margin-bottom:1.75rem;
}
.stat-item{
  background:#fff;
  border-radius:16px;
  padding:1.1rem;
  box-shadow:0 4px 15px rgba(0,0,0,0.08);
  border:2px solid transparent;
  transition:transform .25s ease,box-shadow .25s ease,border-color .25s ease;
  text-align:center;
}
.stat-item:hover{
  transform:translateY(-4px);
  box-shadow:0 8px 25px rgba(255,107,157,0.18);
  border-color:rgba(244,143,177,0.55);
}
.stat-number{
  display:block;
  font-size:1.9rem;
  font-weight:900;
  color:var(--primary) !important;
  -webkit-text-fill-color:var(--primary) !important;
  font-family:'Playfair Display',serif;
}
.stat-label{display:block;font-size:.9rem;color:var(--text-soft);font-weight:600;-webkit-text-fill-color:var(--text-soft);}

/* ── CTA row ── */
.hero-cta-row{display:flex;gap:1rem;flex-wrap:wrap;margin-bottom:0;}

/* ── Primary button ── */
.btn-primary{
  padding:1rem 2rem;
  border-radius:999px;
  font-weight:900;
  font-size:1rem;
  cursor:pointer;
  border:none;
  background:linear-gradient(135deg,var(--deep-pink),#f06292) !important;
  color:#fff !important;
  -webkit-text-fill-color:#fff !important;
  box-shadow:0 10px 25px rgba(216,27,96,0.30);
  animation:float-btn 3s ease-in-out infinite;
  transition:all .25s ease;
  display:inline-block;
  text-decoration:none;
}
@keyframes float-btn{0%,100%{transform:translateY(0);}50%{transform:translateY(-5px);}}
.btn-primary:hover{transform:translateY(-3px);box-shadow:0 15px 35px rgba(216,27,96,0.42);}

/* ── Secondary button ── */
.btn-secondary{
  padding:1rem 2rem;
  border-radius:999px;
  font-weight:900;
  font-size:1rem;
  cursor:pointer;
  background:#fff;
  border:2px solid var(--primary);
  color:var(--primary);
  -webkit-text-fill-color:var(--primary);
  transition:all .25s ease;
}
.btn-secondary:hover{background:var(--primary);color:#fff;-webkit-text-fill-color:#fff;}

/* ── Daily tip amber strip ── */
.daily-tip{
  margin-top:2rem;
  padding:1.2rem 1.4rem;
  background:linear-gradient(135deg,#fff8e1 0%,#ffecb3 100%);
  border-radius:16px;
  border-left:6px solid var(--warning);
  display:flex;
  gap:1rem;
  align-items:center;
  box-shadow:0 4px 15px rgba(255,167,38,0.18);
}
.tip-icon{font-size:2rem;}
.daily-tip p{
  font-weight:800;
  color:#f57c00;
  -webkit-text-fill-color:#f57c00;
}

/* ── Hero content slide-in ── */
.hero-content{
  position:relative;
  z-index:2;
  animation:slideInLeft .8s ease;
  padding:0 0 2rem 3rem; /* left breathing room */
}
@keyframes slideInLeft{from{opacity:0;transform:translateX(-35px);}to{opacity:1;transform:translateX(0);}}

/* ── Section header centred wrapper ── */
.section-header{text-align:center;margin:1rem 0 2.5rem;}

/* ── Section badge animated pill ── */
.header-badge-prominent{
  display:inline-flex;
  align-items:center;
  gap:.8rem;
  background:linear-gradient(135deg,rgba(236,64,122,0.1),rgba(168,230,207,0.15));
  padding:.8rem 1.8rem;
  border-radius:999px;
  border:2px solid rgba(236,64,122,0.3);
  margin-bottom:1.5rem;
  box-shadow:0 4px 20px rgba(236,64,122,0.15);
  animation:badge-float-prominent 3s ease-in-out infinite;
  position:relative;
  overflow:hidden;
}
.header-badge-prominent::before{
  content:'';
  position:absolute;top:-50%;left:-50%;
  width:200%;height:200%;
  background:linear-gradient(45deg,transparent,rgba(255,255,255,0.3),transparent);
  animation:badge-shine 3s infinite;
}
@keyframes badge-shine{
  0%  {transform:translateX(-100%) translateY(-100%) rotate(45deg);}
  100%{transform:translateX(100%)  translateY(100%)  rotate(45deg);}
}
@keyframes badge-float-prominent{
  0%,100%{transform:translateY(0);   box-shadow:0 4px 20px rgba(236,64,122,0.15);}
  50%    {transform:translateY(-8px);box-shadow:0 8px 30px rgba(236,64,122,0.25);}
}
.badge-pulse{
  width:10px;height:10px;border-radius:50%;
  background:var(--primary);
  animation:pulse-dot 2s ease-in-out infinite;
  position:relative;z-index:1;
}
@keyframes pulse-dot{0%,100%{opacity:1;transform:scale(1);}50%{opacity:.5;transform:scale(1.3);}}
.header-badge-prominent .badge-text{
  font-weight:900;letter-spacing:.5px;text-transform:uppercase;
  color:var(--primary);-webkit-text-fill-color:var(--primary);
  position:relative;z-index:1;
  font-family:'Manrope',sans-serif;
}

/* ── SECTION TITLE — dark gradient base ── */
.section-title-prominent{
  font-family:'Playfair Display',Georgia,serif !important;
  font-size:clamp(2.2rem,5vw,3.6rem) !important;
  font-weight:900 !important;
  line-height:1.1 !important;
  margin-bottom:1.2rem;
  color:transparent !important;
  background:linear-gradient(135deg,#212121 0%,#555 100%) !important;
  -webkit-background-clip:text !important;
  -webkit-text-fill-color:transparent !important;
  background-clip:text !important;
}

/* ── Pink shimmer span inside section-title-prominent ── */
.title-highlight{
  background:linear-gradient(135deg,#ec407a 0%,#d81b60 40%,#ad1457 100%) !important;
  -webkit-background-clip:text !important;
  -webkit-text-fill-color:transparent !important;
  background-clip:text !important;
  filter:drop-shadow(0 3px 12px rgba(236,64,122,0.35));
  animation:title-shimmer 3s ease-in-out infinite;
  display:inline;
}

/* ── Section subtitle frosted box ── */
.section-subtitle-prominent{
  font-size:1.12rem;
  font-family:'Manrope',sans-serif;
  font-weight:500;
  color:var(--text-main) !important;
  -webkit-text-fill-color:var(--text-main) !important;
  max-width:900px;
  margin:0 auto;
  line-height:1.9;
  padding:1.6rem 2rem;
  border-radius:24px;
  border:2px solid rgba(236,64,122,0.12);
  background:linear-gradient(135deg,rgba(236,64,122,0.03),rgba(168,230,207,0.05),rgba(236,64,122,0.03));
  box-shadow:0 8px 30px rgba(236,64,122,0.08),inset 0 2px 0 rgba(255,255,255,0.85);
  backdrop-filter:blur(10px);
}
.section-subtitle-prominent strong{
  font-weight:900;
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

/* ── Responsive ── */
@media(max-width:900px){
  .hero-title-3d{font-size:clamp(2rem,8vw,3rem) !important;}
  .section-title-prominent{font-size:clamp(1.8rem,7vw,2.8rem) !important;}
  .section-subtitle-prominent{font-size:1rem;padding:1.2rem 1.5rem;}
  .hero-stats{grid-template-columns:repeat(3,1fr);}
  .hero-content{padding:0 1rem 2rem 1rem;}
}
@media(max-width:600px){
  .hero-stats{grid-template-columns:1fr;}
}
/* ═══════════════════════════════════════════════════════════════════════ */

:root {
  --pink: #ec407a;
  --deep-pink: #d81b60;
  --primary: #ec407a;
  --primary-dark: #d81b60;
  --primary-light: #f48fb1;
  --lavender: #ede7f6;
  --bg: #faf5fb;
  --card-bg: #ffffff;
  --text-main: #212121;
  --text-soft: #555;
  --border-soft: #e0e0e0;
  
  --success: #66bb6a;
  --warning: #ffa726;
  --critical: #ef5350;
  --info: #4fc3f7;
  --emergency: #ff1744;
  --urgent: #ff9100;
  --monitor: #42a5f5;
  
  /* New postpartum colors */
  --baby-blue: #81d4fa;
  --soft-mint: #a5d6a7;
  --warm-peach: #ffccbc;
  --clinical-teal: #4db6ac;
  --gentle-purple: #ce93d8;
  
  --shadow: 0 8px 30px rgba(0,0,0,0.08);
  --shadow-strong: 0 15px 40px rgba(236, 64, 122, 0.18);
  --shadow-critical: 0 12px 35px rgba(255, 23, 68, 0.25);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  scroll-behavior: smooth;
}

body {
  font-family: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  background: var(--bg);
  color: var(--text-main);
  line-height: 1.6;
  overflow-x: hidden;
}

h1, h2, h3, h4 {
  font-family: 'Playfair Display', Georgia, serif;
}

/* ==================== HEADER ==================== */
.site-header {
  background: white;
  padding: 1rem 0;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  position: sticky;
  top: 0;
  z-index: 1000;
  margin-bottom: 2rem;
}

.nav-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo a {
  text-decoration: none;
  color: var(--deep-pink);
  font-weight: 700;
  font-size: 1.4rem;
  font-family: 'Playfair Display', serif;
}
.logo-icon { display: flex; }

.main-nav {
  display: flex;
  gap: 2rem;
}

.main-nav a {
  text-decoration: none;
  color: var(--text-main);
  font-weight: 500;
  transition: color .3s;
}

.main-nav a:hover {
  color: var(--deep-pink);
}

.btn-nav {
  padding: .5rem 1.2rem;
  border-radius: 50px;
  text-decoration: none;
  font-weight: 600;
  font-size: .9rem;
  transition: all .3s;
  border: none;
  cursor: pointer;
  display: inline-block;
}
.btn-nav.primary {
  background: var(--deep-pink);
  color: white;
}
.btn-nav.outline {
  border: 1px solid #d81b60;
  color: var(--text-main);
  background: transparent;
}
.btn-nav.primary:hover {
  background: var(--primary-dark);
  transform: translateY(-1px);
}
.btn-nav.outline:hover {
  border-color: var(--deep-pink);
  color: var(--deep-pink);
}
/* nav-actions replaces header-actions */
.nav-actions { display: flex; gap: 1rem; }
.header-actions { display: flex; gap: 1rem; }
@media(max-width: 1060px) {
  .main-nav { display: none; }
}
}

/* ==================== PAGE SHELL ==================== */
.page-shell {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 2rem;
}

/* ==================== HERO SECTION ==================== */
.hero {
  position: relative;
  display: grid;
  grid-template-columns: 1.1fr .9fr;
  gap: 4rem;
  align-items: center;
  padding: 4rem 0 2rem;
  overflow: hidden;
  background: linear-gradient(180deg, #faf5fb 0%, #f5f0fa 50%, #ede7f6 100%);
  border-radius: 32px;
  margin-bottom: 3rem;
  min-height: 85vh;
}

.hero-constellation-bg {
  position: absolute;
  inset: 0;
  z-index: 1;
  overflow: hidden;
  pointer-events: none;
}

#particleCanvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  opacity: 0.7;
}

.gradient-morph {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at 50% 50%, 
    rgba(236, 64, 122, 0.15) 0%,
    transparent 65%
  );
  animation: morph-pulse 8s ease-in-out infinite;
  z-index: 1;
  pointer-events: none;
}

@keyframes morph-pulse {
  0%, 100% { 
    opacity: 0.6; 
    transform: scale(1); 
  }
  50% { 
    opacity: 1; 
    transform: scale(1.15); 
  }
}

/* removed-duplicate */

/* .hero-content h1 removed – hero-title-3d handles this */

/* removed-duplicate */

.floating-keywords {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-top: 2rem;
}

.keyword {
  background: rgba(255, 255, 255, 0.9);
  padding: 0.5rem 1.2rem;
  border-radius: 50px;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--primary);
  box-shadow: 0 4px 15px rgba(236, 64, 122, 0.15);
  animation: float 3s ease-in-out infinite;
}

.keyword:nth-child(2) { animation-delay: 0.5s; }
.keyword:nth-child(3) { animation-delay: 1s; }
.keyword:nth-child(4) { animation-delay: 1.5s; }
.keyword:nth-child(5) { animation-delay: 2s; }
.keyword:nth-child(6) { animation-delay: 2.5s; }

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.hero-visual-3d {
  position: relative;
  z-index: 2;
  animation: slideInRight .8s ease;
}

@keyframes slideInRight {
  from { opacity: 0; transform: translateX(35px); }
  to { opacity: 1; transform: translateX(0); }
}

.postpartum-3d-container {
  position: relative;
  width: 100%;
  height: 600px;
  display: flex;
  align-items: center;
  justify-content: center;
}

#motherBabyCanvas {
  width: 100%;
  height: 100%;
  border-radius: 24px;
}

/* Floating Care Text */
.floating-care-text {
  position: absolute;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  padding: 0.6rem 1.2rem;
  border-radius: 50px;
  font-size: 0.85rem;
  font-weight: 700;
  color: var(--primary);
  box-shadow: 0 4px 15px rgba(236, 64, 122, 0.2);
  border: 2px solid rgba(236, 64, 122, 0.15);
  white-space: nowrap;
  z-index: 10;
  pointer-events: none;
}

.text-1 {
  top: 12%;
  left: 8%;
  animation: float-text-1 4s ease-in-out infinite;
}

.text-2 {
  top: 25%;
  right: 5%;
  animation: float-text-2 5s ease-in-out infinite;
}

.text-3 {
  top: 45%;
  left: 3%;
  animation: float-text-3 4.5s ease-in-out infinite;
}

.text-4 {
  top: 62%;
  right: 8%;
  animation: float-text-4 5.5s ease-in-out infinite;
}

.text-5 {
  bottom: 18%;
  left: 10%;
  animation: float-text-5 4.8s ease-in-out infinite;
}

.text-6 {
  bottom: 10%;
  right: 12%;
  animation: float-text-6 5.2s ease-in-out infinite;
}

@keyframes float-text-1 {
  0%, 100% { transform: translateY(0) translateX(0); opacity: 0.9; }
  50% { transform: translateY(-12px) translateX(5px); opacity: 1; }
}

@keyframes float-text-2 {
  0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.9; }
  50% { transform: translateY(-15px) translateX(-8px) rotate(2deg); opacity: 1; }
}

@keyframes float-text-3 {
  0%, 100% { transform: translateY(0) scale(1); opacity: 0.85; }
  50% { transform: translateY(-10px) scale(1.05); opacity: 1; }
}

@keyframes float-text-4 {
  0%, 100% { transform: translateY(0) translateX(0); opacity: 0.9; }
  50% { transform: translateY(10px) translateX(-5px); opacity: 1; }
}

@keyframes float-text-5 {
  0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.9; }
  50% { transform: translateY(-8px) rotate(-2deg); opacity: 1; }
}

@keyframes float-text-6 {
  0%, 100% { transform: translateY(0) translateX(0); opacity: 0.85; }
  50% { transform: translateY(12px) translateX(6px); opacity: 1; }
}

/* ==================== EMERGENCY ALERT ==================== */
.emergency-strip {
  background: linear-gradient(135deg, var(--emergency) 0%, #d32f2f 100%);
  color: white;
  padding: 1.5rem;
  border-radius: 16px;
  margin-bottom: 3rem;
  box-shadow: var(--shadow-critical);
  animation: pulse-glow 2s ease-in-out infinite;
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 12px 35px rgba(255, 23, 68, 0.25); }
  50% { box-shadow: 0 12px 45px rgba(255, 23, 68, 0.4); }
}

.emergency-strip h2 {
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1.8rem;
  margin-bottom: 1rem;
}

.emergency-icon {
  font-size: 2.5rem;
  animation: shake 0.5s infinite;
}

@keyframes shake {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-10deg); }
  75% { transform: rotate(10deg); }
}

.emergency-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1rem;
  margin-top: 1.5rem;
}

.emergency-card {
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  padding: 1.2rem;
  border-radius: 12px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  transition: all 0.3s;
}

.emergency-card:hover {
  background: rgba(255, 255, 255, 0.25);
  transform: translateY(-2px);
}

.emergency-card h4 {
  font-size: 1.1rem;
  margin-bottom: 0.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* ==================== SECTION STYLING ==================== */
.section {
  margin-bottom: 5rem;
}

/* Section headers - Matching antenatal_care.html format */
/* removed-duplicate */

/* duplicate removed by canonical fix */

/* duplicate removed by canonical fix */

/* legacy section-header h2/p removed – section-title-prominent handles this */

/* ==================== INTERACTIVE CARDS ==================== */
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 2rem;
}

.interactive-card {
  background: var(--card-bg);
  border-radius: 24px;
  padding: 2rem;
  box-shadow: var(--shadow);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.interactive-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 6px;
  background: linear-gradient(90deg, var(--primary), var(--primary-light));
  transform: scaleX(0);
  transition: transform 0.4s;
}

.interactive-card:hover {
  transform: translateY(-8px);
  box-shadow: var(--shadow-strong);
}

.interactive-card:hover::before {
  transform: scaleX(1);
}

.card-icon {
  width: 70px;
  height: 70px;
  background: linear-gradient(135deg, var(--primary-light), var(--primary));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 8px 20px rgba(236, 64, 122, 0.3);
}

.interactive-card h3 {
  font-size: 1.5rem;
  color: var(--text-main);
  margin-bottom: 1rem;
}

.interactive-card p {
  color: var(--text-soft);
  margin-bottom: 1.5rem;
  line-height: 1.8;
}

/* ==================== DANGER SIGNS CHECKLIST ==================== */
.danger-checklist {
  background: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
  border-radius: 24px;
  padding: 2.5rem;
  margin-top: 2rem;
  border: 3px solid var(--critical);
}

.danger-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.2rem;
  background: white;
  border-radius: 12px;
  margin-bottom: 1rem;
  border-left: 4px solid var(--critical);
  transition: all 0.3s;
  cursor: pointer;
}

.danger-item:hover {
  transform: translateX(5px);
  box-shadow: 0 4px 15px rgba(239, 83, 80, 0.2);
}

.danger-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.danger-content h4 {
  color: var(--critical);
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}

.danger-content p {
  color: var(--text-soft);
  font-size: 0.95rem;
  line-height: 1.6;
}

/* ==================== INTERACTIVE TIMELINE ==================== */
.timeline-container {
  position: relative;
  padding: 2rem 0;
}

.timeline-line {
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 4px;
  background: linear-gradient(180deg, var(--primary), var(--primary-light));
  transform: translateX(-50%);
}

.timeline-item {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 2rem;
  margin-bottom: 3rem;
  align-items: center;
}

.timeline-item:nth-child(even) .timeline-content:first-child {
  order: 3;
}

.timeline-content {
  background: white;
  padding: 1.5rem;
  border-radius: 16px;
  box-shadow: var(--shadow);
  transition: all 0.3s;
}

.timeline-content:hover {
  transform: scale(1.05);
  box-shadow: var(--shadow-strong);
}

.timeline-dot {
  width: 40px;
  height: 40px;
  background: var(--primary);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  box-shadow: 0 4px 15px rgba(236, 64, 122, 0.4);
  position: relative;
  z-index: 2;
}

.timeline-content h3 {
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.timeline-content.empty {
  visibility: hidden;
}

/* ==================== INTERACTIVE SEPSIS CALCULATOR ==================== */
.sepsis-calculator {
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
  border-radius: 24px;
  padding: 2.5rem;
  margin-top: 2rem;
}

.risk-factors {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
  margin: 2rem 0;
}

.risk-checkbox {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: white;
  padding: 1rem;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s;
  border: 2px solid transparent;
}

.risk-checkbox:hover {
  border-color: var(--primary);
  transform: translateX(5px);
}

.risk-checkbox input[type="checkbox"] {
  width: 24px;
  height: 24px;
  cursor: pointer;
  accent-color: var(--primary);
}

.risk-result {
  background: white;
  padding: 2rem;
  border-radius: 16px;
  margin-top: 2rem;
  text-align: center;
  display: none;
}

.risk-result.show {
  display: block;
  animation: slideIn 0.5s ease-out;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.risk-level {
  font-size: 3rem;
  font-weight: 900;
  margin-bottom: 1rem;
}

.risk-level.low { color: var(--success); }
.risk-level.medium { color: var(--warning); }
.risk-level.high { color: var(--critical); }

/* ==================== FEEDING TRACKER ==================== */
.feeding-tracker {
  background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
  border-radius: 24px;
  padding: 2.5rem;
}

.tracker-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
  margin-top: 2rem;
}

.tracker-card {
  background: white;
  padding: 1.5rem;
  border-radius: 16px;
  text-align: center;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.tracker-number {
  font-size: 3rem;
  font-weight: 900;
  color: var(--primary);
  display: block;
  margin: 1rem 0;
}

.tracker-label {
  color: var(--text-soft);
  font-size: 0.95rem;
}

.add-feed-btn {
  background: var(--primary);
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 50px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  margin-top: 1rem;
  font-size: 1rem;
}

.add-feed-btn:hover {
  background: var(--primary-dark);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(236, 64, 122, 0.3);
}

/* ==================== JAUNDICE COLOR CHART ==================== */
.jaundice-chart {
  background: white;
  border-radius: 24px;
  padding: 2.5rem;
  box-shadow: var(--shadow);
  margin-top: 2rem;
}

.color-scale {
  display: flex;
  justify-content: space-between;
  margin: 2rem 0;
  gap: 1rem;
}

.color-level {
  flex: 1;
  text-align: center;
  padding: 2rem 1rem;
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.3s;
  border: 3px solid transparent;
}

.color-level:hover {
  transform: translateY(-5px);
  border-color: var(--primary);
}

.color-level.normal { background: #fffde7; }
.color-level.mild { background: #fff9c4; }
.color-level.moderate { background: #ffeb3b; }
.color-level.severe { background: #ffc107; }
.color-level.critical { background: #ff9800; color: white; }

.color-level h4 {
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}

.color-level p {
  font-size: 0.85rem;
  opacity: 0.8;
}

/* ════════════════════════════════════════════════════════
   DOCTOR QUESTION BUILDER  ·  Full Rebuild
   ════════════════════════════════════════════════════════ */

/* shell wrapper */
.qb-shell {
  background: linear-gradient(145deg,#fff8fb 0%,#f8fff9 50%,#fdf8ff 100%);
  border-radius: 28px;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(236,64,122,.10);
  border: 1.5px solid rgba(236,64,122,.10);
}

/* ── header strip ── */
.qb-header {
  background: linear-gradient(135deg,var(--primary),var(--primary-dark));
  padding: 1.4rem 2rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 1rem;
}
.qb-header-title {
  font-family:'Playfair Display',serif;
  font-size: 1.15rem;
  font-weight: 900;
  color: #fff;
}
.qb-header-meta {
  display: flex;
  gap: .6rem;
  align-items: center;
  flex-wrap: wrap;
}
.qb-pill {
  background: rgba(255,255,255,.2);
  border: 1px solid rgba(255,255,255,.35);
  border-radius: 999px;
  padding: .28rem .85rem;
  font-size: .78rem;
  font-weight: 700;
  color: #fff;
  transition: all .25s;
}
.qb-pill.on {
  background: #fff;
  color: var(--primary-dark);
  box-shadow: 0 3px 10px rgba(0,0,0,.15);
}
.qb-counter {
  font-size: 1.3rem;
  font-weight: 900;
  background: rgba(255,255,255,.22);
  border-radius: 12px;
  padding: .3rem 1.1rem;
  color: #fff;
  min-width: 68px;
  text-align: center;
}

/* ── visit-type tabs ── */
.qb-visit-tabs {
  display: flex;
  gap: .5rem;
  flex-wrap: wrap;
  padding: 1.2rem 2rem .4rem;
  background: rgba(236,64,122,.03);
  border-bottom: 1.5px solid rgba(236,64,122,.08);
}
.qb-vtab {
  padding: .5rem 1.1rem;
  border-radius: 999px;
  border: 2px solid rgba(236,64,122,.2);
  background: #fff;
  font-size: .82rem;
  font-weight: 700;
  cursor: pointer;
  color: var(--text-main);
  transition: all .22s;
  display: flex;
  align-items: center;
  gap: .35rem;
}
.qb-vtab:hover { background: rgba(236,64,122,.06); border-color: rgba(236,64,122,.35); }
.qb-vtab.active {
  background: linear-gradient(135deg,var(--primary),var(--primary-dark));
  color: #fff;
  border-color: transparent;
  box-shadow: 0 5px 15px rgba(236,64,122,.28);
}

/* ── category grid ── */
.qb-cat-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(155px,1fr));
  gap: .9rem;
  padding: 1.4rem 2rem 1rem;
}
.qb-cat {
  position: relative;
  background: #fff;
  border: 2.5px solid rgba(0,0,0,.06);
  border-radius: 18px;
  padding: 1.1rem .9rem .9rem;
  text-align: center;
  cursor: pointer;
  transition: all .28s cubic-bezier(.4,0,.2,1);
  overflow: hidden;
  user-select: none;
}
.qb-cat::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg,var(--primary),var(--primary-dark));
  opacity: 0;
  transition: opacity .28s;
  border-radius: inherit;
  z-index: 0;
}
.qb-cat.on::before { opacity: 1; }
.qb-cat.on {
  border-color: transparent;
  box-shadow: 0 10px 28px rgba(236,64,122,.30);
  transform: translateY(-4px);
}
.qb-cat:hover:not(.on) {
  border-color: rgba(236,64,122,.3);
  box-shadow: 0 6px 20px rgba(236,64,122,.12);
  transform: translateY(-3px);
}
.qb-cat > * { position: relative; z-index: 1; }
.qb-ci { font-size: 1.8rem; display: block; margin-bottom: .4rem; transition: transform .28s; }
.qb-cat.on .qb-ci { transform: scale(1.18) rotate(6deg); }
.qb-cl { font-size: .78rem; font-weight: 800; color: var(--text-main); line-height: 1.3; }
.qb-cat.on .qb-cl { color: #fff; }
.qb-cn {
  display: inline-block;
  margin-top: .35rem;
  font-size: .68rem;
  font-weight: 900;
  padding: .12rem .5rem;
  border-radius: 999px;
  background: rgba(236,64,122,.10);
  color: var(--primary);
  transition: all .28s;
}
.qb-cat.on .qb-cn { background: rgba(255,255,255,.28); color: #fff; }

/* ── controls row ── */
.qb-ctrl-row {
  display: flex;
  gap: .6rem;
  flex-wrap: wrap;
  padding: .2rem 2rem .8rem;
  align-items: center;
}
.qb-ctrl {
  padding: .42rem 1rem;
  border-radius: 999px;
  border: 1.5px solid rgba(236,64,122,.25);
  background: #fff;
  font-size: .8rem;
  font-weight: 700;
  cursor: pointer;
  color: var(--primary);
  transition: all .2s;
}
.qb-ctrl:hover { background: rgba(236,64,122,.06); }
.qb-ctrl.danger  { color:#c62828; border-color:rgba(239,83,80,.3); }
.qb-ctrl.warning { color:#e65100; border-color:rgba(255,167,38,.3); }
.qb-ctrl.pressed { box-shadow: inset 0 0 0 2px currentColor; font-style:italic; }

/* ── search ── */
.qb-search-wrap { padding: .2rem 2rem .8rem; }
.qb-search {
  width: 100%;
  padding: .78rem 1.1rem .78rem 2.6rem;
  border-radius: 13px;
  border: 2px solid rgba(236,64,122,.18);
  font-family: inherit;
  font-size: .92rem;
  outline: none;
  background: #fff url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='15' height='15' fill='%23ec407a' viewBox='0 0 16 16'%3E%3Cpath d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z'/%3E%3C/svg%3E") no-repeat .85rem center;
  transition: border-color .2s, box-shadow .2s;
}
.qb-search:focus { border-color:var(--primary); box-shadow:0 0 0 3px rgba(236,64,122,.10); }

/* ── output panel ── */
.qb-out {
  margin: 0 2rem;
  background: #fff;
  border-radius: 18px;
  border: 1.5px solid rgba(236,64,122,.10);
  min-height: 260px;
  overflow: hidden;
}
.qb-empty {
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: .7rem; padding: 3rem 2rem;
  text-align: center;
}
.qb-empty-ico  { font-size: 3rem; opacity: .3; }
.qb-empty-msg  { color: var(--text-soft); font-weight: 500; }
.qb-empty-sub  { color: rgba(236,64,122,.6); font-size: .85rem; font-weight: 700; }

.qb-scroll { max-height: 460px; overflow-y: auto; }
.qb-scroll::-webkit-scrollbar { width: 5px; }
.qb-scroll::-webkit-scrollbar-thumb { background: var(--primary-light); border-radius: 99px; }

.qb-block {}
.qb-block-hd {
  display: flex; align-items: center; gap: .7rem;
  padding: .9rem 1.4rem .7rem;
  border-bottom: 1.5px solid rgba(0,0,0,.045);
  position: sticky; top: 0; background: #fff; z-index: 4;
}
.qb-block-ico { font-size: 1.3rem; }
.qb-block-title { font-size: .98rem; font-weight: 900; color: var(--primary-dark); flex: 1; }
.qb-block-count {
  font-size: .72rem; font-weight: 900;
  padding: .18rem .65rem; border-radius: 999px;
  background: rgba(236,64,122,.10); color: var(--primary);
}

.qb-q {
  display: flex; align-items: flex-start; gap: .7rem;
  padding: .65rem 1.4rem;
  transition: background .18s;
  border-bottom: 1px solid rgba(0,0,0,.04);
}
.qb-q:last-child { border-bottom: none; }
.qb-q:hover { background: rgba(236,64,122,.025); }
.qb-qn {
  min-width: 24px; height: 24px; border-radius: 50%;
  background: linear-gradient(135deg,var(--primary),var(--primary-dark));
  color: #fff; font-size: .68rem; font-weight: 900;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; margin-top: .18rem;
}
.qb-qt {
  font-size: .9rem; color: var(--text-main);
  line-height: 1.55; font-weight: 500; flex: 1;
}
.qb-tag {
  font-size: .64rem; font-weight: 900;
  padding: .13rem .48rem; border-radius: 999px;
  flex-shrink: 0; margin-top: .22rem;
  white-space: nowrap;
}
.t-hi  { background:rgba(239,83,80,.11); color:#c62828; }
.t-med { background:rgba(255,167,38,.12); color:#e65100; }
.t-inf { background:rgba(66,165,245,.10); color:#1565c0; }
.t-urg {
  font-size:.62rem; font-weight:900;
  padding:.1rem .4rem; border-radius:999px;
  background:rgba(255,23,68,.10); color:#d32f2f;
  margin-left:.3rem;
}

/* ── priority legend ── */
.qb-legend {
  display: flex; gap: .8rem; flex-wrap: wrap;
  justify-content: center; padding: .7rem 2rem .2rem;
  font-size: .77rem; color: var(--text-soft);
}
.qb-legend span { display:flex; align-items:center; gap:.3rem; font-weight:700; }

/* ── action buttons ── */
.qb-actions {
  display: flex; gap: .7rem; flex-wrap: wrap;
  justify-content: center; padding: 1.2rem 2rem 1.8rem;
}
.qb-btn {
  display: flex; align-items: center; gap: .45rem;
  padding: .72rem 1.5rem; border-radius: 999px;
  font-size: .88rem; font-weight: 800;
  cursor: pointer; border: none; transition: all .22s;
  font-family: inherit;
}
.qb-btn.pink {
  background: linear-gradient(135deg,var(--primary),var(--primary-dark));
  color: #fff; box-shadow: 0 6px 18px rgba(236,64,122,.28);
}
.qb-btn.pink:hover  { transform:translateY(-2px); box-shadow:0 10px 24px rgba(236,64,122,.38); }
.qb-btn.green { background:linear-gradient(135deg,#66bb6a,#388e3c); color:#fff; box-shadow:0 6px 18px rgba(76,175,80,.25); }
.qb-btn.green:hover { transform:translateY(-2px); }
.qb-btn.out   { background:#fff; border:2px solid rgba(236,64,122,.3); color:var(--primary); }
.qb-btn.out:hover   { border-color:var(--primary); background:rgba(236,64,122,.04); }
.qb-btn:disabled    { opacity:.38; cursor:not-allowed; transform:none !important; }

/* ── specialist box ── */
.qb-spec-wrap {
  padding: 1rem 2rem 0;
  display: none;
}
.qb-spec-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(230px,1fr));
  gap: .9rem;
}
.qb-scard {
  background:#fff; border-radius:15px;
  border:2px solid rgba(0,0,0,.07);
  padding:1.1rem; cursor:pointer; transition:all .22s;
}
.qb-scard:hover { border-color:rgba(236,64,122,.3); transform:translateY(-3px); box-shadow:0 8px 22px rgba(236,64,122,.12); }
.qb-scard.on    { border-color:var(--primary); background:linear-gradient(135deg,rgba(236,64,122,.04),rgba(236,64,122,.08)); }
.qb-scard h5 { font-size:.9rem; color:var(--text-main); margin:.35rem 0 .2rem; }
.qb-scard p  { font-size:.77rem; color:var(--text-soft); }

/* backward-compat */
.question-item {
  padding:.9rem 1rem; border-left:4px solid var(--success);
  background:rgba(76,175,80,.05); margin-bottom:.8rem; border-radius:8px;
}
@media(max-width:700px){
  .qb-cat-grid{grid-template-columns:repeat(3,1fr);padding:.8rem 1rem;}
  .qb-out,.qb-search-wrap,.qb-ctrl-row,.qb-actions,.qb-spec-wrap,.qb-visit-tabs{
    padding-left:1rem; padding-right:1rem; margin-left:0; margin-right:0;
  }
}
/* ════════════════════════════════════════════════════════ */

/* ==================== MODAL ==================== */

.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(5px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}

.modal-overlay.show {
  display: flex;
  animation: fadeIn 0.3s;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal-content {
  background: white;
  border-radius: 24px;
  max-width: 600px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  padding: 2.5rem;
  animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
}

.modal-header h2 {
  color: var(--primary);
  font-size: 2rem;
}

.close-modal {
  background: none;
  border: none;
  font-size: 2rem;
  cursor: pointer;
  color: var(--text-soft);
  transition: color 0.3s;
}

.close-modal:hover {
  color: var(--primary);
}

/* ==================== ACCORDION ==================== */
.accordion-item {
  background: white;
  border-radius: 16px;
  margin-bottom: 1rem;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.accordion-header {
  padding: 1.5rem;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: background 0.3s;
}

.accordion-header:hover {
  background: rgba(236, 64, 122, 0.05);
}

.accordion-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-main);
}

.accordion-icon {
  font-size: 1.5rem;
  color: var(--primary);
  transition: transform 0.3s;
}

.accordion-item.active .accordion-icon {
  transform: rotate(180deg);
}

.accordion-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease-out;
}

.accordion-item.active .accordion-content {
  max-height: 1000px;
  transition: max-height 0.6s ease-in;
}

.accordion-body {
  padding: 0 1.5rem 1.5rem;
  color: var(--text-soft);
  line-height: 1.8;
}

/* ==================== RESPONSIVE ==================== */
@media (max-width: 900px) {
  .hero {
    grid-template-columns: 1fr;
    padding: 3rem 1.5rem;
  }
  
/* removed-duplicate */
  
  .hero-visual-3d {
    height: 400px;
  }
  
  .postpartum-3d-container {
    height: 400px;
  }
  
  /* Make floating text smaller and adjust positions for mobile */
  .floating-care-text {
    font-size: 0.7rem;
    padding: 0.4rem 0.8rem;
  }
  
  .text-1 {
    top: 8%;
    left: 5%;
  }
  
  .text-2 {
    top: 20%;
    right: 3%;
  }
  
  .text-3 {
    top: 40%;
    left: 2%;
  }
  
  .text-4 {
    top: 58%;
    right: 5%;
  }
  
  .text-5 {
    bottom: 22%;
    left: 5%;
  }
  
  .text-6 {
    bottom: 8%;
    right: 8%;
  }
  
  .timeline-item {
    grid-template-columns: 1fr;
    text-align: center;
  }
  
  .timeline-line {
    left: 20px;
  }
  
  .timeline-dot {
    margin: 0 auto;
  }
  
  .card-grid {
    grid-template-columns: 1fr;
  }
  
/* removed-duplicate */
}

/* ==================== UTILITY CLASSES ==================== */
/* removed-duplicate */

.text-center {
  text-align: center;
}

.mb-4 {
  margin-bottom: 2rem;
}

.mt-4 {
  margin-top: 2rem;
}

/* ==================== PRINT STYLES ==================== */
@media print {
  .site-header,
  .floating-keywords,
  .hero-visual-3d,
  .btn-primary,
  .btn-nav {
    display: none;
  }
  
  .hero {
    background: white;
    min-height: auto;
  }
  
  .section {
    page-break-inside: avoid;
  }
}

/* ==================== REVOLUTIONARY VITAL SIGNS ==================== */
.vital-signs-revolutionary {
  margin: 4rem 0;
  position: relative;
}

.vitals-simulator-container {
  background: linear-gradient(135deg, #fff 0%, #f8f5ff 100%);
  border-radius: 32px;
  padding: 3rem;
  margin-top: 2rem;
  box-shadow: var(--shadow-strong);
  position: relative;
  overflow: hidden;
}

/* All the revolutionary CSS we added before... */
/* (keeping it brief for the script) */


/* ==================== VITAL SIGNS SECTION ==================== */
.vital-signs-section {
  margin: 4rem 0;
}

.vitals-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
}

.vital-card {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  box-shadow: var(--shadow);
  transition: all 0.3s ease;
}

.vital-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-strong);
}

.vital-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.vital-icon {
  width: 50px;
  height: 50px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
}

.vital-icon.temp {
  background: linear-gradient(135deg, #ff6b6b 0%, #ff8787 100%);
}

.vital-icon.heart {
  background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
}

.vital-icon.breath {
  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
}

.vital-card h4 {
  color: var(--text-main);
  font-size: 1.2rem;
  font-family: 'Manrope', sans-serif;
  font-weight: 600;
}

.vital-range {
  background: var(--lavender);
  padding: 1rem;
  border-radius: 12px;
  margin: 1rem 0;
}

.vital-range strong {
  color: var(--primary-dark);
  display: block;
  margin-bottom: 0.5rem;
}

.vital-notes {
  font-size: 0.95rem;
  color: var(--text-soft);
  line-height: 1.6;
}

/* ==================== DIALOG BOX ==================== */
.dialog-box {
  background: linear-gradient(135deg, #fff 0%, #f8f5ff 100%);
  border-radius: 20px;
  padding: 2rem;
  margin: 2rem 0;
  box-shadow: var(--shadow);
  border: 2px solid var(--primary-light);
  position: relative;
  overflow: hidden;
}

.dialog-box::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 6px;
  background: linear-gradient(90deg, var(--primary) 0%, var(--gentle-purple) 100%);
}

.dialog-box.warning {
  border-color: var(--warning);
}

.dialog-box.warning::before {
  background: var(--warning);
}

.dialog-icon {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, var(--primary) 0%, var(--gentle-purple) 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8rem;
  margin-bottom: 1rem;
  box-shadow: 0 4px 15px rgba(236, 64, 122, 0.3);
}

.dialog-box.warning .dialog-icon {
  background: linear-gradient(135deg, var(--warning) 0%, #ffb74d 100%);
}

.dialog-box h3 {
  color: var(--primary-dark);
  font-size: 1.8rem;
  margin-bottom: 1rem;
}

.dialog-content {
  color: var(--text-soft);
  font-size: 1.05rem;
  line-height: 1.8;
}

/* ==================== ACCORDION SECTIONS ==================== */
.accordion-section {
  margin: 4rem 0;
}

.accordion-item {
  background: white;
  border-radius: 16px;
  margin-bottom: 1rem;
  overflow: hidden;
  box-shadow: var(--shadow);
  transition: all 0.3s ease;
}

.accordion-item:hover {
  box-shadow: var(--shadow-strong);
}

.accordion-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem 2rem;
  cursor: pointer;
  background: white;
  transition: background 0.3s ease;
}

.accordion-header:hover {
  background: var(--lavender);
}

.accordion-title {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.accordion-icon {
  font-size: 1.8rem;
}

.accordion-title h3 {
  color: var(--text-main);
  font-size: 1.3rem;
  font-family: 'Manrope', sans-serif;
  font-weight: 600;
}

.accordion-toggle {
  font-size: 1.5rem;
  color: var(--primary);
  transition: transform 0.3s ease;
}

.accordion-item.active .accordion-toggle {
  transform: rotate(180deg);
}

.accordion-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.accordion-item.active .accordion-content {
  max-height: 2000px;
}

.accordion-body {
  padding: 0 2rem 2rem 2rem;
  color: var(--text-soft);
  line-height: 1.8;
}

.accordion-body ul {
  list-style: none;
  padding: 0;
}

.accordion-body li {
  padding: 0.5rem 0;
  padding-left: 2rem;
  position: relative;
}

.accordion-body li::before {
  content: "✓";
  position: absolute;
  left: 0;
  color: var(--success);
  font-weight: 700;
}

/* ==================== TIMELINE ==================== */
.timeline {
  position: relative;
  padding: 2rem 0;
}

.timeline::before {
  content: '';
  position: absolute;
  left: 30px;
  top: 0;
  bottom: 0;
  width: 4px;
  background: linear-gradient(180deg, var(--primary) 0%, var(--gentle-purple) 100%);
}

.timeline-item {
  position: relative;
  padding-left: 80px;
  margin-bottom: 3rem;
}

.timeline-marker {
  position: absolute;
  left: 0;
  top: 0;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary) 0%, var(--gentle-purple) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 1.2rem;
  box-shadow: 0 4px 15px rgba(236, 64, 122, 0.3);
  z-index: 2;
}

.timeline-content {
  background: white;
  padding: 2rem;
  border-radius: 16px;
  box-shadow: var(--shadow);
}

.timeline-content h4 {
  color: var(--primary-dark);
  font-size: 1.5rem;
  margin-bottom: 1rem;
  font-family: 'Manrope', sans-serif;
  font-weight: 600;
}

.timeline-checklist {
  list-style: none;
  padding: 0;
}

.timeline-checklist li {
  padding: 0.6rem 0;
  padding-left: 2rem;
  position: relative;
  color: var(--text-soft);
}

.timeline-checklist li::before {
  content: "☐";
  position: absolute;
  left: 0;
  color: var(--primary);
  font-size: 1.2rem;
}

/* ==================== BREASTFEEDING SECTION ==================== */
.breastfeeding-guide {
  margin: 4rem 0;
}

.guide-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
}

.guide-card {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  box-shadow: var(--shadow);
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.guide-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-strong);
}

.guide-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--primary) 0%, var(--gentle-purple) 100%);
}

.guide-card-icon {
  width: 70px;
  height: 70px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  margin-bottom: 1.5rem;
  background: linear-gradient(135deg, var(--primary-light) 0%, var(--lavender) 100%);
}

.guide-card h4 {
  color: var(--primary-dark);
  font-size: 1.4rem;
  margin-bottom: 1rem;
  font-family: 'Manrope', sans-serif;
  font-weight: 600;
}

.guide-card p {
  color: var(--text-soft);
  line-height: 1.7;
  margin-bottom: 1rem;
}

.solutions-list {
  background: var(--lavender);
  padding: 1rem;
  border-radius: 12px;
  margin-top: 1rem;
}

.solutions-list strong {
  color: var(--primary-dark);
  display: block;
  margin-bottom: 0.5rem;
}

.solutions-list ul {
  list-style: none;
  padding: 0;
}

.solutions-list li {
  padding: 0.4rem 0;
  padding-left: 1.5rem;
  position: relative;
  font-size: 0.95rem;
}

.solutions-list li::before {
  content: "→";
  position: absolute;
  left: 0;
  color: var(--primary);
}

/* ==================== SAFE SLEEP SECTION ==================== */
.safe-sleep-section {
  margin: 4rem 0;
}

.sleep-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 2rem;
  margin-top: 2rem;
}

.do-card, .dont-card {
  background: white;
  padding: 2rem;
  border-radius: 20px;
  box-shadow: var(--shadow);
}

.do-card {
  border-left: 6px solid var(--success);
}

.dont-card {
  border-left: 6px solid var(--critical);
}

.sleep-card-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.sleep-card-header h4 {
  font-size: 1.5rem;
  font-family: 'Manrope', sans-serif;
  font-weight: 600;
}

.do-card h4 {
  color: var(--success);
}

.dont-card h4 {
  color: var(--critical);
}

.sleep-list {
  list-style: none;
  padding: 0;
}

.sleep-list li {
  padding: 0.8rem 0;
  padding-left: 2rem;
  position: relative;
  border-bottom: 1px solid var(--border-soft);
}

.sleep-list li:last-child {
  border-bottom: none;
}

.do-card .sleep-list li::before {
  content: "✓";
  position: absolute;
  left: 0;
  color: var(--success);
  font-weight: 700;
  font-size: 1.2rem;
}

.dont-card .sleep-list li::before {
  content: "✗";
  position: absolute;
  left: 0;
  color: var(--critical);
  font-weight: 700;
  font-size: 1.2rem;
}

@media (max-width: 768px) {
  .sleep-grid {
    grid-template-columns: 1fr;
  }
}

/* ==================== IMMUNIZATION SECTION ==================== */
.immunization-section {
  margin: 4rem 0;
}

.vaccine-timeline {
  background: white;
  padding: 2.5rem;
  border-radius: 24px;
  box-shadow: var(--shadow);
  margin-top: 2rem;
}

.vaccine-stage {
  padding: 2rem;
  border-left: 4px solid var(--primary);
  margin-bottom: 2rem;
  background: var(--lavender);
  border-radius: 0 12px 12px 0;
}

.vaccine-stage h4 {
  color: var(--primary-dark);
  font-size: 1.4rem;
  margin-bottom: 1rem;
  font-family: 'Manrope', sans-serif;
  font-weight: 600;
}

.vaccine-list {
  list-style: none;
  padding: 0;
}

.vaccine-list li {
  padding: 0.6rem 0;
  padding-left: 2rem;
  position: relative;
  color: var(--text-soft);
}

.vaccine-list li::before {
  content: "💉";
  position: absolute;
  left: 0;
}

.vaccine-note {
  background: white;
  padding: 1rem;
  border-radius: 8px;
  margin-top: 1rem;
  font-size: 0.95rem;
  color: var(--text-soft);
  border-left: 3px solid var(--info);
}

/* ==================== DEVELOPMENTAL MILESTONES ==================== */
.milestones-section {
  margin: 4rem 0;
}

.milestone-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
}

.milestone-card {
  background: white;
  padding: 2rem;
  border-radius: 20px;
  box-shadow: var(--shadow);
  transition: all 0.3s ease;
}

.milestone-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-strong);
}

.milestone-age {
  display: inline-block;
  background: linear-gradient(135deg, var(--primary) 0%, var(--gentle-purple) 100%);
  color: white;
  padding: 0.5rem 1.5rem;
  border-radius: 50px;
  font-weight: 700;
  margin-bottom: 1.5rem;
}

.milestone-card h4 {
  color: var(--primary-dark);
  font-size: 1.3rem;
  margin-bottom: 1rem;
  font-family: 'Manrope', sans-serif;
  font-weight: 600;
}

.milestone-achievements {
  list-style: none;
  padding: 0;
}

.milestone-achievements li {
  padding: 0.7rem 0;
  padding-left: 2rem;
  position: relative;
  color: var(--text-soft);
  border-bottom: 1px solid var(--border-soft);
}

.milestone-achievements li:last-child {
  border-bottom: none;
}

.milestone-achievements li::before {
  content: "🌟";
  position: absolute;
  left: 0;
}


/* ==================== UPDATED HEADER STYLE ==================== */
.site-header {
  background: white;
  padding: 1.2rem 0;
  box-shadow: 0 2px 15px rgba(0,0,0,0.08);
  position: sticky;
  top: 0;
  z-index: 1000;
  border-bottom: 1px solid rgba(236, 64, 122, 0.1);
}

.nav-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  display: flex;
  align-items: center;
  gap: 0.8rem;
}

.logo-icon {
  width: 40px; height: 40px; border-radius: 12px;
  background: linear-gradient(135deg,#ec407a,#ad1457);
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 4px 14px rgba(236,64,122,0.35);
  flex-shrink: 0;
}

.logo a {
  text-decoration: none;
  color: var(--deep-pink);
  font-weight: 900;
  font-size: 1.8rem;
  font-family: 'Playfair Display', serif;
  background: linear-gradient(135deg, #ec407a 0%, #d81b60 50%, #ad1457 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: -0.5px;
}

.main-nav {
  display: flex;
  gap: 2.5rem;
  align-items: center;
}

.main-nav a {
  text-decoration: none;
  color: var(--text-main);
  font-weight: 600;
  font-size: 1rem;
  transition: color .3s;
  position: relative;
}

.main-nav a::after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 0;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--primary) 0%, var(--primary-dark) 100%);
  transition: width 0.3s ease;
}

.main-nav a:hover {
  color: var(--deep-pink);
}

.main-nav a:hover::after {
  width: 100%;
}

.header-actions {
  display: flex;
  gap: 1rem;
  align-items: center;
}

.btn-nav {
  padding: 0.7rem 1.8rem;
  border-radius: 50px;
  text-decoration: none;
  font-weight: 700;
  font-size: 0.95rem;
  transition: all .3s;
  border: none;
  cursor: pointer;
  display: inline-block;
}

.btn-nav.signin {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(236, 64, 122, 0.3);
}

.btn-nav.signin:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(236, 64, 122, 0.4);
}

.btn-nav.contact {
  background: white;
  color: var(--primary);
  border: 2px solid var(--primary);
}

.btn-nav.contact:hover {
  background: var(--lavender);
}

/* first hero-title-3d duplicate removed */

/* section-title-gradient removed – section-title-prominent handles this */

@media(max-width: 1060px) {
  .main-nav {
    display: none;
  }
  
  .logo a {
    font-size: 1.4rem;
  }
}


/* all duplicates cleared — canonical definitions are at top of stylesheet */

/* ==================== INTERACTIVE FEEDING TRACKER ==================== */
.ft-tabs { display:flex; gap:.5rem; flex-wrap:wrap; justify-content:center; margin-bottom:1.2rem; }
.ft-tab {
  padding:.5rem 1.1rem; border-radius:999px; border:2px solid #e8d5f0;
  background:white; color:var(--text-soft); font-weight:600; font-size:.82rem;
  cursor:pointer; transition:all .22s; font-family:inherit;
}
.ft-tab:hover { border-color:var(--primary); color:var(--primary); }
.ft-tab-active { background:var(--primary)!important; color:white!important; border-color:var(--primary)!important; }
.ft-panel { animation: ftFadeIn .3s ease; }
@keyframes ftFadeIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }

.ft-donut-row { display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:1rem; margin-bottom:1.2rem; }
.ft-donut-card {
  background:white; border-radius:18px; padding:1.2rem .8rem .8rem;
  display:flex; flex-direction:column; align-items:center; gap:.25rem;
  box-shadow:0 3px 14px rgba(0,0,0,.08); cursor:pointer;
  transition:transform .2s, box-shadow .2s; position:relative; overflow:hidden;
}
.ft-donut-card:hover { transform:translateY(-3px); box-shadow:0 8px 24px rgba(0,0,0,.13); }
.ft-donut-card:active { transform:scale(.96); }
.ft-donut-svg { width:90px; height:90px; }
.ft-donut-label { font-size:.85rem; font-weight:700; color:var(--text-soft); }
.ft-donut-sub { font-size:.68rem; color:#bbb; }
.ft-donut-status {
  position:absolute; top:.6rem; right:.6rem;
  width:10px; height:10px; border-radius:50%; background:#e0e0e0;
  transition:background .4s, box-shadow .4s;
}
.ft-status-ok { background:#66bb6a!important; box-shadow:0 0 6px #66bb6a; }
.ft-status-warn { background:#ffa726!important; box-shadow:0 0 6px #ffa726; }
.ft-status-alert { background:#ef5350!important; box-shadow:0 0 8px #ef5350; animation:ftPulseAlert 1s infinite; }
@keyframes ftPulseAlert { 0%,100%{opacity:1} 50%{opacity:.4} }

.ft-log-bar { display:flex; flex-wrap:wrap; gap:.5rem; background:white; border-radius:16px; padding:1rem; }
.ft-select {
  padding:.48rem .8rem; border-radius:999px; border:1.5px solid #e0d0e8;
  background:#faf5fb; font-size:.82rem; cursor:pointer; font-family:inherit;
}
.ft-input {
  width:100%; padding:.55rem .8rem; border:1.5px solid #e0d0e8; border-radius:10px;
  font-size:.9rem; font-family:inherit; outline:none; transition:border-color .2s;
}
.ft-input:focus { border-color:var(--primary); }
.ft-white-box { background:white; border-radius:18px; padding:1.5rem; box-shadow:0 3px 14px rgba(0,0,0,.07); }
.ft-legend-pill { padding:.2rem .6rem; border-radius:999px; font-weight:700; }

/* Timeline event row */
.ft-event-row {
  display:flex; align-items:center; gap:.8rem;
  padding:.6rem .9rem; border-radius:10px; font-size:.84rem; animation:ftFadeIn .25s ease;
}

/* Flip cards */
.ft-flip-card { perspective:800px; height:130px; cursor:pointer; }
.ft-flip-inner { position:relative; width:100%; height:100%; transform-style:preserve-3d; transition:transform .5s; }
.ft-flip-card:hover .ft-flip-inner, .ft-flip-card.flipped .ft-flip-inner { transform:rotateY(180deg); }
.ft-flip-front, .ft-flip-back {
  position:absolute; inset:0; border-radius:14px; padding:1rem;
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  text-align:center; backface-visibility:hidden; font-size:.82rem;
}
.ft-flip-front { background:linear-gradient(135deg,#f3e5f5,#ede7f6); }
.ft-flip-back { background:linear-gradient(135deg,var(--primary),var(--primary-dark)); color:white; transform:rotateY(180deg); }

/* Health status mini cards */
.ft-health-mini {
  border-radius:14px; padding:1rem; display:flex; flex-direction:column; gap:.35rem;
  border-left:5px solid transparent;
}
.ft-health-mini-ok { background:#e8f5e9; border-color:#66bb6a; }
.ft-health-mini-warn { background:#fff8e1; border-color:#ffa726; }
.ft-health-mini-alert { background:#ffebee; border-color:#ef5350; }

/* Day targets accordion */
.ft-day-row {
  border-radius:10px; overflow:hidden; margin-bottom:.5rem;
  border:1px solid #ede0f0; cursor:pointer;
}
.ft-day-hdr { display:flex; justify-content:space-between; align-items:center; padding:.7rem 1rem; font-weight:600; font-size:.85rem; background:#f9f5ff; }
.ft-day-body { padding:.8rem 1rem; font-size:.82rem; color:var(--text-soft); line-height:1.8; display:none; }

/* ==================== VITAL SIGNS INTERACTIVE ==================== */
.vs-state-btn {
  padding:.42rem .85rem; border:none; border-radius:999px;
  color:white; font-weight:600; font-size:.78rem; cursor:pointer;
  opacity:.65; transition:all .2s; font-family:inherit;
}
.vs-state-btn:hover { opacity:.85; transform:translateY(-1px); }
.vs-state-active { opacity:1!important; box-shadow:0 4px 14px rgba(0,0,0,.2); transform:translateY(-2px)!important; }

/* Info tiles below waveform */
.vs-info-tile {
  border-radius:12px; padding:.85rem .9rem; font-size:.8rem; line-height:1.6;
  border-left:4px solid transparent;
}
.vs-tile-ok { background:#e8f5e9; border-color:#66bb6a; }
.vs-tile-warn { background:#fff8e1; border-color:#ffa726; }
.vs-tile-alert { background:#ffebee; border-color:#ef5350; }
.vs-tile-info { background:#e3f2fd; border-color:#42a5f5; }

.vs-checker-lbl { font-size:.8rem; color:var(--text-soft); font-weight:600; display:block; margin-bottom:.35rem; }

/* Quiz */
.vs-quiz-option {
  display:block; width:100%; text-align:left; padding:.75rem 1rem; margin-bottom:.5rem;
  border:2px solid #e8d5f0; border-radius:10px; background:white; cursor:pointer;
  font-size:.88rem; font-family:inherit; font-weight:500; transition:all .2s;
}
.vs-quiz-option:hover { border-color:var(--primary); background:#faf5fb; }
.vs-quiz-correct { background:#e8f5e9!important; border-color:#66bb6a!important; color:#2e7d32!important; }
.vs-quiz-wrong { background:#ffebee!important; border-color:#ef5350!important; color:#c62828!important; }
/* ==================== END INTERACTIVE ADDITIONS ==================== */

/* ==================== MOBILE RESPONSIVENESS FIXES ==================== */
@media(max-width: 640px) {
  /* Page shell — reduce side padding */
  .page-shell { padding: 0 0.75rem; }

  /* Hero section internal breathing room */
  .hero { padding: 2rem 1rem 1.5rem; gap: 1.5rem; min-height: auto; }

  /* Emergency strip heading — wrap icon + text on tiny screens */
  .emergency-strip h2 { font-size: 1.2rem; gap: 0.5rem; flex-wrap: wrap; }
  .emergency-icon { font-size: 1.8rem; }

  /* Color scale (jaundice chart) — 5 columns overflow on mobile; allow wrapping */
  .color-scale { flex-wrap: wrap; justify-content: center; gap: 0.6rem; }
  .color-level { flex: 0 1 calc(50% - 0.4rem); padding: 1.2rem 0.6rem; }

  /* Vitals simulator container */
  .vitals-simulator-container { padding: 1.5rem; }

  /* Question builder — reduce heavy 2rem internal padding on small screens */
  .qb-visit-tabs  { padding: 0.8rem 0.75rem 0.4rem; }
  .qb-cat-grid    { padding: 1rem 0.75rem; }
  .qb-ctrl-row    { padding: 0.2rem 0.75rem 0.8rem; }
  .qb-search-wrap { padding: 0.2rem 0.75rem 0.8rem; }
  .qb-out         { margin: 0 0.75rem; }
  .qb-legend      { padding: 0.7rem 0.75rem 0.2rem; }
  .qb-actions     { padding: 1rem 0.75rem 1.5rem; }
  .qb-spec-wrap   { padding: 0.8rem 0.75rem 0; }
  .qb-header      { padding: 1rem 1rem; }

  /* ft-health-cards — JS renders this with hardcoded 1fr 1fr; override on mobile */
  #ft-health-cards { grid-template-columns: 1fr !important; }

  /* Responsive 2-column inline grids — apply class to any div needing to stack */
  .responsive-2col { grid-template-columns: 1fr !important; }

  /* Postpartum recovery section with inline padding */
  .postpartum-recovery-section { padding: 1.5rem !important; }

  /* Section subtitle — reduce padding on very small screens */
  .section-subtitle-prominent { padding: 1rem; font-size: 0.95rem; }

  /* Daily tip box */
  .daily-tip { flex-direction: column; gap: 0.6rem; padding: 1rem; }

  /* Hero CTA buttons — stack on very small screens */
  .hero-cta-row { flex-direction: column; }
  .btn-primary, .btn-secondary { width: 100%; text-align: center; }
}

@media(max-width: 480px) {
  /* Jaundice color scale — single column on very small screens */
  .color-level { flex: 0 1 100%; }

  /* Emergency grid — ensure single column */
  .emergency-grid { grid-template-columns: 1fr; }

  /* Font size tweaks for the largest headings */
  .emergency-strip h2 { font-size: 1.05rem; }
}
/* ==================== END MOBILE RESPONSIVENESS FIXES ==================== */



/* ══════════════════════════════════════════════════════════════════
   COMPREHENSIVE MOBILE RESPONSIVENESS — Full Page Audit
   All animations preserved. Zero existing code removed.
   Breakpoints: 900px · 768px · 700px · 640px · 560px · 480px
                420px · 400px · 380px · 360px · 320px
   ══════════════════════════════════════════════════════════════════ */

/* ── GLOBAL OVERFLOW GUARD ─────────────────────────────────────── */
html, body {
  overflow-x: hidden;
  max-width: 100%;
}
.page-shell {
  max-width: 100%;
  overflow-x: hidden;
}
.hero,
.feeding-tracker,
.vitals-simulator-container,
.qb-shell,
.emergency-strip,
.jaundice-chart,
.danger-checklist,
.vaccine-timeline,
.sepsis-calculator {
  overflow-x: hidden;
}

/* ── FLOATING CARE TEXT — allow wrapping, prevent bleed ─────────── */
.floating-care-text {
  white-space: normal;
  word-break: break-word;
  max-width: 42%;
}

/* ── HERO STATS — use clamp for stat numbers ─────────────────────── */
.stat-number {
  font-size: clamp(1.3rem, 4vw, 1.9rem);
}

/* ── ACCORDION TITLE — always allow wrapping ─────────────────────── */
.accordion-title h3,
.accordion-title {
  min-width: 0;
  word-break: break-word;
}
.accordion-header {
  gap: 0.75rem;
}

/* ── VS STATE BUTTONS — always wrap ─────────────────────────────── */
.vs-state-btn {
  white-space: normal;
  word-break: break-word;
  line-height: 1.3;
}

/* ── FT LOG BAR — always wraps ────────────────────────────────── */
.ft-log-bar {
  flex-wrap: wrap;
  gap: 0.5rem;
}

/* ── DIALOG BOX H3 — clamp so it never overflows ─────────────── */
.dialog-box h3 {
  font-size: clamp(1.2rem, 4vw, 1.8rem);
}
.modal-header h2 {
  font-size: clamp(1.2rem, 4vw, 2rem);
}


/* ══════════════════════════════════════════
   ≤ 900px  (tablets / large phones)
   ══════════════════════════════════════════ */
@media (max-width: 900px) {
  .page-shell { padding: 0 1rem; }

  /* Postpartum 3D container */
  .postpartum-3d-container,
  .hero-visual-3d {
    height: 380px;
  }

  /* Timeline container (alternating layout): collapse to single col */
  .timeline-container .timeline-item {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
  .timeline-container .timeline-line {
    display: none;
  }
  .timeline-container .timeline-content.empty {
    display: none;
  }
  .timeline-container .timeline-dot {
    margin: 0 auto;
  }

  /* Vaccine timeline padding */
  .vaccine-timeline { padding: 1.5rem; }

  /* Sepsis calculator */
  .sepsis-calculator { padding: 1.5rem; }

  /* Feeding tracker section */
  .feeding-tracker { padding: 1.5rem; }

  /* Jaundice chart */
  .jaundice-chart { padding: 1.5rem; }

  /* Emergency strip h2 */
  .emergency-strip h2 { font-size: 1.5rem; }
}


/* ══════════════════════════════════════════
   ≤ 768px  (tablets portrait)
   ══════════════════════════════════════════ */
@media (max-width: 768px) {
  /* Guide grid for breastfeeding */
  .guide-grid {
    grid-template-columns: 1fr;
  }

  /* Milestone cards */
  .milestone-cards {
    grid-template-columns: 1fr;
  }

  /* Vitals grid */
  .vitals-grid {
    grid-template-columns: 1fr;
  }

  /* Risk factors */
  .risk-factors {
    grid-template-columns: 1fr;
  }
}


/* ══════════════════════════════════════════
   ≤ 640px  (large phones)
   ══════════════════════════════════════════ */
@media (max-width: 640px) {
  /* Page shell */
  .page-shell { padding: 0 0.75rem; }

  /* Hero */
  .hero {
    padding: 2rem 1rem 1.5rem;
    gap: 1.5rem;
    min-height: auto;
    border-radius: 20px;
  }
  .hero-content {
    padding: 0 0.5rem 1.5rem !important;
  }

  /* 3D container */
  .postpartum-3d-container,
  .hero-visual-3d {
    height: 320px;
  }

  /* Floating care text smaller */
  .floating-care-text {
    font-size: 0.68rem;
    padding: 0.35rem 0.7rem;
    max-width: 38%;
  }

  /* Hero badge */
  .hero-badge {
    flex-wrap: wrap;
    justify-content: center;
    text-align: center;
    padding: 0.5rem 0.9rem;
  }
  .badge-text { font-size: 0.8rem; }

  /* Hero stats — keep 3 cols but shrink padding */
  .hero-stats { gap: 0.6rem; }
  .stat-item { padding: 0.8rem 0.5rem; }
  .stat-label { font-size: 0.78rem; }

  /* Hero CTA row */
  .hero-cta-row { flex-direction: column; gap: 0.75rem; }
  .btn-primary, .btn-secondary {
    width: 100%;
    text-align: center;
    padding: 0.85rem 1.5rem;
  }

  /* Daily tip */
  .daily-tip { flex-direction: column; gap: 0.6rem; padding: 1rem; }

  /* Emergency strip */
  .emergency-strip { padding: 1.2rem; }
  .emergency-strip h2 { font-size: 1.2rem; gap: 0.5rem; flex-wrap: wrap; }
  .emergency-icon { font-size: 1.8rem; }

  /* Section subtitle */
  .section-subtitle-prominent {
    max-width: 100%;
    padding: 1rem 1rem;
    font-size: 0.95rem;
    box-sizing: border-box;
  }

  /* Section header badge */
  .header-badge-prominent {
    padding: 0.6rem 1.2rem;
    font-size: 0.8rem;
  }

  /* Jaundice color scale */
  .color-scale { flex-wrap: wrap; justify-content: center; gap: 0.5rem; }
  .color-level { flex: 0 1 calc(50% - 0.4rem); padding: 1.2rem 0.6rem; }

  /* Danger checklist */
  .danger-checklist { padding: 1.5rem 1rem; }
  .danger-item { padding: 0.9rem; gap: 0.7rem; }
  .danger-content h4 { font-size: 0.95rem; }
  .danger-content p { font-size: 0.85rem; }

  /* Vitals simulator container */
  .vitals-simulator-container {
    padding: 1rem;
    border-radius: 20px;
  }

  /* Accordion */
  .accordion-header {
    padding: 1rem 1.2rem;
    align-items: flex-start;
  }
  .accordion-title h3 { font-size: 1.05rem; }
  .accordion-body { padding: 0 1.2rem 1.2rem; }

  /* Modal */
  .modal-content {
    padding: 1.5rem 1rem;
    max-height: 90vh;
    border-radius: 16px;
    width: 95%;
  }
  .modal-header { margin-bottom: 1.2rem; }

  /* Question builder */
  .qb-header      { padding: 1rem; }
  .qb-visit-tabs  { padding: 0.8rem 0.75rem 0.4rem; }
  .qb-cat-grid    { padding: 1rem 0.75rem; }
  .qb-ctrl-row    { padding: 0.2rem 0.75rem 0.8rem; }
  .qb-search-wrap { padding: 0.2rem 0.75rem 0.8rem; }
  .qb-out         { margin: 0 0.75rem; }
  .qb-legend      { padding: 0.7rem 0.75rem 0.2rem; }
  .qb-actions     { padding: 1rem 0.75rem 1.5rem; }
  .qb-spec-wrap   { padding: 0.8rem 0.75rem 0; }

  /* FT health cards — JS renders 1fr 1fr inline */
  #ft-health-cards { grid-template-columns: 1fr !important; }

  /* Inline 2-col grids  — .responsive-2col class */
  .responsive-2col { grid-template-columns: 1fr !important; }

  /* Postpartum recovery section inline padding */
  .postpartum-recovery-section { padding: 1.5rem !important; border-radius: 20px !important; }

  /* Feeding tracker */
  .feeding-tracker { padding: 1.2rem; border-radius: 20px; }
  .ft-log-bar { padding: 0.75rem; }

  /* Vaccine timeline */
  .vaccine-timeline { padding: 1.2rem; }
  .vaccine-stage { padding: 1.2rem; }

  /* Sepsis calculator */
  .sepsis-calculator { padding: 1.2rem; }

  /* Jaundice chart */
  .jaundice-chart { padding: 1.2rem; }

  /* Timeline (linear version) */
  .timeline-item { padding-left: 65px; }
  .timeline-marker { width: 48px; height: 48px; font-size: 1rem; }

  /* Card grid base */
  .card-grid { gap: 1rem; }

  /* Dialog box */
  .dialog-box { padding: 1.5rem 1rem; }

  /* Interactive cards */
  .interactive-card { padding: 1.5rem; }

  /* Guide cards */
  .guide-card { padding: 1.5rem; }

  /* Milestone cards */
  .milestone-card { padding: 1.5rem; }
}


/* ══════════════════════════════════════════
   ≤ 560px  (medium phones)
   ══════════════════════════════════════════ */
@media (max-width: 560px) {
  /* Inline 1fr 1fr grids (attribute selector catches hardcoded style) */
  [style*="grid-template-columns:1fr 1fr"],
  [style*="grid-template-columns: 1fr 1fr"] {
    grid-template-columns: 1fr !important;
  }

  /* Weight calculator inputs stack */
  #ft-panel-weight .ft-white-box [style*="display:flex;gap:.8rem"],
  #ft-panel-weight .ft-white-box [style*="display: flex; gap: .8rem"] {
    flex-direction: column !important;
    gap: 0.6rem !important;
  }
  #ft-panel-weight .ft-input { width: 100%; }

  /* VS checker grid inputs */
  #vs-panel-checker .ft-white-box [style*="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px"] {
    grid-template-columns: 1fr 1fr !important;
  }

  /* Emergency numbers grid (auto-fit minmax 200px) */
  [style*="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr))"] {
    grid-template-columns: 1fr 1fr !important;
  }
}


/* ══════════════════════════════════════════
   ≤ 480px  (small phones)
   ══════════════════════════════════════════ */
@media (max-width: 480px) {
  /* Hero 3D container */
  .postpartum-3d-container,
  .hero-visual-3d {
    height: 260px;
  }
  /* Hide most cluttered floating care labels */
  .floating-care-text.text-3,
  .floating-care-text.text-5 {
    display: none;
  }
  .floating-care-text {
    font-size: 0.6rem;
    padding: 0.28rem 0.55rem;
    max-width: 36%;
  }

  /* Hero stats — single column */
  .hero-stats { grid-template-columns: 1fr; gap: 0.5rem; }
  .stat-number { font-size: 1.6rem; }

  /* Section title */
  .section-title-prominent {
    font-size: clamp(1.6rem, 7vw, 2.2rem) !important;
  }

  /* Emergency grid — single column */
  .emergency-grid { grid-template-columns: 1fr; }
  .emergency-strip h2 { font-size: 1.05rem; }

  /* Jaundice color scale — single column */
  .color-level { flex: 0 1 100%; }

  /* FT donut row — 2 columns */
  .ft-donut-row { grid-template-columns: repeat(2, 1fr); }

  /* FT flip grid — 2 columns */
  #ft-flip-grid { grid-template-columns: repeat(2, 1fr) !important; }

  /* FT log bar buttons — 2-col grid */
  .ft-log-bar .add-feed-btn {
    flex: 1 1 calc(50% - 0.25rem);
    text-align: center;
    justify-content: center;
    font-size: 0.8rem !important;
    padding: 0.5rem 0.5rem !important;
  }
  .ft-log-bar .ft-select {
    flex: 1 1 calc(50% - 0.25rem);
  }

  /* Accordion */
  .accordion-header { padding: 0.9rem 0.9rem; }
  .accordion-title h3 { font-size: 0.95rem; }

  /* Modal header */
  .modal-header h2 { font-size: 1.2rem; }
  .close-modal { font-size: 1.5rem; }

  /* QB specialist grid */
  .qb-spec-grid { grid-template-columns: 1fr !important; }

  /* QB cat grid */
  .qb-cat-grid { grid-template-columns: repeat(3, 1fr); }

  /* Dialog box headings */
  .dialog-box h3 { font-size: 1.25rem; }

  /* Guide card icons */
  .guide-card-icon,
  .card-icon {
    width: 55px;
    height: 55px;
    font-size: 1.6rem;
  }

  /* Tracker numbers */
  .tracker-number { font-size: 2.2rem; }

  /* Sleep grid */
  .sleep-grid { grid-template-columns: 1fr; }

  /* Vitals info tiles */
  #vs-heart-info-row,
  #vs-breath-info-row {
    grid-template-columns: 1fr 1fr !important;
  }

  /* VS checker: 2-col on 480px */
  #vs-panel-checker [style*="grid-template-columns:repeat(auto-fit,minmax(160px"] {
    grid-template-columns: 1fr 1fr !important;
  }
}


/* ══════════════════════════════════════════
   ≤ 420px  (narrow phones)
   ══════════════════════════════════════════ */
@media (max-width: 420px) {
  /* Card grid fallback */
  .card-grid {
    grid-template-columns: 1fr !important;
  }

  /* FT donut row — single column */
  .ft-donut-row { grid-template-columns: 1fr; }

  /* Section subtitle */
  .section-subtitle-prominent { font-size: 0.9rem; padding: 0.9rem; }

  /* Interactive card */
  .interactive-card { padding: 1.2rem; }

  /* Vital card */
  .vital-card { padding: 1.2rem; }

  /* Accordion body */
  .accordion-body { padding: 0 0.9rem 0.9rem; }

  /* Tracker card */
  .tracker-card { padding: 1.1rem; }

  /* Emergency strip */
  .emergency-strip h2 { font-size: 1rem; gap: 0.4rem; }
  .emergency-icon { font-size: 1.5rem; }

  /* QB header title */
  .qb-header-title { font-size: 1rem; }

  /* VS state buttons — smaller */
  .vs-state-btn { font-size: 0.72rem; padding: 0.35rem 0.65rem; }
}


/* ══════════════════════════════════════════
   ≤ 400px  (very narrow phones)
   ══════════════════════════════════════════ */
@media (max-width: 400px) {
  /* FT flip grid — 2 cols */
  #ft-flip-grid { grid-template-columns: repeat(2, 1fr) !important; }

  /* Footer links */
  .footer-links { flex-direction: column; align-items: center; gap: 10px; }

  /* Hero badge */
  .hero-badge { padding: 0.4rem 0.7rem; }
  .badge-text { font-size: 0.74rem; }

  /* QB cat grid */
  .qb-cat-grid { grid-template-columns: repeat(3, 1fr) !important; padding: 0.8rem 0.5rem; }

  /* Accordion toggle icon */
  .accordion-toggle { font-size: 1.1rem; }

  /* Timeline marker (linear) */
  .timeline-item { padding-left: 55px; }
  .timeline-marker { width: 42px; height: 42px; font-size: 0.9rem; }
  .timeline::before { left: 20px; }
}


/* ══════════════════════════════════════════
   ≤ 380px  (extra small phones)
   ══════════════════════════════════════════ */
@media (max-width: 380px) {
  /* QB cat grid — 2 cols */
  .qb-cat-grid { grid-template-columns: repeat(2, 1fr) !important; }

  /* Floating care text — only show 2 */
  .floating-care-text.text-2,
  .floating-care-text.text-4,
  .floating-care-text.text-6 {
    display: none;
  }
  .floating-care-text {
    font-size: 0.56rem;
    padding: 0.22rem 0.5rem;
  }

  /* Page shell even tighter */
  .page-shell { padding: 0 0.5rem; }

  /* Postpartum recovery section */
  .postpartum-recovery-section { padding: 1rem !important; border-radius: 16px !important; }

  /* Hero */
  .hero { padding: 1.5rem 0.75rem 1.2rem; border-radius: 16px; }

  /* Section title */
  .section-title-prominent {
    font-size: clamp(1.45rem, 7.5vw, 2rem) !important;
    line-height: 1.15 !important;
  }

  /* Emergency strip */
  .emergency-strip h2 { font-size: 0.9rem; }
  .emergency-strip p  { font-size: 0.85rem; }

  /* Modal */
  .modal-content { padding: 1.2rem 0.75rem; width: 98%; }
}


/* ══════════════════════════════════════════
   ≤ 360px  (ultra small phones)
   ══════════════════════════════════════════ */
@media (max-width: 360px) {
  /* Jaundice color level — force single column */
  .color-level { flex: 0 1 100% !important; }

  /* Emergency strip */
  .emergency-strip h2 { font-size: 0.88rem; }
  .emergency-strip p  { font-size: 0.82rem; }
  .emergency-icon { font-size: 1.3rem; }

  /* FT donut row — single column at very small */
  .ft-donut-row { grid-template-columns: 1fr; }

  /* Hero stats */
  .hero-stats { gap: 0.4rem; }
  .stat-item { padding: 0.6rem 0.4rem; border-radius: 10px; }
  .stat-number { font-size: 1.4rem; }
  .stat-label { font-size: 0.72rem; }

  /* Section subtitle */
  .section-subtitle-prominent { font-size: 0.85rem; padding: 0.75rem; }

  /* QB cat grid */
  .qb-cat-grid { grid-template-columns: repeat(2, 1fr) !important; gap: 0.5rem; }

  /* Buttons */
  .btn-primary, .btn-secondary { font-size: 0.88rem; padding: 0.75rem 1.2rem; }

  /* Accordion */
  .accordion-header { padding: 0.8rem; }
  .accordion-title h3 { font-size: 0.88rem; }

  /* Timeline (linear) */
  .timeline-item { padding-left: 48px; }
  .timeline::before { left: 16px; width: 3px; }
  .timeline-marker { width: 36px; height: 36px; font-size: 0.8rem; }
  .timeline-content { padding: 1rem; }
  .timeline-content h4 { font-size: 1.1rem; }

  /* Interactive card */
  .interactive-card { padding: 1rem; border-radius: 16px; }

  /* Footer */
  .footer-main { padding: 32px 14px 28px; }
  .footer-meta { padding: 16px 14px; }
  .footer-bottom-inner { padding: 14px; }
}


/* ══════════════════════════════════════════
   ≤ 320px  (legacy small phones)
   ══════════════════════════════════════════ */
@media (max-width: 320px) {
  .page-shell { padding: 0 0.4rem; }
  .hero { padding: 1.2rem 0.5rem 1rem; }
  .hero-content { padding: 0 0.3rem 1rem !important; }

  /* Section title */
  .section-title-prominent {
    font-size: clamp(1.3rem, 8vw, 1.8rem) !important;
  }

  /* QB cat grid — 2 cols still */
  .qb-cat-grid { grid-template-columns: repeat(2, 1fr) !important; }
  .qb-ci { font-size: 1.4rem; }
  .qb-cl { font-size: 0.68rem; }

  /* Accordion */
  .accordion-title h3 { font-size: 0.82rem; }
  .accordion-body { font-size: 0.88rem; }

  /* Hide all floating care texts at 320px */
  .floating-care-text { display: none; }

  /* Emergency */
  .emergency-strip h2 { font-size: 0.82rem; }

  /* Vital card */
  .vital-card { padding: 1rem; }
  .vital-card h4 { font-size: 1rem; }

  /* Interactive card */
  .interactive-card h3 { font-size: 1.1rem; }
  .interactive-card p { font-size: 0.88rem; }

  /* Stat item */
  .stat-item { padding: 0.5rem 0.3rem; }
  .stat-number { font-size: 1.25rem; }
  .stat-label { font-size: 0.68rem; }

  /* Footer */
  .footer-links { gap: 8px; }
  .footer-links a { font-size: 0.76rem; }
}

/* ══════════════════════════════════════════
   ANIMATION PRESERVATION GUARD
   All keyframes and animation-bearing elements
   remain fully functional at every breakpoint.
   Canvas elements scale via width:100%.
   ══════════════════════════════════════════ */
#particleCanvas,
#motherBabyCanvas,
#vs-ecg-canvas,
#vs-breath-canvas {
  width: 100% !important;
  max-width: 100%;
}

/* Ensure animated elements don't cause overflow */
.gradient-morph,
.hero-constellation-bg {
  max-width: 100%;
  overflow: hidden;
}

/* Float animations: preserve, just scale movement on mobile */
@media (max-width: 480px) {
  @keyframes float-text-1 {
    0%, 100% { transform: translateY(0) translateX(0); opacity: 0.9; }
    50% { transform: translateY(-6px) translateX(3px); opacity: 1; }
  }
  @keyframes float-text-2 {
    0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.9; }
    50% { transform: translateY(-7px) translateX(-4px) rotate(1deg); opacity: 1; }
  }
  @keyframes float-text-4 {
    0%, 100% { transform: translateY(0) translateX(0); opacity: 0.9; }
    50% { transform: translateY(5px) translateX(-3px); opacity: 1; }
  }
  @keyframes float-text-6 {
    0%, 100% { transform: translateY(0) translateX(0); opacity: 0.85; }
    50% { transform: translateY(6px) translateX(3px); opacity: 1; }
  }
}

/* Reduce badge float on mobile to avoid overlap */
@media (max-width: 480px) {
  @keyframes badge-float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }
  @keyframes badge-float-prominent {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-4px); }
  }
}

/* ══════════════════════════════════════════
   TOUCH & INTERACTION IMPROVEMENTS
   ══════════════════════════════════════════ */
@media (max-width: 900px) {
  /* Increase tap targets to 44px minimum */
  .qb-vtab,
  .qb-ctrl,
  .ft-tab,
  .vs-state-btn,
  .add-feed-btn,
  .btn-primary,
  .btn-secondary,
  .btn-nav,
  .accordion-header {
    min-height: 44px;
  }

  /* Remove hover transforms on touch devices */
  .interactive-card:hover,
  .guide-card:hover,
  .milestone-card:hover,
  .vital-card:hover {
    transform: none;
  }

  /* Danger item hover */
  .danger-item:hover { transform: none; }

  /* Risk checkbox hover */
  .risk-checkbox:hover { transform: none; }
}

/* ══════════════════════════════════════════
   END COMPREHENSIVE MOBILE RESPONSIVENESS
   ══════════════════════════════════════════ */


</style>

<!-- ================================================ -->
<!-- HTML BODY SECTION -->
<!-- ================================================ -->
<body>
  <!-- HEADER -->
  <!-- Site Header — matches antenatal_care.html exactly -->
  <header class="site-header">
  <div class="nav-container">
    <!-- Logo: icon + Nari Swasthya -->
    <div class="logo">
      <div class="logo-icon">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="white">
          <circle cx="12" cy="5.5" r="2.8"/>
          <path d="M9.3 4.8 Q9.1 2.5 12 2.2 Q14.9 2.5 14.7 4.8" opacity="0.7"/>
          <path d="M9.5 13.2 Q9 10.5 10 9.3 Q11 8.6 12 8.6 Q13 8.6 14 9.3 Q15 10.5 14.5 13.2Z"/>
          <path d="M9.5 13.2 Q7.2 13.8 6.8 16.2 Q7.8 16.4 8.8 15Z" opacity="0.85"/>
          <path d="M14.5 13.2 Q16.8 13.8 17.2 16.2 Q16.2 16.4 15.2 15Z" opacity="0.85"/>
          <path d="M8.2 22 Q7.6 17.2 8.8 15 Q10.2 13 12 13 Q13.8 13 15.2 15 Q16.4 17.2 15.8 22Z"/>
        </svg>
      </div>
      <div class="logo-text">
        <a href="index.html">Nari Swasthya</a>
        <span>Women's Complete Health</span>
      </div>
    </div>

    <!-- Desktop Nav -->
    <nav class="main-nav">

      <!-- Home -->
      <div class="nav-item">
        <a href="index.html" class="nav-link">Home</a>
      </div>

      <!-- Journeys dropdown -->
      <div class="nav-item">
        <button class="nav-link" aria-haspopup="true">
          Journeys <i class="fa-solid fa-chevron-down chevron"></i>
        </button>
        <div class="nav-dropdown">
          <a href="journeys.html" class="dd-item" style="background:linear-gradient(135deg,rgba(236,64,122,0.08),rgba(173,20,87,0.04));border-radius:10px;margin-bottom:.3rem;">
            <div class="dd-icon" style="background:linear-gradient(135deg,#ec407a,#ad1457);color:white;box-shadow:0 4px 12px rgba(236,64,122,0.35);"><i class="fa-solid fa-map"></i></div>
            <div><strong style="display:block;font-size:.82rem;color:#d81b60;">View Full Journeys</strong><span style="font-size:.73rem;color:#555;">Browse all her journeys</span></div>
          </a>
          <div class="dd-sep"></div>
          <a href="conceiving.html" class="dd-item">
            <div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-seedling"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Conceiving</strong><span style="font-size:.73rem;color:#555;">Preparation &amp; planning</span></div>
          </a>
          <a href="fertility.html" class="dd-item">
            <div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-dna"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Fertility</strong><span style="font-size:.73rem;color:#555;">Cycle &amp; ovulation</span></div>
          </a>
          <!-- Pregnancy Journey with flyout sub-items -->
          <div class="dd-item dd-has-flyout">
            <div class="dd-icon" style="background:#fce4ec;color:#ec407a;"><i class="fa-solid fa-baby-carriage"></i></div>
            <a href="pregnancy_journey.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Pregnancy Journey</strong><span style="font-size:.73rem;color:#555;">Week by week guide</span></a>
            <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
            <div class="dd-flyout">
              <a href="normal_delivery.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-circle-check"></i></div><div><strong style="display:block;font-size:.82rem;">Normal Delivery</strong><span style="font-size:.73rem;color:#555;">Vaginal birth guide</span></div></a>
              <a href="csection.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-hospital"></i></div><div><strong style="display:block;font-size:.82rem;">C-Section</strong><span style="font-size:.73rem;color:#555;">Surgical birth info</span></div></a>
              <a href="pregnancy_loss.html" class="dd-item"><div class="dd-icon" style="background:#fafafa;color:#9e9e9e;"><i class="fa-solid fa-hands-holding-heart"></i></div><div><strong style="display:block;font-size:.82rem;">Pregnancy Loss</strong><span style="font-size:.73rem;color:#555;">Support &amp; care</span></div></a>
            </div>
          </div>
          <a href="antenatal_care.html" class="dd-item">
            <div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-clipboard-list"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Antenatal Care</strong><span style="font-size:.73rem;color:#555;">ANC visits &amp; checklist</span></div>
          </a>
          <!-- NCD with flyout sub-items -->
          <div class="dd-item dd-has-flyout">
            <div class="dd-icon" style="background:#e8eaf6;color:#283593;"><i class="fa-solid fa-heart-pulse"></i></div>
            <a href="ncd_pregnancy.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Non Communicable Diseases</strong><span style="font-size:.73rem;color:#555;">Diabetes, hypertension &amp; more</span></a>
            <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
            <div class="dd-flyout">
              <a href="gestational_diabetes.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-droplet"></i></div><div><strong style="display:block;font-size:.82rem;">Gestational Diabetes</strong><span style="font-size:.73rem;color:#555;">Manage blood sugar</span></div></a>
              <a href="preeclampsia_education.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-heart-circle-exclamation"></i></div><div><strong style="display:block;font-size:.82rem;">Preeclampsia</strong><span style="font-size:.73rem;color:#555;">Blood pressure care</span></div></a>
              <a href="cancer_simulation_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#6a1b9a;"><i class="fa-solid fa-ribbon"></i></div><div><strong style="display:block;font-size:.82rem;">Cancer</strong><span style="font-size:.73rem;color:#555;">Simulation journey</span></div></a>
            </div>
          </div>
          <a href="newborn_postpartum_care.html" class="dd-item">
            <div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-baby"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Newborn &amp; Postpartum</strong><span style="font-size:.73rem;color:#555;">4th trimester care</span></div>
          </a>
          <a href="breastfeeding-journey.html" class="dd-item">
            <div class="dd-icon" style="background:#fff8e1;color:#f57c00;"><i class="fa-solid fa-heart"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Breastfeeding</strong><span style="font-size:.73rem;color:#555;">Latch, supply, nutrition</span></div>
          </a>
          <a href="menopause.html" class="dd-item">
            <div class="dd-icon" style="background:#fce4ec;color:#ad1457;"><i class="fa-solid fa-fire-flame-curved"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Menopause</strong><span style="font-size:.73rem;color:#555;">Perimenopause &amp; beyond</span></div>
          </a>
        </div>
      </div>

      <!-- Services dropdown -->
      <div class="nav-item">
        <button class="nav-link" aria-haspopup="true">
          Services <i class="fa-solid fa-chevron-down chevron"></i>
        </button>
        <div class="nav-dropdown">
          <a href="services.html" class="dd-item" style="background:linear-gradient(135deg,rgba(236,64,122,0.08),rgba(173,20,87,0.04));border-radius:10px;margin-bottom:.3rem;">
            <div class="dd-icon" style="background:linear-gradient(135deg,#ec407a,#ad1457);color:white;box-shadow:0 4px 12px rgba(236,64,122,0.35);"><i class="fa-solid fa-grid-2"></i></div>
            <div><strong style="display:block;font-size:.82rem;color:#d81b60;">Services Available</strong><span style="font-size:.73rem;color:#555;">Browse all our services</span></div>
          </a>
          <div class="dd-sep"></div>
          <a href="symptom_checker.html" class="dd-item">
            <div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-stethoscope"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Symptom Checker</strong><span style="font-size:.73rem;color:#555;">AI-powered diagnosis</span></div>
          </a>
          <a href="dashboard.html" class="dd-item">
            <div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-gauge-high"></i></div>
            <div><strong style="display:block;font-size:.82rem;">My Dashboard</strong><span style="font-size:.73rem;color:#555;">Track your health</span></div>
          </a>
          <a href="screening.html" class="dd-item">
            <div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-magnifying-glass-plus"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Health Screening</strong><span style="font-size:.73rem;color:#555;">Cancer &amp; preventive</span></div>
          </a>
          <a href="vaccination.html" class="dd-item">
            <div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-syringe"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Vaccination</strong><span style="font-size:.73rem;color:#555;">Immunization schedule</span></div>
          </a>
          <a href="otc.html" class="dd-item">
            <div class="dd-icon" style="background:#e0f7fa;color:#006064;"><i class="fa-solid fa-pills"></i></div>
            <div><strong style="display:block;font-size:.82rem;">OTC Medicine Guide</strong><span style="font-size:.73rem;color:#555;">Safe self-care options</span></div>
          </a>
          <a href="government_schemes.html" class="dd-item">
            <div class="dd-icon" style="background:#fff8e1;color:#e65100;"><i class="fa-solid fa-landmark"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Govt Schemes</strong><span style="font-size:.73rem;color:#555;">Benefits you deserve</span></div>
          </a>
          <a href="insurance.html" class="dd-item">
            <div class="dd-icon" style="background:#e8f5e9;color:#1b5e20;"><i class="fa-solid fa-shield-halved"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Insurance</strong><span style="font-size:.73rem;color:#555;">Coverage &amp; claims guide</span></div>
          </a>
        </div>
      </div>

      <!-- Stories -->
      <div class="nav-item">
        <a href="stories.html" class="nav-link">Stories</a>
      </div>

      <!-- About Us -->
      <div class="nav-item">
        <a href="about.html" class="nav-link">About Us</a>
      </div>

      <!-- Additional Information dropdown -->
      <div class="nav-item">
        <button class="nav-link" aria-haspopup="true">
          Additional Info <i class="fa-solid fa-chevron-down chevron"></i>
        </button>
        <div class="nav-dropdown" style="min-width:240px;">
          <div style="padding:.4rem .9rem .2rem;font-size:.7rem;font-weight:700;color:#555;text-transform:uppercase;letter-spacing:.08em;">Health Topics</div>
          <a href="fertility.html" class="dd-item">
            <div class="dd-icon" style="background:#fce4ec;color:#ec407a;"><i class="fa-solid fa-seedling"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Fertility</strong><span style="font-size:.73rem;color:#555;">Cycle, conceiving &amp; IVF</span></div>
          </a>
          <a href="pregnancy_journey.html" class="dd-item">
            <div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-baby-carriage"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Pregnancy</strong><span style="font-size:.73rem;color:#555;">All trimesters covered</span></div>
          </a>
          <a href="newborn_postpartum_care.html" class="dd-item">
            <div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-baby"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Motherhood</strong><span style="font-size:.73rem;color:#555;">Newborn &amp; postpartum</span></div>
          </a>
          <a href="menopause.html" class="dd-item">
            <div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-spa"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Wellness</strong><span style="font-size:.73rem;color:#555;">Menopause, bone, mental</span></div>
          </a>
          <div class="dd-sep"></div>
          <a href="community.html" class="dd-item">
            <div class="dd-icon" style="background:#ede7f6;color:#4527a0;"><i class="fa-solid fa-users"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Community</strong><span style="font-size:.73rem;color:#555;">Share &amp; connect</span></div>
          </a>
          <div class="dd-sep"></div>
          <div style="padding:.4rem .9rem .2rem;font-size:.7rem;font-weight:700;color:#555;text-transform:uppercase;letter-spacing:.08em;">Specialised Care</div>
          <!-- NCD with flyout sub-items -->
          <div class="dd-item dd-has-flyout">
            <div class="dd-icon" style="background:#e8eaf6;color:#283593;"><i class="fa-solid fa-heart-pulse"></i></div>
            <a href="ncd_pregnancy.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Non Communicable Diseases</strong><span style="font-size:.73rem;color:#555;">Diabetes, hypertension &amp; more</span></a>
            <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
            <div class="dd-flyout">
              <a href="gestational_diabetes.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-droplet"></i></div><div><strong style="display:block;font-size:.82rem;">Gestational Diabetes</strong><span style="font-size:.73rem;color:#555;">Manage blood sugar</span></div></a>
              <a href="preeclampsia_education.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-heart-circle-exclamation"></i></div><div><strong style="display:block;font-size:.82rem;">Preeclampsia</strong><span style="font-size:.73rem;color:#555;">Blood pressure care</span></div></a>
              <a href="cancer_simulation_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#6a1b9a;"><i class="fa-solid fa-ribbon"></i></div><div><strong style="display:block;font-size:.82rem;">Cancer</strong><span style="font-size:.73rem;color:#555;">Simulation journey</span></div></a>
            </div>
          </div>
          <a href="bone_health.html" class="dd-item">
            <div class="dd-icon" style="background:#fce4ec;color:#ad1457;"><i class="fa-solid fa-bone"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Bone Health</strong><span style="font-size:.73rem;color:#555;">Osteoporosis prevention</span></div>
          </a>
          <a href="depression.html" class="dd-item">
            <div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-brain"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Mental Health</strong><span style="font-size:.73rem;color:#555;">Anxiety, depression, support</span></div>
          </a>
          <a href="loss_support.html" class="dd-item">
            <div class="dd-icon" style="background:#fafafa;color:#9e9e9e;"><i class="fa-solid fa-hands-holding-heart"></i></div>
            <div><strong style="display:block;font-size:.82rem;">Loss Support</strong><span style="font-size:.73rem;color:#555;">You are never alone</span></div>
          </a>
        </div>
      </div>

    </nav>

    <!-- Right: Sign In + Contact Us -->
    <div class="nav-actions">
      <a class="btn-nav primary" href="signin.html">
        <i class="fa-regular fa-user"></i> Sign In
      </a>
      <a class="btn-nav outline" href="contact.html">
        <i class="fa-solid fa-envelope"></i> Contact Us
      </a>
      <!-- Mobile hamburger -->
      <button class="hamburger" id="hamburgerBtn" aria-label="Menu" onclick="toggleMobile()">
        <span id="hb1"></span><span id="hb2"></span><span id="hb3"></span>
      </button>
    </div>
  </div>
</header>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu">
  <div class="mm-section">Navigation</div>
  <a href="index.html" class="mm-link"><i class="fa-solid fa-house" style="color:#d81b60;width:20px;"></i> Home</a>
  <div class="mm-section">Journeys</div>
  <a href="conceiving.html" class="mm-link"><i class="fa-solid fa-seedling" style="color:#d81b60;width:20px;"></i> Conceiving</a>
  <a href="fertility.html" class="mm-link"><i class="fa-solid fa-dna" style="color:#d81b60;width:20px;"></i> Fertility</a>
  <a href="pregnancy_journey.html" class="mm-link"><i class="fa-solid fa-baby-carriage" style="color:#d81b60;width:20px;"></i> Pregnancy Journey</a>
  <a href="normal_delivery.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#ec407a;width:20px;"></i> Normal Delivery</a>
  <a href="csection.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#ec407a;width:20px;"></i> C-Section</a>
  <a href="pregnancy_loss.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#9e9e9e;width:20px;"></i> Pregnancy Loss</a>
  <a href="antenatal_care.html" class="mm-link"><i class="fa-solid fa-clipboard-list" style="color:#d81b60;width:20px;"></i> Antenatal Care</a>
  <a href="newborn_postpartum_care.html" class="mm-link"><i class="fa-solid fa-baby" style="color:#d81b60;width:20px;"></i> Newborn &amp; Postpartum</a>
  <a href="breastfeeding-journey.html" class="mm-link"><i class="fa-solid fa-heart" style="color:#d81b60;width:20px;"></i> Breastfeeding</a>
  <a href="menopause.html" class="mm-link"><i class="fa-solid fa-fire-flame-curved" style="color:#d81b60;width:20px;"></i> Menopause</a>
  <div class="mm-section">Services</div>
  <a href="symptom_checker.html" class="mm-link"><i class="fa-solid fa-stethoscope" style="color:#d81b60;width:20px;"></i> Symptom Checker</a>
  <a href="dashboard.html" class="mm-link"><i class="fa-solid fa-gauge-high" style="color:#d81b60;width:20px;"></i> My Dashboard</a>
  <a href="screening.html" class="mm-link"><i class="fa-solid fa-magnifying-glass-plus" style="color:#d81b60;width:20px;"></i> Health Screening</a>
  <a href="government_schemes.html" class="mm-link"><i class="fa-solid fa-landmark" style="color:#d81b60;width:20px;"></i> Govt Schemes</a>
  <a href="insurance.html" class="mm-link"><i class="fa-solid fa-shield-halved" style="color:#1b5e20;width:20px;"></i> Insurance</a>
  <div class="mm-section">Specialised Care</div>
  <a href="bone_health.html" class="mm-link"><i class="fa-solid fa-bone" style="color:#ad1457;width:20px;"></i> Bone Health</a>
  <a href="depression.html" class="mm-link"><i class="fa-solid fa-brain" style="color:#f57f17;width:20px;"></i> Mental Health</a>
  <a href="loss_support.html" class="mm-link"><i class="fa-solid fa-hands-holding-heart" style="color:#9e9e9e;width:20px;"></i> Loss Support</a>
  <a href="ncd_pregnancy.html" class="mm-link"><i class="fa-solid fa-heart-pulse" style="color:#283593;width:20px;"></i> Non Communicable Diseases</a>
  <a href="gestational_diabetes.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#283593;width:20px;"></i> Gestational Diabetes</a>
  <a href="preeclampsia_education.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#283593;width:20px;"></i> Preeclampsia</a>
  <div class="mm-section">More</div>
  <a href="stories.html" class="mm-link"><i class="fa-solid fa-book-open" style="color:#d81b60;width:20px;"></i> Stories</a>
  <a href="community.html" class="mm-link"><i class="fa-solid fa-users" style="color:#d81b60;width:20px;"></i> Community</a>
  <a href="about.html" class="mm-link"><i class="fa-solid fa-circle-info" style="color:#d81b60;width:20px;"></i> About Us</a>
  <div style="display:flex;gap:.75rem;margin-top:1rem;padding:.5rem;">
    <a href="signin.html" class="btn-nav primary mm-action-btn" style="flex:1;justify-content:center;"><i class="fa-regular fa-user"></i> Sign In</a>
    <a href="contact.html" class="btn-nav outline mm-action-btn" style="flex:1;justify-content:center;"><i class="fa-solid fa-envelope"></i> Contact Us</a>
  </div>
</div>

  <div class="page-shell">
    <!-- HERO SECTION -->
    <section class="hero">
      <!-- Particle Background -->
      <div class="hero-constellation-bg">
        <canvas id="particleCanvas"></canvas>
        <div class="gradient-morph"></div>
      </div>

      <!-- Hero Content -->
      <div class="hero-content">
        <div class="hero-badge">
          <span class="badge-icon">👩‍🍼</span>
          <span class="badge-text">Your Complete Postpartum &amp; Newborn Care Guide</span>
        </div>

        <h1 class="hero-title-3d">
          Your <span class="title-emphasis">Newborn &amp; Postpatrum </span> Care Journey
        </h1>

        <p class="hero-subtitle">
          Evidence-based medical guidance for the critical fourth trimester.
          Protect your baby, support your recovery, and know exactly
          <strong>when to seek help</strong>.
        </p>

        <div class="hero-stats">
          <div class="stat-item">
            <span class="stat-number">4th</span>
            <span class="stat-label">Trimester Care</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">120+</span>
            <span class="stat-label">Critical Factors</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">24/7</span>
            <span class="stat-label">Emergency Guide</span>
          </div>
        </div>

        <div class="hero-cta-row">
          <button class="btn-primary" type="button" onclick="document.getElementById('emergency').scrollIntoView({behavior:'smooth'})">View Emergency Signs</button>
          <button class="btn-secondary" type="button" onclick="document.getElementById('questions').scrollIntoView({behavior:'smooth'})">Build Doctor Questions</button>
        </div>

        <div class="daily-tip">
          <div class="tip-icon">💡</div>
          <p>In the first 72 hours, watch for <strong>3 feeding cues</strong>: rooting, hand-to-mouth, and lip smacking. Early response prevents excessive hunger and crying.</p>
        </div>
      </div>

      <!-- 3D Visualization with Floating Text -->
      <div class="hero-visual-3d">
        <div class="postpartum-3d-container" aria-label="Postpartum care navigation">
          <canvas id="motherBabyCanvas"></canvas>
          
          <!-- Floating contextual text elements -->
          <div class="floating-care-text text-1">Golden Hour Bonding</div>
          <div class="floating-care-text text-2">Breastfeeding Journey</div>
          <div class="floating-care-text text-3">Recovery Timeline</div>
          <div class="floating-care-text text-4">Watch for Danger Signs</div>
          <div class="floating-care-text text-5">Newborn Care Essentials</div>
          <div class="floating-care-text text-6">Infection Prevention</div>
        </div>
      </div>
    </section>

    <!-- EMERGENCY ALERT STRIP -->
    <section class="emergency-strip" id="emergency">
      <h2>
        <span class="emergency-icon">🚨</span>
        CRITICAL: When to Seek Immediate Medical Help
      </h2>
      <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">
        Call emergency services (108/102) or rush to hospital immediately if you or your baby show ANY of these signs:
      </p>
      
      <div class="emergency-grid">
        <div class="emergency-card">
          <h4>🌡️ Temperature Issues</h4>
          <p>Baby: Fever >38°C (100.4°F) or <35.5°C (96°F)<br>
          Mother: Fever >38°C with chills</p>
        </div>
        
        <div class="emergency-card">
          <h4>🫁 Breathing Problems</h4>
          <p>Rapid breathing >60/min, severe chest in-drawing, blue lips/fingertips, gasping for air</p>
        </div>
        
        <div class="emergency-card">
          <h4>🍼 Feeding Inability</h4>
          <p>Baby refuses all feeds, vomits everything, no wet diapers for 8+ hours</p>
        </div>
        
        <div class="emergency-card">
          <h4>🧠 Neurological Signs</h4>
          <p>Seizures, extreme lethargy, high-pitched crying, bulging fontanelle (soft spot)</p>
        </div>
        
        <div class="emergency-card">
          <h4>🩸 Bleeding Issues</h4>
          <p>Mother: Soaking a pad in <1 hour, blood clots larger than a lemon</p>
        </div>
        
        <div class="emergency-card">
          <h4>💛 Severe Jaundice</h4>
          <p>Yellow skin in first 24 hours, yellow palms/soles, baby very sleepy and difficult to wake</p>
        </div>
        
        <div class="emergency-card">
          <h4>🔴 Infection Signs</h4>
          <p>Red, swollen, hot umbilical area, foul discharge, severe abdominal pain</p>
        </div>
        
        <div class="emergency-card">
          <h4>🧠 Maternal Danger</h4>
          <p>Severe headache with vision changes, leg swelling with pain, chest pain, difficulty breathing</p>
        </div>
      </div>
      
      <div style="margin-top: 2rem; text-align: center; font-size: 1.2rem; font-weight: 700;">
        ⚠️ DO NOT WAIT. DO NOT GOOGLE. GO TO HOSPITAL IMMEDIATELY. ⚠️
      </div>
    </section>

    <!-- NEONATAL SEPSIS SECTION -->
    <section class="section" id="sepsis">
      <div class="section-header">
        <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">Critical Information</span>
        </div>
        <h2 class="section-title-prominent">
          Understanding <span class="title-highlight">Neonatal Sepsis</span>
        </h2>
        <p class="section-subtitle-prominent">
          Learn to recognize the signs and understand risk factors for this serious infection. 
          <strong>Early detection saves lives</strong> — knowing these warning signs could protect your baby from life-threatening complications.
        </p>
      </div>

      <div class="card-grid">
        <div class="interactive-card">
          <div class="card-icon">🦠</div>
          <h3>What is Neonatal Sepsis?</h3>
          <p>
            Neonatal sepsis is a severe bacterial infection in newborns' bloodstream. 
            <strong>Early-onset sepsis</strong> occurs in the first 72 hours (usually within 24 hours). 
            <strong>Late-onset sepsis</strong> occurs after 1 week up to 28 days.
          </p>
          <button class="btn-primary" onclick="openModal('sepsisInfo')">Learn More</button>
        </div>

        <div class="interactive-card">
          <div class="card-icon">⚠️</div>
          <h3>Risk Factors</h3>
          <p>
            Maternal fever during labor, prolonged rupture of membranes (>18 hours), 
            prematurity, Group B Strep without antibiotics, and foul-smelling amniotic fluid 
            significantly increase sepsis risk.
          </p>
          <button class="btn-primary" onclick="showRiskCalculator()">Calculate Risk</button>
        </div>

        <div class="interactive-card">
          <div class="card-icon">🔍</div>
          <h3>Warning Signs</h3>
          <p>
            Temperature instability, poor feeding, lethargy, rapid breathing, mottled skin, 
            jaundice in first 24 hours, and inconsolable crying are critical warning signs 
            requiring immediate medical evaluation.
          </p>
          <button class="btn-primary" onclick="openModal('warningChecker')">Check Symptoms</button>
        </div>
      </div>

      <!-- Sepsis Risk Calculator -->
      <div class="sepsis-calculator" id="riskCalculator" style="display: none;">
        <h3 style="text-align: center; color: var(--primary); margin-bottom: 2rem; font-size: 2rem;">
          Sepsis Risk Assessment Tool
        </h3>
        <p style="text-align: center; color: var(--text-soft); margin-bottom: 2rem;">
          Check all that apply to assess your baby's risk level:
        </p>

        <div class="risk-factors">
          <label class="risk-checkbox">
            <input type="checkbox" data-risk="maternal-fever">
            <span>Maternal fever >38°C during labor</span>
          </label>
          
          <label class="risk-checkbox">
            <input type="checkbox" data-risk="prolonged-rupture">
            <span>Water broke >18 hours before birth</span>
          </label>
          
          <label class="risk-checkbox">
            <input type="checkbox" data-risk="preterm">
            <span>Baby born before 37 weeks</span>
          </label>
          
          <label class="risk-checkbox">
            <input type="checkbox" data-risk="gbs">
            <span>Positive GBS without antibiotics</span>
          </label>
          
          <label class="risk-checkbox">
            <input type="checkbox" data-risk="chorioamnionitis">
            <span>Diagnosed chorioamnionitis</span>
          </label>
          
          <label class="risk-checkbox">
            <input type="checkbox" data-risk="low-birthweight">
            <span>Birth weight <2500g (5.5 lbs)</span>
          </label>
        </div>

        <div style="text-align: center; margin-top: 2rem;">
          <button class="btn-primary" onclick="calculateSepsisRisk()">Calculate Risk Level</button>
        </div>

        <div class="risk-result" id="riskResult">
          <div class="risk-level" id="riskLevel">LOW</div>
          <h3 id="riskTitle">Low Risk</h3>
          <p id="riskAdvice" style="color: var(--text-soft); line-height: 1.8; margin-top: 1rem;"></p>
        </div>
      </div>
    </section>

    <!-- DANGER SIGNS CHECKLIST -->
    <section class="section">
      <div class="section-header">
        <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">Essential Knowledge</span>
        </div>
        <h2 class="section-title-prominent">
          Danger Signs Requiring <span class="title-highlight">Immediate Medical Attention</span>
        </h2>
        <p class="section-subtitle-prominent">
          Know these signs by heart. Share with all family members. 
          <strong>Quick recognition and action</strong> can prevent serious complications and save lives.
        </p>
      </div>

      <div class="danger-checklist">
        <div class="danger-item" onclick="openModal('breathingDetail')">
          <div class="danger-icon">🫁</div>
          <div class="danger-content">
            <h4>Difficulty Breathing</h4>
            <p>Fast breathing (>60 breaths/min), severe chest in-drawing, grunting sounds, flaring nostrils</p>
          </div>
        </div>

        <div class="danger-item" onclick="openModal('feedingDetail')">
          <div class="danger-icon">🍼</div>
          <div class="danger-content">
            <h4>Unable to Feed</h4>
            <p>Refuses all feeding attempts, vomits everything, weak or absent sucking</p>
          </div>
        </div>

        <div class="danger-item" onclick="openModal('seizureDetail')">
          <div class="danger-icon">🧠</div>
          <div class="danger-content">
            <h4>Seizures or Convulsions</h4>
            <p>Any abnormal jerking movements, stiffening of body, eye rolling, loss of consciousness</p>
          </div>
        </div>

        <div class="danger-item" onclick="openModal('temperatureDetail')">
          <div class="danger-icon">🌡️</div>
          <div class="danger-content">
            <h4>Temperature Instability</h4>
            <p>Fever >38°C (100.4°F) OR hypothermia <35.5°C (96°F) - both are emergencies</p>
          </div>
        </div>

        <div class="danger-item" onclick="openModal('lethargicDetail')">
          <div class="danger-icon">😴</div>
          <div class="danger-content">
            <h4>Extreme Lethargy</h4>
            <p>Baby very difficult to wake, no spontaneous movement, floppy or limp</p>
          </div>
        </div>

        <div class="danger-item" onclick="openModal('umbilicalDetail')">
          <div class="danger-icon">🔴</div>
          <div class="danger-content">
            <h4>Umbilical Infection</h4>
            <p>Redness extending beyond cord area, pus or foul discharge, swelling around navel</p>
          </div>
        </div>

        <div class="danger-item" onclick="openModal('jaundiceDetail')">
          <div class="danger-icon">💛</div>
          <div class="danger-content">
            <h4>Severe Jaundice</h4>
            <p>Yellow skin in first 24 hours, yellowing of palms/soles, very sleepy baby</p>
          </div>
        </div>

        <div class="danger-item" onclick="openModal('dehydrationDetail')">
          <div class="danger-icon">💧</div>
          <div class="danger-content">
            <h4>Signs of Dehydration</h4>
            <p>No wet diaper for 8+ hours, dry mouth, sunken fontanelle (soft spot), no tears when crying</p>
          </div>
        </div>
      </div>

      <div style="background: linear-gradient(135deg, var(--critical), #d32f2f); color: white; padding: 2rem; border-radius: 16px; margin-top: 2rem; text-align: center;">
        <h3 style="font-size: 1.8rem; margin-bottom: 1rem;">📞 Emergency Numbers to Keep Handy</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
          <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 12px;">
            <div style="font-size: 2rem; font-weight: 900;">108</div>
            <div>National Ambulance</div>
          </div>
          <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 12px;">
            <div style="font-size: 2rem; font-weight: 900;">102</div>
            <div>State Ambulance</div>
          </div>
          <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 12px;">
            <div style="font-size: 2rem; font-weight: 900;">Your Hospital</div>
            <input type="tel" placeholder="Enter number" style="width: 100%; margin-top: 0.5rem; padding: 0.5rem; border-radius: 8px; border: none;">
          </div>
          <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 12px;">
            <div style="font-size: 2rem; font-weight: 900;">Pediatrician</div>
            <input type="tel" placeholder="Enter number" style="width: 100%; margin-top: 0.5rem; padding: 0.5rem; border-radius: 8px; border: none;">
          </div>
        </div>
      </div>
    </section>

    <!-- COMPREHENSIVE NEWBORN CARE -->
    <section class="section" id="newborn">
      <div class="section-header">
        <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">First 28 Days</span>
        </div>
        <h2 class="section-title-prominent">
          Comprehensive <span class="title-highlight">Newborn Care</span>
        </h2>
        <p class="section-subtitle-prominent">
          Essential care practices for healthy newborn development during the critical first month. 
          <strong>Evidence-based guidance</strong> from WHO, AAP, and leading medical authorities worldwide.
        </p>
      </div>

      <!-- Accordion for detailed information -->
      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span class="accordion-title">🛁 Immediate Postpartum Care (First Hour)</span>
          <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h4>Thermal Care</h4>
            <p>Immediately dry your baby thoroughly with a warm towel. Start skin-to-skin contact immediately - place baby directly on your bare chest. Delay the first bath for at least 24 hours to prevent hypothermia and protect beneficial bacteria.</p>
            
            <h4>Delayed Cord Clamping</h4>
            <p>Ensure cord is clamped 1-3 minutes after birth (unless emergency). This allows transfer of essential blood and nutrients from placenta to baby.</p>
            
            <h4>Early Breastfeeding</h4>
            <p>Initiate breastfeeding within the first hour. Even if milk hasn't "come in," colostrum (first milk) is liquid gold - packed with antibodies and perfect nutrition.</p>
            
            <h4>Essential Medications</h4>
            <ul>
              <li>Vitamin K injection (prevents bleeding disorders)</li>
              <li>Eye ointment (prevents infection)</li>
              <li>Hepatitis B vaccine (if mother is HBsAg positive, within 12 hours)</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span class="accordion-title">🧼 Infection Prevention & Hygiene</span>
          <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h4>Hand Hygiene Protocol</h4>
            <p><strong>THE SINGLE MOST IMPORTANT THING:</strong> Wash hands with soap and water for 20 seconds before touching baby. This prevents 50-80% of infections.</p>
            
            <h4>When to Wash Hands:</h4>
            <ul>
              <li>Before handling baby</li>
              <li>Before and after diaper changes</li>
              <li>Before preparing bottles or pumping</li>
              <li>After using bathroom</li>
              <li>After coughing/sneezing</li>
              <li>After handling pets</li>
            </ul>
            
            <h4>Umbilical Cord Care</h4>
            <p>Keep cord stump clean and dry. Fold diaper below cord. Apply chlorhexidine solution daily (especially if home birth in rural area). Watch for redness, pus, or foul smell - these require immediate medical attention. Cord typically falls off in 1-2 weeks.</p>
            
            <h4>Visitor Management</h4>
            <ul>
              <li>Limit visitors in first 2 weeks</li>
              <li>All visitors must wash hands before holding baby</li>
              <li>No visits from anyone with cough, cold, fever, or rashes</li>
              <li>No kissing baby's face or hands (can transmit infections)</li>
              <li>Keep visits short — extended visits disrupt maternal rest and recovery</li>
              <li>Ensure all household members have updated vaccinations (pertussis, flu)</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span class="accordion-title">🤱 Breastfeeding Excellence</span>
          <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h4>Why Breastfeeding Matters</h4>
            <p>Breast milk contains living antibodies, immune cells, and protective factors that formula cannot replicate. Breastfed babies have lower rates of ear infections, diarrhea, pneumonia, SIDS, diabetes, obesity, and childhood leukemia.</p>
            
            <h4>Establishing Successful Breastfeeding</h4>
            <ul>
              <li><strong>Frequency:</strong> 8-12 times per 24 hours in early weeks</li>
              <li><strong>On Demand:</strong> Feed when baby shows hunger cues (rooting, sucking hands)</li>
              <li><strong>Both Breasts:</strong> Offer both breasts each feeding</li>
              <li><strong>Duration:</strong> Let baby finish first breast before offering second</li>
              <li><strong>Proper Latch:</strong> Baby's mouth wide open, covering most of areola, not just nipple</li>
            </ul>
            
            <h4>Signs of Adequate Milk Intake</h4>
            <ul>
              <li>6-8 wet diapers per day by day 5</li>
              <li>3-4 yellow, seedy stools per day initially</li>
              <li>Baby gaining weight (back to birth weight by 2 weeks)</li>
              <li>Swallowing sounds during feeding</li>
              <li>Breasts feel softer after feeding</li>
            </ul>
            
            <h4>Common Problems & Solutions</h4>
            <p><strong>Sore Nipples:</strong> Usually means poor latch. Get help from lactation consultant.</p>
            <p><strong>Engorgement:</strong> Feed frequently, apply warm compress before feeding, cold compress after. Hand express if needed.</p>
            <p><strong>Low Supply Concerns:</strong> Most mothers have adequate supply. Frequent feeding increases supply. Avoid pacifiers and bottles in first month.</p>
            
            <div style="background: rgba(236, 64, 122, 0.1); padding: 1.5rem; border-radius: 12px; margin-top: 1.5rem;">
              <h4 style="color: var(--primary);">When to Seek Lactation Help</h4>
              <ul>
                <li>Painful feeding despite adjusting latch</li>
                <li>Baby losing >7-10% birth weight</li>
                <li>Fewer than 6 wet diapers by day 5</li>
                <li>Baby seems constantly hungry and unsettled</li>
                <li>You have flat or inverted nipples</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span class="accordion-title">💛 Jaundice Monitoring & Management</span>
          <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h4>Understanding Newborn Jaundice</h4>
            <p>More than 80% of newborns develop some jaundice (yellowing of skin). Most is physiologic (normal) but requires careful monitoring as high bilirubin can cause brain damage (kernicterus).</p>
            
            <h4>Types of Jaundice</h4>
            <p><strong>Physiologic Jaundice:</strong> Appears after 24 hours, peaks day 3-5, resolves by 2 weeks. Normal in most babies.</p>
            <p><strong>Breastfeeding Jaundice:</strong> Due to insufficient intake in first days. Solution: Increase feeding frequency.</p>
            <p><strong>Breast Milk Jaundice:</strong> Appears after day 5, can last weeks. Baby feeding and gaining well. Usually harmless.</p>
            <p><strong>Pathologic Jaundice:</strong> Appears in first 24 hours. EMERGENCY - indicates blood incompatibility or serious problem.</p>
            
            <h4>When to Worry</h4>
            <ul>
              <li>Yellow skin appearing in FIRST 24 HOURS (emergency!)</li>
              <li>Yellow palms and soles (indicates high bilirubin)</li>
              <li>Baby very sleepy, difficult to wake for feeds</li>
              <li>Poor feeding</li>
              <li>Jaundice spreading downward rapidly</li>
              <li>Jaundice worsening after day 5</li>
            </ul>
            
            <h4>Home Monitoring</h4>
            <p>Check daily in natural daylight. Press gently on baby's forehead or chest. If skin looks yellow, note how far down body it extends. Call pediatrician if concerns.</p>
            
            <h4>Treatment</h4>
            <p><strong>Mild Jaundice:</strong> Frequent feeding (removes bilirubin in stool), indirect sunlight exposure.</p>
            <p><strong>Moderate to Severe:</strong> Phototherapy (blue light treatment) in hospital.</p>
            
            <div style="background: rgba(255, 152, 0, 0.1); padding: 1.5rem; border-radius: 12px; margin-top: 1.5rem;">
              <h4 style="color: var(--warning);">⚠️ Critical Action Required</h4>
              <p>Get bilirubin level checked before hospital discharge (24-48 hours after birth) and again at 3-5 days. Visual assessment alone is unreliable, especially in darker-skinned babies.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span class="accordion-title">😴 Safe Sleep Practices</span>
          <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h4>ABC's of Safe Sleep</h4>
            <ul>
              <li><strong>A = Alone:</strong> Baby sleeps alone in crib/bassinet (not in adult bed)</li>
              <li><strong>B = Back:</strong> Always on back for every sleep</li>
              <li><strong>C = Crib:</strong> Firm, flat surface with fitted sheet only</li>
            </ul>
            
            <h4>What NOT to Do</h4>
            <ul>
              <li>No pillows, blankets, stuffed toys, or bumpers in crib</li>
              <li>No sleeping on couch or armchair with baby</li>
              <li>No bed-sharing if mother smokes, uses alcohol/drugs, or is overtired</li>
              <li>Never leave baby sleeping on adult bed alone (risk of falling)</li>
              <li>No sleeping on soft surfaces (waterbeds, cushions)</li>
            </ul>
            
            <h4>Room-Sharing Recommendation</h4>
            <p>Keep baby's crib in your room for at least 6 months (ideally 12 months). This reduces SIDS risk by 50% while allowing easy nighttime feeding and monitoring.</p>
            
            <h4>Temperature Control</h4>
            <p>Room temperature 20-22°C (68-72°F). Dress baby in one more layer than you wear. Watch for overheating: sweaty, hot to touch, rapid breathing.</p>
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleAccordion(this)">
          <span class="accordion-title">💉 Vaccination Schedule</span>
          <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h4>Birth Vaccines</h4>
            <ul>
              <li><strong>BCG:</strong> Protects against tuberculosis (single dose at birth)</li>
              <li><strong>OPV-0:</strong> Oral polio vaccine (birth dose)</li>
              <li><strong>Hepatitis B-1:</strong> First dose (within 24 hours if mother HBsAg+, otherwise within 2 weeks)</li>
            </ul>
            
            <h4>6 Weeks</h4>
            <ul>
              <li>OPV-1, Pentavalent-1 (DPT+HepB+Hib)</li>
              <li>Rotavirus-1, PCV-1 (pneumococcal)</li>
            </ul>
            
            <h4>10 Weeks</h4>
            <ul>
              <li>OPV-2, Pentavalent-2</li>
              <li>Rotavirus-2, PCV-2</li>
            </ul>
            
            <h4>14 Weeks</h4>
            <ul>
              <li>OPV-3, Pentavalent-3</li>
              <li>Rotavirus-3, PCV-3, IPV-1</li>
            </ul>
            
            <div style="background: rgba(66, 165, 245, 0.1); padding: 1.5rem; border-radius: 12px; margin-top: 1.5rem;">
              <h4 style="color: var(--info);">💡 Important Notes</h4>
              <ul>
                <li>Vaccines are safe and essential. Benefits far outweigh minimal risks.</li>
                <li>You can breastfeed immediately after vaccines.</li>
                <li>Fever after vaccine is normal. Give paracetamol if doctor recommends.</li>
                <li>Keep vaccination card safe - needed for school admission.</li>
                <li>Free vaccines available at all government health centers.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- JAUNDICE COLOR CHART -->
    <section class="section">
      <div class="jaundice-chart">
        <h2 style="text-align: center; color: var(--primary); margin-bottom: 1rem;">Visual Jaundice Assessment Guide</h2>
        <p style="text-align: center; color: var(--text-soft); margin-bottom: 2rem;">
          Press gently on baby's skin in natural daylight. Click each level to learn more.
        </p>
        
        <div class="color-scale">
          <div class="color-level normal" onclick="showJaundiceInfo('normal')">
            <h4>No Jaundice</h4>
            <p>Pink skin tone</p>
          </div>
          
          <div class="color-level mild" onclick="showJaundiceInfo('mild')">
            <h4>Mild</h4>
            <p>Face yellow only</p>
          </div>
          
          <div class="color-level moderate" onclick="showJaundiceInfo('moderate')">
            <h4>Moderate</h4>
            <p>Chest yellow</p>
          </div>
          
          <div class="color-level severe" onclick="showJaundiceInfo('severe')">
            <h4>Severe</h4>
            <p>Abdomen yellow</p>
          </div>
          
          <div class="color-level critical" onclick="showJaundiceInfo('critical')">
            <h4>Critical</h4>
            <p>Arms/legs yellow</p>
          </div>
        </div>
        
        <div id="jaundiceInfo" style="background: rgba(236, 64, 122, 0.05); padding: 1.5rem; border-radius: 12px; margin-top: 2rem; display: none;"></div>
      </div>
    </section>

    

    <!-- FEEDING TRACKER -->
      <div class="feeding-tracker" id="ft-root">
        <!-- ── Header ── -->
        <div style="text-align:center;margin-bottom:1.5rem;">
          <h2 style="color:var(--primary);margin-bottom:.4rem;font-size:1.85rem;">🍼 Interactive Feeding Tracker</h2>
          <p style="color:var(--text-soft);font-size:.95rem;">Log every feed, diaper &amp; sleep — see live health status, timeline, and learn what each sign means.</p>
        </div>

        <!-- ── Tab Bar ── -->
        <div class="ft-tabs">
          <button class="ft-tab ft-tab-active" onclick="ftTab(this,'ft-panel-log')">📊 Log &amp; Track</button>
          <button class="ft-tab" onclick="ftTab(this,'ft-panel-timeline')">⏱ Timeline</button>
          <button class="ft-tab" onclick="ftTab(this,'ft-panel-status')">🩺 Health Status</button>
          <button class="ft-tab" onclick="ftTab(this,'ft-panel-learn')">📚 Learn Signs</button>
          <button class="ft-tab" onclick="ftTab(this,'ft-panel-weight')">⚖️ Weight Check</button>
        </div>

        <!-- ════ PANEL: LOG & TRACK ════ -->
        <div class="ft-panel" id="ft-panel-log">
          <!-- Donut Progress Cards -->
          <div class="ft-donut-row">

            <div class="ft-donut-card ft-donut-feed" onclick="addFeed()" title="Tap to log a feed">
              <svg viewBox="0 0 80 80" class="ft-donut-svg">
                <circle cx="40" cy="40" r="32" fill="none" stroke="#fce4ec" stroke-width="8"/>
                <circle id="ft-ring-feeds" cx="40" cy="40" r="32" fill="none" stroke="#ec407a" stroke-width="8"
                  stroke-dasharray="201" stroke-dashoffset="201" stroke-linecap="round"
                  transform="rotate(-90 40 40)" style="transition:stroke-dashoffset .7s cubic-bezier(.4,0,.2,1)"/>
                <text x="40" y="36" text-anchor="middle" font-size="17" font-weight="900" fill="#ec407a" id="ft-num-feeds">0</text>
                <text x="40" y="49" text-anchor="middle" font-size="7.5" fill="#aaa">/ 8–12</text>
              </svg>
              <div class="ft-donut-label">Feeds</div>
              <div class="ft-donut-sub">tap to log</div>
              <div class="ft-donut-status" id="ft-status-feeds"></div>
            </div>

            <div class="ft-donut-card ft-donut-wet" onclick="addDiaper('wet')" title="Tap to log wet diaper">
              <svg viewBox="0 0 80 80" class="ft-donut-svg">
                <circle cx="40" cy="40" r="32" fill="none" stroke="#e1f5fe" stroke-width="8"/>
                <circle id="ft-ring-wet" cx="40" cy="40" r="32" fill="none" stroke="#29b6f6" stroke-width="8"
                  stroke-dasharray="201" stroke-dashoffset="201" stroke-linecap="round"
                  transform="rotate(-90 40 40)" style="transition:stroke-dashoffset .7s cubic-bezier(.4,0,.2,1)"/>
                <text x="40" y="36" text-anchor="middle" font-size="17" font-weight="900" fill="#0288d1" id="ft-num-wet">0</text>
                <text x="40" y="49" text-anchor="middle" font-size="7.5" fill="#aaa">/ 6–8</text>
              </svg>
              <div class="ft-donut-label">💧 Wet</div>
              <div class="ft-donut-sub">tap to log</div>
              <div class="ft-donut-status" id="ft-status-wet"></div>
            </div>

            <div class="ft-donut-card ft-donut-dirty" onclick="addDiaper('dirty')" title="Tap to log dirty diaper">
              <svg viewBox="0 0 80 80" class="ft-donut-svg">
                <circle cx="40" cy="40" r="32" fill="none" stroke="#fff8e1" stroke-width="8"/>
                <circle id="ft-ring-dirty" cx="40" cy="40" r="32" fill="none" stroke="#ffa726" stroke-width="8"
                  stroke-dasharray="201" stroke-dashoffset="201" stroke-linecap="round"
                  transform="rotate(-90 40 40)" style="transition:stroke-dashoffset .7s cubic-bezier(.4,0,.2,1)"/>
                <text x="40" y="36" text-anchor="middle" font-size="17" font-weight="900" fill="#e65100" id="ft-num-dirty">0</text>
                <text x="40" y="49" text-anchor="middle" font-size="7.5" fill="#aaa">/ 3–4</text>
              </svg>
              <div class="ft-donut-label">💩 Dirty</div>
              <div class="ft-donut-sub">tap to log</div>
              <div class="ft-donut-status" id="ft-status-dirty"></div>
            </div>

            <!-- Countdown card -->
            <div class="ft-donut-card" style="cursor:default;justify-content:center;gap:.3rem;">
              <div id="ft-since-label" style="font-size:2.6rem;font-weight:900;color:var(--primary);line-height:1;">--</div>
              <div style="font-size:.68rem;color:#aaa;font-weight:600;letter-spacing:.05em;">HRS SINCE LAST FEED</div>
              <div id="ft-next-msg" style="font-size:.8rem;font-weight:700;color:var(--primary);margin-top:.2rem;text-align:center;"></div>
              <div id="ft-urgency-dot" style="width:10px;height:10px;border-radius:50%;background:#ccc;margin:0 auto;transition:background .4s;"></div>
            </div>
          </div>

          <!-- Log buttons + type selector -->
          <div class="ft-log-bar">
            <select id="ft-feed-type" class="ft-select">
              <option value="left">🤱 Left Breast</option>
              <option value="right">🤱 Right Breast</option>
              <option value="both">🤱 Both Breasts</option>
              <option value="bottle-bm">🍼 Bottle – Breast Milk</option>
              <option value="bottle-formula">🍼 Formula</option>
            </select>
            <select id="ft-feed-dur" class="ft-select">
              <option value="5">5 min</option>
              <option value="10">10 min</option>
              <option value="15" selected>15 min</option>
              <option value="20">20 min</option>
              <option value="30">30 min</option>
            </select>
            <button class="add-feed-btn" style="margin:0;padding:.55rem 1.3rem;font-size:.88rem;" onclick="addFeedDetailed()">➕ Log Feed</button>
            <button class="add-feed-btn" style="margin:0;padding:.55rem 1.1rem;font-size:.88rem;background:var(--info);" onclick="addDiaper('wet')">💧 Wet</button>
            <button class="add-feed-btn" style="margin:0;padding:.55rem 1.1rem;font-size:.88rem;background:var(--warning);" onclick="addDiaper('dirty')">💩 Dirty</button>
            <button class="add-feed-btn" style="margin:0;padding:.55rem 1.1rem;font-size:.88rem;background:#7c3aed;" onclick="ftLogSleep()">😴 Sleep</button>
            <button class="add-feed-btn" style="margin:0;padding:.55rem 1.1rem;font-size:.88rem;background:#78909c;" onclick="ftUndo()">↩ Undo</button>
            <button class="add-feed-btn" style="margin:0;padding:.55rem 1.1rem;font-size:.88rem;background:#9e9e9e;" onclick="resetTracker()">🔄 Reset</button>
          </div>
        </div>

        <!-- ════ PANEL: TIMELINE ════ -->
        <div class="ft-panel" id="ft-panel-timeline" style="display:none;">
          <div class="ft-white-box">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;flex-wrap:wrap;gap:.5rem;">
              <h4 style="color:var(--primary);font-size:1.1rem;margin:0;">📅 24-Hour Activity Log</h4>
              <div style="display:flex;gap:.4rem;flex-wrap:wrap;font-size:.73rem;">
                <span class="ft-legend-pill" style="background:#fce4ec;color:#c2185b;">🍼 Feed</span>
                <span class="ft-legend-pill" style="background:#e1f5fe;color:#0277bd;">💧 Wet</span>
                <span class="ft-legend-pill" style="background:#fff8e1;color:#e65100;">💩 Dirty</span>
                <span class="ft-legend-pill" style="background:#ede7f6;color:#5e35b1;">😴 Sleep</span>
              </div>
            </div>
            <!-- Bar chart of feeds per 2-hr block -->
            <div style="margin-bottom:1.2rem;">
              <div style="font-size:.78rem;color:var(--text-soft);margin-bottom:.5rem;font-weight:600;">Feeds per 2-hour window (last 24h):</div>
              <div id="ft-bar-chart" style="display:flex;align-items:flex-end;gap:3px;height:56px;"></div>
              <div id="ft-bar-labels" style="display:flex;justify-content:space-between;font-size:.6rem;color:#bbb;margin-top:2px;padding:0 1px;"></div>
            </div>
            <div id="ft-timeline-list" style="max-height:300px;overflow-y:auto;display:flex;flex-direction:column;gap:.45rem;">
              <div style="text-align:center;color:var(--text-soft);padding:2rem;font-size:.9rem;opacity:.7;">No events yet — switch to Log &amp; Track to start.</div>
            </div>
          </div>
        </div>

        <!-- ════ PANEL: HEALTH STATUS ════ -->
        <div class="ft-panel" id="ft-panel-status" style="display:none;">
          <div id="ft-health-cards" style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.2rem;"></div>
          <!-- Day-by-day targets -->
          <div class="ft-white-box">
            <h4 style="color:var(--primary);margin-bottom:1rem;">📅 Expected Output by Baby's Age</h4>
            <div id="ft-day-targets"></div>
          </div>
        </div>

        <!-- ════ PANEL: LEARN SIGNS ════ -->
        <div class="ft-panel" id="ft-panel-learn" style="display:none;">
          <p style="text-align:center;color:var(--text-soft);font-size:.88rem;margin-bottom:1rem;">Click any card to flip it and read the clinical explanation 👇</p>
          <div id="ft-flip-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem;margin-bottom:1.5rem;"></div>
          <!-- Hydration slider simulator -->
          <div class="ft-white-box" style="margin-bottom:1rem;">
            <h4 style="color:var(--primary);margin-bottom:.6rem;">💧 Hydration Status Simulator</h4>
            <p style="font-size:.84rem;color:var(--text-soft);margin-bottom:.8rem;">Slide to see how diaper count maps to your baby's hydration level:</p>
            <input type="range" id="ft-hydration-slider" min="0" max="10" value="3" style="width:100%;accent-color:var(--primary);" oninput="ftUpdateHydration(this.value)">
            <div style="display:flex;justify-content:space-between;font-size:.7rem;color:#bbb;margin-bottom:.8rem;"><span>0 diapers</span><span>10 diapers</span></div>
            <div id="ft-hydration-result" style="border-radius:12px;padding:1rem;text-align:center;transition:all .4s;background:#f5f5f5;"></div>
          </div>
        </div>

        <!-- ════ PANEL: WEIGHT CHECK ════ -->
        <div class="ft-panel" id="ft-panel-weight" style="display:none;">
          <div class="ft-white-box">
            <h4 style="color:var(--primary);margin-bottom:.6rem;">⚖️ Birth Weight Loss Calculator</h4>
            <p style="font-size:.84rem;color:var(--text-soft);margin-bottom:1rem;">Enter weights to instantly check if loss is within safe range, and get a visual gauge:</p>
            <div style="display:flex;gap:.8rem;flex-wrap:wrap;align-items:flex-end;margin-bottom:1rem;">
              <div>
                <label style="font-size:.8rem;color:var(--text-soft);font-weight:600;display:block;margin-bottom:.3rem;">Birth Weight (g)</label>
                <input type="number" id="ft-birth-wt" placeholder="e.g. 3200" class="ft-input" oninput="ftCalcWeight()">
              </div>
              <div>
                <label style="font-size:.8rem;color:var(--text-soft);font-weight:600;display:block;margin-bottom:.3rem;">Current Weight (g)</label>
                <input type="number" id="ft-curr-wt" placeholder="e.g. 3050" class="ft-input" oninput="ftCalcWeight()">
              </div>
              <div>
                <label style="font-size:.8rem;color:var(--text-soft);font-weight:600;display:block;margin-bottom:.3rem;">Baby's Age (days)</label>
                <input type="number" id="ft-age-days" placeholder="e.g. 4" class="ft-input" min="0" max="14" oninput="ftCalcWeight()">
              </div>
            </div>
            <!-- Visual gauge -->
            <div id="ft-weight-gauge-wrap" style="display:none;margin-bottom:1rem;">
              <div style="position:relative;height:18px;background:linear-gradient(90deg,#4caf50,#fff176,#ffa726,#ef5350);border-radius:99px;overflow:hidden;margin-bottom:.4rem;">
                <div id="ft-weight-gauge-marker" style="position:absolute;top:-3px;width:4px;height:24px;background:#212121;border-radius:2px;transition:left .5s cubic-bezier(.4,0,.2,1);left:0;"></div>
              </div>
              <div style="display:flex;justify-content:space-between;font-size:.68rem;color:#aaa;"><span>0%</span><span>7%</span><span>10%</span><span>15%+</span></div>
            </div>
            <div id="ft-weight-result" style="border-radius:12px;padding:1rem;display:none;"></div>
          </div>
        </div>

      </div><!-- /feeding-tracker -->

    <!-- QUESTIONS TO ASK DOCTOR -->
    <section class="section" id="questions">
      <div class="section-header">
        <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">Be Prepared</span>
        </div>
        <h2 class="section-title-prominent">
          Build Your <span class="title-highlight">Doctor Visit Question List</span>
        </h2>
        <p class="section-subtitle-prominent">
          Over 100 evidence-based questions across 10 categories — drawn from WHO, AAP &amp; ACOG guidelines.
          <strong>Select categories, filter by priority, search, and export</strong> a personalised list for every appointment.
        </p>
      </div>

      <div class="qb-shell" id="qbShell">

        <!-- header strip -->
        <div class="qb-header">
          <span class="qb-header-title">🩺 Your Personalised Question Builder</span>
          <div class="qb-header-meta" id="qbPills">
            <span class="qb-pill" style="font-style:italic;opacity:.7;">No categories selected</span>
          </div>
          <div class="qb-counter" id="qbCount">0 Qs</div>
        </div>

        <!-- visit-type switcher -->
        <div class="qb-visit-tabs">
          <button class="qb-vtab active" onclick="qbSetVisit('all',this)">📋 All Questions</button>
          <button class="qb-vtab" onclick="qbSetVisit('paed',this)">👶 Paediatrician</button>
          <button class="qb-vtab" onclick="qbSetVisit('obgyn',this)">🏥 OB / GYN</button>
          <button class="qb-vtab" onclick="qbSetVisit('urgent',this)">🚨 Urgent / Emergency</button>
          <button class="qb-vtab" onclick="qbSetVisit('spec',this)">🔬 Special Situations</button>
        </div>

        <!-- category grid -->
        <div class="qb-cat-grid" id="qbCatGrid">
          <div class="qb-cat" data-cat="infection"   onclick="qbToggle(this)"><span class="qb-ci">🛡️</span><div class="qb-cl">Infection Prevention</div><span class="qb-cn">20 Qs</span></div>
          <div class="qb-cat" data-cat="feeding"     onclick="qbToggle(this)"><span class="qb-ci">🤱</span><div class="qb-cl">Feeding &amp; Nutrition</div><span class="qb-cn">20 Qs</span></div>
          <div class="qb-cat" data-cat="safety"      onclick="qbToggle(this)"><span class="qb-ci">😴</span><div class="qb-cl">Sleep &amp; Safety</div><span class="qb-cn">20 Qs</span></div>
          <div class="qb-cat" data-cat="recovery"    onclick="qbToggle(this)"><span class="qb-ci">💝</span><div class="qb-cl">Maternal Recovery</div><span class="qb-cn">20 Qs</span></div>
          <div class="qb-cat" data-cat="mental"      onclick="qbToggle(this)"><span class="qb-ci">🧠</span><div class="qb-cl">Mental Health</div><span class="qb-cn">20 Qs</span></div>
          <div class="qb-cat" data-cat="jaundice"    onclick="qbToggle(this)"><span class="qb-ci">💛</span><div class="qb-cl">Jaundice</div><span class="qb-cn">10 Qs</span></div>
          <div class="qb-cat" data-cat="growth"      onclick="qbToggle(this)"><span class="qb-ci">📈</span><div class="qb-cl">Growth &amp; Milestones</div><span class="qb-cn">12 Qs</span></div>
          <div class="qb-cat" data-cat="skin"        onclick="qbToggle(this)"><span class="qb-ci">🩹</span><div class="qb-cl">Skin &amp; Birth Injuries</div><span class="qb-cn">10 Qs</span></div>
          <div class="qb-cat" data-cat="meds"        onclick="qbToggle(this)"><span class="qb-ci">💊</span><div class="qb-cl">Medications &amp; Supplements</div><span class="qb-cn">10 Qs</span></div>
          <div class="qb-cat" data-cat="followup"    onclick="qbToggle(this)"><span class="qb-ci">📅</span><div class="qb-cl">Follow-Up &amp; Screening</div><span class="qb-cn">10 Qs</span></div>
        </div>

        <!-- controls -->
        <div class="qb-ctrl-row">
          <button class="qb-ctrl" onclick="qbAll()">✓ Select All</button>
          <button class="qb-ctrl" onclick="qbNone()">✕ Clear All</button>
          <button class="qb-ctrl danger"  id="ctrlHi"  onclick="qbFilter('hi',this)">🔴 High Priority Only</button>
          <button class="qb-ctrl warning" id="ctrlMed" onclick="qbFilter('med',this)">🟡 Include Medium</button>
        </div>

        <!-- search -->
        <div class="qb-search-wrap">
          <input class="qb-search" id="qbSearch" type="text"
            placeholder="🔍  Search questions — e.g. latch, fever, bilirubin, SIDS..."
            oninput="qbRender()">
        </div>

        <!-- output -->
        <div class="qb-out" id="qbOut">
          <div class="qb-empty">
            <div class="qb-empty-ico">📋</div>
            <div class="qb-empty-msg">Your personalised question list will appear here</div>
            <div class="qb-empty-sub">↑ Select one or more categories above to begin</div>
          </div>
        </div>

        <!-- priority legend -->
        <div class="qb-legend">
          <span><span class="qb-tag t-hi" style="display:inline-block">🔴 High</span> Must ask — time-sensitive</span>
          <span><span class="qb-tag t-med" style="display:inline-block">🟡 Med</span> Important to discuss</span>
          <span><span class="qb-tag t-inf" style="display:inline-block">🔵 Info</span> Good background knowledge</span>
        </div>

        <!-- action buttons -->
        <div class="qb-actions">
          <button class="qb-btn pink"  id="qbBtnPrint" onclick="qbPrint()"  disabled>🖨️ Print List</button>
          <button class="qb-btn green" id="qbBtnCopy"  onclick="qbCopy()"   disabled>📋 Copy to Clipboard</button>
          <button class="qb-btn out"   id="qbBtnEmail" onclick="qbEmail()"  disabled>📧 Email to Myself</button>
        </div>

        <!-- specialist section (shown when visit=spec) -->
        <div class="qb-spec-wrap" id="qbSpecWrap">
          <h4 style="font-size:1rem;color:var(--primary-dark);margin-bottom:.8rem;text-align:center;">Select your situation:</h4>
          <div class="qb-spec-grid">
            <div class="qb-scard" onclick="qbToggleSpec('preemie',this)">
              <div style="font-size:1.5rem">🏥</div>
              <h5>Premature / Low Birth Weight</h5>
              <p>Adjusted age, NICU follow-up, apnoea, feeding adjustments</p>
            </div>
            <div class="qb-scard" onclick="qbToggleSpec('multiples',this)">
              <div style="font-size:1.5rem">👶👶</div>
              <h5>Multiple Births (Twins / Triplets)</h5>
              <p>Feeding schedules, growth disparity, support resources</p>
            </div>
            <div class="qb-scard" onclick="qbToggleSpec('complexhx',this)">
              <div style="font-size:1.5rem">📋</div>
              <h5>Complex Maternal Medical History</h5>
              <p>Medication safety, specialist follow-up, condition monitoring</p>
            </div>
          </div>
        </div>

      </div><!-- /qb-shell -->
    </section>

    <!-- RESOURCES & CHECKLIST -->

    <section class="section">
      <div class="section-header">
        <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">Practical Tools</span>
        </div>
        <h2 class="section-title-prominent">
          Downloadable <span class="title-highlight">Resources & Checklists</span>
        </h2>
        <p class="section-subtitle-prominent">
          Print these essential guides for quick reference during your postpartum journey. 
          <strong>Stay organized and informed</strong> with comprehensive tracking tools and emergency protocols.
        </p>
      </div>

      <div class="card-grid">
        <div class="interactive-card">
          <div class="card-icon">📋</div>
          <h3>Postpartum Checklist</h3>
          <p>Complete day-by-day checklist for first 6 weeks after delivery</p>
          <button class="btn-primary" onclick="openModal('postpartumChecklist')">View Checklist</button>
        </div>

        <div class="interactive-card">
          <div class="card-icon">📞</div>
          <h3>Emergency Contact Card</h3>
          <p>Printable card with emergency numbers and warning signs</p>
          <button class="btn-primary" onclick="openModal('emergencyCard')">Generate Card</button>
        </div>

        <div class="interactive-card">
          <div class="card-icon">📊</div>
          <h3>Weight Tracker Chart</h3>
          <p>Track baby's weight gain week by week</p>
          <button class="btn-primary" onclick="openModal('weightChart')">Download Chart</button>
        </div>

        <div class="interactive-card">
          <div class="card-icon">💉</div>
          <h3>Vaccination Schedule</h3>
          <p>Complete immunization schedule with due dates</p>
          <button class="btn-primary" onclick="openModal('vaccinationSchedule')">View Schedule</button>
        </div>

        <div class="interactive-card">
          <div class="card-icon">🍼</div>
          <h3>Feeding Log Template</h3>
          <p>Daily feeding and diaper tracking sheet</p>
          <button class="btn-primary" onclick="openModal('feedingLog')">Download Template</button>
        </div>

        <div class="interactive-card">
          <div class="card-icon">🏥</div>
          <h3>Hospital Bag Checklist</h3>
          <p>What to pack for mother and baby before delivery</p>
          <button class="btn-primary" onclick="openModal('hospitalBag')">View List</button>
        </div>
      </div>
    </section>

  </div>

  <!-- MODAL -->
  <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2 id="modalTitle">Modal Title</h2>
        <button class="close-modal" onclick="closeModal()">&times;</button>
      </div>
      <div id="modalBody">
        Modal content goes here
      </div>
    </div>
  </div>

<!-- ================================================ -->
<!-- JAVASCRIPT SECTION -->
<!-- ================================================ -->
<script>
// ==================== STATE MANAGEMENT ====================
const state = {
  feedCount: 0,
  wetDiapers: 0,
  dirtyDiapers: 0,
  lastFeedTime: null,
  selectedCategories: new Set(),
  questions: {
    feeding: [
      "Is my baby latching correctly and transferring milk effectively?",
      "How many times should I feed per day at this age?",
      "How will I know if my baby is getting enough milk?",
      "What are signs of dehydration I should watch for?",
      "When should I introduce vitamin D supplementation?",
      "Are my medications safe for breastfeeding?"
    ],
    jaundice: [
      "What was my baby's bilirubin level before discharge?",
      "When should I bring my baby back for jaundice evaluation?",
      "What level of jaundice requires immediate medical attention?",
      "How can I monitor jaundice progression at home?",
      "Is phototherapy needed for my baby's jaundice level?"
    ],
    infection: [
      "What are the danger signs of infection I should watch for?",
      "When should I bring my baby to emergency?",
      "How should I care for the umbilical cord stump?",
      "What temperature is considered a fever in a newborn?",
      "Which family members need updated vaccinations?",
      "What precautions should visitors take?"
    ],
    growth: [
      "Is my baby's weight gain appropriate?",
      "What percentile is my baby for weight, length, and head circumference?",
      "When should I expect developmental milestones?",
      "Should I be concerned about my baby's fontanelle (soft spot)?",
      "Is my baby's head shape normal?"
    ],
    maternal: [
      "Is my recovery progressing normally?",
      "When can I resume exercise and normal activities?",
      "What contraception options are safe while breastfeeding?",
      "Should I be concerned about my mood and mental health?",
      "When will my period return while breastfeeding?"
    ],
    safety: [
      "What is the safest sleep position and environment?",
      "How can I reduce SIDS risk?",
      "When can I introduce a pacifier?",
      "Is room-sharing recommended, and for how long?",
      "What should I do if baby rolls over during sleep?"
    ]
  }
};

// Load state from localStorage
function loadState() {
  const saved = localStorage.getItem('postpartumState');
  if (saved) {
    try {
      const parsed = JSON.parse(saved);
      Object.assign(state, parsed);
      updateUI();
    } catch (e) {
      console.error('Error loading state:', e);
    }
  }
}

function saveState() {
  localStorage.setItem('postpartumState', JSON.stringify(state));
}

function updateUI() {
  document.getElementById('feedCount').textContent = state.feedCount;
  document.getElementById('wetDiaper').textContent = state.wetDiapers;
  document.getElementById('dirtyDiaper').textContent = state.dirtyDiapers;
  
  if (state.lastFeedTime) {
    const now = new Date();
    const lastFeed = new Date(state.lastFeedTime);
    const diff = Math.floor((now - lastFeed) / 1000 / 60); // minutes
    const hours = Math.floor(diff / 60);
    const mins = diff % 60;
    document.getElementById('lastFeed').textContent = 
      hours > 0 ? `${hours}h ${mins}m` : `${mins}m`;
  }
}

// ==================== PARTICLE ANIMATION ====================
(function initParticles() {
  const canvas = document.getElementById('particleCanvas');
  if (!canvas) return;
  
  const ctx = canvas.getContext('2d');
  
  function resize() {
    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;
  }
  
  resize();
  window.addEventListener('resize', resize);
  
  const particles = [];
  const particleCount = 80;
  
  class Particle {
    constructor() {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height;
      this.vx = (Math.random() - 0.5) * 0.5;
      this.vy = (Math.random() - 0.5) * 0.5;
      this.radius = Math.random() * 2 + 1;
    }
    
    update() {
      this.x += this.vx;
      this.y += this.vy;
      
      if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
      if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
    }
    
    draw() {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(236, 64, 122, 0.6)';
      ctx.fill();
    }
  }
  
  for (let i = 0; i < particleCount; i++) {
    particles.push(new Particle());
  }
  
  function connectParticles() {
    for (let i = 0; i < particles.length; i++) {
      for (let j = i + 1; j < particles.length; j++) {
        const dx = particles[i].x - particles[j].x;
        const dy = particles[i].y - particles[j].y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        
        if (dist < 100) {
          ctx.beginPath();
          ctx.strokeStyle = `rgba(236, 64, 122, ${0.2 * (1 - dist / 100)})`;
          ctx.lineWidth = 1;
          ctx.moveTo(particles[i].x, particles[i].y);
          ctx.lineTo(particles[j].x, particles[j].y);
          ctx.stroke();
        }
      }
    }
  }
  
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach(p => {
      p.update();
      p.draw();
    });
    connectParticles();
    requestAnimationFrame(animate);
  }
  
  animate();
})();

// ==================== 3D MOTHER-BABY VISUALIZATION ====================
(function init3DVisualization() {
  const container = document.getElementById('motherBabyCanvas');
  if (!container) return;

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
  const renderer = new THREE.WebGLRenderer({ canvas: container, alpha: true, antialias: true });
  
  renderer.setSize(container.offsetWidth, container.offsetHeight);
  renderer.setClearColor(0x000000, 0);
  
  // Create mother figure (simplified)
  const motherGroup = new THREE.Group();
  
  // Body
  const bodyGeometry = new THREE.CylinderGeometry(1, 1.2, 3, 32);
  const bodyMaterial = new THREE.MeshPhongMaterial({ color: 0xec407a, transparent: true, opacity: 0.8 });
  const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
  motherGroup.add(body);
  
  // Head
  const headGeometry = new THREE.SphereGeometry(0.6, 32, 32);
  const headMaterial = new THREE.MeshPhongMaterial({ color: 0xffdbac });
  const head = new THREE.Mesh(headGeometry, headMaterial);
  head.position.y = 2.1;
  motherGroup.add(head);
  
  // Baby (small sphere in arms)
  const babyGeometry = new THREE.SphereGeometry(0.4, 32, 32);
  const babyMaterial = new THREE.MeshPhongMaterial({ color: 0xf48fb1 });
  const baby = new THREE.Mesh(babyGeometry, babyMaterial);
  baby.position.set(0.8, 0.5, 0.5);
  motherGroup.add(baby);
  
  // Hearts floating around (representing bonding)
  const hearts = [];
  for (let i = 0; i < 8; i++) {
    const heartShape = new THREE.Shape();
    heartShape.moveTo(0, 0);
    heartShape.bezierCurveTo(0, -0.3, -0.6, -0.3, -0.6, 0);
    heartShape.bezierCurveTo(-0.6, 0.3, 0, 0.6, 0, 1);
    heartShape.bezierCurveTo(0, 0.6, 0.6, 0.3, 0.6, 0);
    heartShape.bezierCurveTo(0.6, -0.3, 0, -0.3, 0, 0);
    
    const extrudeSettings = { depth: 0.1, bevelEnabled: false };
    const heartGeometry = new THREE.ExtrudeGeometry(heartShape, extrudeSettings);
    const heartMaterial = new THREE.MeshPhongMaterial({ color: 0xff69b4, transparent: true, opacity: 0.6 });
    const heart = new THREE.Mesh(heartGeometry, heartMaterial);
    
    const angle = (i / 8) * Math.PI * 2;
    heart.position.set(
      Math.cos(angle) * 3,
      Math.sin(angle * 2) * 2,
      Math.sin(angle) * 3
    );
    heart.scale.set(0.2, 0.2, 0.2);
    heart.userData.angle = angle;
    
    hearts.push(heart);
    scene.add(heart);
  }
  
  scene.add(motherGroup);
  
  // Lights
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  
  const pointLight = new THREE.PointLight(0xffffff, 0.8);
  pointLight.position.set(5, 5, 5);
  scene.add(pointLight);
  
  camera.position.z = 7;
  
  // Animation
  function animate() {
    requestAnimationFrame(animate);
    
    motherGroup.rotation.y += 0.003;
    
    hearts.forEach((heart, i) => {
      heart.userData.angle += 0.02;
      const angle = heart.userData.angle;
      heart.position.x = Math.cos(angle) * 3;
      heart.position.y = Math.sin(angle * 2) * 2;
      heart.position.z = Math.sin(angle) * 3;
      heart.rotation.y += 0.05;
    });
    
    renderer.render(scene, camera);
  }
  
  animate();
  
  // Handle resize
  window.addEventListener('resize', () => {
    const width = container.offsetWidth;
    const height = container.offsetHeight;
    camera.aspect = width / height;
    camera.updateProjectionMatrix();
    renderer.setSize(width, height);
  });
})();

// ==================== INTERACTIVE FUNCTIONS ====================

function toggleAccordion(header) {
  const item = header.parentElement;
  const wasActive = item.classList.contains('active');
  
  // Close all accordions
  document.querySelectorAll('.accordion-item').forEach(acc => {
    acc.classList.remove('active');
  });
  
  // Open clicked one if it wasn't already open
  if (!wasActive) {
    item.classList.add('active');
  }
}

function showRiskCalculator() {
  const calc = document.getElementById('riskCalculator');
  calc.style.display = 'block';
  calc.scrollIntoView({ behavior: 'smooth', block: 'center' });
}

function calculateSepsisRisk() {
  const checkboxes = document.querySelectorAll('.risk-checkbox input[type="checkbox"]:checked');
  const riskCount = checkboxes.length;
  const result = document.getElementById('riskResult');
  const level = document.getElementById('riskLevel');
  const title = document.getElementById('riskTitle');
  const advice = document.getElementById('riskAdvice');
  
  result.classList.add('show');
  
  if (riskCount === 0) {
    level.textContent = 'LOW';
    level.className = 'risk-level low';
    title.textContent = 'Low Risk';
    advice.textContent = 'Based on the factors checked, your baby appears to have low risk for sepsis. Continue normal newborn care with attention to danger signs. Maintain good hygiene and monitor for any warning signs.';
  } else if (riskCount <= 2) {
    level.textContent = 'MEDIUM';
    level.className = 'risk-level medium';
    title.textContent = 'Medium Risk';
    advice.textContent = 'Your baby has some risk factors for sepsis. Be extra vigilant in monitoring for warning signs. Ensure your pediatrician is aware of these risk factors. Watch for temperature instability, poor feeding, lethargy, or any concerning symptoms. Have a low threshold for seeking medical evaluation.';
  } else {
    level.textContent = 'HIGH';
    level.className = 'risk-level high';
    title.textContent = 'High Risk';
    advice.textContent = '⚠️ IMPORTANT: Your baby has multiple significant risk factors for sepsis. Your pediatrician should be aware of these factors. Close monitoring is essential. Any concerning sign (fever, hypothermia, poor feeding, lethargy, breathing difficulty) requires IMMEDIATE medical evaluation. Consider discussing prophylactic antibiotics with your doctor if not already given.';
  }
  
  result.scrollIntoView({ behavior: 'smooth', block: 'center' });
}

function showJaundiceInfo(level) {
  const info = document.getElementById('jaundiceInfo');
  const content = {
    normal: {
      title: 'No Jaundice',
      text: 'Baby\'s skin appears pink in natural light. This is normal. Continue monitoring daily, especially in first week.',
      action: 'Keep monitoring. Jaundice typically appears day 2-3.'
    },
    mild: {
      title: 'Mild Jaundice',
      text: 'Yellow color visible on face only. Common and usually normal after 24 hours of age.',
      action: 'Monitor daily. Increase feeding frequency (8-12 times per day). Check bilirubin level at next pediatric visit.'
    },
    moderate: {
      title: 'Moderate Jaundice',
      text: 'Yellow color extends to chest. Requires medical evaluation.',
      action: 'Contact pediatrician within 24 hours for bilirubin testing. Increase feeding frequency. May need phototherapy.'
    },
    severe: {
      title: 'Severe Jaundice',
      text: 'Yellow color extends to abdomen. This level requires prompt medical attention.',
      action: '⚠️ Contact pediatrician TODAY. Bilirubin testing needed. Likely requires phototherapy treatment.'
    },
    critical: {
      title: 'Critical Jaundice',
      text: 'Yellow color extends to arms, legs, palms, and soles. This is a medical emergency.',
      action: '🚨 GO TO HOSPITAL IMMEDIATELY. This level can cause brain damage (kernicterus) without treatment. Do not delay.'
    }
  };
  
  const data = content[level];
  info.innerHTML = `
    <h3 style="color: var(--primary); margin-bottom: 1rem;">${data.title}</h3>
    <p style="margin-bottom: 1rem; line-height: 1.8;">${data.text}</p>
    <div style="background: rgba(236, 64, 122, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--primary);">
      <strong>Action Required:</strong> ${data.action}
    </div>
  `;
  info.style.display = 'block';
  info.scrollIntoView({ behavior: 'smooth', block: 'center' });
}

// ==================== FEEDING TRACKER ====================
function addFeed() {
  state.feedCount++;
  state.lastFeedTime = new Date().toISOString();
  updateUI();
  saveState();
  
  // Show success message
  showToast('✓ Feed recorded!');
}

function addDiaper(type) {
  if (type === 'wet') {
    state.wetDiapers++;
    showToast('💧 Wet diaper recorded!');
  } else {
    state.dirtyDiapers++;
    showToast('💩 Dirty diaper recorded!');
  }
  updateUI();
  saveState();
}

function resetTracker() {
  if (confirm('Reset today\'s tracking? This will clear all counts for today.')) {
    state.feedCount = 0;
    state.wetDiapers = 0;
    state.dirtyDiapers = 0;
    state.lastFeedTime = null;
    updateUI();
    saveState();
    showToast('🔄 Tracker reset for new day');
  }
}

function showToast(message) {
  const toast = document.createElement('div');
  toast.textContent = message;
  toast.style.cssText = `
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    background: var(--success);
    color: white;
    padding: 1rem 2rem;
    border-radius: 50px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    z-index: 3000;
    animation: slideIn 0.3s ease-out;
  `;
  document.body.appendChild(toast);
  setTimeout(() => {
    toast.style.animation = 'fadeOut 0.3s ease-out';
    setTimeout(() => toast.remove(), 300);
  }, 2000);
}

// ══════════════════════════════════════════════════════════════
// DOCTOR QUESTION BUILDER  —  Full Implementation
// ══════════════════════════════════════════════════════════════

const QB = {
  sel:    new Set(),   // selected category keys
  spec:   new Set(),   // selected specialist keys
  visit:  'all',       // visit filter
  prio:   null,        // priority filter: null | 'hi' | 'med'

  meta: {
    infection: { label:'Infection Prevention',          icon:'🛡️', visits:['paed','obgyn','all'] },
    feeding:   { label:'Feeding & Nutrition',           icon:'🤱', visits:['paed','all'] },
    safety:    { label:'Sleep & Safety',                icon:'😴', visits:['paed','all'] },
    recovery:  { label:'Maternal Physical Recovery',    icon:'💝', visits:['obgyn','all'] },
    mental:    { label:'Mental Health',                 icon:'🧠', visits:['obgyn','all'] },
    jaundice:  { label:'Jaundice',                      icon:'💛', visits:['paed','all'] },
    growth:    { label:'Growth & Milestones',           icon:'📈', visits:['paed','all'] },
    skin:      { label:'Skin & Birth Injuries',         icon:'🩹', visits:['paed','all'] },
    meds:      { label:'Medications & Supplements',     icon:'💊', visits:['paed','obgyn','all'] },
    followup:  { label:'Follow-Up & Screening',         icon:'📅', visits:['paed','obgyn','all'] },
  },

  // Each question: { t: text, p: 'hi'|'med'|'inf', urg?: true, visits?: [keys] }
  qs: {
    infection: [
      { t:'Hand hygiene is the single most critical infection-prevention step — how many seconds of soap-and-water washing do you recommend, and when exactly must I do it?', p:'hi' },
      { t:'What rectal temperature in my baby under 3 months requires an immediate ER visit, no waiting, no calling first?', p:'hi', urg:true },
      { t:'What are the early warning signs of neonatal sepsis that can look mild at first but mean I must go straight to hospital?', p:'hi', urg:true },
      { t:'How do I care for the umbilical cord stump — when is chlorhexidine needed, and what signs mean infection?', p:'hi' },
      { t:'Which specific household members must have updated pertussis (whooping cough) and influenza vaccines before holding the baby?', p:'hi' },
      { t:'What visitor rules do you recommend for the first 4–6 weeks — how do I enforce "no sick visitors" without causing family conflict?', p:'hi' },
      { t:'How do I sterilise bottles and breast pump parts properly — daily for how many months, and which method is safest?', p:'hi' },
      { t:'Is it safe to take my newborn to busy public places (clinics, shops, family gatherings) before 6 weeks?', p:'med' },
      { t:'If a sibling at home gets a cold, stomach bug, or rash, what specific steps should I take immediately to protect the newborn?', p:'hi' },
      { t:'How should I safely clean pacifiers — is boiling safe, or does it degrade the silicone?', p:'med' },
      { t:'What are the infection risks of pets (dogs, cats) in the home, and how do I manage safe contact with my newborn?', p:'med' },
      { t:'Should I use a humidifier, and if so, how do I prevent it becoming a source of mould or bacteria?', p:'med' },
      { t:'What signs of a wound infection after my caesarean section require an urgent phone call or ER visit?', p:'hi', urg:true, visits:['obgyn','all'] },
      { t:'How do I launder baby clothing and linens safely — which detergents, what temperature, and should I wash separately?', p:'med' },
      { t:'My baby received circumcision — what are the specific signs of healing versus infection I should watch for?', p:'hi' },
      { t:'How do I maintain kitchen hygiene when preparing formula — separate areas, water temperature, storage time?', p:'hi' },
      { t:'What air-quality precautions should I take at home — secondhand smoke, scented candles, cleaning products?', p:'med' },
      { t:'Toy and play surface cleaning — how often, and which products are safe for items my baby mouths?', p:'med' },
      { t:'Are there specific travel precautions I should follow if I must take my newborn out in the first weeks?', p:'med' },
      { t:'If someone in the house has COVID-19 or another respiratory illness, what isolation protocol protects my baby best?', p:'hi', urg:true },
    ],
    feeding: [
      { t:'Is my baby latching correctly — should the lips be flanged wide, taking most of the areola, not just the nipple?', p:'hi' },
      { t:'How can I confirm my baby is actually transferring milk effectively and not just comfort-sucking?', p:'hi' },
      { t:'What nappy output targets — wet diapers and soiled diapers — confirm adequate milk intake this week?', p:'hi' },
      { t:'At what percentage of birth-weight loss should I start supplementing with formula, and how do I do it without harming supply?', p:'hi', urg:true },
      { t:'What are the signs of mastitis — and at what point must I call you rather than manage at home?', p:'hi', urg:true },
      { t:'Is cluster feeding in the evenings (every 30–60 min) a sign of low supply, or normal behaviour?', p:'med' },
      { t:'How do I balance foremilk and hindmilk — should I always fully empty one breast before switching?', p:'med' },
      { t:'Which of my current medications are safe to continue while breastfeeding, and are there safer alternatives for any?', p:'hi' },
      { t:'When should I introduce vitamin D supplementation — dose, brand, and how to give it to a breastfed infant?', p:'hi' },
      { t:'How should I store expressed breast milk — safe limits at room temperature, in the fridge, and in the freezer?', p:'med' },
      { t:'If I switch to or add formula — what flow rate nipple, what paced-feeding technique, and which formula type?', p:'med' },
      { t:'What is the correct burping technique — midway through and at the end of each feed?', p:'med' },
      { t:'How do I distinguish normal spit-up (reflux) from forceful vomiting that needs medical review?', p:'hi', urg:true },
      { t:'How many millilitres per kilogram per day should my baby be taking by the end of week one?', p:'hi' },
      { t:'My baby falls asleep at the breast before finishing — what techniques wake them to feed adequately?', p:'med' },
      { t:'When should I consider a lactation consultant referral, and is one covered by my health plan?', p:'med' },
      { t:'What does a healthy pump output look like, and how often should I pump if exclusively expressing?', p:'med' },
      { t:'How do I maintain my own hydration and nutrition to support breastfeeding — specific fluid and calorie targets?', p:'med' },
      { t:'Should I take any supplements myself while breastfeeding — omega-3, iodine, iron?', p:'med' },
      { t:'When is it safe to introduce a bottle if I plan to return to work — what age, to avoid nipple confusion?', p:'med' },
    ],
    safety: [
      { t:'Walk me through the exact safe sleep environment — surface firmness, room temperature range, clothing layers, and what never to put in the crib.', p:'hi' },
      { t:'Which specific baby products sold in shops are known to be dangerous — inclined sleepers, in-bed pods, soft mattress inserts?', p:'hi' },
      { t:'What is the precise AAP recommendation on room-sharing versus bed-sharing, and what makes bed-sharing so risky?', p:'hi' },
      { t:'When can I stop placing my baby on their back — what is the developmental milestone that makes it safe?', p:'hi' },
      { t:'Is swaddling safe, and at what age must I stop to prevent hip dysplasia and suffocation risk?', p:'med' },
      { t:'What are the evidence-based strategies proven to reduce SIDS risk?', p:'hi' },
      { t:'My baby frequently falls asleep in the car seat or carrier — is this safe, and how long is too long?', p:'med' },
      { t:'How do I have my car seat installation checked by a certified technician, and are rear-facing limits different than I think?', p:'hi' },
      { t:'What water temperature is safe for bathing, how many centimetres of water, and what are the drowning risk rules?', p:'hi' },
      { t:'What household strangulation hazards are not obvious — cords, monitor cables, clothing with drawstrings?', p:'med' },
      { t:'Can I use a pacifier for sleep — when can I introduce it if breastfeeding, and does it truly reduce SIDS risk?', p:'med' },
      { t:'What choking hazards must I remove from the environment even for a non-mobile newborn?', p:'hi' },
      { t:'Day/night differentiation — what techniques help establish circadian rhythm in the early weeks?', p:'med' },
      { t:'What are appropriate wake windows for my baby\'s age, and how does over-tiredness worsen settling?', p:'med' },
      { t:'How do I choose a safe cot, bassinet, or travel cot — what certification standards should I look for?', p:'hi' },
      { t:'What is the correct room temperature range (20–22°C / 68–72°F) and how do I check if my baby is too hot?', p:'hi' },
      { t:'What are the risks of using an inclined sleeper, baby swing, or bouncer for unsupervised sleep?', p:'hi', urg:true },
      { t:'Should I avoid using any specific baby monitors, apps, or pulse-oximeter devices that provide false reassurance?', p:'med' },
      { t:'Can my baby safely share a sleep space with a pet, or must they always be in a completely separate area?', p:'hi' },
      { t:'What CPR technique is appropriate for an infant, and when should I take a certified course?', p:'hi' },
    ],
    recovery: [
      { t:'How much postpartum bleeding (lochia) is within the normal range today, and what colour or quantity requires an urgent call?', p:'hi', urg:true, visits:['obgyn','all'] },
      { t:'What are the specific signs of postpartum haemorrhage I must never ignore — soaking more than one pad per hour, clots larger than a golf ball?', p:'hi', urg:true, visits:['obgyn','all'] },
      { t:'I am experiencing sudden severe headache, visual changes, and swollen hands — could this be postpartum pre-eclampsia, and do I go to ER now?', p:'hi', urg:true, visits:['obgyn','all'] },
      { t:'How is my caesarean incision healing — what signs of infection (redness, gaping, discharge, fever) require an urgent appointment?', p:'hi', urg:true, visits:['obgyn','all'] },
      { t:'How do I care for my perineum / stitches at home — peri-bottle, witch hazel pads, sitz baths, and pain management?', p:'hi', visits:['obgyn','all'] },
      { t:'What pain relief is safe while breastfeeding — ibuprofen, paracetamol, codeine?', p:'hi' },
      { t:'What constipation and haemorrhoid treatments are safe postpartum and compatible with breastfeeding?', p:'med' },
      { t:'When can I safely start gentle exercise — walking, pelvic floor work — and when can I return to running or strength training?', p:'med' },
      { t:'I had gestational diabetes — what postpartum glucose monitoring and follow-up testing do I need, and for how long?', p:'hi', visits:['obgyn','all'] },
      { t:'My blood pressure was elevated during pregnancy — how long must I monitor it postpartum, and at what reading do I call you?', p:'hi', urg:true, visits:['obgyn','all'] },
      { t:'What are the pelvic floor exercises I should begin, and how early can I start after a vaginal / caesarean delivery?', p:'med' },
      { t:'How do I check for diastasis recti (abdominal separation) at home, and what exercises must I avoid until it closes?', p:'med' },
      { t:'I am having urinary leakage or difficulty urinating — at what point does this require physiotherapy or a specialist?', p:'med' },
      { t:'Should I continue prenatal vitamins and iron while breastfeeding — for how long?', p:'hi' },
      { t:'What contraception options are safe while breastfeeding, and when can I safely start each type?', p:'med', visits:['obgyn','all'] },
      { t:'When do most women\'s periods return while exclusively breastfeeding — and does absence of periods mean I cannot get pregnant?', p:'med' },
      { t:'I am having pain or discomfort with sexual activity after delivery — what is the normal timeline and when do I need to see you?', p:'med', visits:['obgyn','all'] },
      { t:'How do I monitor my urine colour and hydration status — what colour indicates I am drinking enough?', p:'med' },
      { t:'What is the timeline for my body to recover — at 2 weeks, 6 weeks, 3 months, 6 months — what should I expect?', p:'med' },
      { t:'What postpartum check-ups are scheduled, and what specifically will you assess at each one?', p:'hi' },
    ],
    mental: [
      { t:'What is the precise clinical difference between baby blues (normal, days 3–10) and postpartum depression that needs treatment?', p:'hi' },
      { t:'I cannot stop worrying and feel anxious even when my baby is sleeping safely — could this be postpartum anxiety disorder?', p:'hi', urg:true },
      { t:'I am having intrusive thoughts about my baby being harmed — is this OCD, PPD, or postpartum psychosis, and what do I do right now?', p:'hi', urg:true },
      { t:'What validated screening tool do you use (Edinburgh Postnatal Depression Scale?) and what score means I need treatment?', p:'hi' },
      { t:'Which antidepressants or anti-anxiety medications are safe while breastfeeding — specifically sertraline, escitalopram?', p:'hi' },
      { t:'I feel completely disconnected from my baby and do not feel the love I expected — is delayed bonding normal?', p:'hi' },
      { t:'My partner seems withdrawn, flat, and disengaged since the birth — can partners develop postpartum depression?', p:'med' },
      { t:'How does severe sleep deprivation interact with and worsen postpartum mood disorders?', p:'med' },
      { t:'What local or online support groups specifically for new mothers do you recommend?', p:'med' },
      { t:'At what point should I see a perinatal psychiatrist rather than a GP for my postpartum mental health?', p:'med' },
      { t:'How do I distinguish postpartum psychosis (a medical emergency) from depression or anxiety?', p:'hi', urg:true },
      { t:'What self-care practices have the strongest evidence for improving postpartum mood — exercise, sunlight, social contact?', p:'med' },
      { t:'How should I prioritise sleep — what are the safest ways to share nighttime duties with my partner?', p:'med' },
      { t:'I feel pressure to "enjoy every moment" but I am overwhelmed — is it normal not to feel joy in early weeks?', p:'med' },
      { t:'What role does my diet and nutrition play in postpartum mental health — any specific nutrients?', p:'med' },
      { t:'How do I talk to my family about postpartum depression and ask for help without feeling like a failure?', p:'med' },
      { t:'Are there apps, online CBT programs, or telehealth options for postpartum mental health support?', p:'inf' },
      { t:'What cultural practices or traditions from my background are safe and supportive for postpartum wellbeing?', p:'inf' },
      { t:'How do I manage the identity shift of becoming a mother — is grief for my pre-baby life normal?', p:'med' },
      { t:'When and how should I discuss family planning and future pregnancies given what happened with my mental health this time?', p:'med', visits:['obgyn','all'] },
    ],
    jaundice: [
      { t:'What was my baby\'s exact bilirubin level at discharge, and what is the phototherapy threshold at their specific gestational age and age in hours?', p:'hi', urg:true },
      { t:'When exactly must I bring my baby back for a bilirubin re-check — what hour and day-of-life is the follow-up?', p:'hi', urg:true },
      { t:'How do I accurately check for jaundice at home — what body areas (face, chest, abdomen, palms, soles) indicate progressively higher bilirubin?', p:'hi' },
      { t:'What bilirubin level causes brain damage (kernicterus) — and what neurological signs indicate this is happening?', p:'hi', urg:true },
      { t:'Can I continue breastfeeding during phototherapy, or must I temporarily switch to formula?', p:'hi' },
      { t:'What is the difference between breastfeeding jaundice (first week, insufficient intake) and breast-milk jaundice (after day 5, harmless)?', p:'med' },
      { t:'My baby has darker skin — are the standard visual jaundice assessment methods (blanching the skin) still reliable?', p:'hi' },
      { t:'How long does physiologic jaundice typically last, and at what point should the numbers start falling on their own?', p:'med' },
      { t:'What level of jaundice requires exchange transfusion rather than phototherapy?', p:'hi', urg:true },
      { t:'What is the Bhutani nomogram, and should I ask to see where my baby\'s level plots?', p:'inf' },
    ],
    growth: [
      { t:'What are my baby\'s exact weight, length, and head circumference percentiles on the WHO growth chart today?', p:'hi' },
      { t:'Is the rate of weight gain (not just the absolute weight) on track — how many grams per day is expected?', p:'hi' },
      { t:'My baby was born at the 25th percentile but is now tracking at the 10th — when does this become a clinical concern?', p:'hi', urg:true },
      { t:'What are the key developmental milestones I should watch for between now and the next scheduled visit?', p:'hi' },
      { t:'When does head asymmetry become positional plagiocephaly requiring a helmet or physiotherapy?', p:'med' },
      { t:'The fontanelle sometimes looks bulging or sunken — what specifically in each case is an emergency?', p:'hi', urg:true },
      { t:'How much supervised tummy time should my baby have daily, and how do I help a baby who hates it?', p:'med' },
      { t:'At what age and with what behaviours would you refer my baby for a developmental paediatric assessment?', p:'med' },
      { t:'What reflexes should be present now, and when does persistence of a primitive reflex become a red flag?', p:'med' },
      { t:'My baby is not making eye contact or tracking faces consistently — at what age is this a concern?', p:'hi', urg:true },
      { t:'What is the difference between a large head (macrocephaly) and hydrocephalus — when does head size need imaging?', p:'med' },
      { t:'Should I be tracking my baby on WHO or national growth charts, and what is the difference?', p:'inf' },
    ],
    skin: [
      { t:'My baby has a spotty red rash with yellowish centres across the trunk — is this erythema toxicum, and will it definitely resolve without treatment?', p:'hi' },
      { t:'I see small white bumps on the nose and cheeks — is this milia, and should I ever try to squeeze or treat them?', p:'med' },
      { t:'My baby has a large bluish-grey patch on their lower back — is this a Mongolian spot, and must it be documented in the medical record to avoid future confusion?', p:'med' },
      { t:'My family has eczema and asthma — how do I recognise atopic dermatitis early, and what allergen-avoidance steps reduce risk?', p:'hi' },
      { t:'There are white patches inside my baby\'s mouth that won\'t wipe off — is this oral thrush, how is it confirmed, and what is the treatment?', p:'hi', urg:true },
      { t:'My baby was born with a scalp swelling that is getting bigger over the first days — is this a cephalohematoma, and what complications (jaundice, anaemia, infection) should I watch for?', p:'hi' },
      { t:'My baby\'s skin is very dry and peeling all over — is this normal post-term skin, or does it need treatment?', p:'med' },
      { t:'What fragrance-free, infant-safe moisturiser do you recommend for daily skin care?', p:'inf' },
      { t:'How do I treat and prevent nappy rash — which barrier cream, how often to change, and when does it need antifungal treatment?', p:'med' },
      { t:'What is cradle cap, is it harmful, and how do I treat it safely without causing scalp irritation?', p:'inf' },
    ],
    meds: [
      { t:'What is the correct weight-based dose of infant paracetamol, and at what exact temperature should I give it?', p:'hi', urg:true },
      { t:'Is ibuprofen safe for my baby at this age, and what is the weight-based dose if needed?', p:'hi' },
      { t:'Which of my current medications — including herbal supplements and vitamins — are safe while breastfeeding?', p:'hi' },
      { t:'Breastfed babies need vitamin D 400 IU daily — which preparation (drops vs liquid) and which brand do you recommend?', p:'hi' },
      { t:'Are galactagogues (fenugreek, domperidone, shatavari) for milk supply safe and evidence-based?', p:'med' },
      { t:'My baby has signs of reflux — what non-pharmacological steps come before medication, and what would you prescribe if needed?', p:'med' },
      { t:'I was told to continue iron supplements after my delivery blood loss — for how many weeks, and at what dose?', p:'med' },
      { t:'Are there any safe over-the-counter options for my own constipation, haemorrhoids, or engorgement pain while breastfeeding?', p:'med' },
      { t:'What is the correct technique and schedule for giving oral vaccines and drops at clinic visits?', p:'med' },
      { t:'How do I correctly take a rectal temperature — thermometer type, position, how far, and for how long?', p:'hi' },
    ],
    followup: [
      { t:'When exactly is my baby\'s next newborn metabolic blood-spot screening, and which conditions does it test for in this country?', p:'hi' },
      { t:'My baby\'s newborn hearing screen was inconclusive — what is the exact follow-up pathway and timeline?', p:'hi', urg:true },
      { t:'Walk me through the complete vaccination schedule for the next 6 months — which vaccines at each visit, and are any combination vaccines available?', p:'hi' },
      { t:'When is my formal 6-week postnatal check, and which specific things will you assess — cervix, mood, contraception, wound?', p:'hi' },
      { t:'Which growth measurements will you plot at each visit, and how do I track them at home between appointments?', p:'med' },
      { t:'Should I have a postpartum thyroid function test if I have a family history of thyroid disease — when, and what test?', p:'med' },
      { t:'How do I register my baby with a GP and enrol them in the national immunisation register?', p:'hi' },
      { t:'When is the earliest I should book a certified infant CPR and first-aid class?', p:'hi' },
      { t:'At what age should my baby have their first dental check, and what oral hygiene do I start from day one?', p:'inf' },
      { t:'What ophthalmology or vision screening is routinely done in the first year, and what signs prompt an urgent eye referral?', p:'med' },
    ],
  },

  specQs: {
    preemie: {
      label: 'Premature / Low Birth Weight',
      icon: '🏥',
      qs: [
        { t:'What is my baby\'s corrected (adjusted) age, and for how long should I use it when comparing milestones?', p:'hi' },
        { t:'What are the home monitoring signs for apnoea or bradycardia that I must never ignore?', p:'hi', urg:true },
        { t:'How do I adjust feeding volume and frequency specifically for a premature infant?', p:'hi' },
        { t:'What specialized care does my premature baby require that differs from a term baby\'s care?', p:'hi' },
        { t:'When can my baby go home, and what criteria must be met before discharge?', p:'hi' },
        { t:'Is my baby at risk for retinopathy of prematurity — when is the first eye exam?', p:'hi' },
        { t:'What are appropriate oxygen saturation targets at home, and do I need a monitor?', p:'hi' },
        { t:'Which growth chart should I use — WHO standard or a preterm-specific chart?', p:'med' },
      ]
    },
    multiples: {
      label: 'Multiple Births',
      icon: '👶👶',
      qs: [
        { t:'Can I breastfeed both twins simultaneously — what position works, and can I produce enough milk?', p:'hi' },
        { t:'Should I feed my twins on the same schedule or on-demand individually — what are the trade-offs?', p:'hi' },
        { t:'One twin seems to be gaining weight noticeably slower — at what growth difference do I bring them in urgently?', p:'hi', urg:true },
        { t:'What resources, support groups, or home support are available specifically for families with multiples?', p:'med' },
        { t:'How do I manage individual developmental differences between my twins without comparing them?', p:'med' },
        { t:'What signs indicate one twin is not thriving as well as the other?', p:'hi' },
      ]
    },
    complexhx: {
      label: 'Complex Maternal Medical History',
      icon: '📋',
      qs: [
        { t:'How does my specific condition affect my ability to breastfeed and my baby\'s health?', p:'hi' },
        { t:'Which of my pre-pregnancy medications is safe to restart now, and at what dose?', p:'hi' },
        { t:'What additional postpartum monitoring do I need for my condition, and how frequently?', p:'hi' },
        { t:'When should I be seen by my specialist (cardiologist, endocrinologist, neurologist, rheumatologist) postpartum?', p:'hi' },
        { t:'What signs indicate my condition is worsening and I need an urgent review?', p:'hi', urg:true },
        { t:'Does my condition increase my baby\'s risk for any inherited condition requiring early screening?', p:'med' },
      ]
    }
  }
};

// ── visit filter ─────────────────────────────────────────────────
function qbSetVisit(v, btn) {
  QB.visit = v;
  document.querySelectorAll('.qb-vtab').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  const sw = document.getElementById('qbSpecWrap');
  if (sw) sw.style.display = v === 'spec' ? 'block' : 'none';
  qbRender();
}

// ── toggle category ───────────────────────────────────────────────
function qbToggle(el) {
  const cat = el.dataset.cat;
  if (QB.sel.has(cat)) { QB.sel.delete(cat); el.classList.remove('on'); }
  else                  { QB.sel.add(cat);    el.classList.add('on');    }
  qbRender();
}
function qbAll()  { document.querySelectorAll('.qb-cat').forEach(el=>{el.classList.add('on');QB.sel.add(el.dataset.cat);}); qbRender(); }
function qbNone() {
  document.querySelectorAll('.qb-cat').forEach(el=>{el.classList.remove('on');});
  document.querySelectorAll('.qb-scard').forEach(el=>el.classList.remove('on'));
  QB.sel.clear(); QB.spec.clear(); qbRender();
}

// ── priority filter ───────────────────────────────────────────────
function qbFilter(level, btn) {
  if (QB.prio === level) {
    QB.prio = null;
    btn.classList.remove('pressed');
  } else {
    QB.prio = level;
    btn.classList.add('pressed');
    const other = level === 'hi' ? document.getElementById('ctrlMed') : document.getElementById('ctrlHi');
    if (other) other.classList.remove('pressed');
  }
  qbRender();
}

// ── specialist toggle ─────────────────────────────────────────────
function qbToggleSpec(key, el) {
  if (QB.spec.has(key)) { QB.spec.delete(key); el.classList.remove('on'); }
  else                   { QB.spec.add(key);    el.classList.add('on');    }
  qbRender();
}

// ── main render ───────────────────────────────────────────────────
function qbRender() {
  const out     = document.getElementById('qbOut');
  const countEl = document.getElementById('qbCount');
  const pillsEl = document.getElementById('qbPills');
  const search  = (document.getElementById('qbSearch')?.value || '').toLowerCase().trim();
  const isUrgent = QB.visit === 'urgent';

  const blocks = [];

  // ── standard categories ──
  QB.sel.forEach(cat => {
    const meta = QB.meta[cat];
    if (!meta) return;
    // visit filter
    if (QB.visit !== 'all' && QB.visit !== 'spec' && !meta.visits.includes(QB.visit)) return;
    const raw = QB.qs[cat] || [];
    const filtered = raw.filter(q => {
      if (isUrgent && !q.urg) return false;
      if (QB.prio === 'hi'  && q.p !== 'hi') return false;
      if (QB.prio === 'med' && q.p === 'inf') return false;
      if (q.visits && QB.visit !== 'all' && QB.visit !== 'spec' && !q.visits.includes(QB.visit)) return false;
      if (search && !q.t.toLowerCase().includes(search)) return false;
      return true;
    });
    if (filtered.length) blocks.push({ key:cat, meta, qs:filtered });
  });

  // ── specialist categories ──
  if (QB.visit === 'spec' || QB.visit === 'all') {
    QB.spec.forEach(key => {
      const sd = QB.specQs[key];
      if (!sd) return;
      const filtered = sd.qs.filter(q => {
        if (QB.prio === 'hi'  && q.p !== 'hi') return false;
        if (QB.prio === 'med' && q.p === 'inf') return false;
        if (search && !q.t.toLowerCase().includes(search)) return false;
        return true;
      });
      if (filtered.length) blocks.push({ key, meta:{label:sd.label, icon:sd.icon}, qs:filtered });
    });
  }

  const total = blocks.reduce((s, b) => s + b.qs.length, 0);

  // ── update counter ──
  if (countEl) countEl.textContent = total + (total === 1 ? ' Q' : ' Qs');

  // ── update pill badges ──
  if (pillsEl) {
    if (QB.sel.size === 0 && QB.spec.size === 0) {
      pillsEl.innerHTML = '<span class="qb-pill" style="font-style:italic;opacity:.7;">No categories selected</span>';
    } else {
      let ph = '';
      QB.sel.forEach(cat => {
        const m = QB.meta[cat];
        if (m) ph += `<span class="qb-pill on">${m.icon} ${m.label}</span>`;
      });
      QB.spec.forEach(key => {
        const s = QB.specQs[key];
        if (s) ph += `<span class="qb-pill on">🔬 ${s.label}</span>`;
      });
      pillsEl.innerHTML = ph;
    }
  }

  // ── enable / disable buttons ──
  ['qbBtnPrint','qbBtnCopy','qbBtnEmail'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.disabled = total === 0;
  });

  // ── empty state ──
  if (total === 0) {
    const isEmpty   = QB.sel.size === 0 && QB.spec.size === 0;
    const isSearch  = !!search;
    out.innerHTML = `<div class="qb-empty">
      <div class="qb-empty-ico">${isEmpty ? '📋' : isSearch ? '🔍' : '⚙️'}</div>
      <div class="qb-empty-msg">${isEmpty
        ? 'Select one or more categories above to get started'
        : isSearch
          ? 'No questions match "' + search + '" — try a different term'
          : 'No questions match the current filter — try removing the priority filter'
      }</div>
      <div class="qb-empty-sub">${!isEmpty && !isSearch ? 'Use the filter buttons above to change settings' : ''}</div>
    </div>`;
    return;
  }

  // ── build list ──
  let n = 0;
  let h = '<div class="qb-scroll">';
  blocks.forEach(({ key, meta, qs }) => {
    h += `<div class="qb-block">
      <div class="qb-block-hd">
        <span class="qb-block-ico">${meta.icon}</span>
        <span class="qb-block-title">${meta.label}</span>
        <span class="qb-block-count">${qs.length} question${qs.length!==1?'s':''}</span>
      </div>`;
    qs.forEach(q => {
      n++;
      const cls  = q.p === 'hi' ? 't-hi' : q.p === 'med' ? 't-med' : 't-inf';
      const lbl  = q.p === 'hi' ? '🔴 High' : q.p === 'med' ? '🟡 Med' : '🔵 Info';
      const urgBadge = q.urg ? '<span class="qb-tag t-urg">⚡ Urgent</span>' : '';
      h += `<div class="qb-q">
        <span class="qb-qn">${n}</span>
        <span class="qb-qt">${q.t}${urgBadge}</span>
        <span class="qb-tag ${cls}">${lbl}</span>
      </div>`;
    });
    h += '</div>';
  });
  h += '</div>';
  out.innerHTML = h;
}

// ── helpers to collect current visible questions ──────────────────
function _qbCurrentText() {
  const search = (document.getElementById('qbSearch')?.value || '').toLowerCase().trim();
  let text = 'DOCTOR VISIT QUESTION LIST\n' + '═'.repeat(52) + '\n\n';
  let n = 0;
  QB.sel.forEach(cat => {
    const meta = QB.meta[cat]; if (!meta) return;
    const raw = QB.qs[cat] || [];
    const qs = raw.filter(q => {
      if (QB.prio==='hi' && q.p!=='hi') return false;
      if (QB.prio==='med' && q.p==='inf') return false;
      if (search && !q.t.toLowerCase().includes(search)) return false;
      return true;
    });
    if (!qs.length) return;
    text += `${meta.icon} ${meta.label.toUpperCase()}\n${'─'.repeat(40)}\n`;
    qs.forEach(q => { text += `${++n}. ${q.t} [${q.p.toUpperCase()}]\n`; });
    text += '\n';
  });
  QB.spec.forEach(key => {
    const sd = QB.specQs[key]; if (!sd) return;
    const qs = sd.qs.filter(q => {
      if (QB.prio==='hi' && q.p!=='hi') return false;
      if (QB.prio==='med' && q.p==='inf') return false;
      if (search && !q.t.toLowerCase().includes(search)) return false;
      return true;
    });
    if (!qs.length) return;
    text += `🔬 ${sd.label.toUpperCase()}\n${'─'.repeat(40)}\n`;
    qs.forEach(q => { text += `${++n}. ${q.t}\n`; });
    text += '\n';
  });
  return text;
}

// ── print ─────────────────────────────────────────────────────────
function qbPrint() {
  if (QB.sel.size === 0 && QB.spec.size === 0) { showToast('Select at least one category first'); return; }
  const search = (document.getElementById('qbSearch')?.value || '').toLowerCase().trim();
  let body = `<h1 style="color:#d81b60;font-family:Georgia,serif">Doctor Visit Question Checklist</h1>
    <p style="color:#888;margin-bottom:1rem">Generated · Postpartum &amp; Newborn Care Guide${search?' · Filter: "'+search+'"':''}</p><hr>`;
  let n = 0;
  QB.sel.forEach(cat => {
    const meta = QB.meta[cat]; if (!meta) return;
    const qs = (QB.qs[cat]||[]).filter(q=>{
      if(QB.prio==='hi'&&q.p!=='hi')return false;
      if(QB.prio==='med'&&q.p==='inf')return false;
      if(search&&!q.t.toLowerCase().includes(search))return false;
      return true;
    });
    if (!qs.length) return;
    body += `<h3 style="color:#d81b60;margin-top:1.5rem">${meta.icon} ${meta.label}</h3><ol>`;
    qs.forEach(q => { body += `<li style="margin:.45rem 0">${q.t}${q.urg?' <strong style="color:#d32f2f">[URGENT]</strong>':''}</li>`; });
    body += '</ol>';
  });
  QB.spec.forEach(key => {
    const sd = QB.specQs[key]; if (!sd) return;
    body += `<h3 style="color:#d81b60;margin-top:1.5rem">🔬 ${sd.label}</h3><ol>`;
    sd.qs.forEach(q => { body += `<li style="margin:.45rem 0">${q.t}</li>`; n++; });
    body += '</ol>';
  });
  const w = window.open('','_blank');
  w.document.write(`<html><head><title>Doctor Questions</title><style>
    body{font-family:Arial,sans-serif;max-width:800px;margin:2rem auto;line-height:1.6;color:#212121}
    @media print{body{margin:0}}li{margin:.4rem 0}
  </style></head><body>${body}</body></html>`);
  w.document.close();
  setTimeout(()=>w.print(), 350);
}

// ── copy ──────────────────────────────────────────────────────────
function qbCopy() {
  if (QB.sel.size === 0 && QB.spec.size === 0) { showToast('Select at least one category first'); return; }
  navigator.clipboard.writeText(_qbCurrentText()).then(() => showToast('✅ Questions copied to clipboard!'));
}

// ── email ─────────────────────────────────────────────────────────
function qbEmail() {
  let body = encodeURIComponent(_qbCurrentText());
  window.location.href = 'mailto:?subject=My Doctor Visit Questions&body=' + body;
}

// ── legacy compat (old onclick references) ────────────────────────
function toggleCategory(btn) {
  const el = document.querySelector('[data-cat="'+btn.dataset.category+'"]');
  if (el) qbToggle(el);
}
function printQuestions()  { qbPrint(); }
function copyQuestions()   { qbCopy();  }
function updateQuestionList() { qbRender(); }

// ==================== MODAL SYSTEM ====================

// ==================== DOWNLOAD HELPERS ====================
function downloadTextFile(filename, content) {
  const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

function downloadHTMLFile(filename, htmlContent) {
  const fullHTML = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>${filename.replace('.html','')}</title>
<style>
  body{font-family:Georgia,serif;max-width:800px;margin:0 auto;padding:2rem;color:#212121;background:#fff;}
  h1{color:#d81b60;border-bottom:3px solid #ec407a;padding-bottom:.5rem;}
  h2{color:#d81b60;margin-top:2rem;border-left:5px solid #ec407a;padding-left:1rem;}
  h3{color:#555;margin-top:1.5rem;}
  ul{line-height:2;}
  li{margin-bottom:.3rem;}
  .section{background:#fce4ec;border-radius:12px;padding:1.5rem;margin:1.5rem 0;}
  .warning{background:#fff3e0;border-left:5px solid #ffa726;padding:1rem 1.5rem;border-radius:0 12px 12px 0;margin:1rem 0;}
  .emergency{background:#ffebee;border-left:5px solid #ef5350;padding:1rem 1.5rem;border-radius:0 12px 12px 0;margin:1rem 0;}
  .footer{margin-top:3rem;padding-top:1rem;border-top:1px solid #ddd;font-size:.85rem;color:#888;text-align:center;}
  @media print{body{margin:0;padding:1rem;}.no-print{display:none;}}
  .print-btn{background:#d81b60;color:#fff;border:none;padding:.8rem 2rem;border-radius:999px;font-size:1rem;cursor:pointer;display:block;margin:1rem auto;}
  .check-item{display:flex;align-items:flex-start;gap:.5rem;margin:.5rem 0;}
  .check-item input{margin-top:3px;width:16px;height:16px;cursor:pointer;flex-shrink:0;}
  .input-field{border:none;border-bottom:1px solid #ccc;background:transparent;font-size:.95rem;padding:.2rem;min-width:200px;}
</style>
</head>
<body>
${htmlContent}
<button class="print-btn no-print" onclick="window.print()">🖨️ Print This Document</button>
<div class="footer">Generated by Mother & Baby Care Guide — Print and keep in a safe place.</div>
</body>
</html>`;
  const blob = new Blob([fullHTML], { type: 'text/html;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

function downloadCSV(filename, csvContent) {
  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

function showSaveConfirmation(btn, msg) {
  const orig = btn.textContent;
  btn.textContent = '✅ ' + (msg || 'Downloaded!');
  btn.style.background = 'linear-gradient(135deg,#66bb6a,#388e3c)';
  btn.disabled = true;
  setTimeout(() => {
    btn.textContent = orig;
    btn.style.background = '';
    btn.disabled = false;
  }, 2500);
}

// ==================== RESOURCE CONTENT BUILDERS ====================
const resourceBuilders = {
  postpartumChecklist: () => `
    <h1>📋 Comprehensive Postpartum Checklist</h1>
    <p>Complete day-by-day guide for the first 6 weeks after delivery. Check each item as completed.</p>

    <h2>First 24 Hours</h2>
    <div class="check-item"><input type="checkbox"><label>Skin-to-skin contact with baby initiated</label></div>
    <div class="check-item"><input type="checkbox"><label>Breastfeeding initiated within 1 hour of birth</label></div>
    <div class="check-item"><input type="checkbox"><label>Bleeding monitored (heavy but not soaking pad in &lt;1 hour)</label></div>
    <div class="check-item"><input type="checkbox"><label>Pain management plan confirmed with care team</label></div>
    <div class="check-item"><input type="checkbox"><label>First urination achieved after delivery</label></div>
    <div class="check-item"><input type="checkbox"><label>Blood pressure checked (critical if pre-eclampsia history)</label></div>
    <div class="check-item"><input type="checkbox"><label>Vitamin K and eye drops given to baby (standard at birth)</label></div>

    <h2>Days 2–7</h2>
    <div class="check-item"><input type="checkbox"><label>Milk coming in (expected around day 3–4)</label></div>
    <div class="check-item"><input type="checkbox"><label>Baby feeding 8–12 times per day</label></div>
    <div class="check-item"><input type="checkbox"><label>Rest when baby sleeps — sleep deprivation is cumulative</label></div>
    <div class="check-item"><input type="checkbox"><label>Gentle walking tolerated without discomfort</label></div>
    <div class="check-item"><input type="checkbox"><label>No signs of wound/perineal infection (redness, heat, discharge)</label></div>
    <div class="check-item"><input type="checkbox"><label>Baby blues acknowledged — should begin improving by day 4–5</label></div>
    <div class="check-item"><input type="checkbox"><label>Lochia (discharge) transitioning red → pink</label></div>
    <div class="check-item"><input type="checkbox"><label>Baby has 5–6 wet diapers and 3–4 stools daily by day 4</label></div>

    <h2>Week 2</h2>
    <div class="check-item"><input type="checkbox"><label>First postpartum checkup scheduled or attended</label></div>
    <div class="check-item"><input type="checkbox"><label>Edinburgh Postnatal Depression Scale (EPDS) screening completed</label></div>
    <div class="check-item"><input type="checkbox"><label>Baby weight check — should be back at or above birth weight</label></div>
    <div class="check-item"><input type="checkbox"><label>Bleeding lighter, transitioning pink → brown</label></div>
    <div class="check-item"><input type="checkbox"><label>Perineal or incision pain visibly improving</label></div>
    <div class="check-item"><input type="checkbox"><label>Feeding routine beginning to establish</label></div>

    <h2>Weeks 3–6</h2>
    <div class="check-item"><input type="checkbox"><label>Activity level gradually increasing with no setbacks</label></div>
    <div class="check-item"><input type="checkbox"><label>Pelvic floor exercises (Kegels) started if medically cleared</label></div>
    <div class="check-item"><input type="checkbox"><label>Social connections and support network active</label></div>
    <div class="check-item"><input type="checkbox"><label>6-week comprehensive checkup scheduled</label></div>
    <div class="check-item"><input type="checkbox"><label>Lochia transitioned to white/clear discharge</label></div>
    <div class="check-item"><input type="checkbox"><label>Energy levels noticeably improving</label></div>
    <div class="check-item"><input type="checkbox"><label>Baby's next immunizations scheduled</label></div>

    <h2>6-Week Comprehensive Checkup</h2>
    <div class="check-item"><input type="checkbox"><label>Full physical examination including perineum/incision healing</label></div>
    <div class="check-item"><input type="checkbox"><label>Mental health assessment — formal depression screening</label></div>
    <div class="check-item"><input type="checkbox"><label>Contraception options discussed and decision made</label></div>
    <div class="check-item"><input type="checkbox"><label>Cleared for exercise and resuming sexual activity</label></div>
    <div class="check-item"><input type="checkbox"><label>Any ongoing concerns (leakage, pain, mood) addressed</label></div>
    <div class="check-item"><input type="checkbox"><label>Breastfeeding assessment if still ongoing</label></div>

    <div class="warning"><strong>⚠️ Seek immediate care if at any point:</strong> Fever &gt;38°C, soaking more than one pad per hour, foul-smelling discharge, severe headache, chest pain, difficulty breathing, or baby seems "not right."</div>`,

  emergencyCard: () => `
    <h1>📞 Emergency Contact Card</h1>
    <p><em>Print this card and post it on your refrigerator or keep it in your phone.</em></p>

    <h2>🚨 Emergency Numbers</h2>
    <div class="section">
      <p><strong>National Ambulance:</strong> 108 &nbsp;&nbsp;&nbsp; <strong>State Ambulance:</strong> 102</p>
      <p><strong>Police Emergency:</strong> 100 &nbsp;&nbsp;&nbsp; <strong>Fire Emergency:</strong> 101</p>
      <p><strong>Women's Helpline:</strong> 1091</p>
    </div>

    <h2>Your Personal Care Team</h2>
    <p><strong>Hospital Name:</strong> <input class="input-field" placeholder="Enter name..."/></p>
    <p><strong>Hospital Phone:</strong> <input class="input-field" placeholder="Enter number..."/></p>
    <p><strong>Pediatrician:</strong> <input class="input-field" placeholder="Dr. name..."/></p>
    <p><strong>Pediatrician Phone:</strong> <input class="input-field" placeholder="Enter number..."/></p>
    <p><strong>OB/GYN:</strong> <input class="input-field" placeholder="Dr. name..."/></p>
    <p><strong>OB/GYN Phone:</strong> <input class="input-field" placeholder="Enter number..."/></p>
    <p><strong>Lactation Consultant:</strong> <input class="input-field" placeholder="Name..."/></p>
    <p><strong>Lactation Phone:</strong> <input class="input-field" placeholder="Enter number..."/></p>
    <p><strong>Trusted Family Contact:</strong> <input class="input-field" placeholder="Name &amp; number..."/></p>

    <h2>🔴 Call 108/102 Immediately For Baby</h2>
    <div class="emergency">
      <ul>
        <li>Fever &gt;38°C (100.4°F) rectal OR temperature &lt;35.5°C (96°F)</li>
        <li>Breathing faster than 60 breaths/min, grunting, ribs pulling in, blue lips</li>
        <li>Seizures or jerking movements</li>
        <li>Extreme lethargy — very difficult or impossible to wake</li>
        <li>Yellow skin in first 24 hours or deepening rapidly</li>
        <li>Refuses to feed or very weak suck</li>
        <li>Mottled, pale, or blotchy skin</li>
        <li>Bulging fontanelle (soft spot)</li>
      </ul>
    </div>

    <h2>🔴 Call 108/102 Immediately For Mother</h2>
    <div class="emergency">
      <ul>
        <li>Soaking more than one pad per hour — possible hemorrhage</li>
        <li>Severe headache with visual disturbances — possible pre-eclampsia</li>
        <li>Chest pain or difficulty breathing</li>
        <li>Fever &gt;38°C with chills and body aches</li>
        <li>Calf pain, swelling, or redness — possible blood clot</li>
        <li>Thoughts of harming self or baby — call immediately</li>
        <li>Foul-smelling vaginal discharge with fever</li>
      </ul>
    </div>`,

  weightChart: () => {
    let csvRows = ['Week,Expected Weight (g),Actual Weight (g),Notes'];
    const baseWeight = 3200;
    for (let w = 0; w <= 12; w++) {
      let expected = w === 0 ? baseWeight : w <= 1 ? baseWeight - 150 : Math.round(baseWeight + (w - 1) * 170);
      csvRows.push(`Week ${w},${expected},,`);
    }
    return csvRows.join('\n');
  },

  weightChartHTML: () => `
    <h1>📊 Baby Weight Tracker Chart</h1>
    <p>Track your baby's weight gain week by week. Healthy weight gain indicates adequate feeding and development.</p>

    <h2>Expected Growth Pattern</h2>
    <div class="section">
      <ul>
        <li><strong>First week:</strong> May lose up to 7–10% of birth weight — this is normal</li>
        <li><strong>By 2 weeks:</strong> Should regain birth weight</li>
        <li><strong>Weeks 1–4:</strong> Gain approximately 150–200g (5–7 oz) per week</li>
        <li><strong>Months 1–6:</strong> Gain approximately 450–900g (1–2 lbs) per month</li>
        <li><strong>Length:</strong> Grows about 2.5–3.8 cm (1–1.5 inches) per month in first 6 months</li>
      </ul>
    </div>

    <h2>Weight Log</h2>
    <table style="width:100%;border-collapse:collapse;margin-top:1rem;">
      <thead>
        <tr style="background:#fce4ec;">
          <th style="border:1px solid #ddd;padding:.6rem;text-align:left;">Date</th>
          <th style="border:1px solid #ddd;padding:.6rem;text-align:left;">Age (weeks)</th>
          <th style="border:1px solid #ddd;padding:.6rem;text-align:left;">Weight (kg/g)</th>
          <th style="border:1px solid #ddd;padding:.6rem;text-align:left;">Change from last</th>
          <th style="border:1px solid #ddd;padding:.6rem;text-align:left;">Notes</th>
        </tr>
      </thead>
      <tbody>
        ${Array.from({length:14}, (_,i) => `<tr><td style="border:1px solid #ddd;padding:.6rem;height:2rem;"></td><td style="border:1px solid #ddd;padding:.6rem;">Week ${i}</td><td style="border:1px solid #ddd;padding:.6rem;"></td><td style="border:1px solid #ddd;padding:.6rem;"></td><td style="border:1px solid #ddd;padding:.6rem;"></td></tr>`).join('')}
      </tbody>
    </table>

    <h2>When to Call Your Pediatrician</h2>
    <div class="warning">
      <ul>
        <li>Baby hasn't regained birth weight by 14 days</li>
        <li>Weight drops below the lowest point after initial regain</li>
        <li>Weight gain less than 140g (5 oz) per week after first month</li>
        <li>Baby crosses two major percentile lines downward on growth chart</li>
        <li>Head circumference or length deviating significantly from weight percentile</li>
      </ul>
    </div>`,

  vaccinationSchedule: () => `
    <h1>💉 Vaccination Schedule</h1>
    <p>Complete immunization schedule for newborns. Staying on schedule provides maximum protection during the most vulnerable period.</p>

    <h2>At Birth (Before Discharge)</h2>
    <div class="check-item"><input type="checkbox"><label><strong>BCG</strong> — Tuberculosis protection (intradermal, left arm)</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>OPV-0</strong> — Oral Polio Vaccine (zero dose)</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>Hepatitis B (Birth dose)</strong> — Given within 24 hours of birth</label></div>
    <div class="check-item"><input type="checkbox"><label>Birth dose date: <input class="input-field" placeholder="DD/MM/YYYY"/></label></div>

    <h2>6 Weeks (42 Days)</h2>
    <div class="check-item"><input type="checkbox"><label><strong>DTwP-1 / DTaP-1</strong> — Diphtheria, Tetanus, Pertussis (1st dose)</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>IPV-1</strong> — Inactivated Polio Vaccine (1st dose)</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>Hib-1</strong> — Haemophilus influenzae type b (1st dose)</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>Hepatitis B-2</strong> — 2nd dose</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>Rotavirus-1</strong> — Oral vaccine (1st dose)</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>PCV-1</strong> — Pneumococcal conjugate (1st dose) if on schedule</label></div>
    <div class="check-item"><input type="checkbox"><label>6-week appointment date: <input class="input-field" placeholder="DD/MM/YYYY"/></label></div>

    <h2>10 Weeks</h2>
    <div class="check-item"><input type="checkbox"><label><strong>DTwP-2 / DTaP-2</strong> — 2nd dose</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>IPV-2</strong> — 2nd dose</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>Hib-2</strong> — 2nd dose</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>Rotavirus-2</strong> — 2nd dose</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>PCV-2</strong> — 2nd dose</label></div>
    <div class="check-item"><input type="checkbox"><label>10-week appointment date: <input class="input-field" placeholder="DD/MM/YYYY"/></label></div>

    <h2>14 Weeks</h2>
    <div class="check-item"><input type="checkbox"><label><strong>DTwP-3 / DTaP-3</strong> — 3rd dose</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>IPV-3</strong> — 3rd dose</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>Hib-3</strong> — 3rd dose</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>Hepatitis B-3</strong> — 3rd dose</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>Rotavirus-3</strong> — 3rd dose (if 3-dose schedule)</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>PCV-3</strong> — 3rd dose</label></div>
    <div class="check-item"><input type="checkbox"><label>14-week appointment date: <input class="input-field" placeholder="DD/MM/YYYY"/></label></div>

    <h2>6 Months</h2>
    <div class="check-item"><input type="checkbox"><label><strong>Influenza vaccine</strong> — Annual, recommended 6 months+</label></div>
    <div class="check-item"><input type="checkbox"><label>6-month appointment date: <input class="input-field" placeholder="DD/MM/YYYY"/></label></div>

    <div class="warning"><strong>Tip:</strong> Mild fever and soreness after vaccines is normal and expected. Give paracetamol if needed. A high fever (&gt;39°C), prolonged crying &gt;3 hours, or unusual drowsiness after vaccination warrants a call to your pediatrician.</div>`,

  feedingLog: () => {
    let csv = 'Date,Time,Feeding Type,Duration/Amount (min or ml),Left Breast (min),Right Breast (min),Wet Diapers (count),Dirty Diapers (count),Notes\n';
    for (let i = 0; i < 40; i++) csv += ',,,,,,,,\n';
    return csv;
  },

  feedingLogHTML: () => `
    <h1>🍼 Daily Feeding &amp; Diaper Log</h1>
    <p>Track feedings and output daily. This log helps identify feeding patterns and ensures adequate hydration. Bring it to all medical appointments.</p>

    <h2>Daily Targets (After Day 4)</h2>
    <div class="section">
      <ul>
        <li><strong>Feedings:</strong> 8–12 times per 24 hours (every 2–3 hours)</li>
        <li><strong>Wet diapers:</strong> 6+ per day after day 4 (heavy when picked up)</li>
        <li><strong>Dirty diapers:</strong> 3–4+ per day for breastfed babies (may vary for formula-fed)</li>
        <li><strong>Breastfeeding duration:</strong> 10–20 minutes per side, or until baby releases</li>
      </ul>
    </div>

    <h2>Feeding Log — Day: <input class="input-field" placeholder="Enter date..."/></h2>
    <table style="width:100%;border-collapse:collapse;font-size:.9rem;">
      <thead>
        <tr style="background:#fce4ec;">
          <th style="border:1px solid #ddd;padding:.5rem;">Time</th>
          <th style="border:1px solid #ddd;padding:.5rem;">Type<br/><small>BF/FF/Pump</small></th>
          <th style="border:1px solid #ddd;padding:.5rem;">Left<br/><small>(min)</small></th>
          <th style="border:1px solid #ddd;padding:.5rem;">Right<br/><small>(min)</small></th>
          <th style="border:1px solid #ddd;padding:.5rem;">Amount<br/><small>(ml if bottle)</small></th>
          <th style="border:1px solid #ddd;padding:.5rem;">Wet<br/><small>diaper?</small></th>
          <th style="border:1px solid #ddd;padding:.5rem;">Dirty<br/><small>diaper?</small></th>
          <th style="border:1px solid #ddd;padding:.5rem;">Notes</th>
        </tr>
      </thead>
      <tbody>
        ${Array.from({length:12}, () => '<tr>' + Array.from({length:8}, () => '<td style="border:1px solid #ddd;padding:.4rem;height:1.8rem;"></td>').join('') + '</tr>').join('')}
      </tbody>
    </table>

    <h2>Daily Totals</h2>
    <p><strong>Total feedings today:</strong> <input class="input-field" placeholder="Count..."/>  &nbsp; <strong>Total wet diapers:</strong> <input class="input-field" placeholder="Count..."/>  &nbsp; <strong>Total dirty diapers:</strong> <input class="input-field" placeholder="Count..."/></p>

    <div class="warning">
      <strong>Call your pediatrician if:</strong> Fewer than 6 wet diapers after day 4, no dirty diapers for 24+ hours (breastfed), fewer than 8 feedings in 24 hours, or baby is difficult to wake for feeds.
    </div>`,

  hospitalBag: () => `
    <h1>🏥 Hospital Bag Checklist</h1>
    <p>Pack your bag by 36 weeks. This comprehensive list covers everything for mother, baby, and partner.</p>

    <h2>For Mother — Labour &amp; Delivery</h2>
    <div class="check-item"><input type="checkbox"><label>Birth plan (printed copies for hospital and personal file)</label></div>
    <div class="check-item"><input type="checkbox"><label>ID and insurance/health card documents</label></div>
    <div class="check-item"><input type="checkbox"><label>Hospital registration paperwork (pre-fill if possible)</label></div>
    <div class="check-item"><input type="checkbox"><label>Loose, comfortable nightgown or hospital gown alternative</label></div>
    <div class="check-item"><input type="checkbox"><label>Nursing bra (2–3 pieces)</label></div>
    <div class="check-item"><input type="checkbox"><label>Non-slip socks or slippers</label></div>
    <div class="check-item"><input type="checkbox"><label>Hair ties and lip balm (essential during labour)</label></div>
    <div class="check-item"><input type="checkbox"><label>Phone charger and power bank</label></div>
    <div class="check-item"><input type="checkbox"><label>Comfort items: pillow, music playlist, stress ball</label></div>

    <h2>For Mother — Postpartum Recovery</h2>
    <div class="check-item"><input type="checkbox"><label>Comfortable, loose pyjamas or nightgowns (2–3 sets, button-front for feeding)</label></div>
    <div class="check-item"><input type="checkbox"><label>Maternity pads (heavy flow — hospital may provide but bring extras)</label></div>
    <div class="check-item"><input type="checkbox"><label>Disposable mesh underwear or high-waist cotton underwear</label></div>
    <div class="check-item"><input type="checkbox"><label>Perineal ice packs or cooling pads</label></div>
    <div class="check-item"><input type="checkbox"><label>Toiletries: toothbrush, shampoo, body wash, dry shampoo</label></div>
    <div class="check-item"><input type="checkbox"><label>Nipple cream / lanolin (for breastfeeding)</label></div>
    <div class="check-item"><input type="checkbox"><label>Comfortable going-home outfit (maternity clothes still needed)</label></div>
    <div class="check-item"><input type="checkbox"><label>Prescribed medications with clear dosing instructions</label></div>

    <h2>For Baby</h2>
    <div class="check-item"><input type="checkbox"><label>2–3 bodysuits (newborn and 0–3 month sizes)</label></div>
    <div class="check-item"><input type="checkbox"><label>2–3 sleepsuit/footed pyjamas (newborn size)</label></div>
    <div class="check-item"><input type="checkbox"><label>Hat (hospitals are cool; newborns lose heat through their head)</label></div>
    <div class="check-item"><input type="checkbox"><label>Mittens to prevent self-scratching</label></div>
    <div class="check-item"><input type="checkbox"><label>Swaddle blankets (2–3)</label></div>
    <div class="check-item"><input type="checkbox"><label>Newborn nappies / diapers (pack of 20–30)</label></div>
    <div class="check-item"><input type="checkbox"><label>Fragrance-free baby wipes or cotton wool for cleaning</label></div>
    <div class="check-item"><input type="checkbox"><label>Going-home outfit — check the weather and dress in layers</label></div>
    <div class="check-item"><input type="checkbox"><label><strong>Infant car seat — MUST be properly installed before leaving hospital</strong></label></div>

    <h2>For Partner / Support Person</h2>
    <div class="check-item"><input type="checkbox"><label>Change of clothes + toiletries (for overnight stays)</label></div>
    <div class="check-item"><input type="checkbox"><label>Snacks and drinks (hospital cafeteria may have limited hours)</label></div>
    <div class="check-item"><input type="checkbox"><label>Phone charger and entertainment for waiting periods</label></div>
    <div class="check-item"><input type="checkbox"><label>Camera or ensure phone is fully charged</label></div>
    <div class="check-item"><input type="checkbox"><label>List of people to notify after birth with their contact details</label></div>
    <div class="check-item"><input type="checkbox"><label>Cash for parking, vending machines, or unexpected needs</label></div>
    <div class="check-item"><input type="checkbox"><label>Pillow and blanket if planning to stay overnight</label></div>

    <h2>Important Documents</h2>
    <div class="check-item"><input type="checkbox"><label>Mother's identification (Aadhar/passport/driving licence)</label></div>
    <div class="check-item"><input type="checkbox"><label>Health insurance cards and pre-authorisation paperwork</label></div>
    <div class="check-item"><input type="checkbox"><label>Previous medical records relevant to pregnancy</label></div>
    <div class="check-item"><input type="checkbox"><label>Paediatrician's contact details and appointment card</label></div>
    <div class="check-item"><input type="checkbox"><label>Birth plan copies (at least 3)</label></div>

    <div class="warning"><strong>Car Seat Reminder:</strong> Never leave the hospital without a properly installed rear-facing infant car seat. Have it professionally checked if unsure. This is the law and the most important safety item you can own.</div>`
};

function openModal(type) {
  const overlay = document.getElementById('modalOverlay');
  const title = document.getElementById('modalTitle');
  const body = document.getElementById('modalBody');
  
  const modalContent = {
    sepsisInfo: {
      title: 'Understanding Neonatal Sepsis',
      content: `
        <h3>What is Neonatal Sepsis?</h3>
        <p>Neonatal sepsis is a serious bacterial infection in a newborn's bloodstream. It can progress rapidly and become life-threatening within hours.</p>
        
        <h3>Types of Sepsis</h3>
        <p><strong>Early-Onset Sepsis (EOS):</strong> Occurs in first 72 hours, usually within 24 hours. Caused by organisms from mother during delivery (Group B Strep, E. coli).</p>
        <p><strong>Late-Onset Sepsis (LOS):</strong> Occurs after 1 week up to 28 days. Often from environmental sources.</p>
        
        <h3>Common Organisms</h3>
        <ul>
          <li>Group B Streptococcus (GBS) — most common</li>
          <li>E. coli — especially in premature babies</li>
          <li>Listeria monocytogenes</li>
          <li>Other gram-negative bacteria</li>
        </ul>
        
        <h3>Why It's Dangerous</h3>
        <p>Newborns have immature immune systems and can't fight infections effectively. Without treatment, sepsis can lead to meningitis, pneumonia, organ failure, or death.</p>
        
        <h3>Prevention</h3>
        <ul>
          <li>GBS screening and antibiotics during labor if positive</li>
          <li>Strict hand hygiene for all caregivers and visitors</li>
          <li>Limiting visitors in the first weeks</li>
          <li>Early recognition of warning signs</li>
        </ul>
      `
    },
    warningChecker: {
      title: 'Sepsis Warning Signs Checklist',
      content: `
        <div style="background: rgba(255, 23, 68, 0.1); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;">
          <h3 style="color: var(--emergency);">⚠️ If ANY of these signs are present, seek immediate medical care:</h3>
        </div>
        <h4>Temperature Issues</h4>
        <ul>
          <li>Fever >38°C (100.4°F) [Rectal temperature]</li>
          <li>Hypothermia &lt;35.5°C (96°F)</li>
          <li>Baby feels unusually hot or cold to touch</li>
        </ul>
        <h4>Feeding Problems</h4>
        <ul>
          <li>Refuses to feed or weak sucking</li>
          <li>Vomits all or most feeds</li>
          <li>No interest in feeding</li>
        </ul>
        <h4>Behavioral Changes</h4>
        <ul>
          <li>Extreme lethargy — very difficult to wake</li>
          <li>No spontaneous movement / floppy</li>
          <li>Irritable with high-pitched crying</li>
        </ul>
        <h4>Breathing Issues</h4>
        <ul>
          <li>Fast breathing (>60 breaths per minute)</li>
          <li>Grunting with each breath</li>
          <li>Flaring nostrils / chest in-drawing</li>
          <li>Blue lips or fingertips</li>
        </ul>
        <h4>Other Signs</h4>
        <ul>
          <li>Jaundice appearing in first 24 hours</li>
          <li>Mottled or pale skin</li>
          <li>Seizures or jerking movements</li>
          <li>Bulging fontanelle</li>
        </ul>
        <div style="background: var(--emergency); color: white; padding: 1.5rem; border-radius: 12px; margin-top: 1.5rem; text-align: center;">
          <h3>DO NOT WAIT — CALL 108/102 NOW</h3>
          <p>Sepsis progresses within hours. Go directly to hospital emergency.</p>
        </div>
      `
    },
    postpartumChecklist: {
      title: '📋 Comprehensive Postpartum Checklist',
      content: `
        <div style="margin-bottom:1.5rem;">
          <p style="color:var(--text-soft);margin-bottom:1rem;">Check off items as you complete them. Download a printable copy to keep on hand.</p>
          <button class="btn-primary" style="font-size:.9rem;padding:.7rem 1.5rem;" onclick="(function(btn){downloadHTMLFile('Postpartum_Checklist.html', resourceBuilders.postpartumChecklist()); showSaveConfirmation(btn,'Downloaded!');})(this)">⬇️ Download Printable Checklist</button>
        </div>
        <h3>First 24 Hours</h3>
        <ul>
          <li>☐ Skin-to-skin contact with baby</li>
          <li>☐ Breastfeeding initiated within 1 hour of birth</li>
          <li>☐ Bleeding monitored (heavy but not soaking pad in &lt;1 hour)</li>
          <li>☐ Pain management plan confirmed</li>
          <li>☐ First urination achieved after delivery</li>
          <li>☐ Blood pressure checked (critical if pre-eclampsia history)</li>
        </ul>
        <h3>Days 2–7</h3>
        <ul>
          <li>☐ Milk coming in (day 3–4) — engorgement is common</li>
          <li>☐ Baby feeding 8–12 times per day</li>
          <li>☐ Rest when baby sleeps</li>
          <li>☐ Gentle walking as tolerated</li>
          <li>☐ Watch for infection signs (fever, foul discharge, wound heat/redness)</li>
          <li>☐ Baby blues common — should begin improving by day 4–5</li>
          <li>☐ Lochia (discharge) transitioning red → pink</li>
          <li>☐ Baby has 5–6 wet + 3–4 dirty diapers daily by day 4</li>
        </ul>
        <h3>Week 2</h3>
        <ul>
          <li>☐ First postpartum checkup attended</li>
          <li>☐ Postnatal depression screening (EPDS) completed</li>
          <li>☐ Baby weight check — should be back at birth weight</li>
          <li>☐ Bleeding lighter, transitioning pink → brown</li>
          <li>☐ Establishing feeding routine</li>
        </ul>
        <h3>Weeks 3–6</h3>
        <ul>
          <li>☐ Activity level gradually increasing</li>
          <li>☐ Pelvic floor exercises (Kegels) started if cleared</li>
          <li>☐ Social connections and support network active</li>
          <li>☐ 6-week checkup scheduled</li>
          <li>☐ Lochia transitioned to white/clear discharge</li>
        </ul>
        <h3>6-Week Comprehensive Checkup</h3>
        <ul>
          <li>☐ Full physical examination</li>
          <li>☐ Formal mental health assessment</li>
          <li>☐ Contraception options discussed and decided</li>
          <li>☐ Clearance for exercise and sexual activity</li>
          <li>☐ All ongoing concerns addressed</li>
        </ul>
      `
    },
    emergencyCard: {
      title: '📞 Emergency Contact Card',
      content: `
        <div style="margin-bottom:1.5rem;">
          <p style="color:var(--text-soft);margin-bottom:1rem;">Fill in your personal contacts, then download and print. Post on your refrigerator.</p>
          <button class="btn-primary" style="font-size:.9rem;padding:.7rem 1.5rem;" onclick="(function(btn){downloadHTMLFile('Emergency_Contact_Card.html', resourceBuilders.emergencyCard()); showSaveConfirmation(btn,'Downloaded!');})(this)">⬇️ Download &amp; Print Card</button>
        </div>
        <div style="border: 3px solid var(--primary); padding: 2rem; border-radius: 16px; background: white;">
          <h2 style="text-align: center; color: var(--primary); margin-bottom: 2rem;">POSTPARTUM EMERGENCY CONTACTS</h2>
          <div style="margin-bottom: 2rem;">
            <h3>Emergency Services</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
              <div>National Ambulance: <strong>108</strong></div>
              <div>State Ambulance: <strong>102</strong></div>
              <div>Women's Helpline: <strong>1091</strong></div>
              <div>Police: <strong>100</strong></div>
            </div>
          </div>
          <div style="margin-bottom: 2rem;">
            <h3>Personal Contacts</h3>
            <div style="background: #f5f5f5; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">Hospital: _______________________</div>
            <div style="background: #f5f5f5; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">Pediatrician: _______________________</div>
            <div style="background: #f5f5f5; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">OB/GYN: _______________________</div>
            <div style="background: #f5f5f5; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">Lactation Consultant: _______________________</div>
            <div style="background: #f5f5f5; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">Trusted Family Contact: _______________________</div>
          </div>
          <div style="background: var(--emergency); color: white; padding: 1.5rem; border-radius: 12px;">
            <h3>Call 108/102 Immediately For:</h3>
            <ul style="margin-left: 1.5rem; line-height: 1.8;">
              <li>Baby fever &gt;38°C or temp &lt;35.5°C</li>
              <li>Difficulty breathing, blue lips, ribs drawing in</li>
              <li>Seizures or extreme lethargy</li>
              <li>Refuses all feeds / very weak suck</li>
              <li>Mother: heavy bleeding, severe headache, chest pain</li>
            </ul>
          </div>
        </div>
      `
    },
    weightChart: {
      title: '📊 Baby Weight Tracker',
      content: `
        <div style="margin-bottom:1.5rem;display:flex;gap:1rem;flex-wrap:wrap;">
          <button class="btn-primary" style="font-size:.9rem;padding:.7rem 1.5rem;" onclick="(function(btn){downloadHTMLFile('Baby_Weight_Chart.html', resourceBuilders.weightChartHTML()); showSaveConfirmation(btn,'Downloaded!');})(this)">⬇️ Download Printable Chart</button>
          <button class="btn-primary" style="font-size:.9rem;padding:.7rem 1.5rem;background:linear-gradient(135deg,#4db6ac,#00897b)!important;" onclick="(function(btn){downloadCSV('Baby_Weight_Tracker.csv', resourceBuilders.weightChart()); showSaveConfirmation(btn,'CSV Saved!');})(this)">📊 Download CSV (Excel)</button>
        </div>
        <h3>Expected Growth Patterns</h3>
        <ul>
          <li><strong>First week:</strong> May lose up to 7–10% of birth weight — normal physiological loss</li>
          <li><strong>By 2 weeks:</strong> Should regain birth weight</li>
          <li><strong>Months 1–4:</strong> Gain ~150–200g (5–7 oz) per week</li>
          <li><strong>Length:</strong> Grows ~2.5 cm (1 inch) per month in first 6 months</li>
          <li><strong>Head:</strong> Grows ~1.5 cm per month in first 3 months</li>
        </ul>
        <h3>Weight Log (fill in at each appointment)</h3>
        <table style="width:100%;border-collapse:collapse;margin-top:1rem;">
          <tr style="background:#fce4ec;"><th style="border:1px solid #ddd;padding:.5rem;">Date</th><th style="border:1px solid #ddd;padding:.5rem;">Age (wks)</th><th style="border:1px solid #ddd;padding:.5rem;">Weight</th><th style="border:1px solid #ddd;padding:.5rem;">Length</th><th style="border:1px solid #ddd;padding:.5rem;">Head Circ.</th><th style="border:1px solid #ddd;padding:.5rem;">Notes</th></tr>
          ${Array.from({length:10}, (_,i) => `<tr><td style="border:1px solid #ddd;padding:.4rem;height:2rem;"></td><td style="border:1px solid #ddd;padding:.4rem;">Week ${i*2}</td><td style="border:1px solid #ddd;padding:.4rem;"></td><td style="border:1px solid #ddd;padding:.4rem;"></td><td style="border:1px solid #ddd;padding:.4rem;"></td><td style="border:1px solid #ddd;padding:.4rem;"></td></tr>`).join('')}
        </table>
        <div style="background:#fff3e0;border-left:4px solid #ffa726;padding:1rem;border-radius:0 8px 8px 0;margin-top:1.5rem;">
          <strong>⚠️ Alert pediatrician if:</strong> Baby hasn't regained birth weight by 14 days, or gains less than 140g (5 oz) per week in the first month, or crosses two percentile lines downward.
        </div>
      `
    },
    vaccinationSchedule: {
      title: '💉 Vaccination Schedule',
      content: `
        <div style="margin-bottom:1.5rem;">
          <p style="color:var(--text-soft);margin-bottom:1rem;">Printable immunization tracker with appointment reminders. Keep this at every visit.</p>
          <button class="btn-primary" style="font-size:.9rem;padding:.7rem 1.5rem;" onclick="(function(btn){downloadHTMLFile('Vaccination_Schedule.html', resourceBuilders.vaccinationSchedule()); showSaveConfirmation(btn,'Downloaded!');})(this)">⬇️ Download Schedule</button>
        </div>
        <div style="background: #e8f5e9; padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;">
          <p><strong>Baby's Name:</strong> ___________________________  <strong>DOB:</strong> _______________</p>
        </div>
        <h3>At Birth</h3>
        <ul>
          <li>☐ <strong>BCG</strong> — Tuberculosis (intradermal, left arm)</li>
          <li>☐ <strong>OPV-0</strong> — Oral Polio Vaccine (zero dose)</li>
          <li>☐ <strong>Hepatitis B</strong> — Birth dose within 24 hours</li>
        </ul>
        <h3>6 Weeks</h3>
        <ul>
          <li>☐ <strong>DTwP/DTaP-1</strong> + <strong>IPV-1</strong> + <strong>Hib-1</strong></li>
          <li>☐ <strong>Hepatitis B-2</strong> + <strong>Rotavirus-1</strong> + <strong>PCV-1</strong></li>
          <li>Due date: _______________</li>
        </ul>
        <h3>10 Weeks</h3>
        <ul>
          <li>☐ <strong>DTwP/DTaP-2</strong> + <strong>IPV-2</strong> + <strong>Hib-2</strong></li>
          <li>☐ <strong>Rotavirus-2</strong> + <strong>PCV-2</strong></li>
          <li>Due date: _______________</li>
        </ul>
        <h3>14 Weeks</h3>
        <ul>
          <li>☐ <strong>DTwP/DTaP-3</strong> + <strong>IPV-3</strong> + <strong>Hib-3</strong></li>
          <li>☐ <strong>Hepatitis B-3</strong> + <strong>Rotavirus-3</strong> + <strong>PCV-3</strong></li>
          <li>Due date: _______________</li>
        </ul>
        <h3>6 Months</h3>
        <ul>
          <li>☐ <strong>Influenza</strong> — Recommended annually from 6 months</li>
          <li>Due date: _______________</li>
        </ul>
        <div style="background:#fff3e0;border-left:4px solid #ffa726;padding:1rem;border-radius:0 8px 8px 0;margin-top:1.5rem;">
          <strong>After vaccines:</strong> Mild fever and local soreness is normal. Give paracetamol if needed. Seek care for fever &gt;39°C, crying &gt;3 hours, or unusual drowsiness.
        </div>
      `
    },
    feedingLog: {
      title: '🍼 Feeding Log Template',
      content: `
        <div style="margin-bottom:1.5rem;display:flex;gap:1rem;flex-wrap:wrap;">
          <button class="btn-primary" style="font-size:.9rem;padding:.7rem 1.5rem;" onclick="(function(btn){downloadHTMLFile('Feeding_Log.html', resourceBuilders.feedingLogHTML()); showSaveConfirmation(btn,'Downloaded!');})(this)">⬇️ Download Printable Log</button>
          <button class="btn-primary" style="font-size:.9rem;padding:.7rem 1.5rem;background:linear-gradient(135deg,#4db6ac,#00897b)!important;" onclick="(function(btn){downloadCSV('Feeding_Log_Template.csv', resourceBuilders.feedingLog()); showSaveConfirmation(btn,'CSV Saved!');})(this)">📊 Download CSV (Excel)</button>
        </div>
        <h3>Daily Targets (After Day 4)</h3>
        <ul>
          <li><strong>Feedings:</strong> 8–12 times per 24 hours (every 2–3 hours)</li>
          <li><strong>Wet diapers:</strong> 6+ per day (heavy when picked up)</li>
          <li><strong>Dirty diapers:</strong> 3–4+ per day (breastfed); formula-fed varies</li>
          <li><strong>Breastfeeding:</strong> 10–20 min per side, until baby releases</li>
        </ul>
        <h3>Today's Log — Date: _______________</h3>
        <table style="width:100%;border-collapse:collapse;font-size:.85rem;margin-top:.5rem;">
          <tr style="background:#fce4ec;">
            <th style="border:1px solid #ddd;padding:.4rem;">Time</th>
            <th style="border:1px solid #ddd;padding:.4rem;">Type<br/><small>BF/FF/Pump</small></th>
            <th style="border:1px solid #ddd;padding:.4rem;">Left<br/><small>min</small></th>
            <th style="border:1px solid #ddd;padding:.4rem;">Right<br/><small>min</small></th>
            <th style="border:1px solid #ddd;padding:.4rem;">Amount<br/><small>ml</small></th>
            <th style="border:1px solid #ddd;padding:.4rem;">Wet?</th>
            <th style="border:1px solid #ddd;padding:.4rem;">Dirty?</th>
            <th style="border:1px solid #ddd;padding:.4rem;">Notes</th>
          </tr>
          ${Array.from({length:12}, () => '<tr>' + Array.from({length:8}, () => '<td style="border:1px solid #ddd;padding:.3rem;height:1.6rem;"></td>').join('') + '</tr>').join('')}
        </table>
        <p style="margin-top:1rem;"><strong>Totals:</strong> Feedings: ___ &nbsp; Wet diapers: ___ &nbsp; Dirty diapers: ___</p>
        <div style="background:#fff3e0;border-left:4px solid #ffa726;padding:1rem;border-radius:0 8px 8px 0;margin-top:1rem;">
          <strong>Call pediatrician if:</strong> Fewer than 6 wet diapers after day 4, no dirty diapers for 24+ hours (breastfed), fewer than 8 feedings in 24 hours, or baby difficult to wake for feeds.
        </div>
      `
    },
    hospitalBag: {
      title: '🏥 Hospital Bag Checklist',
      content: `
        <div style="margin-bottom:1.5rem;">
          <p style="color:var(--text-soft);margin-bottom:1rem;">Pack by 36 weeks. Comprehensive list for mother, baby, and partner. Download the full interactive checklist.</p>
          <button class="btn-primary" style="font-size:.9rem;padding:.7rem 1.5rem;" onclick="(function(btn){downloadHTMLFile('Hospital_Bag_Checklist.html', resourceBuilders.hospitalBag()); showSaveConfirmation(btn,'Downloaded!');})(this)">⬇️ Download Full Checklist</button>
        </div>
        <h3>For Mother — Labour &amp; Delivery</h3>
        <ul>
          <li>☐ Birth plan (printed copies)</li>
          <li>☐ ID, insurance, and hospital registration documents</li>
          <li>☐ Loose nightgown or comfortable clothing</li>
          <li>☐ Nursing bras (2–3), non-slip socks, hair ties, lip balm</li>
          <li>☐ Phone charger + power bank</li>
        </ul>
        <h3>For Mother — Postpartum</h3>
        <ul>
          <li>☐ Comfortable button-front pyjamas (2–3 sets)</li>
          <li>☐ Heavy maternity pads</li>
          <li>☐ Disposable/mesh underwear</li>
          <li>☐ Nipple cream / lanolin</li>
          <li>☐ Toiletries including dry shampoo</li>
          <li>☐ Comfortable going-home outfit</li>
        </ul>
        <h3>For Baby</h3>
        <ul>
          <li>☐ 2–3 bodysuits + sleepsuits (newborn &amp; 0–3 months)</li>
          <li>☐ Hat, mittens, swaddle blankets</li>
          <li>☐ Newborn nappies (20–30) + fragrance-free wipes</li>
          <li>☐ Going-home outfit</li>
          <li>☐ <strong>Rear-facing infant car seat — installed BEFORE leaving hospital</strong></li>
        </ul>
        <h3>For Partner</h3>
        <ul>
          <li>☐ Overnight bag: clothes, toiletries, snacks, charger</li>
          <li>☐ Camera or charged phone</li>
          <li>☐ Birth announcement contact list</li>
          <li>☐ Cash for parking / vending</li>
        </ul>
      `
    }
  };
  
  const data = modalContent[type];
  if (data) {
    title.textContent = data.title;
    body.innerHTML = data.content;
    overlay.classList.add('show');
  }
}

function closeModal(event) {
  if (!event || event.target.id === 'modalOverlay') {
    document.getElementById('modalOverlay').classList.remove('show');
  }
}

// ==================== INITIALIZATION ====================
document.addEventListener('DOMContentLoaded', () => {
  loadState();
  
  // Update last feed time every minute
  setInterval(() => {
    if (state.lastFeedTime) {
      updateUI();
    }
  }, 60000);
});

// Save state when page is closed
window.addEventListener('beforeunload', saveState);


// comprehensiveModals merged into main openModal function above

</script>

      <!-- ==================== ADVANCED MONITORING AND ASSESSMENT PROTOCOLS ==================== -->
  <section class="section" style="margin: 3rem 0;" id="advanced-monitoring">
    <div class="section-header">
      <div class="header-badge-prominent">
        <span class="badge-pulse"></span>
        <span class="badge-text">Advanced Protocols</span>
      </div>
      <h2 class="section-title-prominent">
        Advanced Monitoring &amp; <span class="title-highlight">Assessment Protocols</span>
      </h2>
      <p class="section-subtitle-prominent">
        Precise measurement techniques and clinical thresholds every caregiver should know — because <strong>accurate monitoring saves lives</strong> in the critical newborn period.
      </p>
    </div>

    <div class="dialog-box" style="margin-bottom: 2rem;">
      <div class="dialog-icon">🌡️</div>
      <h3>Taking Accurate Temperatures</h3>
      <div class="dialog-content">
        <p>The <strong>rectal method is most accurate</strong> for infants under 3 months. Use a digital thermometer with petroleum jelly lubricant, insert no more than <strong>½ inch (1.25 cm)</strong>, and hold thermometer and baby still for the full measurement duration.</p>
        <p style="margin-top: 0.8rem;">For <strong>axillary (armpit) temperatures</strong>, place the thermometer in the armpit with the arm held snugly against the body for <strong>4–5 minutes</strong>. This method is less precise but acceptable for routine monitoring in stable infants.</p>
      </div>
    </div>
  </section>

      <!-- ==================== VITAL SIGNS MONITORING ==================== -->
  <section class="vital-signs-section" id="vs-root">
    <div class="section-header">
      <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">Essential Knowledge</span>
        </div>
        <h2 class="section-title-prominent">
          Understanding <span class="title-highlight">Newborn Vital Signs</span>
        </h2>
        <p class="section-subtitle-prominent">
          <strong>Live simulations, scenario testing &amp; a knowledge quiz</strong> — watch real waveforms, drag sliders, and learn what every number means before it matters.
        </p>
    </div>

    <!-- ── VS Tab Bar ── -->
    <div class="ft-tabs" style="margin-bottom:1.5rem;">
      <button class="ft-tab ft-tab-active" onclick="vsTab(this,'vs-panel-heart')">💗 Heart Rate</button>
      <button class="ft-tab" onclick="vsTab(this,'vs-panel-breath')">🫁 Breathing</button>
      <button class="ft-tab" onclick="vsTab(this,'vs-panel-temp')">🌡️ Temperature</button>
      <button class="ft-tab" onclick="vsTab(this,'vs-panel-checker')">🩺 Scenario Checker</button>
      <button class="ft-tab" onclick="vsTab(this,'vs-panel-quiz')">🧠 Quiz</button>
    </div>

    <!-- ════ VS PANEL: HEART RATE ════ -->
    <div class="ft-panel" id="vs-panel-heart">
      <div class="ft-white-box">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:1rem;margin-bottom:1rem;">
          <div>
            <h4 style="color:var(--primary);font-size:1.15rem;margin-bottom:.3rem;">💗 Live ECG Simulator</h4>
            <p style="font-size:.84rem;color:var(--text-soft);">Select a state — watch heart rate change live and learn what's normal.</p>
          </div>
          <div style="display:flex;gap:.4rem;flex-wrap:wrap;" id="vs-heart-states">
            <button class="vs-state-btn vs-state-active" style="background:#7986cb;" onclick="vsSetHeart('sleep',this)">😴 Sleeping</button>
            <button class="vs-state-btn" style="background:#66bb6a;" onclick="vsSetHeart('rest',this)">😊 Resting</button>
            <button class="vs-state-btn" style="background:#ffa726;" onclick="vsSetHeart('feeding',this)">🍼 Feeding</button>
            <button class="vs-state-btn" style="background:#ef5350;" onclick="vsSetHeart('crying',this)">😭 Crying</button>
            <button class="vs-state-btn" style="background:#b71c1c;" onclick="vsSetHeart('concern',this)">⚠️ Concerning</button>
          </div>
        </div>
        <!-- ECG canvas -->
        <div style="position:relative;background:#0d1117;border-radius:14px;overflow:hidden;margin-bottom:1rem;">
          <canvas id="vs-ecg-canvas" height="110" style="width:100%;display:block;"></canvas>
          <div style="position:absolute;top:.7rem;right:1rem;color:#00e676;font-family:monospace;font-size:1.6rem;font-weight:900;line-height:1;" id="vs-bpm-display">120 <span style="font-size:.65rem;opacity:.7;">BPM</span></div>
          <div style="position:absolute;top:.7rem;left:1rem;font-size:.72rem;color:#00e676;opacity:.65;font-family:monospace;" id="vs-heart-state-lbl">SLEEPING</div>
        </div>
        <!-- Info row -->
        <div id="vs-heart-info-row" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.7rem;"></div>
      </div>
    </div>

    <!-- ════ VS PANEL: BREATHING ════ -->
    <div class="ft-panel" id="vs-panel-breath" style="display:none;">
      <div class="ft-white-box">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:1rem;margin-bottom:1rem;">
          <div>
            <h4 style="color:#0288d1;font-size:1.15rem;margin-bottom:.3rem;">🫁 Live Breathing Waveform</h4>
            <p style="font-size:.84rem;color:var(--text-soft);">See the difference between normal periodic breathing and concerning patterns.</p>
          </div>
          <div style="display:flex;gap:.4rem;flex-wrap:wrap;">
            <button class="vs-state-btn vs-state-active" style="background:#66bb6a;" onclick="vsSetBreath('normal',this)">✓ Normal</button>
            <button class="vs-state-btn" style="background:#7986cb;" onclick="vsSetBreath('periodic',this)">〰 Periodic</button>
            <button class="vs-state-btn" style="background:#ffa726;" onclick="vsSetBreath('fast',this)">⚡ Fast</button>
            <button class="vs-state-btn" style="background:#ef5350;" onclick="vsSetBreath('labored',this)">⚠️ Labored</button>
          </div>
        </div>
        <div style="position:relative;background:#0a0f1a;border-radius:14px;overflow:hidden;margin-bottom:1rem;">
          <canvas id="vs-breath-canvas" height="110" style="width:100%;display:block;"></canvas>
          <div style="position:absolute;top:.7rem;right:1rem;color:#4fc3f7;font-family:monospace;font-size:1.6rem;font-weight:900;line-height:1;" id="vs-rr-display">40 <span style="font-size:.65rem;opacity:.7;">BPM</span></div>
          <div style="position:absolute;top:.7rem;left:1rem;font-size:.72rem;color:#4fc3f7;opacity:.65;font-family:monospace;" id="vs-breath-state-lbl">NORMAL</div>
        </div>
        <!-- Animated baby chest visual -->
        <div style="text-align:center;margin-bottom:1rem;">
          <div id="vs-baby-icon" style="font-size:3.5rem;display:inline-block;transition:transform .4s ease;">👶</div>
          <div id="vs-breath-desc" style="font-size:.82rem;color:var(--text-soft);margin-top:.3rem;">Regular, unlaboured breathing — 30–60 breaths/min is normal</div>
        </div>
        <div id="vs-breath-info-row" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.7rem;"></div>
      </div>
    </div>

    <!-- ════ VS PANEL: TEMPERATURE ════ -->
    <div class="ft-panel" id="vs-panel-temp" style="display:none;">
      <div class="ft-white-box">
        <h4 style="color:#c62828;font-size:1.15rem;margin-bottom:.4rem;">🌡️ Interactive Temperature Guide</h4>
        <p style="font-size:.84rem;color:var(--text-soft);margin-bottom:1.2rem;">Drag the slider — the thermometer fills, the colour changes, and you see exactly what action is needed.</p>
        <div style="display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap;margin-bottom:1.5rem;">
          <!-- Graphic thermometer -->
          <div style="position:relative;flex-shrink:0;width:36px;height:170px;">
            <div style="position:absolute;inset:0;background:linear-gradient(to top,#ef5350 0%,#ffca28 60%,#e8f5e9 100%);border-radius:99px;opacity:.15;"></div>
            <div id="vs-therm-fill" style="position:absolute;bottom:0;left:4px;right:4px;background:linear-gradient(to top,#ef5350,#ffa726);border-radius:99px;transition:height .4s;height:50%;"></div>
            <div style="position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);width:22px;height:22px;background:#ef5350;border-radius:50%;box-shadow:0 0 10px rgba(239,83,80,.5);"></div>
          </div>
          <!-- Slider + reading -->
          <div style="flex:1;min-width:200px;">
            <input type="range" id="vs-temp-slider" min="34" max="41" step="0.1" value="37" style="width:100%;accent-color:#ef5350;margin-bottom:.7rem;" oninput="vsUpdateTemp(this.value)">
            <div style="display:flex;justify-content:space-between;font-size:.7rem;color:#bbb;margin-bottom:1rem;"><span>34°C Danger</span><span>37°C Normal</span><span>41°C Severe</span></div>
            <div id="vs-temp-display" style="background:#fff3e0;border-radius:14px;padding:1rem 1.4rem;text-align:center;border:2px solid #ffb300;display:inline-block;min-width:130px;">
              <div id="vs-temp-c" style="font-size:2rem;font-weight:900;color:#e65100;">37.0°C</div>
              <div id="vs-temp-f" style="font-size:.78rem;color:#e65100;">98.6°F</div>
            </div>
          </div>
        </div>
        <div id="vs-temp-result" style="border-radius:14px;padding:1.3rem;transition:all .4s;margin-bottom:1.3rem;background:#f5f5f5;"></div>
        <!-- Method table toggle -->
        <div style="background:#f9f5ff;border-radius:12px;padding:1rem;">
          <div style="font-weight:700;color:var(--primary);cursor:pointer;user-select:none;" onclick="document.getElementById('vs-method-table').style.display=document.getElementById('vs-method-table').style.display==='none'?'block':'none'">
            📋 Measurement Method Comparison ▾ (tap to expand)
          </div>
          <div id="vs-method-table" style="display:none;margin-top:.8rem;overflow-x:auto;">
            <table style="width:100%;border-collapse:collapse;font-size:.82rem;min-width:400px;">
              <thead><tr style="background:#fce4ec;"><th style="padding:.55rem;text-align:left;">Method</th><th style="padding:.55rem;text-align:center;">Normal</th><th style="padding:.55rem;text-align:center;">Fever</th><th style="padding:.55rem;text-align:left;">Notes</th></tr></thead>
              <tbody>
                <tr style="border-bottom:1px solid #f0e0f0;"><td style="padding:.55rem;font-weight:600;">🌡 Rectal</td><td style="padding:.55rem;text-align:center;">36.6–38.0°C</td><td style="padding:.55rem;text-align:center;color:#c62828;font-weight:700;">≥38.0°C</td><td style="padding:.55rem;">Gold standard for &lt;3 months — most accurate</td></tr>
                <tr style="border-bottom:1px solid #f0e0f0;background:#fafafa;"><td style="padding:.55rem;font-weight:600;">🫴 Axillary</td><td style="padding:.55rem;text-align:center;">36.5–37.5°C</td><td style="padding:.55rem;text-align:center;color:#e65100;font-weight:700;">≥37.5°C</td><td style="padding:.55rem;">Convenient but 0.5°C lower than core temp</td></tr>
                <tr><td style="padding:.55rem;font-weight:600;">👂 Ear (tympanic)</td><td style="padding:.55rem;text-align:center;">36.5–37.5°C</td><td style="padding:.55rem;text-align:center;color:#e65100;font-weight:700;">≥38.0°C</td><td style="padding:.55rem;">Not recommended under 6 months</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- ════ VS PANEL: SCENARIO CHECKER ════ -->
    <div class="ft-panel" id="vs-panel-checker" style="display:none;">
      <div class="ft-white-box">
        <h4 style="color:var(--primary);font-size:1.15rem;margin-bottom:.4rem;">🩺 Vital Signs Scenario Checker</h4>
        <p style="font-size:.84rem;color:var(--text-soft);margin-bottom:1.2rem;">Type in what you observe — get an instant, colour-coded assessment and what to do next.</p>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:.9rem;margin-bottom:1.2rem;">
          <div>
            <label class="vs-checker-lbl">💗 Heart Rate (BPM)</label>
            <input type="number" id="vs-chk-hr" placeholder="e.g. 145" class="ft-input" oninput="vsRunChecker()">
          </div>
          <div>
            <label class="vs-checker-lbl">🫁 Breathing Rate (BPM)</label>
            <input type="number" id="vs-chk-rr" placeholder="e.g. 42" class="ft-input" oninput="vsRunChecker()">
          </div>
          <div>
            <label class="vs-checker-lbl">🌡️ Temperature (°C)</label>
            <input type="number" id="vs-chk-temp" placeholder="e.g. 37.2" step="0.1" class="ft-input" oninput="vsRunChecker()">
          </div>
          <div>
            <label class="vs-checker-lbl">Baby's State</label>
            <select id="vs-chk-state" class="ft-select" style="width:100%;" onchange="vsRunChecker()">
              <option value="">Select…</option>
              <option value="sleep">😴 Sleeping</option>
              <option value="rest">😊 Awake &amp; Calm</option>
              <option value="feeding">🍼 Feeding</option>
              <option value="crying">😭 Crying</option>
            </select>
          </div>
        </div>
        <div id="vs-checker-result" style="border-radius:14px;padding:1.2rem;display:none;margin-bottom:1.2rem;"></div>
        <!-- Pre-set scenarios -->
        <div>
          <div style="font-size:.82rem;font-weight:700;color:var(--text-soft);margin-bottom:.6rem;">Try a pre-set scenario:</div>
          <div style="display:flex;gap:.5rem;flex-wrap:wrap;" id="vs-scenario-btns"></div>
        </div>
      </div>
    </div>

    <!-- ════ VS PANEL: QUIZ ════ -->
    <div class="ft-panel" id="vs-panel-quiz" style="display:none;">
      <div class="ft-white-box">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1.2rem;flex-wrap:wrap;gap:.8rem;">
          <div>
            <h4 style="color:var(--primary);font-size:1.15rem;margin-bottom:.3rem;">🧠 Vital Signs Knowledge Quiz</h4>
            <p style="font-size:.84rem;color:var(--text-soft);">8 scenario-based questions — covering heart rate, breathing &amp; temperature.</p>
          </div>
          <div id="vs-quiz-score-badge" style="background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:white;padding:.4rem 1rem;border-radius:999px;font-weight:700;font-size:.88rem;">Score: 0 / 0</div>
        </div>
        <div id="vs-quiz-body"></div>
        <div style="text-align:center;margin-top:1.2rem;" id="vs-quiz-nav">
          <button class="add-feed-btn" style="background:var(--primary);margin:0;" onclick="vsQuizStart()">▶ Start Quiz</button>
        </div>
      </div>
    </div>

  </section>



  <!-- ==================== BEHAVIORAL STATE ASSESSMENT ==================== -->
  <section class="section" style="margin: 3rem 0;">
    <div class="section-header">
      <div class="header-badge-prominent">
        <span class="badge-pulse"></span>
        <span class="badge-text">Behavioral Assessment</span>
      </div>
      <h2 class="section-title-prominent">
        Behavioral <span class="title-highlight">State Assessment</span>
      </h2>
      <p class="section-subtitle-prominent">
        Understanding your newborn's <strong>six states of consciousness</strong> helps you recognize optimal feeding windows, interaction times, and when your baby needs rest.
      </p>
    </div>

    <div class="card-grid" style="grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1.5rem; margin-top: 2rem;">
      <div class="interactive-card" style="border-left: 5px solid #7986cb;">
        <div class="card-icon">😴</div>
        <h3 style="color: #3949ab;">1. Deep Sleep</h3>
        <p>No eye movement, regular breathing, no spontaneous activity. Baby is in full restorative sleep — avoid disturbing.</p>
      </div>
      <div class="interactive-card" style="border-left: 5px solid #ab47bc;">
        <div class="card-icon">👁️</div>
        <h3 style="color: #7b1fa2;">2. Light Sleep</h3>
        <p>Rapid eye movements, irregular breathing, some body movements. Dreams may occur; baby may stir but doesn't need intervention.</p>
      </div>
      <div class="interactive-card" style="border-left: 5px solid #26a69a;">
        <div class="card-icon">😑</div>
        <h3 style="color: #00796b;">3. Drowsy</h3>
        <p>Eyes opening and closing, variable activity level. Transitional state — baby may fall back to sleep or move toward alertness.</p>
      </div>
      <div class="interactive-card" style="border-left: 5px solid #66bb6a; background: linear-gradient(135deg, #f1f8e9 0%, #ffffff 100%);">
        <div class="card-icon">✨</div>
        <h3 style="color: #2e7d32;">4. Quiet Alert ⭐ OPTIMAL</h3>
        <p>Eyes open, focused attention, minimal motor activity. <strong>Best time for feeding and interaction.</strong> Baby is most receptive to learning and bonding.</p>
      </div>
      <div class="interactive-card" style="border-left: 5px solid #ffa726;">
        <div class="card-icon">🤸</div>
        <h3 style="color: #e65100;">5. Active Alert</h3>
        <p>Eyes open, increased motor activity, may be fussy. Baby is processing stimulation — recognize feeding cues like rooting and hand-to-mouth.</p>
      </div>
      <div class="interactive-card" style="border-left: 5px solid #ef5350;">
        <div class="card-icon">😭</div>
        <h3 style="color: #c62828;">6. Crying</h3>
        <p>Intense crying with vigorous motor activity. Late hunger cue — try to respond earlier. Calming techniques: swaddling, skin-to-skin, gentle rocking.</p>
      </div>
    </div>

    <div class="dialog-box info" style="margin-top: 2rem;">
      <div class="dialog-icon">💡</div>
      <h3>Recognizing Feeding Cues Early</h3>
      <div class="dialog-content">
        <p>Watch for feeding cues during <strong>States 4–5</strong>: rooting (turning head, opening mouth), hand-to-mouth movements, and increased alertness. Responding during the <strong>Quiet Alert</strong> state results in calmer, more effective feeds. Crying is a <em>late</em> hunger cue — a stressed baby latches less effectively.</p>
      </div>
    </div>
  </section>

      <!-- ==================== DIALOG BOX: IMPORTANT REMINDER ==================== -->
  <div class="dialog-box warning">
    <div class="dialog-icon">⚠️</div>
    <h3>Trust Your Instincts</h3>
    <div class="dialog-content">
      <p>If your baby seems "different" or "not right" to you, even if you can't pinpoint exactly what's wrong, <strong>contact your pediatrician immediately</strong>. You know your baby best, and parental intuition is a powerful tool in recognizing when something is wrong. Never hesitate to seek medical care when you're concerned.</p>
    </div>
  </div>



      <!-- ==================== OUTPUT MONITORING ==================== -->
  <section class="accordion-section">
    <div class="section-header">
      <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">Daily Monitoring</span>
        </div>
        <h2 class="section-title-prominent">
          Comprehensive <span class="title-highlight">Diaper Output Guide</span>
        </h2>
        <p class="section-subtitle-prominent">
          Track your baby's <strong>feeding and hydration</strong> through diaper counts — the most reliable daily window into your newborn's health.
        </p>
    </div>
    
    <div class="accordion-item">
      <div class="accordion-header" onclick="toggleAccordion(this)">
        <div class="accordion-title">
          <span class="accordion-icon">👶</span>
          <h3>First Week Day-by-Day Guide</h3>
        </div>
        <span class="accordion-toggle">▼</span>
      </div>
      <div class="accordion-content">
        <div class="accordion-body">
          <div class="timeline">
            <div class="timeline-item">
              <div class="timeline-marker">1</div>
              <div class="timeline-content">
                <h4>Day 1</h4>
                <ul class="timeline-checklist">
                  <li>At least 1 wet diaper</li>
                  <li>Black, tarry meconium stool</li>
                  <li>Thick, sticky consistency - this is normal</li>
                </ul>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-marker">2-3</div>
              <div class="timeline-content">
                <h4>Days 2-3</h4>
                <ul class="timeline-checklist">
                  <li>2-3 wet diapers minimum</li>
                  <li>Transitional stool (greenish-brown)</li>
                  <li>Color change indicates digestive system activation</li>
                </ul>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-marker">4-5</div>
              <div class="timeline-content">
                <h4>Days 4-5</h4>
                <ul class="timeline-checklist">
                  <li>At least 5-6 wet diapers</li>
                  <li>Yellow, seedy (breastfed) or tan, pasty (formula-fed)</li>
                  <li>3-4 bowel movements daily minimum</li>
                  <li>Diapers should feel weighted when picked up</li>
                </ul>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-marker">6+</div>
              <div class="timeline-content">
                <h4>Day 6 Onwards</h4>
                <ul class="timeline-checklist">
                  <li>6-8 wet diapers per 24 hours</li>
                  <li>Pale yellow urine indicates good hydration</li>
                  <li>Regular bowel movements</li>
                  <li>Concentrated dark urine suggests inadequate intake</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="accordion-item">
      <div class="accordion-header" onclick="toggleAccordion(this)">
        <div class="accordion-title">
          <span class="accordion-icon">🚩</span>
          <h3>Concerning Output Patterns</h3>
        </div>
        <span class="accordion-toggle">▼</span>
      </div>
      <div class="accordion-content">
        <div class="accordion-body">
          <p><strong>Contact your pediatrician if you notice:</strong></p>
          <ul>
            <li>Fewer wet diapers than expected for baby's age</li>
            <li>Brick dust urine (orange-red crystals) after day 3</li>
            <li>Dark, concentrated urine</li>
            <li>Hard, dry, or pellet-like stools</li>
            <li>Blood in stool beyond minimal streaking in first days</li>
            <li>Absence of stool after day 5 in breastfed infants</li>
            <li>No urine output for 6-8 hours</li>
          </ul>
        </div>
      </div>
    </div>
  </section>



      <!-- ==================== DIALOG BOX: FEEDING FREQUENCY ==================== -->
  <div class="dialog-box info">
    <div class="dialog-icon">ℹ️</div>
    <h3>Normal Feeding Frequency</h3>
    <div class="dialog-content">
      <p>Newborns need to feed <strong>8-12 times per 24 hours</strong>. This means every 2-3 hours, including nighttime. Cluster feeding (multiple feedings close together) is normal and doesn't mean you have low milk supply. Feed on demand and watch for feeding cues: rooting, hand-to-mouth movements, and lip smacking.</p>
    </div>
  </div>



      <!-- ==================== BREASTFEEDING GUIDE ==================== -->
  <section class="breastfeeding-guide">
    <div class="section-header">
      <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">Feeding Support</span>
        </div>
        <h2 class="section-title-prominent">
          Breastfeeding Support &amp; <span class="title-highlight">Troubleshooting</span>
        </h2>
        <p class="section-subtitle-prominent">
          <strong>Evidence-based solutions</strong> for the most common breastfeeding challenges — from latch issues to milk supply concerns, backed by WHO and AAP guidelines.
        </p>
    </div>
    
    <div class="guide-grid">
      <div class="guide-card">
        <div class="guide-card-icon">😣</div>
        <h4>Painful Nursing</h4>
        <p>Nipple pain is NOT normal and usually indicates a latch problem that needs correction.</p>
        <div class="solutions-list">
          <strong>Solutions:</strong>
          <ul>
            <li>Check latch: wide mouth, flanged lips, more areola above than below</li>
            <li>Try different positions: football, side-lying, laid-back</li>
            <li>Contact lactation consultant for assessment</li>
            <li>Rule out tongue-tie or lip-tie</li>
            <li>Air dry nipples after feeding, use purified lanolin</li>
          </ul>
        </div>
      </div>
      
      <div class="guide-card">
        <div class="guide-card-icon">📉</div>
        <h4>Low Milk Supply Concerns</h4>
        <p>Perceived low supply is common, but actual insufficient production is rare. True indicators of adequate supply:</p>
        <div class="solutions-list">
          <strong>Reliable Signs:</strong>
          <ul>
            <li>Baby back to birth weight by 2 weeks</li>
            <li>6-8 wet diapers daily after day 5</li>
            <li>Baby satisfied after most feeds</li>
            <li>Breasts feel softer after feeding</li>
          </ul>
          <strong>Increase Supply:</strong>
          <ul>
            <li>Feed 10-12 times per 24 hours</li>
            <li>Ensure complete breast emptying</li>
            <li>Add pumping after nursing</li>
            <li>Adequate rest and 500 extra calories daily</li>
          </ul>
        </div>
      </div>
      
      <div class="guide-card">
        <div class="guide-card-icon">🔥</div>
        <h4>Mastitis</h4>
        <p>Breast infection with localized pain, redness, warmth, swelling, often with fever >38.5°C and flu-like symptoms.</p>
        <div class="solutions-list">
          <strong>Treatment:</strong>
          <ul>
            <li>CONTINUE breastfeeding or pumping</li>
            <li>Apply warm compress before feeding</li>
            <li>Ensure complete breast emptying</li>
            <li>Rest and hydration</li>
            <li>Contact doctor for antibiotics if no improvement in 24 hours</li>
            <li>Seek immediate care if fever >39°C or spreading redness</li>
          </ul>
        </div>
      </div>
      
      <div class="guide-card">
        <div class="guide-card-icon">💧</div>
        <h4>Engorgement</h4>
        <p>Normal around days 3-4 when milk "comes in." Breasts become firm, warm, tender. Should resolve in 24-48 hours.</p>
        <div class="solutions-list">
          <strong>Management:</strong>
          <ul>
            <li>Nurse frequently (every 1-2 hours)</li>
            <li>Warm compress before feeding to facilitate flow</li>
            <li>Hand express if areola too firm for latch</li>
            <li>Cold compress between feedings</li>
            <li>Avoid excessive pumping beyond baby's needs</li>
            <li>Wear supportive nursing bra</li>
          </ul>
        </div>
      </div>
    </div>
  </section>



  <!-- ==================== FORMULA FEEDING GUIDANCE ==================== -->
  <section class="section" style="margin: 4rem 0;" id="formula-feeding">
    <div class="section-header">
      <div class="header-badge-prominent">
        <span class="badge-pulse"></span>
        <span class="badge-text">Formula Feeding</span>
      </div>
      <h2 class="section-title-prominent">
        Formula Feeding <span class="title-highlight">Guidance &amp; Safety</span>
      </h2>
      <p class="section-subtitle-prominent">
        Evidence-based protocols for <strong>safe formula preparation</strong>, when supplementation is medically indicated, and best practices that support both formula-fed and combination-fed infants.
      </p>
    </div>

    <!-- A: Medical Indications -->
    <div style="background: white; border-radius: 24px; padding: 2.5rem; box-shadow: var(--shadow); margin-bottom: 2rem;">
      <h3 style="color: var(--primary-dark); font-size: 1.5rem; margin-bottom: 1.2rem; display:flex; align-items:center; gap:.7rem;">
        <span style="background:linear-gradient(135deg,var(--primary),var(--gentle-purple));width:40px;height:40px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:1.2rem;">⚕️</span>
        When Supplementation or Formula Feeding is Indicated
      </h3>
      <p style="color:var(--text-soft);margin-bottom:1.2rem;line-height:1.8;">Exclusive formula feeding or supplementation may be medically necessary in specific circumstances. These decisions should always be made in partnership with your healthcare provider.</p>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;" class="responsive-2col">
        <div style="background:linear-gradient(135deg,#fff5f8,#fce4ec);border-radius:16px;padding:1.5rem;border-left:5px solid var(--primary);">
          <h4 style="color:var(--primary-dark);margin-bottom:.8rem;">Medical Indications</h4>
          <ul style="list-style:none;padding:0;line-height:1.9;color:var(--text-soft);">
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">•</span>Classic galactosemia (rare metabolic disorder)</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">•</span>Maternal HIV infection (in resource-rich settings)</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">•</span>Maternal use of medications incompatible with breastfeeding</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">•</span>Maternal active untreated tuberculosis</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">•</span>Severe maternal illness preventing breastfeeding</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">•</span>Insufficient milk supply despite thorough intervention</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">•</span>Infant failure to thrive on breast milk alone</li>
          </ul>
        </div>
        <div style="background:linear-gradient(135deg,#e8f5e9,#f1f8e9);border-radius:16px;padding:1.5rem;border-left:5px solid #66bb6a;">
          <h4 style="color:#2e7d32;margin-bottom:.8rem;">Supplementing Without Undermining Breastfeeding</h4>
          <ul style="list-style:none;padding:0;line-height:1.9;color:var(--text-soft);">
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">✓</span>Use supplemental nursing system (SNS) at breast when possible</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">✓</span>Pace bottle feeding to mimic breastfeeding rhythm</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">✓</span>Continue frequent breast stimulation through nursing and pumping</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">✓</span>Limit formula to minimum needed for adequate growth</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">✓</span>Prefer donor human milk when medically indicated supplementation is needed</li>
            <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;">✓</span>Work with a lactation consultant to preserve supply</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- B: Formula Selection & Preparation -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-bottom:2rem;" class="responsive-2col">
      <div style="background: white; border-radius: 24px; padding: 2rem; box-shadow: var(--shadow);">
        <h3 style="color: var(--primary-dark); font-size: 1.3rem; margin-bottom: 1rem; display:flex;align-items:center;gap:.6rem;">
          <span style="font-size:1.6rem;">🧪</span> Formula Selection
        </h3>
        <ul style="list-style:none;padding:0;line-height:1.9;color:var(--text-soft);">
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid #f0f0f0;"><span style="position:absolute;left:0;color:var(--primary);font-weight:700;">✓</span>Use <strong>iron-fortified</strong> infant formula unless pediatrician specifies otherwise</li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid #f0f0f0;"><span style="position:absolute;left:0;color:#c62828;font-weight:700;">✗</span>Avoid cow's milk, goat's milk, or plant-based milks under 12 months</li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid #f0f0f0;"><span style="position:absolute;left:0;color:#c62828;font-weight:700;">✗</span>Specialized formulas (hypoallergenic, lactose-free) only when medically indicated</li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;"><span style="position:absolute;left:0;color:var(--warning);font-weight:700;">⏱</span>Prepared formula: use within <strong>1 hour</strong> at room temperature or <strong>24 hours</strong> if refrigerated</li>
        </ul>
      </div>

      <div style="background: white; border-radius: 24px; padding: 2rem; box-shadow: var(--shadow);">
        <h3 style="color: var(--primary-dark); font-size: 1.3rem; margin-bottom: 1rem; display:flex;align-items:center;gap:.6rem;">
          <span style="font-size:1.6rem;">🍼</span> Bottle Feeding Best Practices
        </h3>
        <ul style="list-style:none;padding:0;line-height:1.9;color:var(--text-soft);">
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid #f0f0f0;"><span style="position:absolute;left:0;color:var(--primary);font-weight:700;">•</span>Hold baby in <strong>semi-upright position</strong> during all feeds</li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid #f0f0f0;"><span style="position:absolute;left:0;color:var(--primary);font-weight:700;">•</span>Allow baby to <strong>control feeding pace</strong> — never force-feed</li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid #f0f0f0;"><span style="position:absolute;left:0;color:var(--primary);font-weight:700;">•</span>Burp midway through and at end of feeding</li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid #f0f0f0;"><span style="position:absolute;left:0;color:#c62828;font-weight:700;">✗</span><strong>Never prop the bottle</strong> — always hold baby during feeding</li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid #f0f0f0;"><span style="position:absolute;left:0;color:var(--primary);font-weight:700;">•</span>Watch for satiety cues: turning away, slowing sucking, relaxed hands</li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;"><span style="position:absolute;left:0;color:var(--info);font-weight:700;">📊</span>Typical: <strong>2–3 oz</strong> per feed initially → <strong>4–5 oz</strong> by 1 month</li>
        </ul>
      </div>
    </div>

    <!-- C: Step-by-step preparation protocol -->
    <div style="background: linear-gradient(135deg, #f3e5f5 0%, #fce4ec 100%); border-radius: 24px; padding: 2.5rem; box-shadow: var(--shadow);">
      <h3 style="color: var(--primary-dark); font-size: 1.4rem; margin-bottom: 1.5rem; display:flex;align-items:center;gap:.7rem;">
        <span style="font-size:1.6rem;">📋</span> Safe Formula Preparation Protocol
      </h3>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;">
        <div style="background:white;border-radius:14px;padding:1.2rem;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.06);">
          <div style="width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--gentle-purple));display:inline-flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:1.1rem;margin-bottom:.7rem;">1</div>
          <p style="font-size:.9rem;color:var(--text-soft);font-weight:600;">Wash hands thoroughly with soap &amp; water — 20 seconds</p>
        </div>
        <div style="background:white;border-radius:14px;padding:1.2rem;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.06);">
          <div style="width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--gentle-purple));display:inline-flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:1.1rem;margin-bottom:.7rem;">2</div>
          <p style="font-size:.9rem;color:var(--text-soft);font-weight:600;">Clean all equipment with hot soapy water; sterilise if &lt;3 months</p>
        </div>
        <div style="background:white;border-radius:14px;padding:1.2rem;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.06);">
          <div style="width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--gentle-purple));display:inline-flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:1.1rem;margin-bottom:.7rem;">3</div>
          <p style="font-size:.9rem;color:var(--text-soft);font-weight:600;">Use safe water; boil and cool if water safety is questionable</p>
        </div>
        <div style="background:white;border-radius:14px;padding:1.2rem;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.06);">
          <div style="width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--gentle-purple));display:inline-flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:1.1rem;margin-bottom:.7rem;">4</div>
          <p style="font-size:.9rem;color:var(--text-soft);font-weight:600;">Follow formula instructions <strong>exactly</strong> — never add extra water or powder</p>
        </div>
        <div style="background:white;border-radius:14px;padding:1.2rem;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.06);">
          <div style="width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--gentle-purple));display:inline-flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:1.1rem;margin-bottom:.7rem;">5</div>
          <p style="font-size:.9rem;color:var(--text-soft);font-weight:600;">Mix formula thoroughly by swirling — avoid vigorous shaking</p>
        </div>
        <div style="background:white;border-radius:14px;padding:1.2rem;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.06);">
          <div style="width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--gentle-purple));display:inline-flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:1.1rem;margin-bottom:.7rem;">6</div>
          <p style="font-size:.9rem;color:var(--text-soft);font-weight:600;">Test temperature on inner wrist — should feel warm, not hot</p>
        </div>
        <div style="background:white;border-radius:14px;padding:1.2rem;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.06);grid-column:span 1;">
          <div style="width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,#ef5350,#c62828);display:inline-flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:1.1rem;margin-bottom:.7rem;">7</div>
          <p style="font-size:.9rem;color:var(--text-soft);font-weight:600;"><strong>Discard</strong> any unused formula remaining after each feeding</p>
        </div>
      </div>
    </div>
  </section>

      <!-- ==================== SAFE SLEEP SECTION ==================== -->
  <section class="safe-sleep-section" id="sleep">
    <div class="section-header">
      <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">SIDS Prevention</span>
        </div>
        <h2 class="section-title-prominent">
          Evidence-Based <span class="title-highlight">Safe Sleep Practices</span>
        </h2>
        <p class="section-subtitle-prominent">
          <strong>Every sleep matters.</strong> Following these evidence-based AAP guidelines for naps and nighttime significantly reduces SIDS risk — the leading cause of infant death after one month.
        </p>
    </div>
    
    <div class="sleep-grid">
      <div class="do-card">
        <div class="sleep-card-header">
          <span style="font-size: 2rem;">✓</span>
          <h4>ALWAYS Do</h4>
        </div>
        <ul class="sleep-list">
          <li>Place baby on back for every sleep (naps and nighttime)</li>
          <li>Use firm, flat mattress in safety-approved crib</li>
          <li>Keep baby's sleep area in your room for at least 6 months</li>
          <li>Use only fitted sheet - no blankets, pillows, or bumpers</li>
          <li>Offer pacifier at sleep time (after breastfeeding established)</li>
          <li>Keep room temperature comfortable (68-72°F / 20-22°C)</li>
          <li>Ensure baby is up-to-date on vaccinations</li>
          <li>Breastfeed if possible (reduces SIDS risk)</li>
          <li>Supervised tummy time while awake daily</li>
        </ul>
      </div>
      
      <div class="dont-card">
        <div class="sleep-card-header">
          <span style="font-size: 2rem;">✗</span>
          <h4>NEVER Do</h4>
        </div>
        <ul class="sleep-list">
          <li>Bed-share, especially if mother smokes, uses alcohol/drugs, or sleeps on soft surface</li>
          <li>Use inclined sleepers, loungers, or in-bed co-sleepers</li>
          <li>Place baby on side or stomach to sleep</li>
          <li>Use soft bedding, pillows, blankets, or stuffed animals in crib</li>
          <li>Use crib bumpers (traditional or mesh)</li>
          <li>Let baby sleep regularly in car seat, swing, or bouncer</li>
          <li>Use sleep positioners or anti-roll devices</li>
          <li>Overdress baby or use weighted blankets/swaddles</li>
          <li>Expose baby to smoke before or after birth</li>
          <li>Use products claiming to prevent SIDS without evidence</li>
        </ul>
      </div>
    </div>
    
    <div class="dialog-box warning">
      <div class="dialog-icon">⚠️</div>
      <h3>SIDS Risk Peaks at 2-4 Months</h3>
      <div class="dialog-content">
        <p>90% of SIDS cases occur before 6 months of age, with peak incidence between 2-4 months. SIDS rates have decreased more than 50% since the Back to Sleep campaign began. <strong>Every sleep matters</strong> - following safe sleep practices for naps and nighttime significantly reduces risk.</p>
      </div>
    </div>
  </section>



      <!-- ==================== IMMUNIZATION TRACKER ==================== -->
  <section class="immunization-section">
    <div class="section-header">
      <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">Protection &amp; Prevention</span>
        </div>
        <h2 class="section-title-prominent">
          Complete <span class="title-highlight">Immunization Schedule</span>
        </h2>
        <p class="section-subtitle-prominent">
          Protecting your baby through <strong>timely vaccination</strong> — the recommended schedule follows WHO and CDC guidelines proven to prevent life-threatening diseases.
        </p>
    </div>
    
    <div class="vaccine-timeline">
      <div class="vaccine-stage">
        <h4>At Birth (Within 24 Hours)</h4>
        <ul class="vaccine-list">
          <li>Hepatitis B Vaccine (HepB) - First dose</li>
          <li>For babies born to HBsAg-positive mothers: HepB vaccine + Hepatitis B immune globulin within 12 hours</li>
        </ul>
        <div class="vaccine-note">
          <strong>Important:</strong> All medically stable infants ≥2000g birth weight should receive HepB vaccine before hospital discharge.
        </div>
      </div>
      
      <div class="vaccine-stage">
        <h4>2 Months Old</h4>
        <ul class="vaccine-list">
          <li>DTaP (Diphtheria, Tetanus, Pertussis)</li>
          <li>IPV (Inactivated Poliovirus)</li>
          <li>Hib (Haemophilus influenzae type b)</li>
          <li>PCV13 (Pneumococcal conjugate)</li>
          <li>RV (Rotavirus - oral vaccine)</li>
          <li>HepB (Second dose)</li>
        </ul>
        <div class="vaccine-note">
          <strong>Side Effects:</strong> Mild fever, fussiness, and injection site soreness are common and typically resolve within 24-48 hours. Serious adverse reactions are extremely rare.
        </div>
      </div>
    </div>
    
    <div class="dialog-box success">
      <div class="dialog-icon">💉</div>
      <h3>Vaccine Safety</h3>
      <div class="dialog-content">
        <p>Modern vaccines undergo rigorous safety testing. Vaccination according to the recommended schedule does NOT overwhelm the infant immune system and provides critical protection against serious diseases. The benefits of vaccination far outweigh the minimal risks.</p>
      </div>
    </div>
  </section>



      <!-- ==================== DEVELOPMENTAL MILESTONES ==================== -->
  <section class="milestones-section">
    <div class="section-header">
      <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">Growth &amp; Development</span>
        </div>
        <h2 class="section-title-prominent">
          Track Your Baby's <span class="title-highlight">Developmental Milestones</span>
        </h2>
        <p class="section-subtitle-prominent">
          Monitor age-appropriate progress across <strong>motor, social, and cognitive</strong> domains — with clear red flags that warrant prompt pediatric evaluation.
        </p>
    </div>
    
    <div class="milestone-cards">
      <div class="milestone-card">
        <div class="milestone-age">Birth - 1 Month</div>
        <h4>Early Development</h4>
        <ul class="milestone-achievements">
          <li>Lifts head briefly during tummy time</li>
          <li>Focuses on faces 8-12 inches away</li>
          <li>Responds to loud sounds</li>
          <li>Makes cooing sounds</li>
          <li>Brings hands to face</li>
          <li>Reflexes: grasp, rooting, sucking</li>
        </ul>
      </div>
      
      <div class="milestone-card">
        <div class="milestone-age">2 Months</div>
        <h4>Growing Awareness</h4>
        <ul class="milestone-achievements">
          <li>Holds head up during tummy time</li>
          <li>Tracks moving objects with eyes</li>
          <li>Social smile emerges</li>
          <li>Coos and gurgles</li>
          <li>Opens and closes hands</li>
          <li>Begins to play with fingers</li>
        </ul>
      </div>
      
      <div class="milestone-card">
        <div class="milestone-age">Red Flags</div>
        <h4>When to Discuss with Pediatrician</h4>
        <ul class="milestone-achievements">
          <li>No response to loud sounds</li>
          <li>Poor visual tracking by 1 month</li>
          <li>Doesn't focus on caregiver's face</li>
          <li>Consistently poor feeding</li>
          <li>Extremely floppy or rigid muscle tone</li>
          <li>Persistent asymmetry of movement</li>
        </ul>
      </div>
    </div>
    
    <div class="dialog-box info">
      <div class="dialog-icon">ℹ️</div>
      <h3>Every Baby Develops at Their Own Pace</h3>
      <div class="dialog-content">
        <p>Milestones are guidelines, not strict deadlines. Some babies achieve skills earlier, others later. However, any concerns about development should be discussed with your pediatrician. Early intervention programs are most effective when started promptly.</p>
      </div>
    </div>
  </section>

  <!-- ==================== POSTPARTUM RECOVERY TIMELINE ==================== -->
  <section class="timeline-section">
    <div class="section-header">
      <div class="header-badge-prominent">
          <span class="badge-pulse"></span>
          <span class="badge-text">Your Journey</span>
        </div>
        <h2 class="section-title-prominent">
          Your Postpartum <span class="title-highlight">Recovery Journey</span>
        </h2>
        <p class="section-subtitle-prominent">
          Your body has accomplished something <strong>extraordinary</strong>. This evidence-based timeline covers physical healing, emotional wellbeing, and what to watch for in your recovery.
        </p>
    </div>
    
    <div class="timeline">
      <div class="timeline-item">
        <div class="timeline-marker">24h</div>
        <div class="timeline-content">
          <h4>First 24 Hours</h4>
          <ul class="timeline-checklist">
            <li>Skin-to-skin contact with baby</li>
            <li>Initiate breastfeeding within 1 hour</li>
            <li>Monitor bleeding (heavy but not soaking pad in <1 hour)</li>
            <li>Pain management plan in place</li>
            <li>First urination after delivery</li>
            <li>Blood pressure check (especially if had pre-eclampsia)</li>
          </ul>
        </div>
      </div>
      
      <div class="timeline-item">
        <div class="timeline-marker">2-7</div>
        <div class="timeline-content">
          <h4>Days 2-7</h4>
          <ul class="timeline-checklist">
            <li>Milk coming in (day 3-4) - engorgement common</li>
            <li>Baby feeding 8-12 times per day</li>
            <li>Rest when baby sleeps</li>
            <li>Gentle walking encouraged</li>
            <li>Watch for infection signs (fever, foul discharge, wound issues)</li>
            <li>Baby blues common - should begin improving</li>
            <li>Lochia (bleeding) transitions from red to pink</li>
          </ul>
        </div>
      </div>
      
      <div class="timeline-item">
        <div class="timeline-marker">W2</div>
        <div class="timeline-content">
          <h4>Week 2</h4>
          <ul class="timeline-checklist">
            <li>First postpartum checkup (may be earlier if complications)</li>
            <li>Postpartum depression screening</li>
            <li>Baby weight check (should be back to birth weight)</li>
            <li>Bleeding should be lighter, pink to brown</li>
            <li>Perineal or incision pain improving</li>
            <li>Establishing feeding routine</li>
          </ul>
        </div>
      </div>
      
      <div class="timeline-item">
        <div class="timeline-marker">3-6</div>
        <div class="timeline-content">
          <h4>Weeks 3-6</h4>
          <ul class="timeline-checklist">
            <li>Gradually increase activity level</li>
            <li>Start pelvic floor exercises (Kegels) if cleared</li>
            <li>Social connections and support crucial</li>
            <li>Planning for 6-week comprehensive checkup</li>
            <li>Lochia transitions to white/clear discharge</li>
            <li>Energy levels beginning to improve</li>
          </ul>
        </div>
      </div>
      
      <div class="timeline-item">
        <div class="timeline-marker">W6</div>
        <div class="timeline-content">
          <h4>6-Week Checkup</h4>
          <ul class="timeline-checklist">
            <li>Full physical examination</li>
            <li>Mental health assessment and depression screening</li>
            <li>Contraception discussion and family planning</li>
            <li>Clearance for exercise and sexual activity</li>
            <li>Address any ongoing concerns</li>
            <li>Review birth control options</li>
          </ul>
        </div>
      </div>
    </div>
  </section>




  <!-- ==================== YOUR POSTPARTUM RECOVERY JOURNEY ==================== -->
  <section class="section postpartum-recovery-section" style="background: linear-gradient(135deg, #fff5f8 0%, #f0e7ff 100%); border-radius: 32px; padding: 3rem; margin: 4rem 0;">
    <div class="section-header">
      <div class="header-badge-prominent">
        <span class="badge-pulse"></span>
        <span class="badge-text">Your Journey</span>
      </div>
      <h2 class="section-title-prominent">
        Your Postpartum <span class="title-highlight">Recovery Journey</span>
      </h2>
      <p class="section-subtitle-prominent">
        Every mother's recovery is unique. <strong>Be patient with yourself</strong> as your body heals and adjusts to this beautiful new chapter of motherhood.
      </p>
    </div>

    <div class="card-grid">
      <div class="interactive-card">
        <div class="card-icon">💪</div>
        <h3>Physical Recovery</h3>
        <p>
          Your body needs 6-8 weeks to heal from childbirth. Vaginal delivery recovery focuses on perineal healing, 
          while C-section recovery includes incision care. Both require rest, proper nutrition, and gradual return to activity.
        </p>
        <ul style="margin-top: 1rem; color: var(--text-soft); line-height: 1.8;">
          <li>• Rest and sleep when baby sleeps</li>
          <li>• Stay hydrated and eat nutritious meals</li>
          <li>• Gentle walking as tolerated</li>
          <li>• Pelvic floor exercises after clearance</li>
        </ul>
      </div>

      <div class="interactive-card">
        <div class="card-icon">💗</div>
        <h3>Emotional Wellbeing</h3>
        <p>
          Hormonal changes, sleep deprivation, and life adjustments can affect your mood. Baby blues are common 
          in the first 2 weeks. If symptoms persist or worsen, reach out for help.
        </p>
        <ul style="margin-top: 1rem; color: var(--text-soft); line-height: 1.8;">
          <li>• Accept help from family and friends</li>
          <li>• Stay connected with support network</li>
          <li>• Practice self-compassion</li>
          <li>• Screen for postpartum depression</li>
        </ul>
      </div>

      <div class="interactive-card">
        <div class="card-icon">🍽️</div>
        <h3>Nutrition for Breastfeeding Mothers</h3>
        <p>
          Breastfeeding mothers require approximately <strong>500 additional calories per day</strong> and adequate hydration to support milk production and maternal recovery.
        </p>
        <ul style="margin-top: 1rem; color: var(--text-soft); line-height: 1.8;">
          <li>• Protein: lean meat, fish, eggs, legumes</li>
          <li>• Whole grains for sustained energy</li>
          <li>• Calcium-rich foods: dairy or fortified alternatives</li>
          <li>• Fruits &amp; vegetables for vitamins and fiber</li>
          <li>• Adequate fluids: water, milk, juice in moderation</li>
        </ul>
        <div style="margin-top:1rem;background:#fff3e0;border-left:4px solid var(--warning);border-radius:0 8px 8px 0;padding:.8rem 1rem;font-size:.9rem;color:#e65100;">
          <strong>⚠️ Substances:</strong> Moderate alcohol (up to 1 standard drink/day) is not known to harm the infant, but mothers should stop smoking and minimise secondhand smoke exposure. Maternal marijuana use is discouraged — data are insufficient to assess infant effects (AAP).
        </div>
      </div>

      <div class="interactive-card">
        <div class="card-icon">🤝</div>
        <h3>Partner &amp; Family Support</h3>
        <p>
          Recovery is a family journey. Partners and family members play a crucial role in providing 
          emotional support, helping with baby care, and ensuring mother gets adequate rest.
        </p>
        <ul style="margin-top: 1rem; color: var(--text-soft); line-height: 1.8;">
          <li>• Share baby care responsibilities</li>
          <li>• Encourage mother to rest</li>
          <li>• Help with household tasks</li>
          <li>• Monitor for concerning symptoms</li>
        </ul>
      </div>

    </div><!-- /card-grid -->

    <div style="display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:2rem;" class="responsive-2col">
      <!-- Cultural & Community Support -->
      <div style="background:linear-gradient(135deg,#f3e5f5 0%,#fce4ec 100%);border-radius:24px;padding:2rem;box-shadow:var(--shadow);">
        <div style="font-size:2rem;margin-bottom:.8rem;">🌍</div>
        <h3 style="color:var(--primary-dark);margin-bottom:1rem;">Cultural &amp; Community Support</h3>
        <p style="color:var(--text-soft);line-height:1.8;margin-bottom:1rem;">
          Many cultures prescribe a <strong>30–40 day period of rest and recovery</strong>, with mother and newborn surrounded by family and community — many agrarian cultures enshrine postpartum rituals including traditional foods and support for daily household tasks (ACOG). This wisdom reflects real physiological need.
        </p>
        <ul style="list-style:none;padding:0;color:var(--text-soft);line-height:1.9;">
          <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;color:var(--primary);">•</span>Accept offers of help — cooking, cleaning, errands</li>
          <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;color:var(--primary);">•</span>Prioritize rest over social obligations and visits</li>
          <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;color:var(--primary);">•</span>Traditional nutritious foods support recovery and milk production</li>
          <li style="padding:.2rem 0 .2rem 1.5rem;position:relative;"><span style="position:absolute;left:0;color:var(--primary);">•</span>Delegate nighttime feeding shifts when bottle-feeding or pumping</li>
        </ul>
      </div>

      <!-- Professional Support Team -->
      <div style="background:linear-gradient(135deg,#e8f5e9 0%,#f1f8e9 100%);border-radius:24px;padding:2rem;box-shadow:var(--shadow);">
        <div style="font-size:2rem;margin-bottom:.8rem;">👩‍⚕️</div>
        <h3 style="color:#2e7d32;margin-bottom:1rem;">Your Professional Support Team</h3>
        <p style="color:var(--text-soft);line-height:1.8;margin-bottom:1rem;">
          A range of specialists are available to support different aspects of your recovery. You don't need to manage every challenge alone.
        </p>
        <ul style="list-style:none;padding:0;color:var(--text-soft);line-height:1.9;">
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid rgba(0,0,0,.06);">
            <span style="position:absolute;left:0;color:#2e7d32;font-weight:700;">🤱</span>
            <strong>Lactation Consultant</strong> — Breastfeeding challenges, latch issues, supply
          </li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid rgba(0,0,0,.06);">
            <span style="position:absolute;left:0;color:#2e7d32;font-weight:700;">🏃</span>
            <strong>Physical Therapist</strong> — Pelvic floor recovery, diastasis recti, C-section healing
          </li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;border-bottom:1px solid rgba(0,0,0,.06);">
            <span style="position:absolute;left:0;color:#2e7d32;font-weight:700;">🧠</span>
            <strong>Mental Health Professional</strong> — Postpartum depression, anxiety, birth trauma
          </li>
          <li style="padding:.3rem 0 .3rem 1.6rem;position:relative;">
            <span style="position:absolute;left:0;color:#2e7d32;font-weight:700;">🏠</span>
            <strong>Postpartum Doula</strong> — Practical in-home assistance, newborn care support, household tasks
          </li>
        </ul>
      </div>
    </div>

    <div class="dialog-box info" style="margin-top: 2rem;">
      <div class="dialog-icon">ℹ️</div>
      <h3>Remember: Healing is Not Linear</h3>
      <div class="dialog-content">
        <p>Some days will feel easier than others. It's normal to have good days and challenging days. 
        <strong>Be gentle with yourself</strong> and celebrate small victories. Your body grew and birthed a human — 
        that's extraordinary! Give yourself the time and grace you need to heal.</p>
      </div>
    </div>
  </section>

</div><!-- /page-shell -->

<!-- ════════════════════════════════════════
     FOOTER (from milk_supply_nutrition.html)
     ════════════════════════════════════════ -->
<footer class="ns-footer" aria-label="Site footer">
  <div class="footer-main">
    <div class="footer-col">
      <h3>About This Guide</h3>
      <p>Comprehensive, evidence-based information synthesized from WHO, ACOG, ICMR guidelines, peer-reviewed research, and NFHS-5 data (724,115+ women).</p>
    </div>
    <div class="footer-col">
      <h3>Evidence Sources</h3>
      <ul>
        <li>World Health Organization</li>
        <li>ACOG Guidelines</li>
        <li>ICMR India</li>
        <li>NFHS-5 Survey</li>
      </ul>
    </div>
    <div class="footer-col">
      <h3>Important Disclaimer</h3>
      <p class="disclaimer-text">This provides general information only. Each pregnancy is unique. Medical decisions should be made with qualified healthcare providers who can assess your individual circumstances.</p>
    </div>
    <div class="footer-col">
      <h3>Emergency</h3>
      <p class="emergency-alert">Heavy bleeding, fever, chest pain, or severe abdominal pain require immediate medical attention. <strong>Don't delay.</strong></p>
    </div>
  </div>
  <div class="footer-meta">
    <p class="meta-line">Last Updated: February 2026 <span class="sep">|</span> Evidence-Based <span class="sep">•</span> Comprehensive <span class="sep">•</span> Empowering</p>
    <p class="tagline"><span class="heart">🩷</span> Dedicated to empowering every mother</p>
  </div>
  <div class="footer-bottom">
    <div class="footer-bottom-inner">
      <nav class="footer-links" aria-label="Legal and support links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Contact Support</a>
      </nav>
      <p class="footer-copy">&copy; 2026 Nari Swasthya. Empowering Women's Health.</p>
    </div>
  </div>
</footer>

<script>
/* Mobile menu toggle */
function toggleMobile(){
  const menu=document.getElementById('mobileMenu');
  const b1=document.getElementById('hb1'),b2=document.getElementById('hb2'),b3=document.getElementById('hb3');
  const open=menu.classList.toggle('open');
  if(open){
    b1.style.cssText='transform:rotate(45deg) translate(4px,4px);';
    b2.style.cssText='opacity:0;';
    b3.style.cssText='transform:rotate(-45deg) translate(4px,-4px);';
  } else {
    b1.style.cssText=''; b2.style.cssText=''; b3.style.cssText='';
  }
}
document.addEventListener('click',function(e){
  const menu=document.getElementById('mobileMenu');
  const btn=document.getElementById('hamburgerBtn');
  if(menu&&menu.classList.contains('open')&&!menu.contains(e.target)&&!btn.contains(e.target)){
    menu.classList.remove('open');
    document.getElementById('hb1').style.cssText='';
    document.getElementById('hb2').style.cssText='';
    document.getElementById('hb3').style.cssText='';
  }
});

/* ══════════════════════════════════════════════════════════
   INTERACTIVE FEEDING TRACKER — enhanced JS
   ══════════════════════════════════════════════════════════ */

// Extended state with event log
const ftState = {
  feeds: 0, wet: 0, dirty: 0, lastFeedTime: null,
  events: []   // {type, time, label}
};

// Donut ring helper
function ftSetRing(id, val, max, color) {
  const el = document.getElementById(id);
  if (!el) return;
  const circ = 201;
  const pct = Math.min(val / max, 1);
  el.style.strokeDashoffset = circ - pct * circ;
}
function ftSetNum(id, val) {
  const el = document.getElementById(id);
  if (el) el.textContent = val;
}
function ftSetStatus(id, cls) {
  const el = document.getElementById(id);
  if (!el) return;
  el.className = 'ft-donut-status ' + cls;
}

function ftUpdateAll() {
  // Donuts
  ftSetRing('ft-ring-feeds', ftState.feeds, 12);
  ftSetRing('ft-ring-wet',   ftState.wet,   8);
  ftSetRing('ft-ring-dirty', ftState.dirty, 4);
  ftSetNum('ft-num-feeds', ftState.feeds);
  ftSetNum('ft-num-wet',   ftState.wet);
  ftSetNum('ft-num-dirty', ftState.dirty);

  // Status dots
  ftSetStatus('ft-status-feeds',
    ftState.feeds >= 8  ? 'ft-status-ok'   :
    ftState.feeds >= 5  ? 'ft-status-warn' : 'ft-status-alert');
  ftSetStatus('ft-status-wet',
    ftState.wet >= 6   ? 'ft-status-ok'   :
    ftState.wet >= 3   ? 'ft-status-warn' : 'ft-status-alert');
  ftSetStatus('ft-status-dirty',
    ftState.dirty >= 3 ? 'ft-status-ok'   :
    ftState.dirty >= 1 ? 'ft-status-warn' : 'ft-status-alert');

  // Since / next feed countdown
  const sinceEl = document.getElementById('ft-since-label');
  const nextEl  = document.getElementById('ft-next-msg');
  const dotEl   = document.getElementById('ft-urgency-dot');
  if (ftState.lastFeedTime) {
    const mins = Math.floor((Date.now() - new Date(ftState.lastFeedTime)) / 60000);
    const h = Math.floor(mins/60), m = mins%60;
    if (sinceEl) sinceEl.textContent = h > 0 ? `${h}h ${m}m` : `${m}m`;
    if (mins < 90 && nextEl)  { nextEl.textContent='✓ Well within window'; dotEl&&(dotEl.style.background='#66bb6a'); }
    else if (mins < 120 && nextEl) { nextEl.textContent='⏰ Feed due soon'; dotEl&&(dotEl.style.background='#ffa726'); }
    else { nextEl&&(nextEl.textContent='🚨 Feed overdue!'); dotEl&&(dotEl.style.background='#ef5350'); }
  }

  // Backward compat with original IDs
  ['feedCount','wetDiaper','dirtyDiaper'].forEach((id,i) => {
    const el = document.getElementById(id);
    if (el) el.textContent = [ftState.feeds, ftState.wet, ftState.dirty][i];
  });
  const lfEl = document.getElementById('lastFeed');
  if (lfEl && ftState.lastFeedTime) {
    const mins = Math.floor((Date.now() - new Date(ftState.lastFeedTime))/60000);
    const h=Math.floor(mins/60), m=mins%60;
    lfEl.textContent = h>0?`${h}h ${m}m`:`${m}m`;
  }

  ftSaveLocal();
  ftRenderTimeline();
  ftRenderHealthStatus();
  ftRenderBarChart();
}

function ftSaveLocal() {
  try { localStorage.setItem('ftState2', JSON.stringify(ftState)); } catch(e){}
}
function ftLoadLocal() {
  try {
    const s = localStorage.getItem('ftState2');
    if (s) Object.assign(ftState, JSON.parse(s));
  } catch(e){}
}

// Public log functions (called by existing onclick handlers + new ones)
function addFeed() { addFeedDetailed(); }
function addFeedDetailed() {
  const type = document.getElementById('ft-feed-type')?.value || 'breast';
  const dur  = document.getElementById('ft-feed-dur')?.value  || '15';
  const labels = { left:'Left Breast',right:'Right Breast',both:'Both Breasts',
    'bottle-bm':'Bottle (BM)','bottle-formula':'Formula' };
  ftState.feeds++;
  ftState.lastFeedTime = new Date().toISOString();
  ftState.events.unshift({ type:'feed', time:Date.now(), label:`🍼 ${labels[type]||type} · ${dur} min` });
  ftUpdateAll();
  showToast('✓ Feed logged!');
}
function addDiaper(type) {
  if (type==='wet') { ftState.wet++; ftState.events.unshift({type:'wet',time:Date.now(),label:'💧 Wet diaper'}); showToast('💧 Wet diaper logged!'); }
  else              { ftState.dirty++; ftState.events.unshift({type:'dirty',time:Date.now(),label:'💩 Dirty diaper'}); showToast('💩 Dirty diaper logged!'); }
  ftUpdateAll();
}
function ftLogSleep() {
  ftState.events.unshift({type:'sleep',time:Date.now(),label:'😴 Sleep logged'});
  ftUpdateAll(); showToast('😴 Sleep logged');
}
function ftUndo() {
  if (!ftState.events.length) return;
  const last = ftState.events.shift();
  if (last.type==='feed')  { ftState.feeds=Math.max(0,ftState.feeds-1); ftState.lastFeedTime=ftState.events.find(e=>e.type==='feed')?.time||null; }
  if (last.type==='wet')   ftState.wet=Math.max(0,ftState.wet-1);
  if (last.type==='dirty') ftState.dirty=Math.max(0,ftState.dirty-1);
  ftUpdateAll(); showToast('↩ Last entry removed');
}
function resetTracker() {
  if (!confirm('Reset all today\'s data?')) return;
  Object.assign(ftState,{feeds:0,wet:0,dirty:0,lastFeedTime:null,events:[]});
  ftUpdateAll(); showToast('🔄 Reset complete');
}

// Tab switching
function ftTab(btn, panelId) {
  document.querySelectorAll('.ft-tabs .ft-tab').forEach(b=>b.classList.remove('ft-tab-active'));
  btn.classList.add('ft-tab-active');
  document.querySelectorAll('#ft-root .ft-panel').forEach(p=>p.style.display='none');
  const p = document.getElementById(panelId);
  if (p) p.style.display='block';
  if (panelId==='ft-panel-learn') ftBuildFlipCards();
  if (panelId==='ft-panel-status') ftRenderHealthStatus();
  if (panelId==='ft-panel-weight') {}
}

// ── Timeline ──
function ftRenderTimeline() {
  const el = document.getElementById('ft-timeline-list');
  if (!el) return;
  if (!ftState.events.length) {
    el.innerHTML='<div style="text-align:center;color:var(--text-soft);padding:2rem;font-size:.88rem;opacity:.7;">No events yet — switch to Log & Track to start.</div>';
    return;
  }
  const colors = { feed:'#fce4ec', wet:'#e1f5fe', dirty:'#fff8e1', sleep:'#ede7f6' };
  el.innerHTML = ftState.events.slice(0,40).map(ev=>{
    const t = new Date(ev.time);
    const ts = t.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});
    return `<div class="ft-event-row" style="background:${colors[ev.type]||'#f5f5f5'};">
      <span style="font-size:.8rem;color:#aaa;min-width:44px;">${ts}</span>
      <span style="flex:1;font-weight:600;">${ev.label}</span>
    </div>`;
  }).join('');
}

// ── Bar Chart ──
function ftRenderBarChart() {
  const chart = document.getElementById('ft-bar-chart');
  const lbls  = document.getElementById('ft-bar-labels');
  if (!chart) return;
  const now = Date.now();
  const slots = Array.from({length:12},(_,i)=>({ label:`${(new Date(now-(11-i)*7200000)).getHours()}:00`, count:0 }));
  ftState.events.filter(e=>e.type==='feed').forEach(e=>{
    const slot = Math.floor((now - e.time) / 7200000);
    if (slot>=0&&slot<12) slots[11-slot].count++;
  });
  const mx = Math.max(...slots.map(s=>s.count),1);
  chart.innerHTML = slots.map(s=>`
    <div title="${s.label}: ${s.count} feed(s)" style="flex:1;background:${s.count>0?'var(--primary)':'#f0e6f0'};
      border-radius:4px 4px 0 0;height:${Math.max(4,(s.count/mx)*56)}px;transition:height .4s;"></div>`).join('');
  if (lbls) lbls.innerHTML = slots.filter((_,i)=>i%3===0).map(s=>`<span>${s.label}</span>`).join('');
}

// ── Health Status Cards ──
const ftDayData = [
  {day:'Day 1–2',feeds:'8–12',wet:'1–2',dirty:'1–2 (black meconium)',note:'Meconium is thick, dark, tarry — normal.'},
  {day:'Day 3–4',feeds:'8–12',wet:'3–4',dirty:'3–4 (changing colour)',note:'Transitional stools — greenish/yellow.'},
  {day:'Day 5+',feeds:'8–12',wet:'6–8',dirty:'3–4 (yellow, seedy)',note:'Yellow, mustardy stools = breastfed normal.'},
  {day:'Week 2+',feeds:'8–12',wet:'6+',dirty:'Varies',note:'After week 2 some breastfed babies go days without a dirty diaper — normal if soft.'},
];
function ftRenderHealthStatus() {
  const hc = document.getElementById('ft-health-cards');
  if (!hc) return;
  const items = [
    { label:'Feeds Today', val:ftState.feeds, target:'8–12', ok:ftState.feeds>=8, warn:ftState.feeds>=5 },
    { label:'Wet Diapers', val:ftState.wet,   target:'6–8',  ok:ftState.wet>=6,   warn:ftState.wet>=3  },
    { label:'Dirty Diapers',val:ftState.dirty,target:'3–4',  ok:ftState.dirty>=3, warn:ftState.dirty>=1},
    { label:'Last Feed',   val:ftState.lastFeedTime ? (() => {
        const m=Math.floor((Date.now()-new Date(ftState.lastFeedTime))/60000);
        return m<60?`${m}m ago`:`${Math.floor(m/60)}h ${m%60}m ago`; })() : '—',
      target:'every 2–3h', ok:ftState.lastFeedTime&&(Date.now()-new Date(ftState.lastFeedTime))<7200000,
      warn:ftState.lastFeedTime&&(Date.now()-new Date(ftState.lastFeedTime))<10800000 },
  ];
  hc.innerHTML = items.map(it=>{
    const cls = it.ok ? 'ft-health-mini-ok' : it.warn ? 'ft-health-mini-warn' : 'ft-health-mini-alert';
    const icon = it.ok ? '✅' : it.warn ? '⚠️' : '🚨';
    return `<div class="ft-health-mini ${cls}">
      <div style="font-size:.75rem;font-weight:700;color:#666;text-transform:uppercase;letter-spacing:.05em;">${it.label}</div>
      <div style="font-size:1.6rem;font-weight:900;color:inherit;">${it.val}</div>
      <div style="font-size:.72rem;color:#888;">Target: ${it.target} ${icon}</div>
    </div>`;
  }).join('');
  // Day targets
  const dt = document.getElementById('ft-day-targets');
  if (!dt) return;
  dt.innerHTML = ftDayData.map((d,i)=>`
    <div class="ft-day-row">
      <div class="ft-day-hdr" onclick="this.nextSibling.style.display=this.nextSibling.style.display==='block'?'none':'block'">
        <span>📅 ${d.day}</span><span style="font-size:.75rem;color:var(--text-soft);">Feeds: ${d.feeds} | Wet: ${d.wet} | Dirty: ${d.dirty} ▾</span>
      </div>
      <div class="ft-day-body">📌 ${d.note}</div>
    </div>`).join('');
}

// ── Flip Cards ──
const ftFlipData = [
  {front:'✅ Good wet count',back:'6–8 wet diapers/day by day 5 means baby is well hydrated and getting enough milk.'},
  {front:'💛 Yellow, seedy stools',back:'Yellow, mustardy, seedy stools in breastfed babies = perfect. Indicates foremilk/hindmilk balance.'},
  {front:'😊 Contentment between feeds',back:'A satisfied baby who settles after a feed and isn\'t constantly rooting is receiving adequate intake.'},
  {front:'📈 Weight gain 150–200 g/wk',back:'After the initial 7–10% loss and regain by day 14, expect ~150–200 g per week — a key sign of sufficient nutrition.'},
  {front:'🔊 Swallowing sounds',back:'Audible swallowing ("kuh" sound) during feeding = active milk transfer. Silence may mean poor latch.'},
  {front:'🚨 Fewer than 6 wet',back:'Fewer than 6 wet diapers by day 5 suggests dehydration — contact your midwife or paediatrician today.'},
  {front:'🚨 Dark, concentrated urine',back:'Dark yellow, orange or brick-red urine indicates dehydration. Seek medical advice immediately.'},
  {front:'🚨 Weight loss >10%',back:'Loss of more than 10% of birth weight requires medical evaluation and likely supplementation.'},
];
function ftBuildFlipCards() {
  const g = document.getElementById('ft-flip-grid');
  if (!g || g.innerHTML.trim()) return;
  g.innerHTML = ftFlipData.map((d,i)=>`
    <div class="ft-flip-card" onclick="this.classList.toggle('flipped')">
      <div class="ft-flip-inner">
        <div class="ft-flip-front"><div style="font-size:1.5rem;margin-bottom:.4rem;">${d.front.split(' ')[0]}</div><div style="font-weight:700;font-size:.82rem;">${d.front.slice(d.front.indexOf(' ')+1)}</div></div>
        <div class="ft-flip-back" style="font-size:.78rem;line-height:1.6;padding:.8rem;">${d.back}</div>
      </div>
    </div>`).join('');
}

// ── Hydration Slider ──
function ftUpdateHydration(v) {
  const el = document.getElementById('ft-hydration-result');
  if (!el) return;
  v = parseInt(v);
  const states = [
    {bg:'#ffebee',border:'#ef5350',icon:'🚨',title:'Severely dehydrated',text:'0 wet diapers — seek immediate medical care. Baby is dangerously dehydrated.'},
    {bg:'#ffebee',border:'#ef5350',icon:'🚨',title:'Severely dehydrated',text:'Only 1 wet diaper — seek medical care urgently today.'},
    {bg:'#fff8e1',border:'#ffa726',icon:'⚠️',title:'Mildly dehydrated',text:'2 wet diapers — below normal. Increase feeding frequency immediately.'},
    {bg:'#fff8e1',border:'#ffa726',icon:'⚠️',title:'Watch closely',text:'3 wet diapers — marginal for day 5+. Feed more frequently and monitor closely.'},
    {bg:'#fff8e1',border:'#ffca28',icon:'⚠️',title:'Below target',text:'4 wet diapers — improving but aim for 6+ by day 5.'},
    {bg:'#f1f8e9',border:'#aed581',icon:'✅',title:'Approaching target',text:'5 wet diapers — nearly there! Aim for 6–8 per day from day 5 onwards.'},
    {bg:'#e8f5e9',border:'#66bb6a',icon:'✅',title:'Well hydrated',text:'6 wet diapers — right in the normal range. Great sign baby is getting enough milk!'},
    {bg:'#e8f5e9',border:'#66bb6a',icon:'✅',title:'Well hydrated',text:'7 wet diapers — excellent hydration. Keep up the good feeding rhythm!'},
    {bg:'#e8f5e9',border:'#66bb6a',icon:'✅',title:'Excellent hydration',text:'8 wet diapers — fantastic. Baby is thriving and very well nourished.'},
    {bg:'#e3f2fd',border:'#42a5f5',icon:'✅',title:'Excellent',text:'9 wet diapers — above normal. All fine — this can happen with very frequent feeding.'},
    {bg:'#e3f2fd',border:'#42a5f5',icon:'ℹ️',title:'Very high output',text:'10 wet diapers — unusually high. Could indicate oversupply. Mention to your lactation consultant if ongoing.'},
  ];
  const s = states[v] || states[6];
  el.style.background = s.bg;
  el.style.border = `2px solid ${s.border}`;
  el.innerHTML = `<div style="font-size:1.5rem;">${s.icon}</div>
    <div style="font-weight:800;font-size:.95rem;margin:.3rem 0;">${s.title}</div>
    <div style="font-size:.82rem;line-height:1.6;color:#555;">${s.text}</div>`;
}

// ── Weight Calculator ──
function ftCalcWeight() {
  const bw = parseFloat(document.getElementById('ft-birth-wt')?.value);
  const cw = parseFloat(document.getElementById('ft-curr-wt')?.value);
  const age = parseInt(document.getElementById('ft-age-days')?.value) || 0;
  const res = document.getElementById('ft-weight-result');
  const gauge = document.getElementById('ft-weight-gauge-wrap');
  const marker = document.getElementById('ft-weight-gauge-marker');
  if (!res || isNaN(bw) || isNaN(cw) || bw<=0) return;
  const pct = ((bw-cw)/bw)*100;
  const gain = cw > bw;
  if (gauge) gauge.style.display = 'block';
  // Gauge: 0%=left, 15%=right — map pct onto 0..100% width
  if (marker) marker.style.left = Math.min(Math.max((pct/15)*100, 0), 100) + '%';
  res.style.display = 'block';
  if (gain) {
    res.style.background = '#e8f5e9'; res.style.border = '2px solid #66bb6a';
    res.innerHTML = `<div style="font-size:1.4rem;margin-bottom:.4rem;">✅</div>
      <div style="font-weight:800;color:#2e7d32;">Back to birth weight or above</div>
      <div style="font-size:.82rem;color:#555;margin-top:.4rem;">Weight gain is a positive sign. Baby is well nourished. Continue current feeding pattern.</div>`;
  } else if (pct <= 7) {
    res.style.background = '#e8f5e9'; res.style.border = '2px solid #66bb6a';
    res.innerHTML = `<div style="font-size:1.4rem;margin-bottom:.4rem;">✅</div>
      <div style="font-weight:800;color:#2e7d32;">Normal loss: ${pct.toFixed(1)}% of birth weight</div>
      <div style="font-size:.82rem;color:#555;margin-top:.4rem;">Up to 7% loss in days 1–4 is completely normal. Expect regain to birth weight by day 10–14.</div>`;
  } else if (pct <= 10) {
    const extra = age > 7 ? ' — past the regain window; mention to your paediatrician.' : '';
    res.style.background = '#fff8e1'; res.style.border = '2px solid #ffa726';
    res.innerHTML = `<div style="font-size:1.4rem;margin-bottom:.4rem;">⚠️</div>
      <div style="font-weight:800;color:#e65100;">Watch closely: ${pct.toFixed(1)}% loss${extra}</div>
      <div style="font-size:.82rem;color:#555;margin-top:.4rem;">7–10% loss: increase feeding frequency to 10–12 times/day. Contact your midwife or lactation consultant.</div>`;
  } else {
    res.style.background = '#ffebee'; res.style.border = '2px solid #ef5350';
    res.innerHTML = `<div style="font-size:1.4rem;margin-bottom:.4rem;">🚨</div>
      <div style="font-weight:800;color:#c62828;">Significant loss: ${pct.toFixed(1)}% — seek medical review</div>
      <div style="font-size:.82rem;color:#555;margin-top:.4rem;">Loss exceeding 10% requires prompt paediatric evaluation. Supplementation may be needed while protecting breast milk supply.</div>`;
  }
}

// Initialise on load
document.addEventListener('DOMContentLoaded', () => {
  ftLoadLocal();
  ftUpdateAll();
  ftUpdateHydration(3);
  vsInitHeart();
  vsInitBreath();
  vsUpdateTemp(37);
  vsInitScenarios();
  vsInitChecker();
});

/* ══════════════════════════════════════════════════════════
   VITAL SIGNS INTERACTIVE — JS
   ══════════════════════════════════════════════════════════ */

// ── Tab switcher ──
function vsTab(btn, panelId) {
  document.querySelectorAll('#vs-root .ft-tab').forEach(b=>b.classList.remove('ft-tab-active'));
  btn.classList.add('ft-tab-active');
  document.querySelectorAll('#vs-root .ft-panel').forEach(p=>p.style.display='none');
  const p = document.getElementById(panelId);
  if (p) p.style.display = 'block';
}

// ══ HEART RATE ══
const vsHeartStates = {
  sleep:   { bpm:90,  range:'80–100',  label:'SLEEPING',   color:'#7986cb', desc:'During deep sleep heart rate dips below 100 — completely normal in newborns.', status:'ok'   },
  rest:    { bpm:130, range:'100–160', label:'RESTING',    color:'#66bb6a', desc:'Normal resting rate. Count for a full 60 seconds — spot-checks miss irregular rhythms.', status:'ok' },
  feeding: { bpm:150, range:'120–160', label:'FEEDING',    color:'#ffa726', desc:'Feeding is mild exertion — expect a slight rise. Back to baseline within minutes of finishing.', status:'ok' },
  crying:  { bpm:185, range:'up to 200', label:'CRYING',   color:'#ef5350', desc:'Crying raises heart rate transiently to 180–200 BPM. This is normal physiological response — resolves when baby settles.', status:'warn' },
  concern: { bpm:55,  range:'<80 resting', label:'CONCERN ⚠', color:'#b71c1c', desc:'Persistent rate below 80 at rest (bradycardia) requires immediate medical evaluation. Call emergency services.', status:'alert' },
};
let vsHeartCurrent = 'sleep';
let vsECGAnimId = null, vsECGX = 0, vsECGPoints = [];

function vsSetHeart(state, btn) {
  vsHeartCurrent = state;
  document.querySelectorAll('#vs-heart-states .vs-state-btn').forEach(b=>b.classList.remove('vs-state-active'));
  btn.classList.add('vs-state-active');
  vsRenderHeartInfo(state);
  const bpmEl = document.getElementById('vs-bpm-display');
  const lblEl = document.getElementById('vs-heart-state-lbl');
  const s = vsHeartStates[state];
  if (bpmEl) bpmEl.innerHTML = `${s.bpm} <span style="font-size:.65rem;opacity:.7;">BPM</span>`;
  if (lblEl) { lblEl.textContent = s.label; lblEl.style.color = s.color; }
}
function vsRenderHeartInfo(state) {
  const s = vsHeartStates[state];
  const el = document.getElementById('vs-heart-info-row');
  if (!el) return;
  const clsMap = {ok:'vs-tile-ok',warn:'vs-tile-warn',alert:'vs-tile-alert'};
  el.innerHTML = `
    <div class="vs-info-tile ${clsMap[s.status]}">
      <strong>BPM: ${s.bpm}</strong><br>Normal range: ${s.range}
    </div>
    <div class="vs-info-tile vs-tile-info">
      ${s.desc}
    </div>
    <div class="vs-info-tile ${s.status==='alert'?'vs-tile-alert':'vs-tile-ok'}">
      ${s.status==='alert'? '🚨 Seek medical help immediately' : s.status==='warn'? '✓ Temporary — normal physiological response' : '✅ Within normal range'}
    </div>`;
}

function vsInitHeart() {
  const canvas = document.getElementById('vs-ecg-canvas');
  if (!canvas) return;
  canvas.width = canvas.parentElement.offsetWidth || 600;
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;

  function ecgWaveformY(x, bpm, stateKey) {
    const period = (60/bpm) * 80; // pixels per beat
    const phase = x % period;
    const r = phase/period;
    if (stateKey==='concern') {
      // Slow wide bumps — bradycardia pattern
      return H/2 - Math.sin(r*Math.PI)*18 * Math.exp(-Math.pow((r-.5)*6,2));
    }
    // Normal ECG: P-QRS-T simplified
    const p  = H/2 - 8  * Math.exp(-Math.pow((r-.08)*40,2));
    const q  =       4  * Math.exp(-Math.pow((r-.15)*60,2));
    const rs = H/2 - (stateKey==='crying'?55:40) * Math.exp(-Math.pow((r-.18)*55,2));
    const s  = H/2 + 12 * Math.exp(-Math.pow((r-.22)*60,2));
    const t  = H/2 - 14 * Math.exp(-Math.pow((r-.35)*20,2));
    if (r<.06) return H/2;
    if (r<.12) return p;
    if (r<.16) return H/2+q;
    if (r<.20) return rs;
    if (r<.25) return s;
    if (r<.50) return t;
    return H/2;
  }

  let offset = 0;
  function drawECG() {
    ctx.fillStyle = '#0d1117'; ctx.fillRect(0,0,W,H);
    // Grid
    ctx.strokeStyle='rgba(0,200,100,.06)'; ctx.lineWidth=.5;
    for(let x=0;x<W;x+=20){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,H);ctx.stroke();}
    for(let y=0;y<H;y+=20){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke();}
    // Waveform
    const s = vsHeartStates[vsHeartCurrent];
    ctx.strokeStyle = s.color; ctx.lineWidth = 2; ctx.shadowColor = s.color; ctx.shadowBlur = 4;
    ctx.beginPath();
    for(let px=0;px<W;px++){
      const y = ecgWaveformY(px+offset, s.bpm, vsHeartCurrent);
      px===0 ? ctx.moveTo(px,y) : ctx.lineTo(px,y);
    }
    ctx.stroke(); ctx.shadowBlur=0;
    offset += s.bpm/30;
    vsECGAnimId = requestAnimationFrame(drawECG);
  }
  if (vsECGAnimId) cancelAnimationFrame(vsECGAnimId);
  drawECG();
  vsSetHeart('sleep', document.querySelector('#vs-heart-states .vs-state-btn'));
}

// ══ BREATHING ══
const vsBreathStates = {
  normal:   { rr:40, label:'NORMAL',    color:'#4fc3f7', scale:1,    desc:'Regular, unlaboured — 30–60 breaths/min normal for newborns.', status:'ok',   pause:0 },
  periodic: { rr:35, label:'PERIODIC',  color:'#9575cd', scale:1.1, desc:'Periodic breathing: brief pauses <10 sec then rapid burst — normal and benign in newborns.', status:'ok', pause:800 },
  fast:     { rr:70, label:'FAST ⚠',   color:'#ffa726', scale:1.2, desc:'>60 breaths/min (tachypnoea) — may indicate respiratory distress. Observe for other signs.', status:'warn', pause:0 },
  labored:  { rr:80, label:'LABORED 🚨',color:'#ef5350', scale:1.35,desc:'Laboured breathing with grunting or flaring is an emergency. Call 112/108 immediately.', status:'alert', pause:0 },
};
let vsBreathCurrent = 'normal', vsBreathAnimId = null;

function vsSetBreath(state, btn) {
  vsBreathCurrent = state;
  document.querySelectorAll('#vs-panel-breath .vs-state-btn').forEach(b=>b.classList.remove('vs-state-active'));
  btn.classList.add('vs-state-active');
  const s = vsBreathStates[state];
  const rrEl = document.getElementById('vs-rr-display');
  const lbEl = document.getElementById('vs-breath-state-lbl');
  const dEl  = document.getElementById('vs-breath-desc');
  if (rrEl) rrEl.innerHTML = `${s.rr} <span style="font-size:.65rem;opacity:.7;">BPM</span>`;
  if (lbEl) { lbEl.textContent = s.label; lbEl.style.color = s.color; }
  if (dEl)  dEl.textContent = s.desc;
  vsRenderBreathInfo(state);
}
function vsRenderBreathInfo(state) {
  const s = vsBreathStates[state];
  const el = document.getElementById('vs-breath-info-row');
  if (!el) return;
  const cls = {ok:'vs-tile-ok',warn:'vs-tile-warn',alert:'vs-tile-alert'};
  el.innerHTML = `
    <div class="vs-info-tile ${cls[s.status]}"><strong>Rate: ${s.rr}/min</strong><br>Pause: ${s.pause?`up to ${s.pause}ms — benign`:'none'}</div>
    <div class="vs-info-tile vs-tile-info">${s.desc}</div>
    <div class="vs-info-tile ${cls[s.status]}">${s.status==='alert'?'🚨 Call emergency services now':s.status==='warn'?'⚠️ Monitor closely and call doctor if persists':'✅ Normal — no action needed'}</div>`;
}

function vsInitBreath() {
  const canvas = document.getElementById('vs-breath-canvas');
  if (!canvas) return;
  canvas.width = canvas.parentElement.offsetWidth || 600;
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  let t = 0, pauseUntil = 0;

  function drawBreath() {
    ctx.fillStyle = '#0a0f1a'; ctx.fillRect(0,0,W,H);
    ctx.strokeStyle='rgba(79,195,247,.06)'; ctx.lineWidth=.5;
    for(let x=0;x<W;x+=20){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,H);ctx.stroke();}
    for(let y=0;y<H;y+=20){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke();}
    const s = vsBreathStates[vsBreathCurrent];
    ctx.strokeStyle = s.color; ctx.lineWidth=2.5; ctx.shadowColor=s.color; ctx.shadowBlur=5;
    ctx.beginPath();
    for(let px=0;px<W;px++){
      const period = (60/s.rr)*80;
      const phase  = (px + t) % period;
      const inPause = s.pause && (phase/period > .7) && (phase/period < .9);
      const y = inPause ? H/2 : H/2 - Math.sin((phase/period)*Math.PI) * (H/2*.6) * s.scale;
      px===0 ? ctx.moveTo(px,y) : ctx.lineTo(px,y);
    }
    ctx.stroke(); ctx.shadowBlur=0;
    // Animate baby icon with breathing
    const baby = document.getElementById('vs-baby-icon');
    if (baby) {
      const sc = 1 + Math.sin(t/8) * .06 * (s.scale-0.9);
      baby.style.transform = `scaleY(${sc})`;
    }
    t += s.rr/30;
    vsBreathAnimId = requestAnimationFrame(drawBreath);
  }
  if (vsBreathAnimId) cancelAnimationFrame(vsBreathAnimId);
  drawBreath();
  vsSetBreath('normal', document.querySelector('#vs-panel-breath .vs-state-btn'));
}

// ══ TEMPERATURE ══
function vsUpdateTemp(v) {
  v = parseFloat(v);
  const cEl = document.getElementById('vs-temp-c');
  const fEl = document.getElementById('vs-temp-f');
  const fill= document.getElementById('vs-therm-fill');
  const res = document.getElementById('vs-temp-result');
  if (cEl) cEl.textContent = v.toFixed(1)+'°C';
  if (fEl) fEl.textContent = ((v*9/5)+32).toFixed(1)+'°F';
  const pct = Math.min(Math.max((v-34)/7, 0), 1);
  if (fill) fill.style.height = (pct*100)+'%';
  if (!res) return;

  let cfg;
  if (v < 36) cfg = {bg:'#e3f2fd',border:'#42a5f5',icon:'🔵',title:'Hypothermia (<36°C)',body:'Baby is dangerously cold. Skin-to-skin contact immediately. Warm the room. Seek medical attention urgently.',action:'🚨 Emergency — warm baby now & call doctor'};
  else if (v < 36.5) cfg = {bg:'#e8f5e9',border:'#80cbc4',icon:'🟡',title:'Low-normal (36.0–36.4°C)',body:'Slightly cool. Dress baby in one extra layer and re-check in 20 minutes. Ensure room is 20–22°C.',action:'⚠️ Monitor closely — add warmth'};
  else if (v <= 37.5) cfg = {bg:'#e8f5e9',border:'#66bb6a',icon:'✅',title:'Normal temperature',body:'Perfect! Axillary 36.5–37.5°C is the ideal range. No action needed — maintain comfortable room temperature.',action:'✅ All clear — keep current conditions'};
  else if (v <= 38) cfg = {bg:'#fff8e1',border:'#ffa726',icon:'⚠️',title:'Borderline / Low-grade fever',body:'Rectal ≥38°C = fever. At this level check method used — axillary reading of 37.5–38°C warrants rectal confirmation.',action:'⚠️ Confirm with rectal thermometer'};
  else if (v <= 38.5) cfg = {bg:'#fff3e0',border:'#ef5350',icon:'🔴',title:'Fever (≥38°C rectal)',body:'Any rectal temp ≥38°C in a baby under 3 months requires immediate medical evaluation — do not wait to see if it resolves.',action:'🚨 Seek medical care today (under 3 months = emergency)'};
  else cfg = {bg:'#ffebee',border:'#c62828',icon:'🆘',title:'High fever (>38.5°C)',body:'Serious — call emergency services or go directly to emergency. Do not give antipyretics without medical guidance in newborns.',action:'🆘 Emergency — go to hospital now'};

  res.style.background = cfg.bg;
  res.style.border = `2px solid ${cfg.border}`;
  res.innerHTML = `<div style="display:flex;align-items:center;gap:.8rem;flex-wrap:wrap;">
    <span style="font-size:2rem;">${cfg.icon}</span>
    <div><strong style="font-size:1rem;">${cfg.title}</strong>
    <div style="font-size:.82rem;color:#555;margin-top:.25rem;">${cfg.body}</div>
    <div style="font-size:.8rem;font-weight:700;margin-top:.4rem;">${cfg.action}</div></div></div>`;
}

// ══ SCENARIO CHECKER ══
function vsInitScenarios() {
  const el = document.getElementById('vs-scenario-btns');
  if (!el) return;
  const scenarios = [
    {label:'🌙 Sleeping baby',  hr:88, rr:35, temp:37.0, state:'sleep'},
    {label:'😊 Calm awake',     hr:130,rr:42, temp:36.8, state:'rest'},
    {label:'😭 Crying hard',    hr:185,rr:60, temp:37.3, state:'crying'},
    {label:'🌡️ Mild fever',     hr:155,rr:52, temp:38.2, state:'rest'},
    {label:'🆘 Concern: slow HR',hr:65,rr:40, temp:36.5, state:'rest'},
    {label:'⚡ Fast breathing', hr:140,rr:72, temp:37.1, state:'rest'},
  ];
  el.innerHTML = scenarios.map(s=>`
    <button class="vs-state-btn" style="background:#7c3aed;" onclick="vsLoadScenario(${s.hr},${s.rr},${s.temp},'${s.state}')">${s.label}</button>`).join('');
}
function vsLoadScenario(hr, rr, temp, state) {
  const h = document.getElementById('vs-chk-hr'); if(h) h.value=hr;
  const r = document.getElementById('vs-chk-rr'); if(r) r.value=rr;
  const t = document.getElementById('vs-chk-temp'); if(t) t.value=temp;
  const s = document.getElementById('vs-chk-state'); if(s) s.value=state;
  vsRunChecker();
}
function vsInitChecker() { vsInitScenarios(); }
function vsRunChecker() {
  const hr   = parseFloat(document.getElementById('vs-chk-hr')?.value);
  const rr   = parseFloat(document.getElementById('vs-chk-rr')?.value);
  const temp = parseFloat(document.getElementById('vs-chk-temp')?.value);
  const st   = document.getElementById('vs-chk-state')?.value;
  const res  = document.getElementById('vs-checker-result');
  if (!res) return;
  if (isNaN(hr) && isNaN(rr) && isNaN(temp)) { res.style.display='none'; return; }
  res.style.display = 'block';

  let alerts=[], warns=[], oks=[];
  const hrRanges = {sleep:[80,100],rest:[100,160],feeding:[120,165],crying:[160,200]};
  const range = hrRanges[st] || [100,160];

  if (!isNaN(hr)) {
    if (hr<80 && st!=='sleep') alerts.push(`💗 Heart rate ${hr} BPM is dangerously low (bradycardia) — emergency evaluation needed`);
    else if (hr < range[0]) warns.push(`💗 Heart rate ${hr} BPM is below expected range for ${st||'current state'} (${range[0]}–${range[1]})`);
    else if (hr > range[1]) (st==='crying'&&hr<=200) ? oks.push(`💗 Heart rate ${hr} BPM — expected when crying`) : warns.push(`💗 Heart rate ${hr} BPM is above expected range for ${st||'current state'}`);
    else oks.push(`💗 Heart rate ${hr} BPM — normal for ${st||'current state'} (${range[0]}–${range[1]} BPM)`);
  }
  if (!isNaN(rr)) {
    if (rr < 30) warns.push(`🫁 Breathing rate ${rr}/min is below normal (30–60/min) — monitor closely`);
    else if (rr > 60) alerts.push(`🫁 Breathing rate ${rr}/min is above normal (>60 = tachypnoea) — seek medical advice`);
    else oks.push(`🫁 Breathing rate ${rr}/min — normal range (30–60/min)`);
  }
  if (!isNaN(temp)) {
    if (temp < 36)   alerts.push(`🌡️ Temperature ${temp}°C — hypothermia. Warm baby and seek emergency care`);
    else if (temp >= 38) alerts.push(`🌡️ Temperature ${temp}°C — fever in a newborn. Immediate medical evaluation required`);
    else if (temp < 36.5) warns.push(`🌡️ Temperature ${temp}°C — slightly low. Add warmth and re-check in 20 min`);
    else oks.push(`🌡️ Temperature ${temp}°C — normal range (36.5–37.5°C axillary)`);
  }

  const overall = alerts.length ? 'alert' : warns.length ? 'warn' : 'ok';
  const cfgMap  = {
    ok:    {bg:'#e8f5e9',border:'#66bb6a',icon:'✅',heading:'All values normal'},
    warn:  {bg:'#fff8e1',border:'#ffa726',icon:'⚠️',heading:'Some values need attention'},
    alert: {bg:'#ffebee',border:'#ef5350',icon:'🚨',heading:'Action required — seek medical care'},
  };
  const cfg = cfgMap[overall];
  res.style.background = cfg.bg;
  res.style.border = `2px solid ${cfg.border}`;
  const lines = [...alerts,...warns,...oks];
  res.innerHTML = `<div style="font-size:1.3rem;margin-bottom:.4rem;">${cfg.icon} <strong>${cfg.heading}</strong></div>
    ${lines.map(l=>`<div style="font-size:.83rem;margin:.25rem 0;padding:.3rem .5rem;border-radius:6px;background:rgba(255,255,255,.55);">${l}</div>`).join('')}
    ${overall==='alert'?'<div style="margin-top:.6rem;font-size:.82rem;font-weight:700;color:#c62828;">Call your paediatrician or emergency services immediately.</div>':''}`;
}

// ══ QUIZ ══
const vsQuizData = [
  {q:'A sleeping newborn has a heart rate of 88 BPM. What does this mean?',opts:['Normal — sleeping lowers HR to 80–100 BPM','Dangerous bradycardia — call emergency','Above normal — baby is stressed','Impossible — newborns can\'t go below 100'],ans:0,exp:'Sleeping newborns normally have a heart rate of 80–100 BPM. This is a well-documented physiological reduction during sleep.'},
  {q:'A baby is breathing 68 times per minute while calm and awake. You should:',opts:['Do nothing — this is within normal range','Monitor and contact doctor — >60/min is tachypnoea','Count again — you probably miscounted','Give the baby a pacifier'],ans:1,exp:'Normal newborn respiratory rate is 30–60/min. Consistently above 60 while at rest = tachypnoea and warrants medical review.'},
  {q:'Your 6-day-old has an axillary temperature of 37.8°C. The correct action is:',opts:['Normal — no action needed','Remove one layer and recheck in 20 minutes','Take a rectal temperature to confirm','Call emergency services immediately'],ans:2,exp:'Axillary 37.5–38°C is borderline. Confirm with a rectal reading — rectal ≥38°C = fever requiring same-day medical evaluation.'},
  {q:'A newborn\'s heart rate rises to 185 BPM while crying. This is:',opts:['Normal — crying causes transient HR rises up to 200','Dangerous tachycardia — call a doctor','A sign of dehydration','Impossible for a newborn'],ans:0,exp:'Crying is a form of exertion for babies. Heart rates of 180–200 BPM during active crying are normal and resolve when baby settles.'},
  {q:'What rectal temperature defines fever in a newborn under 3 months?',opts:['37.5°C or above','38.0°C or above','38.5°C or above','39.0°C or above'],ans:1,exp:'By WHO and AAP definition, rectal temperature ≥38.0°C = fever in a newborn under 3 months — requires immediate medical evaluation.'},
  {q:'Brief breathing pauses of 5–8 seconds in a sleeping newborn are:',opts:['Normal periodic breathing — benign','A sign of apnoea — emergency','Caused by poor positioning','Indicate low oxygen'],ans:0,exp:'Periodic breathing — short pauses (<10 sec) followed by rapid breaths — is a normal and benign pattern in healthy newborns.'},
  {q:'A newborn\'s axillary temperature is 35.8°C. The priority action is:',opts:['Recheck in one hour','Skin-to-skin contact and warm the environment, then seek care','Give warm fluids','This is normal — no action needed'],ans:1,exp:'Axillary <36°C indicates hypothermia. Immediate skin-to-skin contact warms the baby efficiently. Medical review needed if temperature doesn\'t respond.'},
  {q:'For the most accurate temperature reading in a newborn under 3 months, you should use:',opts:['Ear (tympanic) thermometer','Forehead infrared thermometer','Rectal thermometer','Axillary thermometer'],ans:2,exp:'Rectal temperature is the gold standard for accuracy in newborns under 3 months. Tympanic and forehead methods have poor reliability at this age.'},
];
let vsQIdx=0, vsQScore=0, vsQStarted=false;
function vsQuizStart() {
  vsQIdx=0; vsQScore=0; vsQStarted=true;
  document.getElementById('vs-quiz-nav').style.display='none';
  vsQuizRender();
}
function vsQuizRender() {
  const body = document.getElementById('vs-quiz-body');
  const scoreEl = document.getElementById('vs-quiz-score-badge');
  if (!body) return;
  if (vsQIdx >= vsQuizData.length) {
    const pct = Math.round((vsQScore/vsQuizData.length)*100);
    const msg = pct>=80?'🌟 Excellent!':pct>=60?'👍 Good job!':'📚 Keep learning!';
    body.innerHTML = `<div style="text-align:center;padding:1.5rem;">
      <div style="font-size:3rem;margin-bottom:.5rem;">${msg.split(' ')[0]}</div>
      <div style="font-size:1.3rem;font-weight:800;color:var(--primary);margin-bottom:.5rem;">${msg.slice(3)} You scored ${vsQScore}/${vsQuizData.length}</div>
      <div style="font-size:.88rem;color:var(--text-soft);">${pct}% correct — ${pct>=80?'you have strong knowledge of newborn vital signs!':pct>=60?'review the sections where you were unsure.':'revisit the Heart Rate, Breathing and Temperature tabs to consolidate your knowledge.'}</div>
    </div>`;
    document.getElementById('vs-quiz-nav').innerHTML='<button class="add-feed-btn" style="background:var(--primary);margin:0;" onclick="vsQuizStart()">🔄 Retry Quiz</button>';
    document.getElementById('vs-quiz-nav').style.display='block';
    if (scoreEl) scoreEl.textContent=`Score: ${vsQScore}/${vsQuizData.length}`;
    return;
  }
  if (scoreEl) scoreEl.textContent=`Score: ${vsQScore}/${vsQIdx||0}`;
  const q = vsQuizData[vsQIdx];
  body.innerHTML = `
    <div style="background:#f9f5ff;border-radius:12px;padding:1.2rem;margin-bottom:1rem;">
      <div style="font-size:.75rem;font-weight:700;color:var(--text-soft);margin-bottom:.5rem;">Question ${vsQIdx+1} of ${vsQuizData.length}</div>
      <div style="font-weight:700;font-size:.95rem;line-height:1.5;">${q.q}</div>
    </div>
    ${q.opts.map((o,i)=>`<button class="vs-quiz-option" onclick="vsQuizAnswer(${i})">${String.fromCharCode(65+i)}. ${o}</button>`).join('')}`;
}
function vsQuizAnswer(chosen) {
  const q = vsQuizData[vsQIdx];
  const btns = document.querySelectorAll('.vs-quiz-option');
  btns.forEach((b,i)=>{
    b.disabled = true;
    if (i===q.ans) b.classList.add('vs-quiz-correct');
    else if (i===chosen && chosen!==q.ans) b.classList.add('vs-quiz-wrong');
  });
  if (chosen===q.ans) vsQScore++;
  const scoreEl = document.getElementById('vs-quiz-score-badge');
  if (scoreEl) scoreEl.textContent=`Score: ${vsQScore}/${vsQIdx+1}`;
  // Show explanation
  const exp = document.createElement('div');
  exp.style.cssText='background:#e3f2fd;border-left:4px solid #42a5f5;border-radius:0 10px 10px 0;padding:.9rem;margin-top:.8rem;font-size:.82rem;line-height:1.6;animation:ftFadeIn .3s;';
  exp.innerHTML=`<strong>📖 Explanation:</strong> ${q.exp}`;
  document.getElementById('vs-quiz-body').appendChild(exp);
  // Next button
  document.getElementById('vs-quiz-nav').innerHTML=`<button class="add-feed-btn" style="background:var(--primary);margin:0;" onclick="vsQIdx++;vsQuizRender()">Next →</button>`;
  document.getElementById('vs-quiz-nav').style.display='block';
  vsQIdx++;
}

// Trigger hydration init on first load too
document.addEventListener('DOMContentLoaded', ()=>{ ftUpdateHydration(3); });
</script>

</body>
</html>
