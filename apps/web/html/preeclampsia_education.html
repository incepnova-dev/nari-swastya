<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Preeclampsia Awareness | Empowering Indian Women</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Manrope:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<style>
  :root {
  --primary: #e91e63;
  --primary-dark: #c2185b;
  --primary-light: #f8bbd0;
  --secondary: #d81b60;
  --accent: #ff4081;
  --deep-pink: #d81b60;
  --border-soft: #f0e6f0;
  --bg-main: #fef5f7;
  --bg-card: #ffffff;
  --text-main: #212121;
  --text-soft: #555555;
  --text-light: #757575;
  --success: #66bb6a;
  --warning: #ffa726;
  --danger: #ef5350;
  --critical: #d32f2f;
  --mild: #66bb6a;
  --moderate: #ffa726;
  --severe: #ef5350;
  --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
  --shadow-md: 0 8px 20px rgba(0,0,0,0.1);
  --shadow-lg: 0 20px 40px rgba(0,0,0,0.15);
}

* { 
  margin: 0; 
  padding: 0; 
  box-sizing: border-box; 
}

html {
  overflow-x: hidden;
}

body {
  font-family: 'Manrope', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: var(--bg-main);
  color: var(--text-main);
  line-height: 1.7;
  overflow-x: hidden;
}

h1, h2, h3 {
  font-family: 'Playfair Display', serif;
  font-weight: 700;
}

/* ===================== HEADER ===================== */
.site-header{
  background:rgba(255,255,255,0.95);
  backdrop-filter:blur(24px);
  -webkit-backdrop-filter:blur(24px);
  padding:0;
  box-shadow:0 2px 24px rgba(236,64,122,0.09);
  position:sticky;top:0;z-index:1000;
  border-bottom:1px solid rgba(236,64,122,0.08);
}
.nav-container{
  max-width:1400px;margin:0 auto;
  padding:0 1.5rem;
  display:flex;justify-content:space-between;align-items:center;
  height:64px;
}
.logo{display:flex;align-items:center;gap:.65rem;flex-shrink:0;}
.logo-icon{
  width:40px;height:40px;border-radius:12px;
  background:linear-gradient(135deg,#ec407a,#ad1457);
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 4px 14px rgba(236,64,122,0.35);
  flex-shrink:0;
}
.logo-icon svg{width:22px;height:22px;fill:white;}
.logo-text{display:flex;flex-direction:column;gap:0;}
.logo-text a{
  text-decoration:none;
  font-family:'Playfair Display',serif;
  font-weight:900;font-size:1.25rem;line-height:1.1;
  background:linear-gradient(135deg,#ec407a,#ad1457);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.logo-text span{
  font-size:.62rem;color:var(--text-soft);
  font-family:'Manrope',sans-serif;font-weight:500;
  letter-spacing:.1em;text-transform:uppercase;
}
.main-nav{display:flex;align-items:center;gap:.2rem;}
.nav-item{position:relative;}
.nav-link{
  display:flex;align-items:center;gap:.3rem;
  text-decoration:none;color:var(--text-main);
  font-weight:500;font-size:.875rem;
  padding:.55rem .75rem;border-radius:8px;
  transition:all .25s;white-space:nowrap;
  cursor:pointer;background:none;border:none;font-family:inherit;
}
.nav-link:hover,.nav-link.active{color:var(--deep-pink);background:rgba(236,64,122,0.06);}
.nav-link .chevron{font-size:.6rem;transition:transform .25s;color:var(--text-soft);margin-top:1px;}
.nav-item:hover .chevron{transform:rotate(180deg);}
.nav-dropdown{
  position:absolute;top:calc(100% + 8px);left:50%;
  transform:translateX(-50%) translateY(-6px);
  min-width:220px;background:white;border-radius:16px;
  box-shadow:0 16px 50px rgba(0,0,0,0.12),0 4px 16px rgba(236,64,122,0.1);
  border:1px solid rgba(236,64,122,0.1);padding:.5rem;
  opacity:0;pointer-events:none;
  transition:all .25s cubic-bezier(.23,1.01,.32,1);z-index:200;
}
.nav-dropdown::before{
  content:'';position:absolute;top:-6px;left:50%;transform:translateX(-50%);
  border:6px solid transparent;border-bottom-color:white;
  border-top:none;filter:drop-shadow(0 -2px 4px rgba(0,0,0,0.06));
}
.nav-item:hover .nav-dropdown,.nav-item:focus-within .nav-dropdown{
  opacity:1;pointer-events:all;transform:translateX(-50%) translateY(0);
}
.dd-item{
  display:flex;align-items:center;gap:.75rem;
  padding:.65rem .9rem;border-radius:10px;
  text-decoration:none;color:var(--text-main);
  font-size:.85rem;font-weight:500;transition:all .2s;
}
.dd-item:hover{background:rgba(236,64,122,0.07);color:var(--deep-pink);padding-left:1.1rem;}
.dd-icon{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:.8rem;flex-shrink:0;}
.dd-sep{height:1px;background:var(--border-soft);margin:.3rem .5rem;}
.nav-actions{display:flex;gap:.6rem;align-items:center;}
.btn-nav{
  padding:.46rem 1.1rem;border-radius:50px;text-decoration:none;
  font-weight:600;font-size:.82rem;transition:all .3s;border:none;cursor:pointer;
  font-family:inherit;display:inline-flex;align-items:center;gap:.4rem;
}
.btn-nav.outline{
  background:linear-gradient(135deg,#ec407a,#ad1457);
  color:#fff;box-shadow:0 4px 15px rgba(236,64,122,0.3);border:none;
}
.btn-nav.outline:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(236,64,122,0.4);color:#fff;}
.btn-nav.primary{border:1.5px solid var(--deep-pink);color:var(--deep-pink);background:#fff;box-shadow:none;}
.btn-nav.primary:hover{background:rgba(236,64,122,0.05);border-color:var(--deep-pink);}
.hamburger{
  display:none;width:38px;height:38px;border-radius:10px;
  background:none;border:1.5px solid var(--border-soft);
  align-items:center;justify-content:center;cursor:pointer;
  flex-direction:column;gap:4px;padding:8px;
}
.hamburger span{display:block;height:2px;background:var(--text-main);border-radius:2px;transition:all .3s;}
.mobile-menu{
  display:none;position:fixed;inset:0;top:64px;
  background:rgba(255,255,255,0.98);backdrop-filter:blur(20px);
  z-index:999;padding:1.5rem;overflow-y:auto;
}
.mobile-menu.open{display:block;}
.mm-link{
  display:flex;align-items:center;gap:.75rem;
  padding:.85rem 1rem;border-radius:12px;
  text-decoration:none;color:var(--text-main);
  font-weight:500;font-size:1rem;
  transition:all .2s;border-bottom:1px solid var(--border-soft);
}
.mm-link:hover{color:var(--deep-pink);background:rgba(236,64,122,0.05);}
.mm-section{font-size:.72rem;font-weight:700;color:var(--text-soft);text-transform:uppercase;letter-spacing:.1em;padding:.6rem 1rem .3rem;}
@media(max-width:1060px){.main-nav{display:none;}.hamburger{display:flex;}}
@media(max-width:600px){.nav-actions .btn-nav{display:none;}}
/* Always keep Sign In + Contact Us visible inside mobile menu overlay */
.mobile-menu .btn-nav{display:inline-flex !important;}

.page-shell {
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem 2rem 4rem;
}

/* ================================
   HERO SECTION WITH 3D ANIMATION
   ================================ */
.hero {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4rem;
  align-items: center;
  padding: 4rem;
  border-radius: 30px;
  background: linear-gradient(135deg, #fff5f8 0%, #ffe0eb 50%, #ffd6e3 100%);
  box-shadow: var(--shadow-lg);
  margin-bottom: 5rem;
  position: relative;
  overflow: hidden;
}

.hero::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 700px;
  height: 700px;
  background: radial-gradient(circle, rgba(233,30,99,0.15) 0%, transparent 70%);
  animation: heroGlow 8s ease-in-out infinite;
  pointer-events: none;
}

@keyframes heroGlow {
  0%, 100% { 
    transform: scale(1) rotate(0deg); 
    opacity: 0.5; 
  }
  50% { 
    transform: scale(1.3) rotate(180deg); 
    opacity: 0.8; 
  }
}

.hero-content { 
  position: relative; 
  z-index: 1; 
}

.emergency-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(239, 83, 80, 0.1);
  border: 2px solid var(--danger);
  padding: 0.5rem 1rem;
  border-radius: 50px;
  margin-bottom: 1.5rem;
  font-weight: 600;
  font-size: 0.85rem;
  color: var(--danger);
}

.pulse-dot {
  width: 8px;
  height: 8px;
  background: var(--danger);
  border-radius: 50%;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { 
    transform: scale(1); 
    opacity: 1; 
  }
  50% { 
    transform: scale(1.3); 
    opacity: 0.7; 
  }
}

.hero h1 {
  font-size: clamp(2.4rem, 5vw, 3.8rem);
  margin-bottom: 1.2rem;
  font-weight: 900;
  line-height: 1.08;
  background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.1;
  letter-spacing: -1px;
}

.hero-subtitle {
  color: var(--text-soft);
  font-size: 1.1rem;
  margin-bottom: 2rem;
  line-height: 1.8;
}

.hero-stats {
  display: flex;
  gap: 1.5rem;
  margin: 2.5rem 0;
  flex-wrap: wrap;
}

.stat-item {
  background: white;
  padding: 1.5rem 2rem;
  border-radius: 20px;
  box-shadow: var(--shadow-md);
  text-align: center;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.stat-item:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.stat-item.critical {
  border-color: var(--danger);
  background: linear-gradient(135deg, rgba(239,83,80,0.05), rgba(211,47,47,0.05));
}

.stat-number {
  font-size: 2.2rem;
  font-weight: 700;
  color: var(--primary);
  display: block;
  font-family: 'Playfair Display', serif;
  line-height: 1;
}

.stat-item.critical .stat-number {
  color: var(--danger);
}

.stat-label {
  display: block;
  font-size: 0.8rem;
  color: rgba(33, 33, 33, 0.7);     
  margin-bottom: 0.25rem;
}

.hero-cta-row {
  display: flex;
  gap: 1rem;
  margin-top: 2rem;
}

.btn-primary, .btn-secondary {
  padding: 1rem 2rem;
  border-radius: 50px;
  font-weight: 600;
  font-size: 1rem;
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-primary {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
  box-shadow: 0 8px 20px rgba(233, 30, 99, 0.3);
}

.btn-primary:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 30px rgba(233, 30, 99, 0.4);
}

.btn-secondary {
  background: white;
  color: var(--primary);
  border: 2px solid var(--primary);
}

.btn-secondary:hover {
  background: var(--primary);
  color: white;
}

/* Blood Pressure Monitor Widget */
.bp-monitor-widget {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  background: white;
  padding: 1.5rem;
  border-radius: 20px;
  box-shadow: var(--shadow-md);
  margin-top: 2rem;
  border: 3px solid var(--success);
  animation: monitorPulse 3s ease-in-out infinite;
}

@keyframes monitorPulse {
  0%, 100% { border-color: var(--success); }
  50% { border-color: var(--warning); }
}

.monitor-display {
  text-align: center;
}

.bp-reading {
  font-size: 3rem;
  font-weight: 700;
  font-family: 'Courier New', monospace;
  color: var(--success);
  line-height: 1;
}

.bp-reading .separator {
  margin: 0 0.2rem;
}

.bp-label {
  font-size: 0.9rem;
  color: var(--text-soft);
  margin-top: 0.3rem;
}

.bp-status {
  display: inline-block;
  padding: 0.3rem 1rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 700;
  background: var(--success);
  color: white;
  margin-top: 0.5rem;
}

.monitor-info p {
  margin: 0;
  font-size: 0.9rem;
}

.monitor-info .small {
  font-size: 0.75rem;
  color: var(--text-light);
}

/* ================================
   3D PREGNANCY VISUALIZATION
   ================================ */
.hero-visual-3d {
  position: relative;
  z-index: 1;
}

.pregnancy-3d-container {
  width: 100%;
  height: 500px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.uterus-core {
  width: 300px;
  height: 400px;
  position: relative;
  animation: float 6s ease-in-out infinite;
}@keyframes float {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(2deg); }
}

.uterus-wall {
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, rgba(255,192,203,0.3) 0%, rgba(255,182,193,0.5) 50%, rgba(255,192,203,0.3) 100%);
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  border: 4px solid rgba(233,30,99,0.4);
  position: relative;
  box-shadow: 0 15px 50px rgba(233,30,99,0.3), inset 0 -10px 30px rgba(255,255,255,0.5);
  overflow: hidden;
}

.placenta {
  position: absolute;
  top: 10%;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 80px;
  background: radial-gradient(circle, rgba(255,100,100,0.6) 0%, rgba(255,150,150,0.3) 100%);
  border-radius: 50%;
  box-shadow: 0 0 20px rgba(255,100,100,0.4);
}

.placenta-vessel {
  position: absolute;
  width: 3px;
  background: linear-gradient(180deg, rgba(255,50,50,0.8) 0%, rgba(255,100,100,0.4) 100%);
  border-radius: 2px;
  animation: vesselPulse 2s ease-in-out infinite;
}

@keyframes vesselPulse {
  0%, 100% { opacity: 0.6; transform: scaleY(1); }
  50% { opacity: 1; transform: scaleY(1.1); }
}

.vessel-1 { top: 80px; left: 20px; height: 60px; animation-delay: 0s; }
.vessel-2 { top: 80px; left: 40px; height: 70px; animation-delay: 0.5s; }
.vessel-3 { top: 80px; right: 40px; height: 65px; animation-delay: 1s; }
.vessel-4 { top: 80px; right: 20px; height: 55px; animation-delay: 1.5s; }

.baby-silhouette {
  position: absolute;
  bottom: 20%;
  left: 50%;
  transform: translateX(-50%);
}

.baby-head {
  width: 60px;
  height: 70px;
  background: rgba(255,220,200,0.5);
  border-radius: 50% 50% 45% 45%;
  position: relative;
  animation: babyBreath 3s ease-in-out infinite;
}

.baby-body {
  width: 50px;
  height: 80px;
  background: rgba(255,220,200,0.4);
  border-radius: 40% 40% 50% 50%;
  margin-top: -10px;
  margin-left: 5px;
}

@keyframes babyBreath {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.warning-indicator {
  position: absolute;
  background: white;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.85rem;
  font-weight: 600;
  animation: warningPulse 2s ease-in-out infinite;
}

@keyframes warningPulse {
  0%, 100% { transform: scale(1); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
  50% { transform: scale(1.05); box-shadow: 0 6px 20px rgba(239,83,80,0.4); }
}

.warn-1 { top: 10%; right: -10%; background: rgba(239,83,80,0.1); border: 2px solid var(--danger); }
.warn-2 { top: 40%; left: -15%; background: rgba(255,167,38,0.1); border: 2px solid var(--warning); }
.warn-3 { bottom: 15%; right: -5%; background: rgba(239,83,80,0.1); border: 2px solid var(--danger); }

.warn-icon {
  font-size: 1.2rem;
}

.health-particle {
  position: absolute;
  width: 10px;
  height: 10px;
  background: rgba(233,30,99,0.5);
  border-radius: 50%;
  animation: particleFloat 5s ease-in-out infinite;
}

@keyframes particleFloat {
  0%, 100% { transform: translate(0, 0); opacity: 0.3; }
  50% { transform: translate(20px, -30px); opacity: 0.8; }
}

.particle-1 { top: 20%; left: 10%; animation-delay: 0s; }
.particle-2 { top: 40%; right: 15%; animation-delay: 1s; }
.particle-3 { bottom: 30%; left: 20%; animation-delay: 2s; }
.particle-4 { top: 60%; right: 25%; animation-delay: 3s; }
.particle-5 { bottom: 20%; right: 10%; animation-delay: 4s; }

.animation-description {
  margin-top: 2rem;
  background: white;
  padding: 2rem;
  border-radius: 20px;
  box-shadow: var(--shadow-md);
}

.desc-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(233,30,99,0.1);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  margin-bottom: 1rem;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--primary);
}

.desc-title {
  font-size: 1.5rem;
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.desc-text {
  color: var(--text-soft);
  line-height: 1.7;
}

/* ================================
   SYMPTOM CHECKER MODAL
   ================================ */
.symptom-checker-modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.9);
  width: 90%;
  max-width: 600px;
  background: white;
  border-radius: 30px;
  padding: 3rem;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  z-index: 1600;
  opacity: 0;
  pointer-events: none;
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  max-height: 90vh;
  overflow-y: auto;
}

.symptom-checker-modal.active {
  opacity: 1;
  pointer-events: all;
  transform: translate(-50%, -50%) scale(1);
}

.modal-content {
  position: relative;
}

.close-modal {
  position: absolute;
  top: -1rem;
  right: -1rem;
  background: var(--danger);
  color: white;
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  font-size: 1.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(239,83,80,0.3);
}

.close-modal:hover {
  transform: rotate(90deg);
  box-shadow: 0 6px 20px rgba(239,83,80,0.5);
}

.modal-content h2 {
  font-size: 2rem;
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.modal-subtitle {
  color: var(--text-soft);
  margin-bottom: 2rem;
}

.symptom-checklist {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 2rem;
}

.symptom-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: var(--bg-main);
  border-radius: 15px;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.symptom-item:hover {
  background: white;
  box-shadow: var(--shadow-sm);
  transform: translateX(5px);
}

.symptom-item input[type="checkbox"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
  accent-color: var(--primary);
}

.symptom-text {
  flex: 1;
  font-size: 0.95rem;
}

.severity-badge {
  padding: 0.3rem 0.8rem;
  border-radius: 15px;
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.severity-badge.severe {
  background: rgba(239,83,80,0.15);
  color: var(--severe);
}

.severity-badge.moderate {
  background: rgba(255,167,38,0.15);
  color: var(--moderate);
}

.severity-badge.mild {
  background: rgba(102,187,106,0.15);
  color: var(--mild);
}

.symptom-result {
  display: none;
  padding: 1.5rem;
  border-radius: 20px;
  margin-bottom: 1.5rem;
}

.symptom-result.active {
  display: block;
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.symptom-result.emergency {
  background: rgba(211,47,47,0.1);
  border: 3px solid var(--critical);
}

.symptom-result.warning {
  background: rgba(255,167,38,0.1);
  border: 3px solid var(--warning);
}

.symptom-result.normal {
  background: rgba(102,187,106,0.1);
  border: 3px solid var(--success);
}

.symptom-result h3 {
  margin-bottom: 0.5rem;
  font-size: 1.3rem;
}

.symptom-result ul {
  margin-top: 1rem;
  padding-left: 1.5rem;
}

.symptom-result li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

.full-width {
  width: 100%;
}

/* ================================
   THEMES SECTION
   ================================ */
.themes-section {
  margin: 5rem 0;
}

.section-header-enhanced {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  text-align: center;
  margin-bottom: 3rem;
  gap: 1rem;
  flex-wrap: wrap;
}

.header-content {
  flex: 1;
  min-width: 300px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.header-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(236,64,122,0.08);
  border: 1px solid rgba(236,64,122,0.15);
  color: #d81b60;
  padding: 0.35rem 0.9rem;
  border-radius: 50px;
  font-size: 0.75rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  margin-bottom: 1rem;
  align-self: center;
}

.badge-pulse {
  width: 8px;
  height: 8px;
  background: linear-gradient(135deg, #ec407a, #ad1457);
  border-radius: 50%;
  animation: badge-glow 3s ease-in-out infinite;
}

@keyframes badge-glow {
  0%,100%{box-shadow:0 0 0 0 rgba(236,64,122,0);}
  50%{box-shadow:0 0 10px 2px rgba(236,64,122,0.35);}
}

.badge-text {
  font-weight: 700;
  letter-spacing: 0.06em;
  color: #d81b60;
}

.section-title-gradient {
  font-size: clamp(1.8rem, 4vw, 3rem);
  font-weight: 900;
  line-height: 1.15;
  margin-bottom: 1rem;
  background: linear-gradient(135deg, #ec407a 0%, #d81b60 50%, #ad1457 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 2px 10px rgba(236,64,122,.18));
  position: relative;
  text-align: center;
}

/* Shimmer animation on section headings */
.section-title-gradient {
  animation: title-shimmer 3s ease-in-out infinite;
}
@keyframes title-shimmer {
  0%,100%{filter:brightness(1) drop-shadow(0 2px 10px rgba(236,64,122,.18));}
  50%{filter:brightness(1.25) drop-shadow(0 4px 18px rgba(236,64,122,.38));}
}

.section-subtitle {
  color: var(--text-soft);
  font-size: 1.05rem;
  line-height: 1.8;
  max-width: 600px;
  text-align: center;
}

.section-subtitle strong {
  color: #be185d; /* Bright pink for emphasis */
  font-weight: 700;
}


/* Progress Tracker */
.progress-tracker {
  display: flex;
  align-items: center;
  gap: 2rem;
  background: white;
  padding: 2rem;
  border-radius: 25px;
  box-shadow: var(--shadow-md);
  min-width: 320px;
}

.tracker-visual {
  position: relative;
}

.progress-circle-svg {
  transform: rotate(-90deg);
}

.progress-bg-circle {
  fill: none;
  stroke: var(--bg-main);
  stroke-width: 8;
}

.progress-fill-circle {
  fill: none;
  stroke: url(#progressGradient);
  stroke-width: 8;
  stroke-linecap: round;
  stroke-dasharray: 377;
  stroke-dashoffset: 377;
  transition: stroke-dashoffset 0.5s ease;
}

.progress-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

.progress-number {
  font-size: 2rem;
  font-weight: 700;
  color: var(--primary);
  font-family: 'Playfair Display', serif;
  line-height: 1;
}

.progress-label {
  font-size: 0.85rem;
  color: var(--text-soft);
  margin-top: 0.3rem;
}

.tracker-text {
  flex: 1;
}

.tracker-count {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-main);
  margin-bottom: 0.5rem;
}

.tracker-encourage {
  font-size: 0.9rem;
  color: var(--primary);
  font-weight: 500;
}

/* Theme Grid */
.theme-grid-enhanced {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 2rem;
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 3rem;
}
.theme-card-3d {
  background: white;
  border-radius: 25px;
  overflow: hidden;
  box-shadow: var(--shadow-md);
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  cursor: pointer;
}

.theme-card-3d::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(233,30,99,0.05), transparent);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
  z-index: 1;
}

.theme-card-3d:hover {
  transform: translateY(-10px) rotateX(2deg);
  box-shadow: 0 20px 50px rgba(0,0,0,0.2);
}

.theme-card-3d:hover::before {
  opacity: 1;
}

.theme-card-3d.explored {
  border: 2px solid var(--primary);
}

.theme-card-3d.explored::after {
  content: '✓';
  position: absolute;
  top: 1rem;
  right: 1rem;
  width: 30px;
  height: 30px;
  background: var(--primary);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 1.2rem;
  z-index: 2;
  box-shadow: 0 4px 10px rgba(233,30,99,0.4);
}

.card-glow {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.theme-card-3d:hover .card-glow {
  opacity: 1;
  animation: glowMove 3s ease-in-out infinite;
}

@keyframes glowMove {
  0%, 100% { transform: translate(0, 0); }
  50% { transform: translate(10%, 10%); }
}

.card-header {
  padding: 2rem;
  color: white;
  position: relative;
  overflow: hidden;
}

.card-header::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: rgba(255,255,255,0.1);
  transform: rotate(45deg);
  transition: all 0.5s ease;
}

.theme-card-3d:hover .card-header::before {
  transform: rotate(45deg) translate(50%, 50%);
}

.icon-circle {
  width: 60px;
  height: 60px;
  background: rgba(255,255,255,0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  margin-bottom: 1rem;
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255,255,255,0.3);
}

.card-header h3 {
  font-size: 1.4rem;
  margin-bottom: 0.5rem;
  line-height: 1.3;
}

.card-subtitle {
  font-size: 0.9rem;
  opacity: 0.9;
  font-weight: 400;
}

.card-content {
  padding: 1.5rem 2rem 2rem;
}

.preview-stats {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.preview-stat {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: var(--bg-main);
  padding: 0.5rem 1rem;
  border-radius: 15px;
  font-size: 0.85rem;
  font-weight: 500;
}

.stat-icon {
  font-size: 1.2rem;
}

.card-description {
  color: var(--text-soft);
  font-size: 0.95rem;
  line-height: 1.6;
  margin-bottom: 1.5rem;
}

.learn-more-btn {
  width: 100%;
  padding: 1rem;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
  border: none;
  border-radius: 15px;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.learn-more-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255,255,255,0.2);
  transform: translate(-50%, -50%);
  transition: width 0.5s ease, height 0.5s ease;
}

.learn-more-btn:hover::before {
  width: 300px;
  height: 300px;
}

.learn-more-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(233,30,99,0.4);
}

.btn-arrow {
  font-size: 1.2rem;
  transition: transform 0.3s ease;
}

.learn-more-btn:hover .btn-arrow {
  transform: translateX(5px);
}

.card-progress-bar {
  height: 4px;
  background: var(--bg-main);
  position: relative;
  overflow: hidden;
}

.theme-card-3d.explored .card-progress-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  background: linear-gradient(90deg, var(--primary), var(--secondary));
  animation: progressSlide 1s ease-out;
}

@keyframes progressSlide {
  from { width: 0; }
  to { width: 100%; }
}

/* ================================
   NEW: SEVERITY COMPARISON SECTION
   ================================ */
.severity-comparison-section {
  margin: 5rem 0;
  padding: 4rem;
  background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%);
  border-radius: 30px;
}

.severity-comparison-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
  margin-top: 3rem;
}

.severity-card {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  box-shadow: var(--shadow-md);
  transition: all 0.3s ease;
  border: 3px solid transparent;
}

.severity-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.severity-normal {
  border-color: var(--success);
}

.severity-mild {
  border-color: var(--mild);
}

.severity-moderate {
  border-color: var(--moderate);
}

.severity-severe {
  border-color: var(--severe);
  animation: severeGlow 2s ease-in-out infinite;
}

@keyframes severeGlow {
  0%, 100% { box-shadow: 0 8px 20px rgba(239,83,80,0.2); }
  50% { box-shadow: 0 12px 30px rgba(239,83,80,0.4); }
}

.severity-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid var(--bg-main);
}

.severity-icon {
  font-size: 2.5rem;
}

.severity-header h3 {
  font-size: 1.4rem;
  color: var(--text-main);
}

.bp-range {
  background: var(--bg-main);
  padding: 1rem;
  border-radius: 12px;
  margin-bottom: 1.5rem;
  font-size: 0.95rem;
}

.severity-features {
  list-style: none;
  padding: 0;
  margin-bottom: 1.5rem;
}

.severity-features li {
  padding: 0.8rem;
  margin-bottom: 0.5rem;
  background: var(--bg-main);
  border-radius: 10px;
  font-size: 0.9rem;
  padding-left: 2rem;
  position: relative;
}

.severity-features li::before {
  content: '•';
  position: absolute;
  left: 0.8rem;
  color: var(--primary);
  font-weight: 700;
  font-size: 1.2rem;
}

.severity-action {
  background: linear-gradient(135deg, rgba(233,30,99,0.1), rgba(194,24,91,0.1));
  padding: 1rem;
  border-radius: 12px;
  font-size: 0.9rem;
  border-left: 4px solid var(--primary);
}

.severity-severe .severity-action {
  background: linear-gradient(135deg, rgba(239,83,80,0.15), rgba(211,47,47,0.15));
  border-left-color: var(--danger);
  font-weight: 600;
}

/* ================================
   NEW: PREVENTION SECTION
   ================================ */
/* Prevention section header alignment */
.prevention-section .section-header-enhanced {
  padding-left: 4rem;
}

.prevention-section .header-content {
  padding-left: 2rem;
}

.prevention-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 2rem;
  margin-top: 3rem;
  max-width: 1300px;
  margin-left: auto;
  margin-right: auto;
  padding: 0 3rem;
}

.prevention-card {
  background: white;
  border-radius: 25px;
  padding: 2.5rem;
  box-shadow: var(--shadow-md);
  transition: all 0.3s ease;
  border: 2px solid transparent;
  position: relative;
  overflow: hidden;
}

.prevention-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 5px;
  background: linear-gradient(90deg, var(--primary), var(--secondary));
}

.prevention-card:hover {
  transform: translateY(-8px);
  box-shadow: var(--shadow-lg);
  border-color: var(--primary);
}

.prevention-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
  display: block;
}

.prevention-card h3 {
  font-size: 1.5rem;
  color: var(--primary);
  margin-bottom: 0.8rem;
}

.prevention-desc {
  color: var(--text-soft);
  font-size: 0.95rem;
  margin-bottom: 1.5rem;
  line-height: 1.6;
}

.prevention-details {
  list-style: none;
  padding: 0;
}

.prevention-details li {
  padding: 0.8rem 0;
  border-bottom: 1px solid var(--bg-main);
  font-size: 0.9rem;
  line-height: 1.5;
}

.prevention-details li:last-child {
  border-bottom: none;
}

/* ================================
   NEW: MYTHS VS FACTS SECTION
   ================================ */
.myths-facts-section {
  margin: 5rem 0;
  padding: 4rem;
  background: linear-gradient(135deg, #fff8e1 0%, #fff3e0 100%);
  border-radius: 30px;
}

.myths-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 2rem;
  margin-top: 3rem;
}

.myth-fact-card {
  background: white;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: var(--shadow-md);
  transition: all 0.3s ease;
}

.myth-fact-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.myth-section {
  background: linear-gradient(135deg, #ffebee, #ffcdd2);
  padding: 1.5rem;
  border-bottom: 3px solid #ef5350;
}

.myth-label {
  display: inline-block;
  background: #d32f2f;
  color: white;
  padding: 0.3rem 0.8rem;
  border-radius: 15px;
  font-size: 0.75rem;
  font-weight: 700;
  margin-bottom: 0.8rem;
  letter-spacing: 1px;
}

.myth-text {
  font-size: 1.05rem;
  font-weight: 600;
  color: #c62828;
  line-height: 1.5;
}

.fact-section {
  background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
  padding: 1.5rem;
}

.fact-label {
  display: inline-block;
  background: #388e3c;
  color: white;
  padding: 0.3rem 0.8rem;
  border-radius: 15px;
  font-size: 0.75rem;
  font-weight: 700;
  margin-bottom: 0.8rem;
  letter-spacing: 1px;
}

.fact-text {
  font-size: 0.95rem;
  color: #2e7d32;
  line-height: 1.7;
  font-weight: 500;
}

/* ================================
   NEW: WARNING SIGNS SECTION
   ================================ */
.warning-signs-section {
  margin: 5rem 0;
  padding: 4rem;
  background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
  border-radius: 30px;
}

.warning-signs-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
  margin-top: 3rem;
}

.warning-sign-card {
  background: white;
  border-radius: 20px;
  padding: 2rem;
  box-shadow: var(--shadow-md);
  transition: all 0.3s ease;
  border-left: 5px solid var(--warning);
  position: relative;
}

.warning-sign-card.emergency {
  border-left-color: var(--danger);
  animation: emergencyPulse 2s ease-in-out infinite;
}

@keyframes emergencyPulse {
  0%, 100% { box-shadow: 0 8px 20px rgba(239,83,80,0.2); }
  50% { box-shadow: 0 12px 30px rgba(239,83,80,0.4); }
}

.warning-sign-card.urgent {
  border-left-color: var(--warning);
}

.warning-sign-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.warning-icon {
  font-size: 2.5rem;
  margin-bottom: 1rem;
  display: block;
}

.warning-sign-card h3 {
  font-size: 1.3rem;
  color: var(--text-main);
  margin-bottom: 0.8rem;
}

.warning-sign-card p {
  color: var(--text-soft);
  font-size: 0.95rem;
  line-height: 1.6;
  margin-bottom: 1rem;
}

.action-label {
  display: inline-block;
  padding: 0.5rem 1rem;
  border-radius: 15px;
  font-size: 0.8rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-top: 0.5rem;
}

.warning-sign-card.emergency .action-label {
  background: var(--danger);
  color: white;
}

.warning-sign-card.urgent .action-label {
  background: var(--warning);
  color: white;
}

.emergency-action-box {
  background: white;
  border-radius: 25px;
  padding: 2.5rem;
  margin-top: 3rem;
  box-shadow: var(--shadow-lg);
  border: 3px solid var(--danger);
}

.emergency-action-box h3 {
  font-size: 1.8rem;
  color: var(--danger);
  margin-bottom: 1rem;
}

.emergency-action-box p {
  font-size: 1.05rem;
  line-height: 1.7;
  color: var(--text-soft);
  margin-bottom: 2rem;
}

.emergency-numbers {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
}

.emergency-number-item {
  background: linear-gradient(135deg, rgba(239,83,80,0.1), rgba(211,47,47,0.1));
  padding: 1.5rem;
  border-radius: 15px;
  border-left: 5px solid var(--danger);
}

.number-label {
  display: block;
  font-size: 0.9rem;
  color: var(--text-soft);
  margin-bottom: 0.5rem;
}

.number-value {
  display: block;
  font-size: 2rem;
  font-weight: 700;
  color: var(--danger);
  font-family: 'Courier New', monospace;
}

/* ================================
   BODY SIMULATOR SECTION (ENHANCED)
   ================================ */
.simulator-section {
  margin: 5rem 0;
  padding: 4rem;
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
  border-radius: 30px;
}

.simulator-container {
  margin-top: 3rem;
}

.severity-selector {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
  margin-bottom: 3rem;
  background: white;
  padding: 1.5rem;
  border-radius: 25px;
  box-shadow: var(--shadow-md);
}

.severity-btn {
  background: var(--bg-main);
  border: 3px solid transparent;
  padding: 1.5rem;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.severity-btn:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-sm);
}

.severity-btn.active {
  background: white;
  box-shadow: var(--shadow-md);
}

.severity-btn[data-severity="normal"].active {
  border-color: var(--success);
}

.severity-btn[data-severity="mild"].active {
  border-color: var(--mild);
}

.severity-btn[data-severity="moderate"].active {
  border-color: var(--moderate);
}

.severity-btn[data-severity="severe"].active {
  border-color: var(--severe);
}

.severity-icon {
  font-size: 2rem;
}

.severity-label {
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 600;
}

.body-viz-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 3rem;
  margin-bottom: 2rem;
  align-items: start;
}

#bodyCanvas {
  width: 100%;
  max-width: 400px;
  height: auto;
  border-radius: 20px;
  box-shadow: var(--shadow-md);
  background: linear-gradient(180deg, #f0f4f8 0%, #ffffff 100%);
}

.body-legend {
  background: white;
  padding: 2rem;
  border-radius: 20px;
  border: 2px solid var(--primary-light);
  box-shadow: var(--shadow-sm);
}

.body-legend h4 {
  margin-bottom: 1.5rem;
  font-size: 1.2rem;
  color: var(--primary);
}

.legend-items {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 0.95rem;
}

.legend-dot {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  flex-shrink: 0;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.impact-description {
  background: white;
  padding: 2rem;
  border-radius: 20px;
  border: 2px solid var(--primary-light);
  box-shadow: var(--shadow-sm);
}

.impact-description h3 {
  font-size: 1.8rem;
  margin-bottom: 1rem;
  color: var(--primary);
}

.impact-description p {
  color: var(--text-soft);
  line-height: 1.7;
  margin-bottom: 1.5rem;
}

.vital-signs {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.vital-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  background: var(--bg-main);
  border-radius: 15px;
  box-shadow: var(--shadow-sm);
}

.vital-label {
  font-weight: 600;
  color: var(--text-main);
}

.vital-value {
  padding: 0.4rem 1rem;
  border-radius: 20px;
  font-weight: 700;
  font-size: 0.9rem;
}

.vital-value.normal {
  background: rgba(102,187,106,0.15);
  color: var(--success);
}

.vital-value.warning {
  background: rgba(255,167,38,0.15);
  color: var(--warning);
}

.vital-value.danger {
  background: rgba(239,83,80,0.15);
  color: var(--danger);
}

/* ================================
   INFO PANEL (SIDE DRAWER)
   ================================ */
.info-panel {
  position: fixed;
  top: 0;
  right: -100vw;
  width: min(600px, 100vw);
  height: 100vh;
  background: white;
  box-shadow: -10px 0 50px rgba(0,0,0,0.2);
  z-index: 1500;
  overflow-y: auto;
  transition: right 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.info-panel.active {
  right: 0;
}

.close-panel {
  position: absolute;
  top: 2rem;
  right: 2rem;
  background: rgba(0,0,0,0.05);
  border: none;
  width: 45px;
  height: 45px;
  border-radius: 50%;
  font-size: 1.5rem;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

.close-panel:hover {
  background: rgba(0,0,0,0.1);
  transform: rotate(90deg);
}

.panel-header {
  padding: 3rem 2.5rem 2rem;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
}

.panel-icon {
  width: 80px;
  height: 80px;
  background: rgba(255,255,255,0.25);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.5rem;
  margin-bottom: 1.5rem;
  backdrop-filter: blur(10px);
}

.panel-title-block h2 {
  font-size: 2rem;
  margin-bottom: 0.5rem;
  line-height: 1.2;
}

.panel-title-block p {
  font-size: 1rem;
  opacity: 0.95;
}

.panel-content {
  padding: 2.5rem;
}

.panel-content h3 {
  font-size: 1.5rem;
  margin: 2rem 0 1rem;
  color: var(--primary);
  border-bottom: 3px solid var(--primary-light);
  padding-bottom: 0.5rem;
}

.panel-content h3:first-child {
  margin-top: 0;
}

.panel-content ul {
  list-style: none;
  padding: 0;
}

.panel-content li {
  padding: 1rem;
  margin-bottom: 0.8rem;
  background: var(--bg-main);
  border-radius: 15px;
  border-left: 4px solid var(--primary);
  line-height: 1.7;
  transition: all 0.3s ease;
}

.panel-content li:hover {
  background: white;
  box-shadow: var(--shadow-sm);
  transform: translateX(5px);
}

.panel-content strong {
  color: var(--primary);
  font-weight: 600;
}

.backdrop {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 1400;
  backdrop-filter: blur(5px);
}

.backdrop.active {
  display: block;
  animation: backdropFadeIn 0.3s ease-out;
}

@keyframes backdropFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ================================
   EMERGENCY FOOTER
   ================================ */
.emergency-footer {
  background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
  color: white;
  padding: 3rem 2rem;
  margin-top: 5rem;
}

.footer-content {
  max-width: 1400px;
  margin: 0 auto;
}

.emergency-contacts {
  margin-bottom: 2rem;
}

.emergency-contacts h3 {
  font-size: 1.8rem;
  margin-bottom: 1.5rem;
  color: white;
}

.contact-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
}

.contact-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: rgba(255,255,255,0.1);
  padding: 1.5rem;
  border-radius: 20px;
  border: 2px solid rgba(255,255,255,0.15);
  transition: all 0.3s ease;
}

.contact-item:hover {
  background: rgba(255,255,255,0.15);
  transform: translateY(-3px);
}

.contact-icon {
  font-size: 2rem;
}

.contact-label {
  font-size: 0.85rem;
  opacity: 0.8;
}

.contact-number {
  font-size: 1.5rem;
  font-weight: 700;
  font-family: 'Courier New', monospace;
}

.footer-disclaimer {
  padding: 2rem;
  background: rgba(255,255,255,0.05);
  border-radius: 20px;
  border-left: 4px solid var(--primary);
}

.footer-disclaimer p {
  margin-bottom: 1rem;
  line-height: 1.7;
  font-size: 0.95rem;
}

.footer-disclaimer p:last-child {
  margin-bottom: 0;
}

.footer-sources {
  font-size: 0.85rem;
  opacity: 0.7;
  font-style: italic;
}

/* ================================
   RESPONSIVE DESIGN
   ================================ */
@media (max-width: 1024px) {
  .hero {
    grid-template-columns: 1fr;
    gap: 3rem;
  }
  
  .hero h1 {
    font-size: 2.5rem;
  }
  
  .theme-grid-enhanced {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  }
  
  .body-viz-container {
    grid-template-columns: 1fr;
  }
  
  .info-panel {
    width: 100%;
    right: -100%;
  }

  .severity-comparison-grid,
  .prevention-grid,
  .myths-grid,
  .warning-signs-grid {
    grid-template-columns: 1fr;
  }

  .section-header-enhanced {
    flex-direction: column;
  }

  .severity-selector {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  /* nav-container stays single-row — main-nav already hidden at 1060px */

  .hero {
    padding: 2rem;
  }
  
  .hero h1 {
    font-size: 2rem;
  }
  
  .hero-stats {
    flex-direction: column;
  }
  
  .hero-cta-row {
    flex-direction: column;
  }
  
  .section-title-gradient {
    font-size: 2rem;
  }
  
  .theme-grid-enhanced {
    grid-template-columns: 1fr;
  }
  
  .severity-selector {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .contact-grid {
    grid-template-columns: 1fr;
  }

  .severity-comparison-section,
  .prevention-section,
  .myths-facts-section,
  .warning-signs-section,
  .simulator-section {
    padding: 2rem;
  }

  .emergency-numbers {
    grid-template-columns: 1fr;
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Focus styles for accessibility */
*:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
}

/* ===================== ENHANCED MOBILE RESPONSIVENESS ===================== */
@media (max-width: 480px) {
  .page-shell { padding: 1rem 1rem 3rem; }
  .hero { padding: 1.5rem 1rem; border-radius: 18px; gap: 2rem; }
  .hero h1 { font-size: 1.75rem !important; }
  .hero-stats { gap: 0.75rem; }
  .stat-item { padding: 1rem; }
  .stat-number { font-size: 1.6rem; }
  .section-title-gradient { font-size: 1.6rem !important; }
  .severity-comparison-section, .prevention-section,
  .myths-facts-section, .warning-signs-section, .simulator-section {
    padding: 1.5rem 1rem; border-radius: 18px;
  }
  .section-header-enhanced { gap: 1rem; }
  .theme-grid-enhanced { padding: 0 0.5rem; gap: 1rem; }
  .emergency-action-box { padding: 1.5rem; }
  .emergency-number-item { padding: 1rem; }
  .number-value { font-size: 1.6rem; }
  .simulator-section-3d { padding: 3rem 1rem; }
  .bp-monitor-widget { flex-direction: column; text-align: center; }
  .hero-cta-row { flex-direction: column; }
  .hero-cta-row .btn-primary, .hero-cta-row .btn-secondary { width: 100%; text-align: center; }
  .severity-selector { grid-template-columns: repeat(2,1fr); }
  .body-viz-container { grid-template-columns: 1fr; }
  .myths-grid-interactive { gap: 1rem; }
  .myth-card-flip, .myth-card-inner, .myth-card-front, .myth-card-back { min-height: 380px; }
  .comparison-split-view { grid-template-columns: 1fr; gap: 1rem; }
  .comparison-divider { display: none; }
  /* Scale down the hero animation container on small phones */
  .pregnancy-3d-container { height: 320px; }
  .uterus-core { width: 200px; height: 270px; }
  /* BP modal padding reduction on small screens */
  .bp-tracker-modal { padding: 0.75rem; }
  /* Progress tracker wraps on small screens */
  .progress-tracker { flex-direction: column; min-width: 0; width: 100%; }
}

@media (max-width: 360px) {
  .hero h1 { font-size: 1.5rem !important; }
  .section-title-gradient { font-size: 1.4rem !important; }
  .severity-selector { grid-template-columns: 1fr 1fr; }
  .theme-grid-enhanced { grid-template-columns: 1fr; }
}

@media (min-width: 769px) and (max-width: 1024px) {
  .theme-grid-enhanced { grid-template-columns: repeat(2, 1fr); padding: 0 1rem; }
  .severity-comparison-grid { grid-template-columns: repeat(2, 1fr); }
  .myths-grid { grid-template-columns: repeat(2, 1fr); }
  .warning-signs-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (hover: none) and (pointer: coarse) {
  .theme-card-3d:hover { transform: none; box-shadow: var(--shadow-md); }
  .learn-more-btn:hover { transform: none; }
}


/* ================================
   INTERACTIVE MYTH CARDS - ENHANCED
   ================================ */

/* Myth Controls Bar */
.myth-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 2rem;
  margin: 2rem 0;
  padding: 1.5rem;
  background: white;
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  flex-wrap: wrap;
}

.quiz-mode-btn,
.shuffle-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.8rem 1.5rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  border-radius: 25px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.quiz-mode-btn:hover,
.shuffle-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

.quiz-mode-btn.active {
  background: linear-gradient(135deg, #f093fb, #f5576c);
}

.myth-progress-tracker {
  flex: 1;
  min-width: 250px;
}

.progress-label {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
  font-size: 0.95rem;
  color: #333;
}

.trophy-icon {
  font-size: 1.5rem;
  opacity: 0.3;
  transition: all 0.3s ease;
}

.trophy-icon.earned {
  opacity: 1;
  animation: trophy-bounce 0.6s ease;
}

@keyframes trophy-bounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.3) rotate(10deg); }
}

.progress-bar-container {
  height: 12px;
  background: #e0e0e0;
  border-radius: 10px;
  overflow: hidden;
  position: relative;
}

.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #43e97b, #38f9d7);
  border-radius: 10px;
  transition: width 0.5s ease;
  position: relative;
  overflow: hidden;
}

.progress-bar-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  100% { left: 100%; }
}

/* Interactive Flip Cards Grid */
.myths-grid-interactive {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
  gap: 2.5rem;
  margin-top: 3rem;
  perspective: 1000px;
}

/* Flip Card Container */
.myth-card-flip {
  position: relative;
  width: 100%;
  min-height: 450px;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.myth-card-flip:hover {
  transform: scale(1.02);
}

.myth-card-flip.flipped .myth-card-inner {
  transform: rotateY(180deg);
}

.myth-card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  min-height: 450px;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}

/* Front and Back Faces */
.myth-card-front,
.myth-card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  min-height: 450px;
  backface-visibility: hidden;
  border-radius: 20px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.12);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  padding: 2rem;
}

.myth-card-front {
  background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
  border: 3px solid #ef5350;
}

.myth-card-back {
  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
  border: 3px solid #66bb6a;
  transform: rotateY(180deg);
}

/* Danger Meter */
.danger-meter {
  margin-bottom: 1.5rem;
  padding: 0.8rem;
  background: rgba(255,255,255,0.5);
  border-radius: 10px;
}

.danger-label {
  font-size: 0.75rem;
  font-weight: 700;
  color: #666;
  margin-bottom: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.danger-bar {
  height: 8px;
  background: #e0e0e0;
  border-radius: 10px;
  overflow: hidden;
  position: relative;
}

.danger-fill {
  height: 100%;
  background: linear-gradient(90deg, #ffd54f, #ffb74d, #ff9800, #f57c00, #e65100);
  border-radius: 10px;
  transition: width 1s ease;
  position: relative;
}

.danger-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
  animation: danger-pulse 2s ease-in-out infinite;
}

@keyframes danger-pulse {
  0%, 100% { opacity: 0; }
  50% { opacity: 1; }
}

/* Icons */
.myth-icon,
.fact-icon {
  font-size: 3rem;
  margin: 1rem 0;
  animation: icon-pop 0.5s ease;
}

@keyframes icon-pop {
  0% { transform: scale(0); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.myth-question {
  font-size: 1.2rem;
  font-weight: 700;
  color: #c62828;
  line-height: 1.4;
  margin: 1rem 0;
  flex: 1;
}

.fact-heading {
  font-size: 1.1rem;
  font-weight: 800;
  color: #2e7d32;
  margin: 0.5rem 0 1rem 0;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.fact-text {
  font-size: 1rem;
  color: #1b5e20;
  line-height: 1.7;
  flex: 1;
  font-weight: 500;
}

/* Quiz Buttons */
.quiz-buttons {
  display: flex;
  gap: 1rem;
  margin: 1rem 0;
}

.quiz-btn {
  flex: 1;
  padding: 0.8rem 1rem;
  border: none;
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.quiz-btn.true-btn {
  background: linear-gradient(135deg, #81c784, #66bb6a);
  color: white;
  box-shadow: 0 4px 15px rgba(102, 187, 106, 0.3);
}

.quiz-btn.false-btn {
  background: linear-gradient(135deg, #e57373, #ef5350);
  color: white;
  box-shadow: 0 4px 15px rgba(239, 83, 80, 0.3);
}

.quiz-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
}

.quiz-btn.correct {
  animation: correct-answer 0.5s ease;
}

.quiz-btn.wrong {
  animation: wrong-shake 0.5s ease;
}

@keyframes correct-answer {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

@keyframes wrong-shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  75% { transform: translateX(10px); }
}

/* Flip Trigger Button */
.flip-trigger-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem 1.5rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  border-radius: 25px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  margin: 1rem 0 0.5rem 0; /* Reduced bottom margin to bring action buttons closer */
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.flip-trigger-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
}

.flip-icon {
  font-size: 1.2rem;
  animation: rotate-hint 2s ease-in-out infinite;
}

@keyframes rotate-hint {
  0%, 100% { transform: rotate(0deg); }
  50% { transform: rotate(180deg); }
}

/* Card Actions */
.card-actions {
  display: flex;
  gap: 0.5rem;
  margin-top: -0.5rem; /* Moved up to reduce space below "Reveal Truth" button */
}

.action-btn {
  flex: 1;
  padding: 0.6rem;
  background: rgba(255,255,255,0.8);
  border: 2px solid #ccc;
  border-radius: 10px;
  font-size: 1.2rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.action-btn:hover {
  background: white;
  border-color: #667eea;
  transform: scale(1.05);
}

/* Fact Stats */
.fact-stats {
  display: flex;
  gap: 1rem;
  margin: 1.5rem 0;
  flex-wrap: wrap;
}

.stat-bubble {
  padding: 1rem 1.5rem;
  background: white;
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  text-align: center;
  transition: all 0.3s ease;
}

.stat-bubble:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}

.stat-bubble.danger {
  background: linear-gradient(135deg, #ff5252, #f44336);
  color: white;
}

.stat-num {
  display: block;
  font-size: 1.5rem;
  font-weight: 800;
  color: #667eea;
  margin-bottom: 0.3rem;
}

.stat-bubble.danger .stat-num {
  color: white;
}

.stat-label {
  display: block;
  font-size: 0.75rem;
  color: #666;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stat-bubble.danger .stat-label {
  color: rgba(255,255,255,0.9);
}

/* Flip Back Button */
.flip-back-btn {
  padding: 0.8rem 1.5rem;
  background: linear-gradient(135deg, #64b5f6, #42a5f5);
  color: white;
  border: none;
  border-radius: 25px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  margin-top: 1rem;
  transition: all 0.3s ease;
}

.flip-back-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(66, 165, 245, 0.4);
}

/* Completion Check */
.completion-check {
  display: none;
  align-items: center;
  gap: 0.5rem;
  padding: 0.8rem 1rem;
  background: linear-gradient(135deg, #81c784, #66bb6a);
  color: white;
  border-radius: 12px;
  margin-top: 1rem;
  animation: check-appear 0.5s ease;
}

.myth-card-flip.completed .completion-check {
  display: flex;
}

@keyframes check-appear {
  0% { 
    opacity: 0;
    transform: scale(0.8);
  }
  100% { 
    opacity: 1;
    transform: scale(1);
  }
}

.check-icon {
  font-size: 1.3rem;
}

.check-text {
  font-weight: 700;
  font-size: 0.95rem;
}

/* Completion Celebration */
.completion-celebration {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  padding: 3rem;
  border-radius: 30px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  text-align: center;
  z-index: 10000;
  max-width: 500px;
  animation: celebration-appear 0.6s ease;
}

@keyframes celebration-appear {
  0% { 
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.5);
  }
  100% { 
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

.celebration-icon {
  font-size: 5rem;
  margin-bottom: 1rem;
  animation: celebration-bounce 1s ease infinite;
}

@keyframes celebration-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-20px); }
}

.celebration-content h2 {
  font-size: 2rem;
  color: #667eea;
  margin-bottom: 1rem;
}

.celebration-message {
  font-size: 1rem;
  color: #666;
  margin: 1.5rem 0;
}

.share-all-btn,
.reset-btn {
  display: block;
  width: 100%;
  padding: 1rem;
  margin: 0.5rem 0;
  border: none;
  border-radius: 15px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.share-all-btn {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
}

.reset-btn {
  background: #f5f5f5;
  color: #333;
}

.share-all-btn:hover,
.reset-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
}

/* Confetti Animation */
.confetti {
  position: fixed;
  width: 10px;
  height: 10px;
  background: #667eea;
  pointer-events: none;
  animation: confetti-fall 3s linear forwards;
  z-index: 9999;
}

@keyframes confetti-fall {
  0% {
    transform: translateY(-100vh) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .myth-controls {
    flex-direction: column;
    gap: 1rem;
  }

  .myths-grid-interactive {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  .myth-card-flip {
    min-height: 400px;
  }

  .myth-card-inner {
    min-height: 400px;
  }

  .myth-card-front,
  .myth-card-back {
    min-height: 400px;
    padding: 1.5rem;
  }

  .myth-question {
    font-size: 1.05rem;
  }

  .quiz-buttons {
    flex-direction: column;
  }

  .completion-celebration {
    max-width: 90%;
    padding: 2rem;
  }
}

/* ================================
   REVOLUTIONARY 3D BODY SIMULATOR
   Complete Styling System
   ================================ */

/* Main Section Container */
.simulator-section-3d {
  background: linear-gradient(135deg, 
    #fdf2f8 0%,      /* Lightest pink */
    #fce7f3 25%,     /* Light pink */
    #f3e8ff 50%,     /* Lavender */
    #e0e7ff 75%,     /* Light indigo */
    #dbeafe 100%     /* Light blue */
  );
  padding: 5rem 2rem;
  position: relative;
  overflow: hidden;
}

/* Animated gradient overlay */
.simulator-section-3d::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at 20% 30%, rgba(236, 72, 153, 0.15) 0%, transparent 50%),
              radial-gradient(circle at 80% 70%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
              radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.1) 0%, transparent 60%);
  animation: gradient-shift 10s ease-in-out infinite;
  pointer-events: none;
  z-index: 1;
}

@keyframes gradient-shift {
  0%, 100% { opacity: 0.5; transform: scale(1) rotate(0deg); }
  50% { opacity: 0.8; transform: scale(1.1) rotate(5deg); }
}

.simulator-section-3d > * {
  position: relative;
  z-index: 2;
}


/* ===== CONTROL PANEL ===== */
.simulator-controls-panel {
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.95) 0%, 
    rgba(253, 242, 248, 0.95) 100%
  );
  backdrop-filter: blur(20px);
  border-radius: 24px;
  padding: 2rem;
  margin-bottom: 2.5rem;
  box-shadow: 0 10px 40px rgba(236, 72, 153, 0.15),
              0 2px 8px rgba(0, 0, 0, 0.05);
  border: 2px solid rgba(236, 72, 153, 0.2);
}

/* View Mode Buttons */
.view-mode-selector {
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.view-mode-btn {
  flex: 1;
  min-width: 150px;
  padding: 1rem 1.5rem;
  background: white;
  border: 2px solid rgba(236, 72, 153, 0.2);
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  font-weight: 600;
  color: #6b21a8;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.view-mode-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(236, 72, 153, 0.2);
  border-color: #ec4899;
  background: linear-gradient(135deg, rgba(236, 72, 153, 0.05), rgba(168, 85, 247, 0.05));
}

.view-mode-btn.active {
  background: linear-gradient(135deg, #ec4899, #a855f7);
  color: white;
  border-color: #a855f7;
  box-shadow: 0 8px 24px rgba(236, 72, 153, 0.4);
  transform: translateY(-2px);
}

.mode-icon {
  font-size: 1.3rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.mode-label {
  font-size: 0.95rem;
  font-weight: 700;
  letter-spacing: 0.3px;
}

/* Control Row (for sliders) */
.control-row {
  margin-bottom: 2rem;
}

.control-label {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
  font-weight: 600;
  color: #6b21a8;
}

.label-icon {
  font-size: 1.3rem;
  filter: drop-shadow(0 2px 4px rgba(236, 72, 153, 0.3));
}

.label-text {
  font-size: 1rem;
  font-weight: 700;
  color: #be185d;
}

.severity-value,
.week-value {
  padding: 0.4rem 1rem;
  background: linear-gradient(135deg, #ec4899, #a855f7);
  color: white;
  border-radius: 20px;
  font-weight: 800;
  font-size: 0.95rem;
  box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
  letter-spacing: 0.5px;
}

/* Custom Slider - Vibrant Version */
.custom-slider {
  width: 100%;
  height: 12px;
  border-radius: 6px;
  background: linear-gradient(to right,
    #22c55e 0%,      /* Green - Normal */
    #fbbf24 25%,     /* Yellow - Mild */
    #f97316 60%,     /* Orange - Moderate */
    #ef4444 100%     /* Red - Severe */
  );
  outline: none;
  -webkit-appearance: none;
  appearance: none;
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.15),
              0 2px 8px rgba(236, 72, 153, 0.2);
  cursor: pointer;
  position: relative;
}

/* Animated glow on slider */
.custom-slider::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(90deg, 
    rgba(34, 197, 94, 0.3),
    rgba(251, 191, 36, 0.3),
    rgba(249, 115, 22, 0.3),
    rgba(239, 68, 68, 0.3)
  );
  border-radius: 8px;
  filter: blur(8px);
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: -1;
}

.custom-slider:hover::before {
  opacity: 1;
}

.custom-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, white, #fdf2f8);
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2),
              0 0 0 4px rgba(236, 72, 153, 0.3);
  border: 3px solid #ec4899;
  transition: all 0.3s ease;
}

.custom-slider::-webkit-slider-thumb:hover {
  transform: scale(1.2);
  box-shadow: 0 6px 20px rgba(236, 72, 153, 0.4),
              0 0 0 6px rgba(236, 72, 153, 0.2);
}

.custom-slider::-moz-range-thumb {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, white, #fdf2f8);
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2),
              0 0 0 4px rgba(236, 72, 153, 0.3);
  border: 3px solid #ec4899;
  transition: all 0.3s ease;
}

.slider-markers {
  display: flex;
  justify-content: space-between;
  margin-top: 0.75rem;
  padding: 0 8px;
}

.slider-markers .marker {
  font-size: 0.8rem;
  font-weight: 700;
  color: #6b21a8;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
}


/* Journey Controls */
.journey-controls {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 1rem;
  padding: 1.5rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 16px;
  margin-top: 1.5rem;
}

.journey-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.9rem 1.6rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: none;
  border-radius: 20px;
  color: white;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.journey-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
}

.journey-btn.reset-btn {
  background: linear-gradient(135deg, #64b5f6 0%, #42a5f5 100%);
}

.journey-progress-bar {
  flex: 1;
  min-width: 200px;
  height: 10px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  overflow: hidden;
  position: relative;
}

.journey-progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #43e97b 0%, #38f9d7 100%);
  border-radius: 10px;
  transition: width 0.3s linear;
  position: relative;
}

.journey-progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  to { left: 100%; }
}

.journey-time {
  font-size: 0.9rem;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.9);
  min-width: 80px;
  text-align: right;
}

/* ===== MAIN VISUALIZATION GRID ===== */
.main-visualization-grid {
  display: grid;
  grid-template-columns: 280px 1fr 300px;
  gap: 2rem;
  position: relative;
  z-index: 2;
  max-width: 1400px;
  margin: 0 auto;
  background: transparent; /* Remove dark background */
  padding: 2rem;
  border-radius: 24px;
}

@media (max-width: 1200px) {
  .main-visualization-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
}

/* ===== LEFT SIDEBAR: Layer Controls ===== */
.layer-control-sidebar,
.vital-signs-sidebar {
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.98) 0%, 
    rgba(253, 242, 248, 0.98) 100%
  );
  backdrop-filter: blur(20px);
  border-radius: 24px;
  padding: 1.8rem;
  box-shadow: 0 10px 40px rgba(236, 72, 153, 0.12),
              0 2px 8px rgba(0, 0, 0, 0.04);
  border: 2px solid rgba(236, 72, 153, 0.2);
  position: sticky;
  top: 100px;
  max-height: calc(100vh - 120px);
  overflow-y: auto;
}

.sidebar-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1.2rem;
  border-bottom: 3px solid transparent;
  border-image: linear-gradient(90deg, #ec4899, #a855f7) 1;
}

.sidebar-header .header-icon {
  font-size: 1.6rem;
  filter: drop-shadow(0 2px 6px rgba(236, 72, 153, 0.3));
}

.sidebar-header h3 {
  background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 1.3rem;
  font-weight: 900;
  letter-spacing: 0.5px;
  filter: drop-shadow(0 2px 6px rgba(236, 72, 153, 0.4));
}

/* Layer Toggles - Vibrant */
.layer-toggle {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  margin-bottom: 0.75rem;
  background: white;
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid rgba(236, 72, 153, 0.1);
}

.layer-toggle:hover {
  background: linear-gradient(135deg, rgba(236, 72, 153, 0.05), rgba(168, 85, 247, 0.05));
  border-color: #ec4899;
  transform: translateX(4px);
  box-shadow: 0 4px 12px rgba(236, 72, 153, 0.15);
}

.layer-icon {
  font-size: 1.4rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.layer-name {
  font-weight: 700;
  background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 1rem;
  letter-spacing: 0.3px;
}

/* Preset Buttons - Vibrant */
.preset-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 1rem;
  margin-bottom: 0.75rem;
  background: linear-gradient(135deg, rgba(236, 72, 153, 0.2), rgba(139, 92, 246, 0.2));
  border: 2px solid rgba(236, 72, 153, 0.4);
  border-radius: 14px;
  color: #fbbf24;
  font-size: 0.9rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.preset-btn:hover {
  background: linear-gradient(135deg, #ec4899, #a855f7);
  color: white;
  border-color: #a855f7;
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(236, 72, 153, 0.3);
}


.toggle-switch {
  width: 44px;
  height: 24px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  position: relative;
  transition: all 0.3s ease;
  flex-shrink: 0;
}

.toggle-switch::before {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  background: white;
  border-radius: 50%;
  top: 2px;
  left: 2px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.layer-toggle input:checked + .toggle-switch {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.layer-toggle input:checked + .toggle-switch::before {
  left: 22px;
}

.layer-icon {
  font-size: 1.4rem;
  flex-shrink: 0;
}

.layer-name {
  font-size: 0.9rem;
  font-weight: 600;
  color: white;
  flex: 1;
}

/* Quick Presets */
.quick-presets {
  margin-top: 2rem;
  padding-top: 1.5rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.quick-presets h4 {
  font-size: 0.9rem;
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 1rem;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  font-weight: 800;
  text-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
}

.preset-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 0.8rem;
  margin-bottom: 0.6rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 12px;
  color: white;
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.preset-btn:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: #667eea;
  transform: translateX(4px);
}

/* Audio Control */
.audio-control {
  margin-top: 2rem;
  padding-top: 1.5rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.audio-toggle-btn {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 1.2rem;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));
  border: 2px solid rgba(59, 130, 246, 0.5);
  border-radius: 16px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
}

.audio-text {
  color: #60a5fa;
  font-size: 1rem;
  font-weight: 700;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.audio-status {
  padding: 0.4rem 0.9rem;
  background: rgba(251, 191, 36, 0.25);
  border-radius: 10px;
  font-size: 0.8rem;
  font-weight: 800;
  letter-spacing: 1px;
  color: #fbbf24;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

.audio-hint {
  font-size: 0.8rem;
  background: linear-gradient(135deg, #a78bfa 0%, #ec4899 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-top: 0.8rem;
  margin-bottom: 0;
  text-align: center;
  font-weight: 600;
}


.audio-toggle-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: #667eea;
}

.audio-toggle-btn.active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-color: #667eea;
}

.audio-icon {
  font-size: 1.3rem;
}


/* ===== CENTER: 3D Body Viewer ===== */
.body-3d-viewer {
  background: rgba(0, 0, 0, 0.4);
  border-radius: 20px;
  border: 2px solid rgba(255, 255, 255, 0.1);
  position: relative;
  overflow: hidden;
  min-height: 750px;
  box-shadow: 
    inset 0 0 60px rgba(0, 0, 0, 0.6),
    0 8px 32px rgba(0, 0, 0, 0.3);
}

/* Three.js Canvas */
.threejs-canvas {
  width: 100%;
  height: 100%;
  min-height: 750px;
}

/* Hotspot Layer */
.hotspot-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 10;
}

.hotspot {
  position: absolute;
  transform: translate(-50%, -50%);
  pointer-events: all;
  cursor: pointer;
  background: none;
  border: none;
  padding: 0;
}

.pulse-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 30px;
  height: 30px;
  border: 2px solid rgba(102, 126, 234, 0.6);
  border-radius: 50%;
  animation: pulse-ring 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse-ring {
  0% {
    width: 30px;
    height: 30px;
    opacity: 1;
  }
  100% {
    width: 60px;
    height: 60px;
    opacity: 0;
  }
}

.hotspot-dot {
  display: block;
  width: 18px;
  height: 18px;
  background: rgba(102, 126, 234, 0.9);
  border: 3px solid white;
  border-radius: 50%;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.6);
  animation: dot-pulse 2s ease-in-out infinite;
  position: relative;
  z-index: 2;
}

@keyframes dot-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.9;
  }
  50% {
    transform: scale(1.2);
    opacity: 1;
  }
}

.hotspot-label {
  position: absolute;
  top: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(10px);
  color: white;
  padding: 0.4rem 0.9rem;
  border-radius: 10px;
  font-size: 0.8rem;
  font-weight: 600;
  white-space: nowrap;
  opacity: 0;
  transition: all 0.3s ease;
  pointer-events: none;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
}

.hotspot:hover .hotspot-label {
  opacity: 1;
  top: calc(100% + 12px);
}

/* Viewer Controls */
.viewer-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
  z-index: 20;
}

.control-btn {
  width: 48px;
  height: 48px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(102, 126, 234, 0.4);
  border-radius: 14px;
  font-size: 1.3rem;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.control-btn:hover {
  background: white;
  transform: scale(1.1);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
}

.control-btn:active {
  transform: scale(0.95);
}

.control-btn.auto-rotate.active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-color: #667eea;
  animation: rotate-icon 3s linear infinite;
}

@keyframes rotate-icon {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Interaction Hint */
.interaction-hint {
  position: absolute;
  bottom: 20px;
  left: 20px;
  display: flex;
  align-items: center;
  gap: 0.6rem;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(10px);
  padding: 0.9rem 1.3rem;
  border-radius: 20px;
  color: white;
  font-size: 0.85rem;
  animation: hint-breathe 4s ease-in-out infinite;
  z-index: 5;
}

@keyframes hint-breathe {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

.hint-icon {
  font-size: 1.3rem;
}

/* Status Badge */
.status-badge {
  position: absolute;
  top: 20px;
  left: 20px;
  display: flex;
  align-items: center;
  gap: 0.6rem;
  background: rgba(102, 187, 106, 0.15);
  backdrop-filter: blur(10px);
  border: 2px solid #66bb6a;
  padding: 0.8rem 1.3rem;
  border-radius: 20px;
  color: white;
  font-weight: 600;
  z-index: 5;
  box-shadow: 0 4px 20px rgba(102, 187, 106, 0.3);
}

.badge-icon {
  font-size: 1.3rem;
}

/* ===== RIGHT SIDEBAR: Vital Signs ===== */
.vital-signs-sidebar {
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.98) 0%, 
    rgba(253, 242, 248, 0.98) 100%
  );
  backdrop-filter: blur(20px);
  border: 2px solid rgba(236, 72, 153, 0.2);
  border-radius: 20px;
  padding: 1.8rem;
  overflow-y: auto;
  max-height: 750px;
  box-shadow: 0 10px 40px rgba(236, 72, 153, 0.12),
              0 2px 8px rgba(0, 0, 0, 0.04);
}

/* Scrollbar Styling */
.vital-signs-sidebar::-webkit-scrollbar {
  width: 6px;
}

.vital-signs-sidebar::-webkit-scrollbar-track {
  background: rgba(236, 72, 153, 0.05);
  border-radius: 10px;
}

.vital-signs-sidebar::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #ec4899, #a855f7);
  border-radius: 10px;
}

.vital-signs-sidebar::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #be185d, #7e22ce);
}
/* Vital Card */
/* Vital Card */
.vital-card {
  background: linear-gradient(135deg, 
    rgba(236, 72, 153, 0.05) 0%, 
    rgba(168, 85, 247, 0.05) 100%
  );
  border-radius: 16px;
  padding: 1.2rem;
  margin-bottom: 1.2rem;
  border: 2px solid rgba(236, 72, 153, 0.15);
  transition: all 0.3s ease;
}

.vital-card:hover {
  background: linear-gradient(135deg, 
    rgba(236, 72, 153, 0.1) 0%, 
    rgba(168, 85, 247, 0.1) 100%
  );
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(236, 72, 153, 0.2);
  border-color: #ec4899;
}

.vital-title {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  margin-bottom: 1rem;
  padding-bottom: 0.8rem;
  border-bottom: 2px solid rgba(236, 72, 153, 0.2);
}

.vital-icon {
  font-size: 1.4rem;
  filter: drop-shadow(0 2px 4px rgba(236, 72, 153, 0.3));
}

.vital-title span:last-child {
  font-size: 0.9rem;
  font-weight: 700;
  background: linear-gradient(135deg, #be185d 0%, #7e22ce 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-transform: uppercase;
  letter-spacing: 0.8px;
}

.vital-reading {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  margin: 1rem 0;
}

/* Blood Pressure Display */
/* Blood Pressure Display */
.bp-systolic,
.bp-diastolic {
  font-size: 2.4rem;
  font-weight: 800;
  background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 2px 4px rgba(236, 72, 153, 0.2);
}

.bp-sep {
  font-size: 1.8rem;
  color: #a855f7;
  font-weight: 700;
}

.bp-unit {
  font-size: 0.95rem;
  color: #9333ea;
  font-weight: 700;
  margin-left: 0.3rem;
}

/* Heart Rate Display */
.heart-beat-icon {
  font-size: 2.2rem;
  animation: heartbeat 1.2s ease-in-out infinite;
}

@keyframes heartbeat {
  0%, 100% { transform: scale(1); }
  14% { transform: scale(1.15); }
  28% { transform: scale(1); }
}

.hr-value {
  font-size: 2.4rem;
  font-weight: 800;
  background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hr-unit {
  font-size: 0.95rem;
  color: #9333ea;
  font-weight: 700;
}
/* Oxygen Display */
/* Oxygen Display */
.o2-value {
  font-size: 2.4rem;
  font-weight: 800;
  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.o2-unit {
  font-size: 1.3rem;
  color: #0891b2;
  font-weight: 700;
  margin-left: 0.3rem;
}

.o2-bar-container {
  height: 12px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  overflow: hidden;
  margin: 1rem 0;
}

.o2-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #4dd0e1 0%, #26c6da 100%);
  border-radius: 10px;
  transition: width 0.5s ease;
}

/* Protein Cup */
.protein-cup {
  width: 70px;
  height: 110px;
  background: rgba(255, 255, 255, 0.1);
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  margin-right: 1.2rem;
}

.protein-fluid {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  background: linear-gradient(180deg, #ffb74d 0%, #ff9800 100%);
  transition: height 0.6s ease;
  border-radius: 0 0 9px 9px;
}

.protein-value {
  font-size: 1.6rem;
  font-weight: 800;
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-top: 0.5rem;
}

/* Platelet Cells */
.platelet-cells {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  min-height: 50px;
  margin: 1rem 0;
  padding: 0.8rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
}

.platelet-cell {
  width: 10px;
  height: 10px;
  background: #ef5350;
  border-radius: 50%;
  animation: cell-float 3s ease-in-out infinite;
}

.platelet-cell:nth-child(2n) {
  animation-delay: 0.5s;
}

.platelet-cell:nth-child(3n) {
  animation-delay: 1s;
}

@keyframes cell-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

.platelet-value {
  font-size: 2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.platelet-unit {
  font-size: 0.9rem;
  color: #b91c1c;
  font-weight: 700;
  margin-left: 0.3rem;
}

/* Enzyme Readings */
.enzyme-readings {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
  margin: 1rem 0;
}

.enzyme-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.6rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
}

.enzyme-label {
  font-size: 0.85rem;
  font-weight: 700;
  color: #9333ea;
}

.enzyme-value {
  font-size: 1.3rem;
  font-weight: 800;
  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.enzyme-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.4rem 0;
}

/* Vital Waveforms & Charts */
.vital-waveform,
.vital-chart {
  width: 100%;
  margin: 0.8rem 0;
  border-radius: 8px;
}

/* Vital Status */
.vital-status {
  padding: 0.6rem 1.2rem;
  border-radius: 12px;
  font-size: 0.8rem;
  font-weight: 800;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-top: 0.8rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.status-normal {
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
  color: white;
  border: 2px solid #15803d;
}

.status-warning {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  color: white;
  border: 2px solid #b45309;
}

.status-danger {
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  color: white;
  border: 2px solid #b91c1c;
  animation: status-alert 1.5s ease-in-out infinite;
}

@keyframes status-alert {
  0%, 100% { 
    opacity: 1; 
    transform: scale(1);
  }
  50% { 
    opacity: 0.9; 
    transform: scale(1.05);
  }
}


/* Emergency Alert */
.emergency-alert-box {
  background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
  padding: 1.5rem;
  border-radius: 16px;
  margin-top: 1.5rem;
  text-align: center;
  animation: emergency-pulse 1.5s ease-in-out infinite;
  box-shadow: 0 8px 30px rgba(244, 67, 54, 0.5);
}

@keyframes emergency-pulse {
  0%, 100% {
    box-shadow: 0 8px 30px rgba(244, 67, 54, 0.5);
  }
  50% {
    box-shadow: 0 12px 40px rgba(244, 67, 54, 0.7);
  }
}

.alert-icon-shake {
  font-size: 3rem;
  margin-bottom: 0.8rem;
  animation: shake 0.6s ease-in-out infinite;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-6px); }
  75% { transform: translateX(6px); }
}

.alert-content {
  color: white;
  margin-bottom: 1rem;
}

.alert-content strong {
  display: block;
  font-size: 1.2rem;
  margin-bottom: 0.5rem;
}

.alert-content p {
  font-size: 0.95rem;
  margin: 0;
}

.call-emergency-btn {
  display: block;
  width: 100%;
  padding: 1rem;
  background: white;
  color: #f44336;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
}

.call-emergency-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
}

/* ===== COMPARISON VIEW ===== */
/* =====================================================
   COMPARISON VIEW: NORMAL VS PREECLAMPSIA
   ===================================================== */

.comparison-view-grid {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  grid-template-rows: auto 1fr auto;
  gap: 2rem;
  padding: 2rem;
  background: linear-gradient(135deg, #fef5f7 0%, #fce4ec 100%);
  border-radius: 24px;
  position: relative;
  min-height: 800px;
}

/* Comparison Panels */
.comparison-panel {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 20px;
  padding: 2rem;
  border: 2px solid rgba(233, 30, 99, 0.2);
  backdrop-filter: blur(10px);
  align-items: stretch;           /* ← ADD THIS LINE */
  justify-content: flex-start;    /* ← ADD THIS LINE */
}

.comparison-panel.normal-panel {
  border-color: rgba(74, 222, 128, 0.4);
  box-shadow: 0 8px 32px rgba(74, 222, 128, 0.2);
}

.comparison-panel.pe-panel {
  border-color: rgba(239, 68, 68, 0.4);
  box-shadow: 0 8px 32px rgba(239, 68, 68, 0.2);
}

/* Panel Headers */
.panel-header-comparison {
  text-align: center;
  padding-bottom: 1rem;
  border-bottom: 2px solid rgba(255, 255, 255, 0.1);
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.8rem 1.5rem;
  border-radius: 50px;
  font-weight: 800;
  font-size: 0.95rem;
  letter-spacing: 1px;
  margin-bottom: 0.75rem;
}

.status-badge.status-normal {
  background: linear-gradient(135deg, #4ade80, #22c55e);
  color: white;
  box-shadow: 0 4px 16px rgba(74, 222, 128, 0.4);
}

.status-badge.status-warning {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  color: white;
  box-shadow: 0 4px 16px rgba(239, 68, 68, 0.4);
}

.badge-icon {
  font-size: 1.3rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.panel-subtitle {
  color: rgba(33, 33, 33, 0.8);
  font-size: 0.9rem;
  margin: 0;
}

/* Body Comparison Container */
.body-comparison-container {
  flex: 0 0 auto;              /* CHANGED from: flex: 1 */
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(circle at center, rgba(255, 255, 255, 0.8), rgba(252, 228, 236, 0.3));
  border-radius: 16px;
  padding: 1.5rem;
  height: 650px;              /* CHANGED from: min-height: 600px */
}

.body-svg-comparison {
  max-width: 100%;
  height: auto;
  filter: drop-shadow(0 8px 24px rgba(0, 0, 0, 0.4));
  transition: transform 0.3s ease;
}

/* Line ~4139 - Add this new rule */
.body-fixed-size {
  width: 100%;
  max-width: 320px;
  height: auto;
  margin: 0 auto;
}

.body-comparison-container .body-svg-comparison {
  width: 100%;
  max-width: 320px;
  height: auto;
}

.body-svg-comparison:hover {
  transform: scale(1.02);
}

/* Visual Differences - Swelling Animation */
.swollen-part {
  animation: swellingPulse 2s ease-in-out infinite;
}

@keyframes swellingPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}

/* Pulsing Glow for Affected Organs */
.pulsing-glow {
  animation: dangerPulse 2.5s ease-in-out infinite;
}

@keyframes dangerPulse {
  0%, 100% {
    opacity: 0.6;
    filter: drop-shadow(0 0 8px rgba(239, 68, 68, 0.8));
  }
  50% {
    opacity: 1;
    filter: drop-shadow(0 0 20px rgba(239, 68, 68, 1));
  }
}

/* Healthy Glow */
.healthy-glow {
  animation: healthyGlow 3s ease-in-out infinite;
}

@keyframes healthyGlow {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.7;
  }
}

/* Interactive Hotspots */
.body-hotspots {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.hotspot-btn {
  position: absolute;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 40px;
  background: transparent;
  border: none;
  cursor: pointer;
  pointer-events: all;
  z-index: 10;
}

.hotspot-pulse {
  display: block;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  animation: pulseSpread 2s ease-out infinite;
}

.hotspot-pulse.pulse-green {
  background: rgba(74, 222, 128, 0.4);
  box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.7);
}

.hotspot-pulse.pulse-red {
  background: rgba(239, 68, 68, 0.4);
  box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
}

@keyframes pulseSpread {
  0% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 currentColor;
  }
  50% {
    transform: scale(1);
  }
  70% {
    box-shadow: 0 0 0 15px rgba(0, 0, 0, 0);
  }
  100% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
  }
}

/* Tooltip on hover */
.hotspot-btn[data-tooltip]:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.95);
  color: #212121;
  padding: 0.5rem 1rem;
  border-radius: 8px;
  font-size: 0.85rem;
  font-weight: 600;
  white-space: nowrap;
  margin-bottom: 0.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  z-index: 100;
}

/* Stats Grid */
.comparison-stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  flex: 0 0 auto;    /* ← ADD THIS LINE */
}

.stat-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 14px;
  border: 2px solid rgba(233, 30, 99, 0.15);
  transition: all 0.3s ease;
}

.stat-card:hover {
  transform: translateY(-2px);
  border-color: currentColor;
}

.stat-card.stat-good {
  border-color: rgba(74, 222, 128, 0.3);
}

.stat-card.stat-danger {
  border-color: rgba(239, 68, 68, 0.3);
}

.stat-card.stat-warning {
  border-color: rgba(251, 191, 36, 0.3);
}

.stat-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.stat-info {
  flex: 1;
}

.stat-label {
  display: block;
  font-size: 0.8rem;
  color: rgba(33, 33, 33, 0.7);
  margin-bottom: 0.25rem;
}

.stat-value {
  display: block;
  font-size: 1rem;
  font-weight: 700;
  color: #212121;
}

.stat-card.stat-good .stat-value {
  color: #4ade80;
}

.stat-card.stat-danger .stat-value {
  color: #ef4444;
}

.stat-card.stat-warning .stat-value {
  color: #fbbf24;
}

/* Vertical Divider */
.comparison-divider-vertical {
  grid-row: 1 / -1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  position: relative;
}

.divider-line-vertical {
  width: 2px;
  flex: 1;
  background: linear-gradient(to bottom,
    transparent,
    rgba(255, 255, 255, 0.3) 20%,
    rgba(255, 255, 255, 0.3) 80%,
    transparent
  );
}

.vs-badge-large {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1.5rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50%;
  width: 100px;
  height: 100px;
  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.5);
  border: 4px solid rgba(255, 255, 255, 0.3);
}

.vs-text {
  font-size: 2rem;
  font-weight: 900;
  color: #212121;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.vs-subtitle {
  font-size: 0.65rem;
  color: rgba(255, 255, 255, 0.9);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.difference-arrows {
  display: flex;
  gap: 1rem;
  font-size: 2rem;
  color: rgba(255, 255, 255, 0.5);
  animation: arrowsFloat 2s ease-in-out infinite;
}

@keyframes arrowsFloat {
  0%, 100% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(-5px);
  }
}

/* Comparison Legend */
.comparison-legend {
  grid-column: 1 / -1;
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
  border-radius: 16px;
  padding: 1.5rem;
  border: 2px solid rgba(139, 92, 246, 0.3);
}

.comparison-legend h4 {
  color: #212121;
  font-size: 1.1rem;
  margin-bottom: 1rem;
  text-align: center;
}

.legend-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 12px;
  border: 1px solid rgba(233, 30, 99, 0.2);
}

.legend-indicator {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.legend-text {
  font-size: 0.85rem;
  color: rgba(33, 33, 33, 0.8);
}

.legend-text strong {
  color: #212121;
  font-weight: 700;
}
/* Responsive Design */
@media (max-width: 1200px) {
  .comparison-view-grid {
    grid-template-columns: 1fr;
    grid-template-rows: auto;
  }
  
  .comparison-divider-vertical {
    grid-row: auto;
    flex-direction: row;
    height: auto;
  }
  
  .divider-line-vertical {
    width: 100%;
    height: 2px;
  }
  
  .comparison-stats-grid {
    grid-template-columns: 1fr;
  }
}

.stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.9rem;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 12px;
}


.stat-value {
  font-weight: 700;
  padding: 0.4rem 0.9rem;
  border-radius: 10px;
  font-size: 0.9rem;
}

.stat-value.good {
  background: rgba(102, 187, 106, 0.2);
  color: #66bb6a;
  border: 1px solid rgba(102, 187, 106, 0.4);
}

.stat-value.bad {
  background: rgba(244, 67, 54, 0.2);
  color: #f44336;
  border: 1px solid rgba(244, 67, 54, 0.4);
}

.comparison-divider {
  display: flex;
  align-items: center;
  justify-content: center;
}

.vs-badge {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.4rem;
  font-weight: 700;
  color: #212121;
  box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
}

/* ===== ORGAN MODAL ===== */
.organ-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(15px);
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  animation: modal-fade-in 0.3s ease;
}

@keyframes modal-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.organ-modal-container {
  background: linear-gradient(135deg, #1a2a6c 0%, #b21f1f 50%, #fdbb2d 100%);
  padding: 3rem;
  border-radius: 30px;
  max-width: 950px;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  box-shadow: 0 25px 60px rgba(0, 0, 0, 0.6);
  animation: modal-slide-up 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes modal-slide-up {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.modal-close-btn {
  position: absolute;
  top: 1.5rem;
  right: 1.5rem;
  width: 44px;
  height: 44px;
  background: rgba(255, 255, 255, 0.15);
  border: 2px solid white;
  border-radius: 50%;
  color: #212121;
  font-size: 1.6rem;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 10;
}

.modal-close-btn:hover {
  background: white;
  color: #333;
  transform: rotate(90deg);
}

.organ-modal-header {
  text-align: center;
  margin-bottom: 2.5rem;
}

.organ-icon-large {
  font-size: 5rem;
  margin-bottom: 1rem;
  animation: icon-bounce 2s ease-in-out infinite;
}

@keyframes icon-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.organ-modal-header h2 {
  font-size: 2.3rem;
  color: white;
  font-weight: 700;
  margin: 0;
}

.organ-modal-content {
  color: white;
}

/* Organ Comparison Row */
.organ-comparison-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin: 2rem 0;
}

.organ-state {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  padding: 1.8rem;
  border-radius: 18px;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.organ-state h4 {
  font-size: 1.1rem;
  margin-bottom: 1.2rem;
  text-align: center;
  font-weight: 700;
}

.organ-visual-box {
  width: 100%;
  height: 220px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 14px;
  margin-bottom: 1.2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.organ-visual-box.affected {
  background: rgba(244, 67, 54, 0.15);
  border: 2px solid rgba(244, 67, 54, 0.4);
}

.organ-illustration {
  font-size: 6rem;
}

.organ-illustration.pulsing {
  animation: organ-alert 1.5s ease-in-out infinite;
}

@keyframes organ-alert {
  0%, 100% { transform: scale(1); opacity: 0.9; }
  50% { transform: scale(1.1); opacity: 1; }
}

.organ-state p {
  font-size: 0.95rem;
  line-height: 1.7;
  color: rgba(255, 255, 255, 0.95);
}

/* Organ Symptoms Section */
.organ-symptoms-section {
  margin: 2rem 0;
  padding: 1.8rem;
  background: rgba(255, 167, 38, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  border-left: 5px solid #ffa726;
}

.organ-symptoms-section h4 {
  color: #ffb74d;
  margin-bottom: 1.2rem;
  font-size: 1.1rem;
  font-weight: 700;
}

.symptoms-list {
  padding-left: 1.8rem;
  margin: 0;
}

.symptoms-list li {
  margin-bottom: 0.7rem;
  line-height: 1.6;
  color: rgba(255, 255, 255, 0.95);
  font-size: 0.95rem;
}

/* Organ Action Section */
.organ-action-section {
  margin: 2rem 0;
  padding: 1.8rem;
  background: rgba(244, 67, 54, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  border-left: 5px solid #f44336;
}

.organ-action-section h4 {
  color: #ef5350;
  margin-bottom: 1rem;
  font-size: 1.1rem;
  font-weight: 700;
}

.organ-action-section p {
  line-height: 1.7;
  color: rgba(255, 255, 255, 0.95);
  font-size: 0.95rem;
  margin: 0;
}

/* Microscopic Button */
.microscopic-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.7rem;
  width: 100%;
  padding: 1.2rem 1.8rem;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 16px;
  color: white;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-top: 1.5rem;
}

.microscopic-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.btn-icon {
  font-size: 1.4rem;
}

/* ===== BOTTOM INFO PANEL ===== */
.simulation-info-panel {
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.98) 0%, 
    rgba(253, 242, 248, 0.98) 100%
  );
  backdrop-filter: blur(20px);
  border: 2px solid rgba(236, 72, 153, 0.2);
  border-radius: 24px;
  padding: 2.5rem;
  margin-top: 2.5rem;
  box-shadow: 0 10px 40px rgba(236, 72, 153, 0.12),
              0 2px 8px rgba(0, 0, 0, 0.04);
}

.info-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 2rem;
}

.info-block {
  min-width: 0; /* Prevent overflow */
}

.info-block h3 {
  font-size: 1.7rem;
  background: linear-gradient(135deg, #be185d 0%, #7e22ce 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 1rem;
  font-weight: 800;
  letter-spacing: -0.3px;
}

.info-block h4 {
  font-size: 1.15rem;
  color: #be185d;
  margin-bottom: 1rem;
  font-weight: 700;
}

.info-block p {
  font-size: 1.05rem;
  color: #6b21a8;
  line-height: 1.8;
  margin: 0;
  font-weight: 500;
}


#keyChangesList {
  list-style: none;
  padding: 0;
  margin: 0;
}

#keyChangesList li {
  padding: 1rem 1.2rem;
  margin-bottom: 0.8rem;
  background: linear-gradient(135deg, 
    rgba(34, 197, 94, 0.08) 0%, 
    rgba(22, 163, 74, 0.08) 100%
  );
  border-radius: 14px;
  font-size: 1rem;
  color: #15803d;
  line-height: 1.6;
  font-weight: 600;
  border-left: 4px solid #22c55e;
  transition: all 0.3s ease;
}

#keyChangesList li:hover {
  background: linear-gradient(135deg, 
    rgba(34, 197, 94, 0.15) 0%, 
    rgba(22, 163, 74, 0.15) 100%
  );
  transform: translateX(4px);
  border-left-width: 6px;
}

.action-recommendation {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: linear-gradient(135deg, 
    rgba(34, 197, 94, 0.12) 0%, 
    rgba(22, 163, 74, 0.12) 100%
  );
  border-radius: 16px;
  border-left: 5px solid #22c55e;
  border: 2px solid rgba(34, 197, 94, 0.3);
}

.action-icon {
  font-size: 1.8rem;
  flex-shrink: 0;
  margin-top: 0.2rem;
  filter: drop-shadow(0 2px 4px rgba(34, 197, 94, 0.3));
}

.action-recommendation p {
  margin: 0;
  font-size: 1rem;
  line-height: 1.8;
  color: #15803d;
  font-weight: 600;
}



/* ===== EDUCATIONAL TIP ===== */
/* ===== EDUCATIONAL TIP ===== */
.edu-tip-floating {
  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
  padding: 2rem;
  border-radius: 20px;
  margin-top: 2.5rem;
  display: flex;
  align-items: flex-start;
  gap: 1.5rem;
  box-shadow: 0 10px 40px rgba(139, 92, 246, 0.4);
  border: 2px solid rgba(167, 139, 250, 0.5);
}

.tip-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.tip-bulb {
  font-size: 2rem;
  filter: drop-shadow(0 2px 8px rgba(255, 255, 255, 0.3));
}

.tip-header h4 {
  color: white;
  font-size: 1.3rem;
  margin: 0;
  font-weight: 800;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.tip-message {
  color: rgba(255, 255, 255, 0.95);
  font-size: 1.05rem;
  line-height: 1.7;
  margin-bottom: 1.5rem;
  font-weight: 500;
}

.next-tip-btn {
  background: rgba(255, 255, 255, 0.25);
  color: white;
  border: 2px solid rgba(255, 255, 255, 0.5);
  padding: 0.8rem 1.5rem;
  border-radius: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 0.95rem;
  backdrop-filter: blur(10px);
}

.next-tip-btn:hover {
  background: rgba(255, 255, 255, 0.35);
  border-color: white;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}


/* ===== RESPONSIVE DESIGN ===== */
@media (max-width: 1400px) {
  .main-visualization-grid {
    grid-template-columns: 240px 1fr 280px;
    gap: 1.5rem;
  }
}

@media (max-width: 1200px) {
  .main-visualization-grid {
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  .layer-control-sidebar,
  .vital-signs-sidebar {
    max-height: none;
  }

  .comparison-view-grid {
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  .comparison-divider {
    transform: rotate(90deg);
    margin: 1rem 0;
  }

  .info-row {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
}

@media (max-width: 768px) {
  .simulator-section-3d {
    padding: 2.5rem 1.5rem;
  }

  .simulator-controls-panel {
    padding: 1.5rem;
  }

  .view-mode-selector {
    flex-direction: column;
    gap: 0.8rem;
  }

  .slider-markers {
    font-size: 0.7rem;
  }

  .body-3d-viewer {
    min-height: 500px;
  }

  .threejs-canvas {
    min-height: 500px;
  }

  .viewer-controls {
    bottom: 15px;
    right: 15px;
    gap: 0.5rem;
  }

  .control-btn {
    width: 42px;
    height: 42px;
  }

  .interaction-hint {
    font-size: 0.75rem;
    padding: 0.7rem 1rem;
    left: 15px;
    bottom: 15px;
  }

  .organ-modal-container {
    padding: 2rem 1.5rem;
    max-width: 95%;
  }

  .organ-comparison-row {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  .edu-tip-floating {
    flex-direction: column;
    gap: 1rem;
  }

  .next-tip-btn {
    align-self: stretch;
  }
}

@media (max-width: 480px) {
  .simulator-section-3d {
    padding: 2rem 1rem;
    margin: 3rem 0;
  }

  .control-row {
    margin: 1rem 0;
  }

  .control-label {
    flex-wrap: wrap;
  }

  .severity-value,
  .week-value {
    width: 100%;
    margin-top: 0.5rem;
    text-align: center;
  }

  .journey-controls {
    flex-direction: column;
  }

  .journey-progress-bar {
    order: -1;
    width: 100%;
  }
}

/* ========================================
   PREECLAMPSIA SVG BODY SILHOUETTE
   ======================================== */

.body-silhouette-container {
  position: relative;
  width: 100%;
  max-width: 320px;
  margin: 0 auto;
  background: linear-gradient(135deg, #ffffff 0%, #faf5fb 100%);
  border-radius: 24px;
  padding: 2rem 1.5rem;
  box-shadow: 0 10px 40px rgba(236, 64, 122, 0.08),
              0 2px 8px rgba(0, 0, 0, 0.04);
  border: 2px solid rgba(236, 64, 122, 0.1);
}

.body-svg-preeclampsia {
  width: 100%;
  height: auto;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.05));
}

/* Body parts base colors */
.body-part-skin { transition: all 0.3s ease; }
.body-part-hair { transition: all 0.3s ease; }
.body-part-dress { transition: all 0.3s ease; }
.body-part-belly { transition: all 0.3s ease; }
.body-part-skirt { transition: all 0.3s ease; }
.body-part-hands { transition: all 0.3s ease; }
.body-part-feet { transition: all 0.3s ease; }

/* Glow zones - animated on severity */
.glow-zone {
  transition: opacity 0.5s ease;
  pointer-events: none;
}

.glow-zone.active {
  opacity: 1 !important;
  animation: glow-pulse-preeclampsia 2s ease-in-out infinite;
}

@keyframes glow-pulse-preeclampsia {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

/* Organ icons (floating badges) */
.organ-icon {
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.icon-badge {
  transition: all 0.3s ease;
  animation: icon-float 3s ease-in-out infinite;
}

@keyframes icon-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

.organ-icon:hover .icon-badge {
  transform: scale(1.2);
  filter: drop-shadow(0 4px 12px rgba(236, 64, 122, 0.3));
}

.organ-emoji {
  pointer-events: none;
  user-select: none;
}

/* Clickable hotspots */
.hotspot-click {
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.hotspot-click:hover {
  opacity: 0.1 !important;
  fill: rgba(236, 64, 122, 0.2);
}

/* Severity-based body changes */
.body-svg-preeclampsia[data-severity="normal"] .glow-zone {
  opacity: 0;
}

.body-svg-preeclampsia[data-severity="mild"] .glow-zone {
  opacity: 0.3;
}

.body-svg-preeclampsia[data-severity="moderate"] .glow-zone {
  opacity: 0.6;
  animation: glow-pulse-moderate 1.5s ease-in-out infinite;
}

.body-svg-preeclampsia[data-severity="severe"] .glow-zone {
  opacity: 0.9;
  animation: glow-pulse-severe 1s ease-in-out infinite;
}

@keyframes glow-pulse-moderate {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 0.8; }
}

@keyframes glow-pulse-severe {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
}

/* Change body part colors based on severity */
.body-svg-preeclampsia[data-severity="severe"] .body-part-hands,
.body-svg-preeclampsia[data-severity="severe"] .body-part-feet {
  fill: #fcd34d; /* Yellow for edema */
  opacity: 0.9;
}

.body-svg-preeclampsia[data-severity="severe"] .body-part-belly {
  stroke: #ef4444;
  stroke-width: 3;
}

/* Interaction hint */
.body-hint {
  text-align: center;
  margin-top: 1rem;
  padding: 0.75rem;
  background: linear-gradient(135deg, rgba(236, 64, 122, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.hint-icon {
  font-size: 1.2rem;
  animation: hint-bounce 2s ease-in-out infinite;
}

@keyframes hint-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

.hint-text {
  font-size: 0.85rem;
  font-weight: 600;
  color: #d81b60;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .body-silhouette-container {
    max-width: 280px;
    padding: 1.5rem 1rem;
  }
  
  .organ-icon {
    transform: scale(0.9);
  }
}

/* ========================================
   BLOOD PRESSURE TRACKER MODAL
   ======================================== */

.bp-tracker-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(8px);
  z-index: 10000;
  overflow-y: auto;
  padding: 2rem;
  animation: modal-fade-in 0.3s ease;
}

.bp-tracker-modal.active {
  display: flex;
  align-items: flex-start;
  justify-content: center;
}

@keyframes modal-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.bp-modal-content {
  background: linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%);
  border-radius: 32px;
  max-width: 900px;
  width: 100%;
  position: relative;
  box-shadow: 0 20px 60px rgba(236, 72, 153, 0.3),
              0 4px 16px rgba(0, 0, 0, 0.1);
  animation: modal-slide-up 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  margin: 2rem auto;
}

@keyframes modal-slide-up {
  from { 
    opacity: 0;
    transform: translateY(40px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

.bp-modal-close {
  position: absolute;
  top: 1.5rem;
  right: 1.5rem;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid rgba(236, 72, 153, 0.3);
  background: white;
  color: #be185d;
  font-size: 1.3rem;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

.bp-modal-close:hover {
  background: linear-gradient(135deg, #ec4899, #a855f7);
  color: white;
  border-color: #a855f7;
  transform: rotate(90deg);
}

.bp-modal-header {
  background: linear-gradient(135deg, #ec4899 0%, #a855f7 100%);
  padding: 2.5rem 2rem;
  border-radius: 32px 32px 0 0;
  text-align: center;
  color: white;
  position: relative;
  overflow: hidden;
}

.bp-modal-header::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 60%);
  animation: header-shimmer 4s ease-in-out infinite;
}

@keyframes header-shimmer {
  0%, 100% { transform: translate(0, 0); }
  50% { transform: translate(10%, 10%); }
}

.bp-header-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
  position: relative;
  z-index: 1;
}

.bp-modal-header h2 {
  font-size: 2rem;
  margin-bottom: 0.5rem;
  font-weight: 800;
  letter-spacing: 0.5px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  position: relative;
  z-index: 1;
}

.bp-modal-subtitle {
  font-size: 1rem;
  opacity: 0.95;
  font-weight: 500;
  position: relative;
  z-index: 1;
}

.bp-modal-body {
  padding: 2.5rem 2rem;
  max-height: calc(100vh - 300px);
  overflow-y: auto;
}

/* Current Week Input */
.bp-current-week {
  background: linear-gradient(135deg, rgba(236, 72, 153, 0.08), rgba(168, 85, 247, 0.08));
  padding: 1.5rem;
  border-radius: 20px;
  margin-bottom: 2rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 1rem;
  border: 2px solid rgba(236, 72, 153, 0.2);
}

.bp-current-week label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 700;
  color: #be185d;
  font-size: 1.05rem;
}

.week-icon {
  font-size: 1.3rem;
}

.week-input {
  width: 100px;
  padding: 0.75rem 1rem;
  border: 2px solid rgba(236, 72, 153, 0.3);
  border-radius: 12px;
  font-size: 1.2rem;
  font-weight: 700;
  text-align: center;
  color: #be185d;
  background: white;
  transition: all 0.3s ease;
}

.week-input:focus {
  outline: none;
  border-color: #ec4899;
  box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.1);
}

/* BP Entry Form */
.bp-entry-form {
  background: white;
  padding: 2rem;
  border-radius: 20px;
  margin-bottom: 2rem;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
  border: 2px solid rgba(236, 72, 153, 0.1);
}

.bp-entry-form h3 {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: #be185d;
  margin-bottom: 1.5rem;
  font-size: 1.3rem;
}

.form-icon {
  font-size: 1.5rem;
}

.bp-input-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
  margin-bottom: 1.5rem;
}

.bp-input-row {
  margin-bottom: 1.5rem;
}

.bp-input-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.bp-input-group.full-width {
  width: 100%;
}

.bp-input-group label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
  color: #6b21a8;
  font-size: 0.95rem;
}

.input-icon {
  font-size: 1.1rem;
}

.bp-number-input,
.bp-time-input {
  padding: 1rem 1.2rem;
  border: 2px solid rgba(236, 72, 153, 0.2);
  border-radius: 12px;
  font-size: 1.1rem;
  font-weight: 600;
  color: #6b21a8;
  transition: all 0.3s ease;
  background: rgba(253, 242, 248, 0.3);
}

.bp-number-input:focus,
.bp-time-input:focus,
.bp-notes-input:focus {
  outline: none;
  border-color: #ec4899;
  box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.1);
  background: white;
}

.input-unit {
  font-size: 0.85rem;
  color: #9333ea;
  font-weight: 600;
  margin-top: 0.25rem;
}

.bp-notes-input {
  padding: 1rem;
  border: 2px solid rgba(236, 72, 153, 0.2);
  border-radius: 12px;
  font-size: 0.95rem;
  color: #6b21a8;
  resize: vertical;
  font-family: inherit;
  transition: all 0.3s ease;
  background: rgba(253, 242, 248, 0.3);
}

.bp-save-btn {
  width: 100%;
  padding: 1.2rem;
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
  color: white;
  border: none;
  border-radius: 14px;
  font-size: 1.1rem;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
  margin-top: 1.5rem;
}

.bp-save-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(34, 197, 94, 0.4);
}

.save-icon {
  font-size: 1.3rem;
}

/* BP History Section */
.bp-history-section {
  background: white;
  padding: 2rem;
  border-radius: 20px;
  margin-bottom: 2rem;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
  border: 2px solid rgba(236, 72, 153, 0.1);
}

.history-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.history-header h3 {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: #be185d;
  font-size: 1.3rem;
}

.history-icon {
  font-size: 1.5rem;
}

.clear-history-btn {
  padding: 0.6rem 1.2rem;
  background: rgba(239, 68, 68, 0.1);
  color: #dc2626;
  border: 2px solid rgba(239, 68, 68, 0.3);
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.9rem;
}

.clear-history-btn:hover {
  background: #ef4444;
  color: white;
  border-color: #ef4444;
}

.bp-chart-container {
  background: rgba(253, 242, 248, 0.5);
  padding: 1.5rem;
  border-radius: 16px;
  margin-bottom: 1.5rem;
  border: 2px solid rgba(236, 72, 153, 0.1);
}

.bp-readings-list {
  max-height: 400px;
  overflow-y: auto;
}

.bp-reading-item {
  background: linear-gradient(135deg, rgba(236, 72, 153, 0.04), rgba(168, 85, 247, 0.04));
  padding: 1.2rem;
  border-radius: 14px;
  margin-bottom: 1rem;
  border: 2px solid rgba(236, 72, 153, 0.15);
  transition: all 0.3s ease;
}

.bp-reading-item:hover {
  border-color: #ec4899;
  box-shadow: 0 4px 12px rgba(236, 72, 153, 0.15);
  transform: translateX(4px);
}

.reading-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.75rem;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.reading-date {
  font-weight: 700;
  color: #be185d;
  font-size: 1rem;
}

.reading-week {
  background: linear-gradient(135deg, #ec4899, #a855f7);
  color: white;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 700;
}

.reading-values {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  margin-bottom: 0.5rem;
  flex-wrap: wrap;
}

.bp-value {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 1.3rem;
  font-weight: 800;
}

.bp-value.normal { color: #22c55e; }
.bp-value.elevated { color: #fbbf24; }
.bp-value.high { color: #f97316; }
.bp-value.severe { color: #ef4444; }

.reading-time {
  color: #9333ea;
  font-size: 0.85rem;
  font-weight: 600;
}

.reading-notes {
  color: #6b21a8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 0.5rem;
  padding-top: 0.5rem;
  border-top: 1px solid rgba(236, 72, 153, 0.2);
}

.reading-delete {
  padding: 0.4rem 0.8rem;
  background: rgba(239, 68, 68, 0.1);
  color: #dc2626;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  transition: all 0.3s ease;
}

.reading-delete:hover {
  background: #ef4444;
  color: white;
}

/* Thresholds Info */
.bp-thresholds-info {
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(249, 115, 22, 0.1));
  padding: 1.5rem;
  border-radius: 20px;
  margin-bottom: 2rem;
  border: 2px solid rgba(249, 115, 22, 0.3);
}

.bp-thresholds-info h4 {
  color: #be185d;
  margin-bottom: 1rem;
  font-size: 1.1rem;
}

.threshold-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.threshold-item {
  padding: 0.75rem;
  border-radius: 12px;
  text-align: center;
  border: 2px solid;
}

.threshold-item.normal {
  background: rgba(34, 197, 94, 0.1);
  border-color: #22c55e;
}

.threshold-item.elevated {
  background: rgba(251, 191, 36, 0.1);
  border-color: #fbbf24;
}

.threshold-item.high {
  background: rgba(249, 115, 22, 0.1);
  border-color: #f97316;
}

.threshold-item.severe {
  background: rgba(239, 68, 68, 0.1);
  border-color: #ef4444;
}

.threshold-item.crisis {
  background: rgba(220, 38, 38, 0.2);
  border-color: #dc2626;
  animation: pulse-crisis 2s ease-in-out infinite;
}

@keyframes pulse-crisis {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.threshold-label {
  display: block;
  font-weight: 700;
  font-size: 0.85rem;
  margin-bottom: 0.25rem;
  color: #6b21a8;
}

.threshold-value {
  display: block;
  font-weight: 800;
  font-size: 1rem;
  color: #be185d;
}

.threshold-warning {
  background: white;
  padding: 1rem;
  border-radius: 12px;
  color: #dc2626;
  font-weight: 600;
  font-size: 0.9rem;
  border-left: 4px solid #ef4444;
}

/* Export Section */
.bp-export-section {
  background: white;
  padding: 1.5rem;
  border-radius: 20px;
  border: 2px solid rgba(236, 72, 153, 0.1);
}

.bp-export-section h4 {
  color: #be185d;
  margin-bottom: 1rem;
  font-size: 1.1rem;
}

.export-buttons {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.export-btn {
  flex: 1;
  min-width: 150px;
  padding: 1rem;
  background: white;
  border: 2px solid rgba(236, 72, 153, 0.3);
  border-radius: 12px;
  color: #be185d;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-size: 0.95rem;
}

.export-btn:hover {
  background: linear-gradient(135deg, #ec4899, #a855f7);
  color: white;
  border-color: #a855f7;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
}

/* Empty State */
.bp-empty-state {
  text-align: center;
  padding: 3rem 2rem;
  color: #9333ea;
}

.bp-empty-state .empty-icon {
  font-size: 4rem;
  margin-bottom: 1rem;
  opacity: 0.4;
}

.bp-empty-state p {
  font-size: 1.1rem;
  font-weight: 600;
  opacity: 0.6;
}

/* Responsive */
@media (max-width: 768px) {
  .bp-modal-content {
    margin: 1rem;
    border-radius: 24px;
  }
  
  .bp-modal-header {
    padding: 2rem 1.5rem;
  }
  
  .bp-modal-body {
    padding: 1.5rem 1rem;
  }
  
  .bp-input-grid {
    grid-template-columns: 1fr;
  }
  
  .threshold-grid {
    grid-template-columns: 1fr;
  }
  
  .export-buttons {
    flex-direction: column;
  }
}

/* Severity-Specific Info Block Colors */
.info-block.severity-normal h3 {
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.info-block.severity-normal p {
  color: #15803d;
}

.info-block.severity-mild h3 {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.info-block.severity-mild p {
  color: #b45309;
}

.info-block.severity-moderate h3 {
  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.info-block.severity-moderate p {
  color: #c2410c;
}

.info-block.severity-severe h3 {
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.info-block.severity-severe p {
  color: #b91c1c;
}

/* Key Changes List - Severity Colors */
.info-block.severity-mild #keyChangesList li {
  background: linear-gradient(135deg, 
    rgba(251, 191, 36, 0.1) 0%, 
    rgba(245, 158, 11, 0.1) 100%
  );
  color: #b45309;
  border-left-color: #f59e0b;
}

.info-block.severity-moderate #keyChangesList li {
  background: linear-gradient(135deg, 
    rgba(249, 115, 22, 0.1) 0%, 
    rgba(234, 88, 12, 0.1) 100%
  );
  color: #c2410c;
  border-left-color: #f97316;
}

.info-block.severity-severe #keyChangesList li {
  background: linear-gradient(135deg, 
    rgba(239, 68, 68, 0.12) 0%, 
    rgba(220, 38, 38, 0.12) 100%
  );
  color: #b91c1c;
  border-left-color: #ef4444;
}

/* Action Recommendation - Severity Colors */
.info-block.severity-mild .action-recommendation {
  background: linear-gradient(135deg, 
    rgba(251, 191, 36, 0.12) 0%, 
    rgba(245, 158, 11, 0.12) 100%
  );
  border-color: rgba(245, 158, 11, 0.3);
  border-left-color: #f59e0b;
}

.info-block.severity-mild .action-recommendation p {
  color: #b45309;
}

.info-block.severity-moderate .action-recommendation {
  background: linear-gradient(135deg, 
    rgba(249, 115, 22, 0.12) 0%, 
    rgba(234, 88, 12, 0.12) 100%
  );
  border-color: rgba(249, 115, 22, 0.3);
  border-left-color: #f97316;
}

.info-block.severity-moderate .action-recommendation p {
  color: #c2410c;
}

.info-block.severity-severe .action-recommendation {
  background: linear-gradient(135deg, 
    rgba(239, 68, 68, 0.15) 0%, 
    rgba(220, 38, 38, 0.15) 100%
  );
  border-color: rgba(239, 68, 68, 0.4);
  border-left-color: #ef4444;
}

.info-block.severity-severe .action-recommendation p {
  color: #b91c1c;
  font-weight: 700;
}

/* Blood Pressure Tracker Button */
.tracker-cta-row {
  display: flex;
  justify-content: center;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.btn-bp-tracker {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.2rem 2.5rem;
  background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
  border: none;
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 8px 24px rgba(236, 72, 153, 0.4),
              0 4px 12px rgba(139, 92, 246, 0.3);
  position: relative;
  overflow: hidden;
}

.btn-bp-tracker::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left 0.6s ease;
}

.btn-bp-tracker:hover::before {
  left: 100%;
}

.btn-bp-tracker:hover {
  transform: translateY(-4px) scale(1.05);
  box-shadow: 0 12px 32px rgba(236, 72, 153, 0.5),
              0 6px 16px rgba(139, 92, 246, 0.4);
}

.btn-bp-tracker .btn-icon {
  font-size: 1.8rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.btn-bp-tracker .btn-text {
  font-size: 1.1rem;
  font-weight: 700;
  color: white;
  letter-spacing: 0.3px;
}

.btn-bp-tracker .btn-badge {
  padding: 0.4rem 1rem;
  background: rgba(255, 255, 255, 0.25);
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
  color: white;
  backdrop-filter: blur(10px);
}


/* Comparison Split View */
.comparison-split-view {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 2rem;
  height: 100%;
  padding: 2rem;
}

.comparison-panel {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
  border-radius: 20px;
  padding: 2rem;
  display: flex;
  flex-direction: column;
  border: 2px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
}

.comparison-panel.normal-panel {
  border-color: rgba(102, 187, 106, 0.4);
}

.comparison-panel.pe-panel {
  border-color: rgba(239, 83, 80, 0.4);
}

.panel-header {
  text-align: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid rgba(255, 255, 255, 0.1);
}

.panel-header h3 {
  font-size: 1.5rem;
  color: white;
  margin-bottom: 0.5rem;
  font-weight: 700;
}

.panel-header p {
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.9rem;
}

.female-3d-model {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.female-3d-model svg {
  max-width: 100%;
  height: auto;
  filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3));
}

.female-3d-model.affected svg .affected-organ {
  animation: pulseGlow 2s ease-in-out infinite;
}

@keyframes pulseGlow {
  0%, 100% {
    filter: drop-shadow(0 0 8px rgba(239, 83, 80, 0.6));
  }
  50% {
    filter: drop-shadow(0 0 20px rgba(239, 83, 80, 1));
  }
}

.comparison-divider {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.divider-line {
  width: 2px;
  height: 100%;
  background: linear-gradient(to bottom, 
    transparent, 
    rgba(255, 255, 255, 0.3) 20%, 
    rgba(255, 255, 255, 0.3) 80%, 
    transparent
  );
}

.vs-badge {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  font-size: 1.2rem;
  color: white;
  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.5);
  border: 3px solid rgba(255, 255, 255, 0.3);
}

.panel-stats {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 2px solid rgba(255, 255, 255, 0.1);
}

.stat-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.8rem 1rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}


.stat-value {
  font-weight: 700;
  font-size: 1rem;
  padding: 0.3rem 0.8rem;
  border-radius: 8px;
}

.stat-value.normal {
  color: #66bb6a;
  background: rgba(102, 187, 106, 0.15);
}

.stat-value.warning {
  color: #ffa726;
  background: rgba(255, 167, 38, 0.15);
}

.stat-value.danger {
  color: #ef5350;
  background: rgba(239, 83, 80, 0.15);
}


/* Body Part Detail Modal */
.body-part-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  opacity: 0;
  transition: opacity 0.3s ease;
  backdrop-filter: blur(10px);
}

.body-part-modal.active {
  opacity: 1;
}

.modal-content-bodypart {
  background: linear-gradient(135deg, #1e293b, #0f172a);
  border-radius: 24px;
  padding: 2.5rem;
  max-width: 600px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  border: 2px solid rgba(139, 92, 246, 0.5);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  position: relative;
  transform: scale(0.9);
  transition: transform 0.3s ease;
}

.body-part-modal.active .modal-content-bodypart {
  transform: scale(1);
}

.modal-close {
  position: absolute;
  top: 1rem;
  right: 1rem;
  width: 40px;
  height: 40px;
  background: rgba(239, 68, 68, 0.2);
  border: 2px solid #ef4444;
  border-radius: 50%;
  color: white;
  font-size: 1.5rem;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-close:hover {
  background: #ef4444;
  transform: rotate(90deg);
}

.modal-content-bodypart h2 {
  color: white;
  font-size: 1.8rem;
  margin-bottom: 1rem;
}

.modal-description {
  color: rgba(255, 255, 255, 0.9);
  font-size: 1.05rem;
  line-height: 1.6;
  margin-bottom: 1.5rem;
}

.details-section {
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.details-section h3 {
  color: #a855f7;
  font-size: 1.1rem;
  margin-bottom: 1rem;
}

.details-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.details-list li {
  color: rgba(255, 255, 255, 0.9);
  padding: 0.5rem 0;
  padding-left: 1.5rem;
  position: relative;
  font-size: 0.95rem;
}

.details-list li::before {
  content: '•';
  position: absolute;
  left: 0;
  color: #a855f7;
  font-size: 1.5rem;
  line-height: 1;
}

.warning-box {
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.2));
  border: 2px solid #ef4444;
  border-radius: 16px;
  padding: 1.5rem;
  display: flex;
  gap: 1rem;
  align-items: flex-start;
  margin-bottom: 1.5rem;
}

.warning-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.warning-text {
  color: white;
  flex: 1;
}

.warning-text strong {
  color: #fbbf24;
  display: block;
  margin-bottom: 0.5rem;
}

.modal-footer {
  display: flex;
  justify-content: center;
}

.btn-modal-action {
  padding: 0.8rem 2rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  border-radius: 12px;
  font-weight: 700;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-modal-action:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(102, 126, 234, 0.4);
}

</style>
<body>
  <!-- ===== HEADER ===== -->
  <header class="site-header">
    <div class="nav-container">
      <div class="logo">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="white">
            <circle cx="12" cy="5.5" r="2.8"/>
            <path d="M9.3 4.8 Q9.1 2.5 12 2.2 Q14.9 2.5 14.7 4.8" opacity="0.7"/>
            <path d="M9.5 13.2 Q9 10.5 10 9.3 Q11 8.6 12 8.6 Q13 8.6 14 9.3 Q15 10.5 14.5 13.2Z"/>
            <path d="M9.5 13.2 Q7.2 13.8 6.8 16.2 Q7.8 16.4 8.8 15Z" opacity="0.85"/>
            <path d="M14.5 13.2 Q16.8 13.8 17.2 16.2 Q16.2 16.4 15.2 15Z" opacity="0.85"/>
            <path d="M8.2 22 Q7.6 17.2 8.8 15 Q10.2 13 12 13 Q13.8 13 15.2 15 Q16.4 17.2 15.8 22Z"/>
          </svg>
        </div>
        <div class="logo-text">
          <a href="index.html">Nari Swasthya</a>
          <span>Women's Complete Health</span>
        </div>
      </div>

          <nav class="main-nav" aria-label="Main navigation">
        <div class="nav-item"><a href="index.html" class="nav-link">Home</a></div>

        <!-- Journeys dropdown -->
        <div class="nav-item">
          <button class="nav-link" aria-haspopup="true">Journeys <i class="fa-solid fa-chevron-down chevron"></i></button>
          <div class="nav-dropdown">
            <a href="journeys.html" class="dd-item" style="background:linear-gradient(135deg,rgba(236,64,122,0.08),rgba(173,20,87,0.04));border-radius:10px;margin-bottom:.3rem;">
              <div class="dd-icon" style="background:linear-gradient(135deg,#ec407a,#ad1457);color:white;"><i class="fa-solid fa-map"></i></div>
              <div><strong style="display:block;font-size:.82rem;color:#d81b60;">View Full Journeys</strong><span style="font-size:.73rem;color:#555;">Browse all her journeys</span></div>
            </a>
            <div class="dd-sep"></div>
            <a href="conceiving.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-seedling"></i></div><div><strong style="display:block;font-size:.82rem;">Conceiving</strong><span style="font-size:.73rem;color:#555;">Preparation &amp; planning</span></div></a>
            <a href="fertility.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-dna"></i></div><div><strong style="display:block;font-size:.82rem;">Fertility</strong><span style="font-size:.73rem;color:#555;">Cycle &amp; ovulation</span></div></a>
            <div class="dd-item dd-has-flyout">
              <div class="dd-icon" style="background:#fce4ec;color:#ec407a;"><i class="fa-solid fa-baby-carriage"></i></div>
              <a href="pregnancy_journey.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Pregnancy Journey</strong><span style="font-size:.73rem;color:#555;">Week by week guide</span></a>
              <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
              <div class="dd-flyout">
                <a href="normal_delivery.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-circle-check"></i></div><div><strong style="display:block;font-size:.82rem;">Normal Delivery</strong><span style="font-size:.73rem;color:#555;">Vaginal birth guide</span></div></a>
                <a href="csection.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-hospital"></i></div><div><strong style="display:block;font-size:.82rem;">C-Section</strong><span style="font-size:.73rem;color:#555;">Surgical birth info</span></div></a>
                <a href="pregnancy_loss.html" class="dd-item"><div class="dd-icon" style="background:#fafafa;color:#9e9e9e;"><i class="fa-solid fa-hands-holding-heart"></i></div><div><strong style="display:block;font-size:.82rem;">Pregnancy Loss</strong><span style="font-size:.73rem;color:#555;">Support &amp; care</span></div></a>
              </div>
            </div>
            <a href="antenatal_care.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-clipboard-list"></i></div><div><strong style="display:block;font-size:.82rem;">Antenatal Care</strong><span style="font-size:.73rem;color:#555;">ANC visits &amp; checklist</span></div></a>
            <div class="dd-item dd-has-flyout">
              <div class="dd-icon" style="background:#e8eaf6;color:#283593;"><i class="fa-solid fa-heart-pulse"></i></div>
              <a href="ncd_pregnancy.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Non Communicable Diseases</strong><span style="font-size:.73rem;color:#555;">Diabetes, hypertension &amp; more</span></a>
              <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
              <div class="dd-flyout">
                <a href="gestational_diabetes.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-droplet"></i></div><div><strong style="display:block;font-size:.82rem;">Gestational Diabetes</strong><span style="font-size:.73rem;color:#555;">Manage blood sugar</span></div></a>
                <a href="preeclampsia_education.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-heart-circle-exclamation"></i></div><div><strong style="display:block;font-size:.82rem;">Preeclampsia</strong><span style="font-size:.73rem;color:#555;">Blood pressure care</span></div></a>
                <a href="cancer_simulation_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#6a1b9a;"><i class="fa-solid fa-ribbon"></i></div><div><strong style="display:block;font-size:.82rem;">Cancer</strong><span style="font-size:.73rem;color:#555;">Simulation journey</span></div></a>
              </div>
            </div>
            <a href="newborn_postpartum_care.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-baby"></i></div><div><strong style="display:block;font-size:.82rem;">Newborn &amp; Postpartum</strong><span style="font-size:.73rem;color:#555;">4th trimester care</span></div></a>
            <a href="breastfeeding_journey.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57c00;"><i class="fa-solid fa-heart"></i></div><div><strong style="display:block;font-size:.82rem;">Breastfeeding</strong><span style="font-size:.73rem;color:#555;">Latch, supply, nutrition</span></div></a>
            <a href="menopause.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#ad1457;"><i class="fa-solid fa-fire-flame-curved"></i></div><div><strong style="display:block;font-size:.82rem;">Menopause</strong><span style="font-size:.73rem;color:#555;">Perimenopause &amp; beyond</span></div></a>
          </div>
        </div>

        <!-- Services dropdown -->
        <div class="nav-item">
          <button class="nav-link" aria-haspopup="true">Services <i class="fa-solid fa-chevron-down chevron"></i></button>
          <div class="nav-dropdown">
            <a href="services.html" class="dd-item" style="background:linear-gradient(135deg,rgba(236,64,122,0.08),rgba(173,20,87,0.04));border-radius:10px;margin-bottom:.3rem;">
              <div class="dd-icon" style="background:linear-gradient(135deg,#ec407a,#ad1457);color:white;"><i class="fa-solid fa-grid-2"></i></div>
              <div><strong style="display:block;font-size:.82rem;color:#d81b60;">Services Available</strong><span style="font-size:.73rem;color:#555;">Browse all our services</span></div>
            </a>
            <div class="dd-sep"></div>
            <a href="symptom_checker.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-stethoscope"></i></div><div><strong style="display:block;font-size:.82rem;">Symptom Checker</strong><span style="font-size:.73rem;color:#555;">AI-powered diagnosis</span></div></a>
            <a href="dashboard.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-gauge-high"></i></div><div><strong style="display:block;font-size:.82rem;">My Dashboard</strong><span style="font-size:.73rem;color:#555;">Track your health</span></div></a>
            <a href="screening.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-magnifying-glass-plus"></i></div><div><strong style="display:block;font-size:.82rem;">Health Screening</strong><span style="font-size:.73rem;color:#555;">Cancer &amp; preventive</span></div></a>
            <a href="vaccination.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-syringe"></i></div><div><strong style="display:block;font-size:.82rem;">Vaccination</strong><span style="font-size:.73rem;color:#555;">Immunization schedule</span></div></a>
            <a href="otc.html" class="dd-item"><div class="dd-icon" style="background:#e0f7fa;color:#006064;"><i class="fa-solid fa-pills"></i></div><div><strong style="display:block;font-size:.82rem;">OTC Medicine Guide</strong><span style="font-size:.73rem;color:#555;">Safe self-care options</span></div></a>
            <a href="government_schemes.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#e65100;"><i class="fa-solid fa-landmark"></i></div><div><strong style="display:block;font-size:.82rem;">Govt Schemes</strong><span style="font-size:.73rem;color:#555;">Benefits you deserve</span></div></a>
            <a href="insurance.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#1b5e20;"><i class="fa-solid fa-shield-halved"></i></div><div><strong style="display:block;font-size:.82rem;">Insurance</strong><span style="font-size:.73rem;color:#555;">Coverage &amp; claims guide</span></div></a>
          </div>
        </div>

        <div class="nav-item"><a href="stories.html" class="nav-link">Stories</a></div>
        <div class="nav-item"><a href="about.html" class="nav-link">About Us</a></div>

        <!-- Additional Info dropdown -->
        <div class="nav-item">
          <button class="nav-link" aria-haspopup="true">Additional Info <i class="fa-solid fa-chevron-down chevron"></i></button>
          <div class="nav-dropdown" style="min-width:240px;">
            <div style="padding:.4rem .9rem .2rem;font-size:.7rem;font-weight:700;color:#555;text-transform:uppercase;letter-spacing:.08em;">Health Topics</div>
            <a href="fertility.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#ec407a;"><i class="fa-solid fa-seedling"></i></div><div><strong style="display:block;font-size:.82rem;">Fertility</strong><span style="font-size:.73rem;color:#555;">Cycle, conceiving &amp; IVF</span></div></a>
            <a href="pregnancy_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#7b1fa2;"><i class="fa-solid fa-baby-carriage"></i></div><div><strong style="display:block;font-size:.82rem;">Pregnancy</strong><span style="font-size:.73rem;color:#555;">All trimesters covered</span></div></a>
            <a href="newborn_postpartum_care.html" class="dd-item"><div class="dd-icon" style="background:#e3f2fd;color:#1565c0;"><i class="fa-solid fa-baby"></i></div><div><strong style="display:block;font-size:.82rem;">Motherhood</strong><span style="font-size:.73rem;color:#555;">Newborn &amp; postpartum</span></div></a>
            <a href="menopause.html" class="dd-item"><div class="dd-icon" style="background:#e8f5e9;color:#2e7d32;"><i class="fa-solid fa-spa"></i></div><div><strong style="display:block;font-size:.82rem;">Wellness</strong><span style="font-size:.73rem;color:#555;">Menopause, bone, mental</span></div></a>
            <div class="dd-sep"></div>
            <a href="community.html" class="dd-item"><div class="dd-icon" style="background:#ede7f6;color:#4527a0;"><i class="fa-solid fa-users"></i></div><div><strong style="display:block;font-size:.82rem;">Community</strong><span style="font-size:.73rem;color:#555;">Share &amp; connect</span></div></a>
            <div class="dd-sep"></div>
            <div style="padding:.4rem .9rem .2rem;font-size:.7rem;font-weight:700;color:#555;text-transform:uppercase;letter-spacing:.08em;">Specialised Care</div>
            <div class="dd-item dd-has-flyout">
              <div class="dd-icon" style="background:#e8eaf6;color:#283593;"><i class="fa-solid fa-heart-pulse"></i></div>
              <a href="ncd_pregnancy.html" style="text-decoration:none;color:inherit;flex:1;"><strong style="display:block;font-size:.82rem;">Non Communicable Diseases</strong><span style="font-size:.73rem;color:#555;">Diabetes, hypertension &amp; more</span></a>
              <i class="fa-solid fa-chevron-right dd-flyout-arrow"></i>
              <div class="dd-flyout">
                <a href="gestational_diabetes.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-droplet"></i></div><div><strong style="display:block;font-size:.82rem;">Gestational Diabetes</strong><span style="font-size:.73rem;color:#555;">Manage blood sugar</span></div></a>
                <a href="preeclampsia_education.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#c2185b;"><i class="fa-solid fa-heart-circle-exclamation"></i></div><div><strong style="display:block;font-size:.82rem;">Preeclampsia</strong><span style="font-size:.73rem;color:#555;">Blood pressure care</span></div></a>
                <a href="cancer_simulation_journey.html" class="dd-item"><div class="dd-icon" style="background:#f3e5f5;color:#6a1b9a;"><i class="fa-solid fa-ribbon"></i></div><div><strong style="display:block;font-size:.82rem;">Cancer</strong><span style="font-size:.73rem;color:#555;">Simulation journey</span></div></a>
              </div>
            </div>
            <a href="bone_health.html" class="dd-item"><div class="dd-icon" style="background:#fce4ec;color:#ad1457;"><i class="fa-solid fa-bone"></i></div><div><strong style="display:block;font-size:.82rem;">Bone Health</strong><span style="font-size:.73rem;color:#555;">Osteoporosis prevention</span></div></a>
            <a href="depression.html" class="dd-item"><div class="dd-icon" style="background:#fff8e1;color:#f57f17;"><i class="fa-solid fa-brain"></i></div><div><strong style="display:block;font-size:.82rem;">Mental Health</strong><span style="font-size:.73rem;color:#555;">Anxiety, depression, support</span></div></a>
            <a href="loss_support.html" class="dd-item"><div class="dd-icon" style="background:#fafafa;color:#9e9e9e;"><i class="fa-solid fa-hands-holding-heart"></i></div><div><strong style="display:block;font-size:.82rem;">Loss Support</strong><span style="font-size:.73rem;color:#555;">You are never alone</span></div></a>
          </div>
        </div>
      </nav>

      <div class="nav-actions">
        <a class="btn-nav outline" href="signin.html">
          <i class="fa-regular fa-user"></i> Sign In
        </a>
        <a class="btn-nav primary" href="contact.html">
          <i class="fa-solid fa-envelope"></i> Contact Us
        </a>
        <button class="hamburger" id="hamburgerBtn" aria-label="Menu" onclick="toggleMobile()">
          <span id="hb1"></span><span id="hb2"></span><span id="hb3"></span>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="mm-section">Navigation</div>
    <a href="index.html" class="mm-link"><i class="fa-solid fa-house" style="color:#d81b60;width:20px;"></i> Home</a>
    <div class="mm-section">Journeys</div>
    <a href="conceiving.html" class="mm-link"><i class="fa-solid fa-seedling" style="color:#d81b60;width:20px;"></i> Conceiving</a>
    <a href="fertility.html" class="mm-link"><i class="fa-solid fa-dna" style="color:#d81b60;width:20px;"></i> Fertility</a>
    <a href="pregnancy_journey.html" class="mm-link"><i class="fa-solid fa-baby-carriage" style="color:#d81b60;width:20px;"></i> Pregnancy Journey</a>
    <a href="normal_delivery.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#ec407a;width:20px;"></i> Normal Delivery</a>
    <a href="csection.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#ec407a;width:20px;"></i> C-Section</a>
    <a href="pregnancy_loss.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#9e9e9e;width:20px;"></i> Pregnancy Loss</a>
    <a href="antenatal_care.html" class="mm-link"><i class="fa-solid fa-clipboard-list" style="color:#d81b60;width:20px;"></i> Antenatal Care</a>
    <a href="newborn_postpartum_care.html" class="mm-link"><i class="fa-solid fa-baby" style="color:#d81b60;width:20px;"></i> Newborn &amp; Postpartum</a>
    <a href="breastfeeding_journey.html" class="mm-link"><i class="fa-solid fa-heart" style="color:#d81b60;width:20px;"></i> Breastfeeding</a>
    <a href="menopause.html" class="mm-link"><i class="fa-solid fa-fire-flame-curved" style="color:#d81b60;width:20px;"></i> Menopause</a>
    <div class="mm-section">Services</div>
    <a href="symptom_checker.html" class="mm-link"><i class="fa-solid fa-stethoscope" style="color:#d81b60;width:20px;"></i> Symptom Checker</a>
    <a href="dashboard.html" class="mm-link"><i class="fa-solid fa-gauge-high" style="color:#d81b60;width:20px;"></i> My Dashboard</a>
    <a href="screening.html" class="mm-link"><i class="fa-solid fa-magnifying-glass-plus" style="color:#d81b60;width:20px;"></i> Health Screening</a>
    <a href="government_schemes.html" class="mm-link"><i class="fa-solid fa-landmark" style="color:#d81b60;width:20px;"></i> Govt Schemes</a>
    <a href="insurance.html" class="mm-link"><i class="fa-solid fa-shield-halved" style="color:#1b5e20;width:20px;"></i> Insurance</a>
    <div class="mm-section">Specialised Care</div>
    <a href="bone_health.html" class="mm-link"><i class="fa-solid fa-bone" style="color:#ad1457;width:20px;"></i> Bone Health</a>
    <a href="depression.html" class="mm-link"><i class="fa-solid fa-brain" style="color:#f57f17;width:20px;"></i> Mental Health</a>
    <a href="loss_support.html" class="mm-link"><i class="fa-solid fa-hands-holding-heart" style="color:#9e9e9e;width:20px;"></i> Loss Support</a>
    <a href="ncd_pregnancy.html" class="mm-link"><i class="fa-solid fa-heart-pulse" style="color:#283593;width:20px;"></i> Non Communicable Diseases</a>
    <a href="gestational_diabetes.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#283593;width:20px;"></i> Gestational Diabetes</a>
    <a href="preeclampsia_education.html" class="mm-link" style="padding-left:2.5rem;font-size:.88rem;"><i class="fa-solid fa-circle-check" style="color:#283593;width:20px;"></i> Preeclampsia</a>
    <div class="mm-section">More</div>
    <a href="stories.html" class="mm-link"><i class="fa-solid fa-book-open" style="color:#d81b60;width:20px;"></i> Stories</a>
    <a href="community.html" class="mm-link"><i class="fa-solid fa-users" style="color:#d81b60;width:20px;"></i> Community</a>
    <a href="about.html" class="mm-link"><i class="fa-solid fa-circle-info" style="color:#d81b60;width:20px;"></i> About Us</a>
    <div style="display:flex;gap:.75rem;margin-top:1rem;padding:.5rem;">
      <a href="signin.html" class="btn-nav outline" style="flex:1;justify-content:center;"><i class="fa-regular fa-user"></i> Sign In</a>
      <a href="contact.html" class="btn-nav primary" style="flex:1;justify-content:center;"><i class="fa-solid fa-envelope"></i> Contact Us</a>
    </div>
  </div>

  <!-- Main Page Container -->
  <div class="page-shell">
    <!-- REVOLUTIONARY HERO SECTION -->
    <section class="hero">
      <!-- Particle Canvas Background (journeys.html style) -->
      <canvas id="peParticleCanvas" style="position:absolute;inset:0;width:100%;height:100%;pointer-events:none;z-index:0;opacity:0.75;"></canvas>
      <!-- Petal Layer -->
      <div id="pePetalLayer" style="position:absolute;inset:0;pointer-events:none;z-index:0;overflow:hidden;"></div>
      <div class="hero-content">
        <div class="emergency-badge">
          <span class="pulse-dot"></span>
          <span>Critical Pregnancy Condition</span>
        </div>
        <h1>Understanding <span style="background:linear-gradient(135deg,#ec407a 0%,#d81b60 50%,#ad1457 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;filter:drop-shadow(0 2px 10px rgba(236,64,122,.35));animation:title-shimmer 3s ease-in-out infinite;">Preeclampsia</span></h1>
        <p class="hero-subtitle">
          A life-threatening pregnancy complication affecting Indian women. 
          <strong>Early detection saves lives.</strong> Learn the warning signs, 
          understand the risks, and protect yourself and your baby.
        </p>
        
        <div class="hero-stats">
          <div class="stat-item">
            <span class="stat-number">5-8%</span>
            <span class="stat-label">of pregnancies affected</span>
          </div>
          <div class="stat-item critical">
            <span class="stat-number">140/90</span>
            <span class="stat-label">mmHg alert threshold</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">25</span>
            <span class="stat-label">essential themes</span>
          </div>
        </div>

        <div class="hero-cta-row">
          <button class="btn-primary" onclick="scrollToThemes()">Start Learning Now</button>
          <button class="btn-secondary" onclick="openQuickCheck()">Quick Symptom Check</button>
        </div>

        <!-- Blood Pressure Monitor Animation -->
        <div class="bp-monitor-widget">
          <div class="monitor-display">
            <div class="bp-reading">
              <span class="systolic" id="bpSystolic">120</span>
              <span class="separator">/</span>
              <span class="diastolic" id="bpDiastolic">80</span>
            </div>
            <div class="bp-label">mmHg</div>
            <div class="bp-status" id="bpStatus">NORMAL</div>
          </div>
          <div class="monitor-info">
            <p>Interactive BP Monitor</p>
            <p class="small">Watch how BP changes with preeclampsia</p>
          </div>
        </div>
      </div>

      <!-- STUNNING 3D PREGNANCY VISUALIZATION -->
      <div class="hero-visual-3d">
        <div class="pregnancy-3d-container">
          <!-- Animated Uterus with Baby -->
          <div class="uterus-core">
            <div class="uterus-wall">
              <div class="placenta">
                <div class="placenta-vessel vessel-1"></div>
                <div class="placenta-vessel vessel-2"></div>
                <div class="placenta-vessel vessel-3"></div>
                <div class="placenta-vessel vessel-4"></div>
              </div>
              <div class="baby-silhouette">
                <div class="baby-head"></div>
                <div class="baby-body"></div>
              </div>
            </div>
            
            <!-- Warning Indicators -->
            <div class="warning-indicator warn-1">
              <span class="warn-icon">⚠️</span>
              <span class="warn-text">High BP</span>
            </div>
            <div class="warning-indicator warn-2">
              <span class="warn-icon">🧪</span>
              <span class="warn-text">Protein</span>
            </div>
            <div class="warning-indicator warn-3">
              <span class="warn-icon">💔</span>
              <span class="warn-text">Poor Flow</span>
            </div>
          </div>

          <!-- Floating Health Particles -->
          <div class="health-particle particle-1"></div>
          <div class="health-particle particle-2"></div>
          <div class="health-particle particle-3"></div>
          <div class="health-particle particle-4"></div>
          <div class="health-particle particle-5"></div>
        </div>

        <!-- Animation Description -->
        <div class="animation-description">
          <div class="desc-badge">
            <span class="badge-icon">🤰</span>
            <span class="badge-text">Live Pregnancy Monitor</span>
          </div>
          <h3 class="desc-title">Watch Preeclampsia Impact</h3>
          <p class="desc-text">
            See how preeclampsia affects blood flow to the placenta. The pulsating vessels 
            represent blood supply. Warning indicators show the three key signs: high blood 
            pressure, protein in urine, and reduced placental flow.
          </p>
        </div>
      </div>
    </section>

    <!-- QUICK SYMPTOM CHECKER MODAL -->
    <div class="symptom-checker-modal" id="symptomChecker">
      <div class="modal-content">
        <button class="close-modal" onclick="closeQuickCheck()">✕</button>
        <h2>⚡ Quick Symptom Checker</h2>
        <p class="modal-subtitle">Check any symptoms you're experiencing</p>
        
        <div class="symptom-checklist">
          <label class="symptom-item">
            <input type="checkbox" data-severity="severe">
            <span class="symptom-text">Severe headache that won't go away</span>
            <span class="severity-badge severe">SEVERE</span>
          </label>
          <label class="symptom-item">
            <input type="checkbox" data-severity="severe">
            <span class="symptom-text">Vision problems (blurred, spots, flashing lights)</span>
            <span class="severity-badge severe">SEVERE</span>
          </label>
          <label class="symptom-item">
            <input type="checkbox" data-severity="severe">
            <span class="symptom-text">Severe upper stomach pain</span>
            <span class="severity-badge severe">SEVERE</span>
          </label>
          <label class="symptom-item">
            <input type="checkbox" data-severity="severe">
            <span class="symptom-text">Difficulty breathing</span>
            <span class="severity-badge severe">SEVERE</span>
          </label>
          <label class="symptom-item">
            <input type="checkbox" data-severity="moderate">
            <span class="symptom-text">Sudden swelling of face, hands, feet</span>
            <span class="severity-badge moderate">MODERATE</span>
          </label>
          <label class="symptom-item">
            <input type="checkbox" data-severity="moderate">
            <span class="symptom-text">Blood pressure ≥ 140/90</span>
            <span class="severity-badge moderate">MODERATE</span>
          </label>
          <label class="symptom-item">
            <input type="checkbox" data-severity="mild">
            <span class="symptom-text">Mild persistent headaches</span>
            <span class="severity-badge mild">MILD</span>
          </label>
          <label class="symptom-item">
            <input type="checkbox" data-severity="mild">
            <span class="symptom-text">Mild swelling (ankles, fingers)</span>
            <span class="severity-badge mild">MILD</span>
          </label>
        </div>

        <div class="symptom-result" id="symptomResult"></div>
        <button class="btn-primary full-width" onclick="analyzeSymptoms()">Analyze My Symptoms</button>
      </div>
    </div>

    <!-- INTERACTIVE THEME EXPLORER -->
    <section id="themesSection" class="themes-section fade-in">
      <div class="section-header-enhanced">
        <div class="header-content">
          <div class="header-badge">
            <span class="badge-pulse"></span>
            <span class="badge-text">25 Essential Themes</span>
          </div>
                <h2 class="new-mom-section-title">Your Complete  <span class="em">Preeclampsia Guide</span></h2>
               <p class="section-subtitle">
              Explore a revolutionary 3D medical simulator. <strong>Rotate, zoom, click organs,</strong> 
              and watch disease progression in real-time across different severity levels and pregnancy weeks.
            </p>
            
            <!-- ADD THIS BUTTON -->
            <div class="tracker-cta-row">
              <button class="btn-bp-tracker" onclick="openBPTracker()">
                <span class="btn-icon">📊</span>
                <span class="btn-text">Track Blood Pressure</span>
                <span class="btn-badge">Throughout Pregnancy</span>
              </button>
            </div>
          </div>
        </div>
        
        <!-- Visual Progress Tracker -->
        <div class="progress-tracker">
          <div class="tracker-visual">
            <svg width="140" height="140" class="progress-circle-svg">
              <circle cx="70" cy="70" r="60" class="progress-bg-circle"/>
              <circle cx="70" cy="70" r="60" class="progress-fill-circle" id="progressCircle"/>
            </svg>
            <div class="progress-center">
              <div class="progress-number" id="progressPercent">0%</div>
              <div class="progress-label">Learned</div>
            </div>
          </div>
          <div class="tracker-text">
            <div class="tracker-count" id="exploredCount">0 of 25 themes explored</div>
            <div class="tracker-encourage">Knowledge saves lives!</div>
          </div>
        </div>
      </div>

      <!-- INNOVATIVE THEME GRID --><div class="theme-grid-enhanced">
        <!-- Theme 1: Understanding Preeclampsia -->
        <div class="theme-card-3d" data-theme="1">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #e91e63, #c2185b);">
            <div class="icon-circle">🔬</div>
            <h3>Understanding Preeclampsia</h3>
            <p class="card-subtitle">Definition & Overview</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">📊</span>
                <span class="stat-text">5-8% prevalence</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">⚠️</span>
                <span class="stat-text">After 20 weeks</span>
              </div>
            </div>
            <p class="card-description">Learn what preeclampsia is, how it develops, and why early detection is critical for maternal and fetal health.</p>
            <button class="learn-more-btn" onclick="openTheme(1)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 2: Root Causes -->
        <div class="theme-card-3d" data-theme="2">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #ff6b9d, #c2185b);">
            <div class="icon-circle">🧬</div>
            <h3>Root Causes & Pathophysiology</h3>
            <p class="card-subtitle">Why It Happens</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">🔍</span>
                <span class="stat-text">Placental issues</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">💉</span>
                <span class="stat-text">Blood vessels</span>
              </div>
            </div>
            <p class="card-description">Understand the biological mechanisms behind preeclampsia, from placental development to vascular dysfunction.</p>
            <button class="learn-more-btn" onclick="openTheme(2)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 3: High-Risk Groups -->
        <div class="theme-card-3d" data-theme="3">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #f06292, #e91e63);">
            <div class="icon-circle">👥</div>
            <h3>High-Risk Population Groups</h3>
            <p class="card-subtitle">Who Is Most Vulnerable</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">👶</span>
                <span class="stat-text">First pregnancy</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🎂</span>
                <span class="stat-text">Age 35+</span>
              </div>
            </div>
            <p class="card-description">Identify risk factors including age, medical history, family genetics, and lifestyle that increase preeclampsia likelihood.</p>
            <button class="learn-more-btn" onclick="openTheme(3)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 4: Mild Symptoms -->
        <div class="theme-card-3d" data-theme="4">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #66bb6a, #43a047);">
            <div class="icon-circle">🟢</div>
            <h3>Mild Preeclampsia Symptoms</h3>
            <p class="card-subtitle">Early Warning Signs</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">📈</span>
                <span class="stat-text">BP 140-159/90-109</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🔬</span>
                <span class="stat-text">Mild proteinuria</span>
              </div>
            </div>
            <p class="card-description">Recognize early symptoms like mild blood pressure elevation, slight swelling, and subtle changes requiring monitoring.</p>
            <button class="learn-more-btn" onclick="openTheme(4)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 5: Moderate Indicators -->
        <div class="theme-card-3d" data-theme="5">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #ffa726, #fb8c00);">
            <div class="icon-circle">🟡</div>
            <h3>Moderate Preeclampsia Indicators</h3>
            <p class="card-subtitle">Progressive Warnings</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">⬆️</span>
                <span class="stat-text">BP 150-160/100-110</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🤕</span>
                <span class="stat-text">Persistent headaches</span>
              </div>
            </div>
            <p class="card-description">Identify worsening symptoms including increased blood pressure, persistent headaches, and early organ involvement.</p>
            <button class="learn-more-btn" onclick="openTheme(5)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 6: Severe Manifestations -->
        <div class="theme-card-3d" data-theme="6">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #ef5350, #d32f2f);">
            <div class="icon-circle">🔴</div>
            <h3>Severe Preeclampsia Manifestations</h3>
            <p class="card-subtitle">Critical Features</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">🚨</span>
                <span class="stat-text">BP ≥160/110</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">👁️</span>
                <span class="stat-text">Vision changes</span>
              </div>
            </div>
            <p class="card-description">Recognize emergency symptoms requiring immediate medical attention to prevent life-threatening complications.</p>
            <button class="learn-more-btn" onclick="openTheme(6)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 7: Eclampsia -->
        <div class="theme-card-3d" data-theme="7">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #7b1fa2, #4a148c);">
            <div class="icon-circle">⚡</div>
            <h3>Eclampsia: Critical Stage</h3>
            <p class="card-subtitle">Life-Threatening Emergency</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">💥</span>
                <span class="stat-text">Seizures</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🏥</span>
                <span class="stat-text">Immediate care</span>
              </div>
            </div>
            <p class="card-description">Understand eclampsia—when preeclampsia progresses to seizures—a medical emergency requiring urgent intervention.</p>
            <button class="learn-more-btn" onclick="openTheme(7)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 8: HELLP Syndrome -->
        <div class="theme-card-3d" data-theme="8">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #8e24aa, #6a1b9a);">
            <div class="icon-circle">🩸</div>
            <h3>HELLP Syndrome Complications</h3>
            <p class="card-subtitle">Severe Variant</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">🔬</span>
                <span class="stat-text">Blood disorder</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🧪</span>
                <span class="stat-text">Liver damage</span>
              </div>
            </div>
            <p class="card-description">Learn about HELLP syndrome: Hemolysis, Elevated Liver enzymes, Low Platelets—a dangerous preeclampsia complication.</p>
            <button class="learn-more-btn" onclick="openTheme(8)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 9: Emergency Consultation -->
        <div class="theme-card-3d" data-theme="9">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #d32f2f, #b71c1c);">
            <div class="icon-circle">🚑</div>
            <h3>When to See Doctor Immediately</h3>
            <p class="card-subtitle">Emergency Triggers</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">⏰</span>
                <span class="stat-text">Time critical</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">📞</span>
                <span class="stat-text">Call 108/102</span>
              </div>
            </div>
            <p class="card-description">Know the exact symptoms that require emergency medical care—delays can be fatal for mother and baby.</p>
            <button class="learn-more-btn" onclick="openTheme(9)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 10: Monitoring Schedule -->
        <div class="theme-card-3d" data-theme="10">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #42a5f5, #1976d2);">
            <div class="icon-circle">📅</div>
            <h3>Regular Monitoring Schedule</h3>
            <p class="card-subtitle">Follow-Up Frequency</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">🩺</span>
                <span class="stat-text">Weekly checks</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🧬</span>
                <span class="stat-text">Lab tests</span>
              </div>
            </div>
            <p class="card-description">Understand recommended monitoring frequency based on severity—from weekly visits to hospitalization.</p>
            <button class="learn-more-btn" onclick="openTheme(10)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 11: Questions for Doctor -->
        <div class="theme-card-3d" data-theme="11">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #26a69a, #00897b);">
            <div class="icon-circle">❓</div>
            <h3>Essential Questions for Doctor</h3>
            <p class="card-subtitle">Information to Gather</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">💬</span>
                <span class="stat-text">12 key questions</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">📋</span>
                <span class="stat-text">Be prepared</span>
              </div>
            </div>
            <p class="card-description">Critical questions to ask your healthcare provider about diagnosis, treatment, risks, and delivery planning.</p>
            <button class="learn-more-btn" onclick="openTheme(11)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 12: Primary Prevention -->
        <div class="theme-card-3d" data-theme="12">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #66bb6a, #388e3c);">
            <div class="icon-circle">🛡️</div>
            <h3>Prevention: Before Pregnancy</h3>
            <p class="card-subtitle">Primary Strategies</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">⚖️</span>
                <span class="stat-text">Healthy weight</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">💊</span>
                <span class="stat-text">Control BP</span>
              </div>
            </div>
            <p class="card-description">Pre-pregnancy steps to reduce risk: weight management, blood pressure control, and chronic disease optimization.</p>
            <button class="learn-more-btn" onclick="openTheme(12)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 13: Secondary Prevention -->
        <div class="theme-card-3d" data-theme="13">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #29b6f6, #0277bd);">
            <div class="icon-circle">💊</div>
            <h3>Prevention: During Pregnancy</h3>
            <p class="card-subtitle">Evidence-Based Steps</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">💉</span>
                <span class="stat-text">Low-dose aspirin</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🥛</span>
                <span class="stat-text">Calcium</span>
              </div>
            </div>
            <p class="card-description">WHO and ACOG recommended interventions during pregnancy: aspirin therapy, calcium supplementation, regular monitoring.</p>
            <button class="learn-more-btn" onclick="openTheme(13)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 14: Nutritional Management -->
        <div class="theme-card-3d" data-theme="14">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #9ccc65, #689f38);">
            <div class="icon-circle">🥗</div>
            <h3>Nutritional Management</h3>
            <p class="card-subtitle">Diet Recommendations</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">🥛</span>
                <span class="stat-text">60-70g protein</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">💧</span>
                <span class="stat-text">8-10 glasses water</span>
              </div>
            </div>
            <p class="card-description">Dietary guidelines for managing preeclampsia: protein, salt, hydration, and foods to include or avoid.</p>
            <button class="learn-more-btn" onclick="openTheme(14)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 15: Physical Activity -->
        <div class="theme-card-3d" data-theme="15">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #ff7043, #e64a19);">
            <div class="icon-circle">🚶‍♀️</div>
            <h3>Physical Activity Guidelines</h3>
            <p class="card-subtitle">Safe Exercise</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">⏱️</span>
                <span class="stat-text">20-30 min walks</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🧘‍♀️</span>
                <span class="stat-text">Prenatal yoga</span>
              </div>
            </div>
            <p class="card-description">Safe exercise recommendations for women with preeclampsia, including activities to avoid and warning signs.</p>
            <button class="learn-more-btn" onclick="openTheme(15)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 16: Home BP Monitoring -->
        <div class="theme-card-3d" data-theme="16">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #5c6bc0, #3949ab);">
            <div class="icon-circle">🩺</div>
            <h3>Home Blood Pressure Monitoring</h3>
            <p class="card-subtitle">Self-Monitoring Protocol</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">⏰</span>
                <span class="stat-text">2x daily</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">📊</span>
                <span class="stat-text">Track readings</span>
              </div>
            </div>
            <p class="card-description">Learn proper home blood pressure monitoring technique, timing, recording, and when to alert your doctor.</p>
            <button class="learn-more-btn" onclick="openTheme(16)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 17: Medication Management -->
        <div class="theme-card-3d" data-theme="17">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #ab47bc, #8e24aa);">
            <div class="icon-circle">💊</div>
            <h3>Medication Management</h3>
            <p class="card-subtitle">Common Treatments</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">🧪</span>
                <span class="stat-text">Antihypertensives</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">⚡</span>
                <span class="stat-text">Magnesium sulfate</span>
              </div>
            </div>
            <p class="card-description">Understanding medications used in preeclampsia: blood pressure drugs, seizure prevention, fetal lung maturation.</p>
            <button class="learn-more-btn" onclick="openTheme(17)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 18: Delivery Planning -->
        <div class="theme-card-3d" data-theme="18">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #ec407a, #d81b60);">
            <div class="icon-circle">👶</div>
            <h3>Delivery Planning & Timing</h3>
            <p class="card-subtitle">When Delivery is Necessary</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">📅</span>
                <span class="stat-text">37 weeks (mild)</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🚨</span>
                <span class="stat-text">34 weeks (severe)</span>
              </div>
            </div>
            <p class="card-description">Delivery timing based on severity, preparation steps, vaginal vs cesarean delivery decisions, and continuous monitoring.</p>
            <button class="learn-more-btn" onclick="openTheme(18)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 19: Postpartum Care -->
        <div class="theme-card-3d" data-theme="19">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #f48fb1, #f06292);">
            <div class="icon-circle">🍼</div>
            <h3>Postpartum Care Requirements</h3>
            <p class="card-subtitle">After Delivery Monitoring</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">⏰</span>
                <span class="stat-text">72-hour watch</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🤱</span>
                <span class="stat-text">Safe breastfeeding</span>
              </div>
            </div>
            <p class="card-description">Critical postpartum period: preeclampsia can worsen after delivery, monitoring needs, medication safety, breastfeeding.</p>
            <button class="learn-more-btn" onclick="openTheme(19)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 20: Long-Term Health -->
        <div class="theme-card-3d" data-theme="20">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #7e57c2, #5e35b1);">
            <div class="icon-circle">❤️</div>
            <h3>Long-Term Health Implications</h3>
            <p class="card-subtitle">Future Cardiovascular Risk</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">💔</span>
                <span class="stat-text">2-4x CVD risk</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">📅</span>
                <span class="stat-text">Annual screening</span>
              </div>
            </div>
            <p class="card-description">Women with preeclampsia face increased lifetime cardiovascular risk requiring ongoing monitoring and prevention.</p>
            <button class="learn-more-btn" onclick="openTheme(20)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 21: Family Support -->
        <div class="theme-card-3d" data-theme="21">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #ff8a65, #ff7043);">
            <div class="icon-circle">👨‍👩‍👧‍👦</div>
            <h3>Family Support & Caregiving</h3>
            <p class="card-subtitle">How Families Can Help</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">🤝</span>
                <span class="stat-text">Emotional support</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🏠</span>
                <span class="stat-text">Practical help</span>
              </div>
            </div>
            <p class="card-description">Essential role of family members in monitoring, medication reminders, emergency response, and emotional support.</p>
            <button class="learn-more-btn" onclick="openTheme(21)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 22: Mental Health -->
        <div class="theme-card-3d" data-theme="22">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #4db6ac, #26a69a);">
            <div class="icon-circle">🧠</div>
            <h3>Emotional & Mental Health</h3>
            <p class="card-subtitle">Psychological Support</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">😰</span>
                <span class="stat-text">Anxiety normal</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">💚</span>
                <span class="stat-text">Seek counseling</span>
              </div>
            </div>
            <p class="card-description">Managing anxiety, fear, and depression associated with high-risk pregnancy and preeclampsia complications.</p>
            <button class="learn-more-btn" onclick="openTheme(22)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 23: Fetal Complications -->
        <div class="theme-card-3d" data-theme="23">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #ff5252, #f44336);">
            <div class="icon-circle">👶</div>
            <h3>Fetal Complications & Monitoring</h3>
            <p class="card-subtitle">Impact on Baby</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">📉</span>
                <span class="stat-text">Growth restriction</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🔬</span>
                <span class="stat-text">Regular ultrasound</span>
              </div>
            </div>
            <p class="card-description">Understanding risks to baby including growth restriction, preterm birth, and need for NICU care.</p>
            <button class="learn-more-btn" onclick="openTheme(23)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 24: Cultural Considerations -->
        <div class="theme-card-3d" data-theme="24">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #ffb74d, #ff9800);">
            <div class="icon-circle">🇮🇳</div>
            <h3>Cultural Considerations in India</h3>
            <p class="card-subtitle">Addressing Local Beliefs</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">🙏</span>
                <span class="stat-text">Family involvement</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">🏥</span>
                <span class="stat-text">Hospital care critical</span>
              </div>
            </div>
            <p class="card-description">Navigating traditional beliefs, involving family decision-makers, and accessing appropriate medical care in India.</p>
            <button class="learn-more-btn" onclick="openTheme(24)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>

        <!-- Theme 25: Healthcare Navigation -->
        <div class="theme-card-3d" data-theme="25">
          <div class="card-glow"></div>
          <div class="card-header" style="background: linear-gradient(135deg, #ba68c8, #9c27b0);">
            <div class="icon-circle">🏥</div>
            <h3>Healthcare System Navigation</h3>
            <p class="card-subtitle">Accessing Care in India</p>
          </div>
          <div class="card-content">
            <div class="preview-stats">
              <div class="preview-stat">
                <span class="stat-icon">📞</span>
                <span class="stat-text">108/102 ambulance</span>
              </div>
              <div class="preview-stat">
                <span class="stat-icon">💰</span>
                <span class="stat-text">JSY benefits</span>
              </div>
            </div>
            <p class="card-description">Government schemes, emergency services, finding high-risk pregnancy clinics, insurance, and transport support.</p>
            <button class="learn-more-btn" onclick="openTheme(25)">
              <span>Explore Now</span>
              <span class="btn-arrow">→</span>
            </button>
          </div>
          <div class="card-progress-bar"></div>
        </div>
      </div>
    </section>

    <!-- NEW SECTION: SEVERITY COMPARISON -->
    <section id="severity" class="severity-comparison-section">
      <div class="section-header-enhanced">
        <div class="header-content">
          <div class="header-badge">
            <span class="badge-pulse"></span>
            <span class="badge-text">Interactive Severity Guide</span>
          </div>
          <h2 class="new-mom-section-title">Severity Levels  <span class="em">Explained</span></h2>
          <p class="section-subtitle">
            Compare symptoms, blood pressure ranges, and required actions across all severity levels
          </p>
        </div>
      </div>

      <div class="severity-comparison-grid">
        <div class="severity-card severity-normal">
          <div class="severity-header">
            <span class="severity-icon">✅</span>
            <h3>Normal Pregnancy</h3>
          </div>
          <div class="severity-content">
            <div class="bp-range">
              <strong>BP Range:</strong> <120/80 mmHg
            </div>
            <ul class="severity-features">
              <li>No proteinuria</li>
              <li>No swelling beyond normal</li>
              <li>No headaches or vision changes</li>
              <li>Normal organ function</li>
            </ul>
            <div class="severity-action">
              <strong>Action:</strong> Continue routine prenatal care
            </div>
          </div>
        </div>

        <div class="severity-card severity-mild">
          <div class="severity-header">
            <span class="severity-icon">🟢</span>
            <h3>Mild Preeclampsia</h3>
          </div>
          <div class="severity-content">
            <div class="bp-range">
              <strong>BP Range:</strong> 140-159/90-109 mmHg
            </div>
            <ul class="severity-features">
              <li>Mild protein in urine (≥300mg/24hr)</li>
              <li>Slight ankle/finger swelling</li>
              <li>Mild persistent headaches</li>
              <li>Monitor closely</li>
            </ul>
            <div class="severity-action">
              <strong>Action:</strong> Doctor visit within 24-48 hours, weekly monitoring
            </div>
          </div>
        </div>

        <div class="severity-card severity-moderate">
          <div class="severity-header">
            <span class="severity-icon">🟡</span>
            <h3>Moderate Preeclampsia</h3>
          </div>
          <div class="severity-content">
            <div class="bp-range">
              <strong>BP Range:</strong> 150-160/100-110 mmHg
            </div>
            <ul class="severity-features">
              <li>Moderate proteinuria (2+ dipstick)</li>
              <li>Noticeable face/hand swelling</li>
              <li>Persistent headaches</li>
              <li>Reduced urination</li>
            </ul>
            <div class="severity-action">
              <strong>Action:</strong> Same-day consultation, possible hospitalization
            </div>
          </div>
        </div>

        <div class="severity-card severity-severe">
          <div class="severity-header">
            <span class="severity-icon">🔴</span>
            <h3>Severe Preeclampsia</h3>
          </div>
          <div class="severity-content">
            <div class="bp-range">
              <strong>BP Range:</strong> ≥160/110 mmHg
            </div>
            <ul class="severity-features">
              <li>Severe proteinuria (3-4+ dipstick)</li>
              <li>Vision problems (blurred, spots)</li>
              <li>Severe headache won't go away</li>
              <li>Upper abdominal pain</li>
              <li>Difficulty breathing</li>
            </ul>
            <div class="severity-action">
              <strong>Action:</strong> EMERGENCY - Call 108/102 immediately
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- NEW SECTION: PREVENTION STRATEGIES -->
    <section id="prevention" class="prevention-section">
      <div class="section-header-enhanced">
        <div class="header-content">
          <div class="header-badge">
            <span class="badge-pulse"></span>
            <span class="badge-text">Evidence-Based Prevention</span>
          </div>
          <h2 class="new-mom-section-title">How to Prevent <span class="em">Preeclampsia</span></h2>
          <p class="section-subtitle">
            Science-backed strategies to reduce your risk before and during pregnancy
          </p>
        </div>
      </div>

      <div class="prevention-grid">
        <div class="prevention-card">
          <div class="prevention-icon">💊</div>
          <h3>Low-Dose Aspirin</h3>
          <p class="prevention-desc">For high-risk women, starting at 12-16 weeks</p>
          <ul class="prevention-details">
            <li><strong>Dose:</strong> 75-150mg daily</li>
            <li><strong>Timing:</strong> Before bedtime</li>
            <li><strong>Duration:</strong> Until 36 weeks or delivery</li>
            <li><strong>Effect:</strong> Reduces risk by 10-20%</li>
          </ul>
        </div>

        <div class="prevention-card">
          <div class="prevention-icon">🥛</div>
          <h3>Calcium Supplementation</h3>
          <p class="prevention-desc">Especially for women with low dietary calcium</p>
          <ul class="prevention-details">
            <li><strong>Dose:</strong> 1-2g daily</li>
            <li><strong>Source:</strong> Supplements or diet</li>
            <li><strong>Foods:</strong> Milk, yogurt, leafy greens</li>
            <li><strong>Effect:</strong> Reduces risk in calcium-deficient women</li>
          </ul>
        </div>

        <div class="prevention-card">
          <div class="prevention-icon">⚖️</div>
          <h3>Weight Management</h3>
          <p class="prevention-desc">Achieve healthy BMI before conception</p>
          <ul class="prevention-details">
            <li><strong>Target BMI:</strong> 18.5-24.9 kg/m²</li>
            <li><strong>Pregnancy gain:</strong> 11-16 kg (normal BMI)</li>
            <li><strong>Obesity risk:</strong> BMI ≥30 increases risk 2-3x</li>
            <li><strong>Strategy:</strong> Gradual, sustainable changes</li>
          </ul>
        </div>

        <div class="prevention-card">
          <div class="prevention-icon">🩺</div>
          <h3>Control Pre-existing Conditions</h3>
          <p class="prevention-desc">Optimize chronic diseases before pregnancy</p>
          <ul class="prevention-details">
            <li><strong>Hypertension:</strong> Well-controlled BP <140/90</li>
            <li><strong>Diabetes:</strong> HbA1c <6.5% before conception</li>
            <li><strong>Kidney disease:</strong> Stable function</li>
            <li><strong>Consultation:</strong> Pre-pregnancy planning essential</li>
          </ul>
        </div>

        <div class="prevention-card">
          <div class="prevention-icon">🚶‍♀️</div>
          <h3>Regular Physical Activity</h3>
          <p class="prevention-desc">Moderate exercise reduces risk</p>
          <ul class="prevention-details">
            <li><strong>Frequency:</strong> 150 min/week moderate activity</li>
            <li><strong>Activities:</strong> Walking, swimming, prenatal yoga</li>
            <li><strong>Benefits:</strong> Better BP control, weight management</li>
            <li><strong>Caution:</strong> Avoid overexertion, stay hydrated</li>
          </ul>
        </div>

        <div class="prevention-card">
          <div class="prevention-icon">🍎</div>
          <h3>Healthy Diet</h3>
          <p class="prevention-desc">Nutrition rich in vegetables, fruits, whole grains</p>
          <ul class="prevention-details">
            <li><strong>Protein:</strong> 60-70g daily</li>
            <li><strong>Salt:</strong> Moderate, not restricted</li>
            <li><strong>Fruits/Veg:</strong> 5+ servings daily</li>
            <li><strong>Avoid:</strong> Excessive processed foods, caffeine</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- NEW SECTION: MYTHS VS FACTS -->
    <!-- NEW SECTION: MYTHS VS FACTS - INTERACTIVE -->
<!-- NEW SECTION: MYTHS VS FACTS - INTERACTIVE -->
<section id="myths" class="myths-facts-section">
  <div class="section-header-enhanced">
    <div class="header-content">
      <div class="header-badge">
        <span class="badge-pulse"></span>
        <span class="badge-text">Truth vs Misconception</span>
      </div>
    <h2 class="new-mom-section-title">Common Myths About  <span class="em">Preeclampsia</span></h2>

      <p class="section-subtitle">
        Debunking dangerous misconceptions with scientific facts
      </p>
    </div>
  </div>

  <!-- NEW: Quiz Mode Toggle & Progress Tracker -->
  <div class="myth-controls">
    <button class="quiz-mode-btn" id="quizModeBtn" onclick="toggleQuizMode()">
      <span class="btn-icon">🧠</span>
      <span class="btn-text">Quiz Mode: OFF</span>
    </button>
    
    <div class="myth-progress-tracker">
      <div class="progress-label">
        <span>Myths Busted: <strong id="mythsBusted">0</strong>/8</span>
        <span class="trophy-icon" id="trophyIcon">🏆</span>
      </div>
      <div class="progress-bar-container">
        <div class="progress-bar-fill" id="progressBarFill" style="width: 0%"></div>
      </div>
    </div>

    <button class="shuffle-btn" onclick="shuffleMyths()">
      <span class="btn-icon">🔀</span>
      <span class="btn-text">Shuffle Cards</span>
    </button>
  </div>

  <!-- NEW: Interactive Flip Cards Grid -->
  <div class="myths-grid-interactive" id="mythsGrid">
    
    <!-- Myth Card 1 -->
    <div class="myth-card-flip" data-myth-id="1" data-danger-level="high">
      <div class="myth-card-inner">
        <!-- FRONT: Myth Side -->
        <div class="myth-card-front">
          <div class="danger-meter">
            <div class="danger-label">Danger Level</div>
            <div class="danger-bar">
              <div class="danger-fill" style="width: 60%"></div>
            </div>
          </div>
          <div class="myth-icon">❌</div>
          <h3 class="myth-question">"Preeclampsia only happens to first-time mothers"</h3>
          
          <!-- Quiz Mode Buttons (hidden initially) -->
          <div class="quiz-buttons" style="display: none;">
            <button class="quiz-btn true-btn" onclick="submitQuizAnswer(1, true)">
              This is TRUE
            </button>
            <button class="quiz-btn false-btn" onclick="submitQuizAnswer(1, false)">
              This is FALSE
            </button>
          </div>
          
          <button class="flip-trigger-btn" onclick="flipCard(1)">
            <span>Reveal Truth</span>
            <span class="flip-icon">🔄</span>
          </button>
          
          <div class="card-actions">
            <button class="action-btn" onclick="shareMyth(1)" title="Share this fact">
              📤
            </button>
            <button class="action-btn" onclick="speakMyth(1)" title="Read aloud">
              🔊
            </button>
          </div>
        </div>

        <!-- BACK: Fact Side -->
        <div class="myth-card-back">
          <div class="fact-icon">✅</div>
          <h3 class="fact-heading">THE TRUTH</h3>
          <p class="fact-text">
            While first pregnancies have higher risk, preeclampsia can occur in 
            <strong>ANY pregnancy</strong>, including 2nd, 3rd, or later. Previous 
            preeclampsia increases recurrence risk to <strong>15-25%</strong>.
          </p>
          
          <div class="fact-stats">
            <div class="stat-bubble">
              <span class="stat-num">15-25%</span>
              <span class="stat-label">Recurrence rate</span>
            </div>
          </div>
          
          <button class="flip-back-btn" onclick="flipCard(1)">
            <span>← Back to Myth</span>
          </button>
          
          <div class="completion-check">
            <span class="check-icon">✓</span>
            <span class="check-text">Myth Busted!</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Myth Card 2 -->
    <div class="myth-card-flip" data-myth-id="2" data-danger-level="medium">
      <div class="myth-card-inner">
        <div class="myth-card-front">
          <div class="danger-meter">
            <div class="danger-label">Danger Level</div>
            <div class="danger-bar">
              <div class="danger-fill" style="width: 40%"></div>
            </div>
          </div>
          <div class="myth-icon">❌</div>
          <h3 class="myth-question">"Swelling (edema) during pregnancy always means preeclampsia"</h3>
          
          <div class="quiz-buttons" style="display: none;">
            <button class="quiz-btn true-btn" onclick="submitQuizAnswer(2, true)">
              This is TRUE
            </button>
            <button class="quiz-btn false-btn" onclick="submitQuizAnswer(2, false)">
              This is FALSE
            </button>
          </div>
          
          <button class="flip-trigger-btn" onclick="flipCard(2)">
            <span>Reveal Truth</span>
            <span class="flip-icon">🔄</span>
          </button>
          
          <div class="card-actions">
            <button class="action-btn" onclick="shareMyth(2)">📤</button>
            <button class="action-btn" onclick="speakMyth(2)">🔊</button>
          </div>
        </div>

        <div class="myth-card-back">
          <div class="fact-icon">✅</div>
          <h3 class="fact-heading">THE TRUTH</h3>
          <p class="fact-text">
            <strong>80% of pregnant women</strong> experience normal swelling. 
            Preeclampsia swelling is <strong>SUDDEN</strong>, affects face/hands, 
            and occurs <strong>WITH</strong> high blood pressure and protein in urine. 
            Normal pregnancy swelling is gradual and mostly in ankles.
          </p>
          
          <div class="fact-stats">
            <div class="stat-bubble">
              <span class="stat-num">80%</span>
              <span class="stat-label">Normal pregnancy swelling</span>
            </div>
          </div>
          
          <button class="flip-back-btn" onclick="flipCard(2)">
            <span>← Back to Myth</span>
          </button>
          
          <div class="completion-check">
            <span class="check-icon">✓</span>
            <span class="check-text">Myth Busted!</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Myth Card 3 -->
    <div class="myth-card-flip" data-myth-id="3" data-danger-level="high">
      <div class="myth-card-inner">
        <div class="myth-card-front">
          <div class="danger-meter">
            <div class="danger-label">Danger Level</div>
            <div class="danger-bar">
              <div class="danger-fill" style="width: 70%"></div>
            </div>
          </div>
          <div class="myth-icon">❌</div>
          <h3 class="myth-question">"You should reduce salt intake to prevent preeclampsia"</h3>
          
          <div class="quiz-buttons" style="display: none;">
            <button class="quiz-btn true-btn" onclick="submitQuizAnswer(3, true)">
              This is TRUE
            </button>
            <button class="quiz-btn false-btn" onclick="submitQuizAnswer(3, false)">
              This is FALSE
            </button>
          </div>
          
          <button class="flip-trigger-btn" onclick="flipCard(3)">
            <span>Reveal Truth</span>
            <span class="flip-icon">🔄</span>
          </button>
          
          <div class="card-actions">
            <button class="action-btn" onclick="shareMyth(3)">📤</button>
            <button class="action-btn" onclick="speakMyth(3)">🔊</button>
          </div>
        </div>

        <div class="myth-card-back">
          <div class="fact-icon">✅</div>
          <h3 class="fact-heading">THE TRUTH</h3>
          <p class="fact-text">
            <strong>WHO and ACOG do NOT recommend salt restriction</strong> for 
            preeclampsia prevention. Moderate salt intake is safe. Severe restriction 
            can be harmful. Focus on overall healthy diet instead.
          </p>
          
          <div class="fact-stats">
            <div class="stat-bubble">
              <span class="stat-num">WHO</span>
              <span class="stat-label">No salt restriction</span>
            </div>
          </div>
          
          <button class="flip-back-btn" onclick="flipCard(3)">
            <span>← Back to Myth</span>
          </button>
          
          <div class="completion-check">
            <span class="check-icon">✓</span>
            <span class="check-text">Myth Busted!</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Myth Card 4 -->
    <div class="myth-card-flip" data-myth-id="4" data-danger-level="critical">
      <div class="myth-card-inner">
        <div class="myth-card-front">
          <div class="danger-meter">
            <div class="danger-label">Danger Level</div>
            <div class="danger-bar">
              <div class="danger-fill" style="width: 90%"></div>
            </div>
          </div>
          <div class="myth-icon">❌</div>
          <h3 class="myth-question">"Preeclampsia only happens during pregnancy"</h3>
          
          <div class="quiz-buttons" style="display: none;">
            <button class="quiz-btn true-btn" onclick="submitQuizAnswer(4, true)">
              This is TRUE
            </button>
            <button class="quiz-btn false-btn" onclick="submitQuizAnswer(4, false)">
              This is FALSE
            </button>
          </div>
          
          <button class="flip-trigger-btn" onclick="flipCard(4)">
            <span>Reveal Truth</span>
            <span class="flip-icon">🔄</span>
          </button>
          
          <div class="card-actions">
            <button class="action-btn" onclick="shareMyth(4)">📤</button>
            <button class="action-btn" onclick="speakMyth(4)">🔊</button>
          </div>
        </div>

        <div class="myth-card-back">
          <div class="fact-icon">✅</div>
          <h3 class="fact-heading">THE TRUTH</h3>
          <p class="fact-text">
            Postpartum preeclampsia can develop <strong>UP TO 6 WEEKS after delivery</strong>. 
            In fact, symptoms can <strong>WORSEN in the first 48-72 hours after birth</strong>. 
            Never ignore symptoms after delivery.
          </p>
          
          <div class="fact-stats">
            <div class="stat-bubble">
              <span class="stat-num">6 weeks</span>
              <span class="stat-label">Risk period after birth</span>
            </div>
          </div>
          
          <button class="flip-back-btn" onclick="flipCard(4)">
            <span>← Back to Myth</span>
          </button>
          
          <div class="completion-check">
            <span class="check-icon">✓</span>
            <span class="check-text">Myth Busted!</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Myth Card 5 -->
    <div class="myth-card-flip" data-myth-id="5" data-danger-level="high">
      <div class="myth-card-inner">
        <div class="myth-card-front">
          <div class="danger-meter">
            <div class="danger-label">Danger Level</div>
            <div class="danger-bar">
              <div class="danger-fill" style="width: 65%"></div>
            </div>
          </div>
          <div class="myth-icon">❌</div>
          <h3 class="myth-question">"Bed rest prevents or treats preeclampsia"</h3>
          
          <div class="quiz-buttons" style="display: none;">
            <button class="quiz-btn true-btn" onclick="submitQuizAnswer(5, true)">
              This is TRUE
            </button>
            <button class="quiz-btn false-btn" onclick="submitQuizAnswer(5, false)">
              This is FALSE
            </button>
          </div>
          
          <button class="flip-trigger-btn" onclick="flipCard(5)">
            <span>Reveal Truth</span>
            <span class="flip-icon">🔄</span>
          </button>
          
          <div class="card-actions">
            <button class="action-btn" onclick="shareMyth(5)">📤</button>
            <button class="action-btn" onclick="speakMyth(5)">🔊</button>
          </div>
        </div>

        <div class="myth-card-back">
          <div class="fact-icon">✅</div>
          <h3 class="fact-heading">THE TRUTH</h3>
          <p class="fact-text">
            There is <strong>NO evidence</strong> that bed rest prevents preeclampsia or 
            improves outcomes. It may even <strong>increase risks of blood clots</strong>. 
            Light activity with adequate rest is recommended instead.
          </p>
          
          <div class="fact-stats">
            <div class="stat-bubble">
              <span class="stat-num">0%</span>
              <span class="stat-label">Proven benefit</span>
            </div>
          </div>
          
          <button class="flip-back-btn" onclick="flipCard(5)">
            <span>← Back to Myth</span>
          </button>
          
          <div class="completion-check">
            <span class="check-icon">✓</span>
            <span class="check-text">Myth Busted!</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Myth Card 6 -->
    <div class="myth-card-flip" data-myth-id="6" data-danger-level="critical">
      <div class="myth-card-inner">
        <div class="myth-card-front">
          <div class="danger-meter">
            <div class="danger-label">Danger Level</div>
            <div class="danger-bar">
              <div class="danger-fill" style="width: 100%"></div>
            </div>
          </div>
          <div class="myth-icon">❌</div>
          <h3 class="myth-question">"Natural remedies and home treatments can cure preeclampsia"</h3>
          
          <div class="quiz-buttons" style="display: none;">
            <button class="quiz-btn true-btn" onclick="submitQuizAnswer(6, true)">
              This is TRUE
            </button>
            <button class="quiz-btn false-btn" onclick="submitQuizAnswer(6, false)">
              This is FALSE
            </button>
          </div>
          
          <button class="flip-trigger-btn" onclick="flipCard(6)">
            <span>Reveal Truth</span>
            <span class="flip-icon">🔄</span>
          </button>
          
          <div class="card-actions">
            <button class="action-btn" onclick="shareMyth(6)">📤</button>
            <button class="action-btn" onclick="speakMyth(6)">🔊</button>
          </div>
        </div>

        <div class="myth-card-back">
          <div class="fact-icon">✅</div>
          <h3 class="fact-heading">THE TRUTH</h3>
          <p class="fact-text">
            <strong>DANGEROUS MYTH!</strong> There is <strong>NO natural cure</strong> 
            for preeclampsia. The <strong>ONLY cure is delivery</strong> of baby and placenta. 
            Medications manage symptoms but don't cure it. Always seek medical care.
          </p>
          
          <div class="fact-stats">
            <div class="stat-bubble danger">
              <span class="stat-num">⚠️</span>
              <span class="stat-label">Life-threatening</span>
            </div>
          </div>
          
          <button class="flip-back-btn" onclick="flipCard(6)">
            <span>← Back to Myth</span>
          </button>
          
          <div class="completion-check">
            <span class="check-icon">✓</span>
            <span class="check-text">Myth Busted!</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Myth Card 7 -->
    <div class="myth-card-flip" data-myth-id="7" data-danger-level="medium">
      <div class="myth-card-inner">
        <div class="myth-card-front">
          <div class="danger-meter">
            <div class="danger-label">Danger Level</div>
            <div class="danger-bar">
              <div class="danger-fill" style="width: 45%"></div>
            </div>
          </div>
          <div class="myth-icon">❌</div>
          <h3 class="myth-question">"Preeclampsia means I must have a C-section"</h3>
          
          <div class="quiz-buttons" style="display: none;">
            <button class="quiz-btn true-btn" onclick="submitQuizAnswer(7, true)">
              This is TRUE
            </button>
            <button class="quiz-btn false-btn" onclick="submitQuizAnswer(7, false)">
              This is FALSE
            </button>
          </div>
          
          <button class="flip-trigger-btn" onclick="flipCard(7)">
            <span>Reveal Truth</span>
            <span class="flip-icon">🔄</span>
          </button>
          
          <div class="card-actions">
            <button class="action-btn" onclick="shareMyth(7)">📤</button>
            <button class="action-btn" onclick="speakMyth(7)">🔊</button>
          </div>
        </div>

        <div class="myth-card-back">
          <div class="fact-icon">✅</div>
          <h3 class="fact-heading">THE TRUTH</h3>
          <p class="fact-text">
            Not necessarily. Many women with <strong>mild preeclampsia deliver vaginally</strong>. 
            Delivery method depends on severity, gestational age, maternal-fetal condition, 
            and labor progress—<strong>not preeclampsia diagnosis alone</strong>.
          </p>
          
          <div class="fact-stats">
            <div class="stat-bubble">
              <span class="stat-num">Many</span>
              <span class="stat-label">Vaginal deliveries</span>
            </div>
          </div>
          
          <button class="flip-back-btn" onclick="flipCard(7)">
            <span>← Back to Myth</span>
          </button>
          
          <div class="completion-check">
            <span class="check-icon">✓</span>
            <span class="check-text">Myth Busted!</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Myth Card 8 -->
    <div class="myth-card-flip" data-myth-id="8" data-danger-level="critical">
      <div class="myth-card-inner">
        <div class="myth-card-front">
          <div class="danger-meter">
            <div class="danger-label">Danger Level</div>
            <div class="danger-bar">
              <div class="danger-fill" style="width: 95%"></div>
            </div>
          </div>
          <div class="myth-icon">❌</div>
          <h3 class="myth-question">"If I feel fine, my blood pressure must be normal"</h3>
          
          <div class="quiz-buttons" style="display: none;">
            <button class="quiz-btn true-btn" onclick="submitQuizAnswer(8, true)">
              This is TRUE
            </button>
            <button class="quiz-btn false-btn" onclick="submitQuizAnswer(8, false)">
              This is FALSE
            </button>
          </div>
          
          <button class="flip-trigger-btn" onclick="flipCard(8)">
            <span>Reveal Truth</span>
            <span class="flip-icon">🔄</span>
          </button>
          
          <div class="card-actions">
            <button class="action-btn" onclick="shareMyth(8)">📤</button>
            <button class="action-btn" onclick="speakMyth(8)">🔊</button>
          </div>
        </div>

        <div class="myth-card-back">
          <div class="fact-icon">✅</div>
          <h3 class="fact-heading">THE TRUTH</h3>
          <p class="fact-text">
            <strong>EXTREMELY DANGEROUS MYTH!</strong> High blood pressure is often called 
            <strong>"silent killer"</strong> because you <strong>CAN'T FEEL IT</strong>. 
            Many women with severe preeclampsia feel completely normal until life-threatening 
            complications occur. <strong>MUST check BP regularly</strong>.
          </p>
          
          <div class="fact-stats">
            <div class="stat-bubble danger">
              <span class="stat-num">⚠️</span>
              <span class="stat-label">Silent killer</span>
            </div>
          </div>
          
          <button class="flip-back-btn" onclick="flipCard(8)">
            <span>← Back to Myth</span>
          </button>
          
          <div class="completion-check">
            <span class="check-icon">✓</span>
            <span class="check-text">Myth Busted!</span>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- NEW: Completion Celebration -->
  <div class="completion-celebration" id="completionCelebration" style="display: none;">
    <div class="celebration-content">
      <div class="celebration-icon">🎉</div>
      <h2>Congratulations!</h2>
      <p>You've busted all 8 dangerous myths about preeclampsia!</p>
      <p class="celebration-message">Share this knowledge to help protect other mothers.</p>
      <button class="share-all-btn" onclick="shareAllMyths()">
        📤 Share All Facts
      </button>
      <button class="reset-btn" onclick="resetProgress()">
        🔄 Test Yourself Again
      </button>
    </div>
  </div>

</section>

    <!-- BODY IMPACT SIMULATOR SECTION (ENHANCED) -->
   <!-- REVOLUTIONARY BODY IMPACT SIMULATOR SECTION -->
<section id="simulator" class="simulator-section-3d">
  <div class="section-header-enhanced">
    <div class="header-content">
      <div class="header-badge">
        <span class="badge-pulse"></span>
        <span class="badge-text">Interactive 3D Medical Simulation</span>
      </div>
      <h2 class="new-mom-section-title">See How Preeclampsia  <span class="em">Affects Your Body</span></h2>
      <p class="section-subtitle">
        Explore a revolutionary 3D medical simulator. <strong>Rotate, zoom, click organs,</strong> 
        and watch disease progression in real-time across different severity levels and pregnancy weeks.
      </p>
    </div>
  </div>

  <!-- THREE.JS LIBRARY (Required) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  
  <div class="simulator-container-3d">
    
    <!-- ===== TOP CONTROL PANEL ===== -->
    <div class="simulator-controls-panel">
      
      <!-- View Mode Selector -->
      <div class="view-mode-selector">
        <button class="view-mode-btn active" data-view="3d" onclick="switchViewMode('3d')">
          <span class="mode-icon">🌐</span>
          <span class="mode-label">3D Interactive</span>
        </button>
        <button class="view-mode-btn" data-view="comparison" onclick="switchViewMode('comparison')">
          <span class="mode-icon">⚖️</span>
          <span class="mode-label">Compare Normal vs PE</span>
        </button>
        <button class="view-mode-btn" data-view="journey" onclick="switchViewMode('journey')">
          <span class="mode-icon">🎬</span>
          <span class="mode-label">Auto Journey</span>
        </button>
      </div>

      <!-- Severity Slider -->
      <div class="control-row severity-control">
        <label class="control-label">
          <span class="label-icon">📊</span>
          <span class="label-text">Disease Severity:</span>
          <span class="severity-value" id="severityDisplay">Normal</span>
        </label>
        <input 
          type="range" 
          id="severitySlider" 
          min="0" 
          max="100" 
          value="0" 
          class="custom-slider severity-slider"
          oninput="updateSeverityLevel(this.value)"
        >
        <div class="slider-markers">
          <span class="marker" style="left: 0%;">Normal</span>
          <span class="marker" style="left: 33%;">Mild</span>
          <span class="marker" style="left: 66%;">Moderate</span>
          <span class="marker" style="left: 100%;">Severe</span>
        </div>
      </div>

      <!-- Timeline Slider -->
      <div class="control-row timeline-control">
        <label class="control-label">
          <span class="label-icon">📅</span>
          <span class="label-text">Pregnancy Week:</span>
          <span class="week-value" id="weekDisplay">Week 20</span>
        </label>
        <input 
          type="range" 
          id="timelineSlider" 
          min="20" 
          max="40" 
          value="20" 
          step="2"
          class="custom-slider timeline-slider"
          oninput="updatePregnancyWeek(this.value)"
        >
        <div class="slider-markers">
          <span class="marker">20w</span>
          <span class="marker">24w</span>
          <span class="marker">28w</span>
          <span class="marker">32w</span>
          <span class="marker">36w</span>
          <span class="marker">40w</span>
        </div>
      </div>

      <!-- Journey Controls (Hidden by default) -->
      <div class="journey-controls" id="journeyControls" style="display: none;">
        <button class="journey-btn play-btn" onclick="playJourney()" id="playBtn">
          <span>▶️ Play Disease Journey (60s)</span>
        </button>
        <button class="journey-btn pause-btn" onclick="pauseJourney()" id="pauseBtn" style="display: none;">
          <span>⏸️ Pause</span>
        </button>
        <button class="journey-btn reset-btn" onclick="resetJourney()">
          <span>🔄 Reset</span>
        </button>
        <div class="journey-progress-bar">
          <div class="journey-progress-fill" id="journeyProgressFill"></div>
        </div>
        <div class="journey-time" id="journeyTime">0:00 / 1:00</div>
      </div>

    </div>

    <!-- ===== MAIN VISUALIZATION AREA ===== -->
    <div class="main-visualization-grid">
      
      <!-- LEFT SIDEBAR: Layer Controls -->
      <div class="layer-control-sidebar">
        <div class="sidebar-header">
          <span class="header-icon">🧬</span>
          <h3>Organ Systems</h3>
        </div>
        
        <div class="layer-toggles">
          <label class="layer-toggle">
            <input type="checkbox" checked onchange="toggleLayer('cardiovascular')" id="layerCardio">
            <span class="toggle-switch"></span>
            <span class="layer-icon">❤️</span>
            <span class="layer-name">Cardiovascular</span>
          </label>

          <label class="layer-toggle">
            <input type="checkbox" checked onchange="toggleLayer('nervous')" id="layerNervous">
            <span class="toggle-switch"></span>
            <span class="layer-icon">🧠</span>
            <span class="layer-name">Nervous System</span>
          </label>

          <label class="layer-toggle">
            <input type="checkbox" checked onchange="toggleLayer('renal')" id="layerRenal">
            <span class="toggle-switch"></span>
            <span class="layer-icon">🫘</span>
            <span class="layer-name">Kidneys (Renal)</span>
          </label>

          <label class="layer-toggle">
            <input type="checkbox" checked onchange="toggleLayer('hepatic')" id="layerHepatic">
            <span class="toggle-switch"></span>
            <span class="layer-icon">🫀</span>
            <span class="layer-name">Liver (Hepatic)</span>
          </label>

          <label class="layer-toggle">
            <input type="checkbox" checked onchange="toggleLayer('placental')" id="layerPlacental">
            <span class="toggle-switch"></span>
            <span class="layer-icon">🤰</span>
            <span class="layer-name">Placenta & Baby</span>
          </label>

          <label class="layer-toggle">
            <input type="checkbox" checked onchange="toggleLayer('respiratory')" id="layerRespiratory">
            <span class="toggle-switch"></span>
            <span class="layer-icon">🫁</span>
            <span class="layer-name">Respiratory</span>
          </label>
        </div>

        <div class="quick-presets">
          <h4>Quick Views</h4>
          <button class="preset-btn" onclick="applyPreset('all')">
            <span>👁️ All Systems</span>
          </button>
          <button class="preset-btn" onclick="applyPreset('critical')">
            <span>⚠️ Critical Only</span>
          </button>
          <button class="preset-btn" onclick="applyPreset('affected')">
            <span>🔴 Affected Areas</span>
          </button>
        </div>

        <div class="audio-control">
          <button class="audio-toggle-btn" onclick="toggleAudioSymptoms()" id="audioToggle">
            <span class="audio-icon">🔊</span>
            <span class="audio-text">Audio Symptoms</span>
            <span class="audio-status">OFF</span>
          </button>
          <p class="audio-hint">🎧 Hear what symptoms feel like</p>
        </div>
      </div>

      <!-- CENTER: 3D Body Visualization -->
      <!-- CENTER: Interactive Body Visualization -->
      <div class="body-3d-viewer">
        <!-- SVG Body Container -->
        <div class="body-silhouette-container">
          <svg class="body-svg-preeclampsia" id="bodySvgPreeclampsia" viewBox="0 0 320 600">
            <!-- PREGNANT WOMAN SILHOUETTE -->
            
            <!-- Head -->
            <ellipse cx="160" cy="62" rx="42" ry="48" fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="body-part-skin"/>
            
            <!-- Hair -->
            <ellipse cx="160" cy="38" rx="44" ry="30" fill="#5c3d2e" class="body-part-hair"/>
            <rect x="116" y="30" width="12" height="55" rx="6" fill="#5c3d2e" class="body-part-hair"/>
            <rect x="192" y="30" width="12" height="55" rx="6" fill="#5c3d2e" class="body-part-hair"/>
            
            <!-- Eyes -->
            <circle cx="143" cy="65" r="4" fill="#3a2520"/>
            <circle cx="177" cy="65" r="4" fill="#3a2520"/>
            
            <!-- Smile -->
            <path d="M148 78 Q160 86 172 78" fill="none" stroke="#3a2520" stroke-width="2" stroke-linecap="round"/>
            
            <!-- Neck -->
            <rect x="148" y="106" width="24" height="28" rx="4" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5" class="body-part-skin"/>
            
            <!-- Torso (fitted dress) -->
            <path d="M100 134 Q100 128 130 128 L190 128 Q220 128 220 134 L220 280 Q220 285 215 285 L105 285 Q100 285 100 280 Z" 
                  fill="#e8a0b8" stroke="#d47a9a" stroke-width="2" class="body-part-dress"/>
            
            <!-- Pregnant Belly (larger curve) -->
            <ellipse cx="160" cy="300" rx="65" ry="75" fill="#e8a0b8" stroke="#d47a9a" stroke-width="2" class="body-part-belly"/>
            
            <!-- Collar detail -->
            <path d="M148 128 L148 148 Q160 156 172 148 L172 128" fill="none" stroke="#d47a9a" stroke-width="1.5"/>
            
            <!-- Arms -->
            <path d="M100 140 Q70 170 60 240 Q55 270 65 290 L82 290 Q85 270 90 240 Q100 175 118 145" 
                  fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="body-part-skin"/>
            <path d="M220 140 Q250 170 260 240 Q265 270 255 290 L238 290 Q235 270 230 240 Q220 175 202 145" 
                  fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="body-part-skin"/>
            
            <!-- Hands -->
            <ellipse cx="74" cy="298" rx="14" ry="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5" class="body-part-hands"/>
            <ellipse cx="246" cy="298" rx="14" ry="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5" class="body-part-hands"/>
            
            <!-- Skirt -->
            <path d="M95 372 L88 480 Q88 490 100 490 L220 490 Q232 490 232 480 L225 372" 
                  fill="#c077a8" stroke="#a85d8a" stroke-width="2" class="body-part-skirt"/>
            
            <!-- Legs -->
            <rect x="118" y="488" width="34" height="90" rx="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="body-part-skin"/>
            <rect x="168" y="488" width="34" height="90" rx="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="body-part-skin"/>
            
            <!-- Feet -->
            <ellipse cx="135" cy="586" rx="22" ry="10" fill="#8b5e83" class="body-part-feet"/>
            <ellipse cx="185" cy="586" rx="22" ry="10" fill="#8b5e83" class="body-part-feet"/>

            <!-- ========== CLICKABLE ORGAN ZONES ========== -->
            
            <!-- GLOW ZONES (appear on severity increase) -->
            <circle class="glow-zone" data-organ="brain" cx="160" cy="62" r="50" fill="url(#glowBrain)" opacity="0"/>
            <ellipse class="glow-zone" data-organ="eyes" cx="160" cy="65" rx="35" ry="15" fill="url(#glowEyes)" opacity="0"/>
            <circle class="glow-zone" data-organ="heart" cx="160" cy="190" r="45" fill="url(#glowHeart)" opacity="0"/>
            <circle class="glow-zone" data-organ="liver" cx="195" cy="220" r="35" fill="url(#glowLiver)" opacity="0"/>
            <circle class="glow-zone" data-organ="kidneys" cx="125" cy="250" r="30" fill="url(#glowKidney)" opacity="0"/>
            <circle class="glow-zone" data-organ="kidneys" cx="195" cy="250" r="30" fill="url(#glowKidney)" opacity="0"/>
            <ellipse class="glow-zone" data-organ="placenta" cx="160" cy="310" rx="70" ry="80" fill="url(#glowPlacenta)" opacity="0"/>
            <ellipse class="glow-zone" data-organ="hands" cx="74" cy="298" rx="20" ry="15" fill="url(#glowHands)" opacity="0"/>
            <ellipse class="glow-zone" data-organ="hands" cx="246" cy="298" rx="20" ry="15" fill="url(#glowHands)" opacity="0"/>
            <ellipse class="glow-zone" data-organ="feet" cx="135" cy="545" rx="35" ry="40" fill="url(#glowFeet)" opacity="0"/>
            <ellipse class="glow-zone" data-organ="feet" cx="185" cy="545" rx="35" ry="40" fill="url(#glowFeet)" opacity="0"/>

            <!-- ORGAN ICONS (floating badges) -->
            <g class="organ-icon" data-organ="brain">
              <circle cx="160" cy="30" r="18" fill="rgba(59, 130, 246, 0.15)" stroke="rgba(59, 130, 246, 0.6)" stroke-width="2" class="icon-badge"/>
              <text x="160" y="36" text-anchor="middle" font-size="16" class="organ-emoji">🧠</text>
            </g>
            
            <g class="organ-icon" data-organ="eyes">
              <circle cx="200" cy="58" r="16" fill="rgba(59, 130, 246, 0.15)" stroke="rgba(59, 130, 246, 0.6)" stroke-width="2" class="icon-badge"/>
              <text x="200" y="63" text-anchor="middle" font-size="14" class="organ-emoji">👁️</text>
            </g>
            
            <g class="organ-icon" data-organ="heart">
              <circle cx="160" cy="185" r="18" fill="rgba(239, 68, 68, 0.15)" stroke="rgba(239, 68, 68, 0.6)" stroke-width="2" class="icon-badge"/>
              <text x="160" y="191" text-anchor="middle" font-size="16" class="organ-emoji">❤️</text>
            </g>
            
            <g class="organ-icon" data-organ="liver">
              <circle cx="200" cy="220" r="16" fill="rgba(146, 64, 14, 0.15)" stroke="rgba(146, 64, 14, 0.6)" stroke-width="2" class="icon-badge"/>
              <text x="200" y="226" text-anchor="middle" font-size="14" class="organ-emoji">🫀</text>
            </g>
            
            <g class="organ-icon" data-organ="kidneys">
              <circle cx="120" cy="250" r="16" fill="rgba(124, 45, 18, 0.15)" stroke="rgba(124, 45, 18, 0.6)" stroke-width="2" class="icon-badge"/>
              <text x="120" y="256" text-anchor="middle" font-size="14" class="organ-emoji">🫘</text>
            </g>
            
            <g class="organ-icon" data-organ="placenta">
              <circle cx="160" cy="320" r="20" fill="rgba(236, 72, 153, 0.15)" stroke="rgba(236, 72, 153, 0.6)" stroke-width="2" class="icon-badge"/>
              <text x="160" y="327" text-anchor="middle" font-size="18" class="organ-emoji">🤰</text>
            </g>
            
            <g class="organ-icon" data-organ="hands">
              <circle cx="40" cy="290" r="16" fill="rgba(251, 191, 36, 0.15)" stroke="rgba(251, 191, 36, 0.6)" stroke-width="2" class="icon-badge"/>
              <text x="40" y="296" text-anchor="middle" font-size="14" class="organ-emoji">✋</text>
            </g>
            
            <g class="organ-icon" data-organ="feet">
              <circle cx="160" cy="560" r="16" fill="rgba(251, 191, 36, 0.15)" stroke="rgba(251, 191, 36, 0.6)" stroke-width="2" class="icon-badge"/>
              <text x="160" y="566" text-anchor="middle" font-size="14" class="organ-emoji">🦶</text>
            </g>

            <!-- INVISIBLE CLICKABLE HOTSPOTS -->
            <circle class="hotspot-click" data-organ="brain" cx="160" cy="62" r="48" opacity="0" onclick="openOrganModal('brain')"/>
            <ellipse class="hotspot-click" data-organ="eyes" cx="160" cy="65" rx="35" ry="12" opacity="0" onclick="openOrganModal('eyes')"/>
            <circle class="hotspot-click" data-organ="heart" cx="160" cy="190" r="42" opacity="0" onclick="openOrganModal('heart')"/>
            <circle class="hotspot-click" data-organ="liver" cx="200" cy="220" r="32" opacity="0" onclick="openOrganModal('liver')"/>
            <circle class="hotspot-click" data-organ="kidneys" cx="125" cy="250" r="28" opacity="0" onclick="openOrganModal('kidneys')"/>
            <circle class="hotspot-click" data-organ="kidneys" cx="195" cy="250" r="28" opacity="0" onclick="openOrganModal('kidneys')"/>
            <ellipse class="hotspot-click" data-organ="placenta" cx="160" cy="310" rx="65" ry="75" opacity="0" onclick="openOrganModal('placenta')"/>
            <ellipse class="hotspot-click" data-organ="hands" cx="74" cy="298" rx="18" ry="12" opacity="0" onclick="openOrganModal('hands')"/>
            <ellipse class="hotspot-click" data-organ="hands" cx="246" cy="298" rx="18" ry="12" opacity="0" onclick="openOrganModal('hands')"/>
            <ellipse class="hotspot-click" data-organ="feet" cx="135" cy="545" rx="28" ry="35" opacity="0" onclick="openOrganModal('feet')"/>
            <ellipse class="hotspot-click" data-organ="feet" cx="185" cy="545" rx="28" ry="35" opacity="0" onclick="openOrganModal('feet')"/>

            <!-- GRADIENT DEFINITIONS -->
            <defs>
              <!-- Normal gradients (green/blue) -->
              <radialGradient id="glowBrain">
                <stop offset="0%" stop-color="#4ade80" stop-opacity="0.5"/>
                <stop offset="100%" stop-color="#4ade80" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="glowEyes">
                <stop offset="0%" stop-color="#3b82f6" stop-opacity="0.5"/>
                <stop offset="100%" stop-color="#3b82f6" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="glowHeart">
                <stop offset="0%" stop-color="#ef4444" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#ef4444" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="glowLiver">
                <stop offset="0%" stop-color="#92400e" stop-opacity="0.5"/>
                <stop offset="100%" stop-color="#92400e" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="glowKidney">
                <stop offset="0%" stop-color="#7c2d12" stop-opacity="0.5"/>
                <stop offset="100%" stop-color="#7c2d12" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="glowPlacenta">
                <stop offset="0%" stop-color="#ec4899" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#ec4899" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="glowHands">
                <stop offset="0%" stop-color="#fbbf24" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#fbbf24" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="glowFeet">
                <stop offset="0%" stop-color="#fbbf24" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#fbbf24" stop-opacity="0"/>
              </radialGradient>
            </defs>
          </svg>
          
          <!-- Interaction Hint -->
          <div class="body-hint">
            <span class="hint-icon">👆</span>
            <span class="hint-text">Click organs to see effects</span>
          </div>
        </div>

        <!-- Keep existing hotspot overlay if needed -->
        <div class="hotspot-layer" id="hotspotLayer" style="display:none;">
          <button class="hotspot brain-hotspot" data-organ="brain" onclick="openOrganModal('brain')" style="top: 12%; left: 50%;">
            <span class="pulse-ring"></span>
            <span class="hotspot-dot"></span>
            <span class="hotspot-label">Brain</span>
          </button>
          <button class="hotspot eyes-hotspot" data-organ="eyes" onclick="openOrganModal('eyes')" style="top: 15%; left: 42%;">
            <span class="pulse-ring"></span>
            <span class="hotspot-dot"></span>
            <span class="hotspot-label">Eyes</span>
          </button>
          <button class="hotspot heart-hotspot" data-organ="heart" onclick="openOrganModal('heart')" style="top: 35%; left: 47%;">
            <span class="pulse-ring"></span>
            <span class="hotspot-dot"></span>
            <span class="hotspot-label">Heart</span>
          </button>
          <button class="hotspot liver-hotspot" data-organ="liver" onclick="openOrganModal('liver')" style="top: 38%; left: 58%;">
            <span class="pulse-ring"></span>
            <span class="hotspot-dot"></span>
            <span class="hotspot-label">Liver</span>
          </button>
          <button class="hotspot kidneys-hotspot" data-organ="kidneys" onclick="openOrganModal('kidneys')" style="top: 48%; left: 35%;">
            <span class="pulse-ring"></span>
            <span class="hotspot-dot"></span>
            <span class="hotspot-label">Kidneys</span>
          </button>
          <button class="hotspot placenta-hotspot" data-organ="placenta" onclick="openOrganModal('placenta')" style="top: 60%; left: 50%;">
            <span class="pulse-ring"></span>
            <span class="hotspot-dot"></span>
            <span class="hotspot-label">Placenta</span>
          </button>
          <button class="hotspot hands-hotspot" data-organ="hands" onclick="openOrganModal('hands')" style="top: 55%; left: 18%;">
            <span class="pulse-ring"></span>
            <span class="hotspot-dot"></span>
            <span class="hotspot-label">Hands</span>
          </button>
          <button class="hotspot feet-hotspot" data-organ="feet" onclick="openOrganModal('feet')" style="top: 88%; left: 45%;">
            <span class="pulse-ring"></span>
            <span class="hotspot-dot"></span>
            <span class="hotspot-label">Feet</span>
          </button>
        </div>

        <!-- Zoom & Rotation Controls -->
        <div class="viewer-controls">
          <button class="control-btn zoom-in" onclick="zoomIn()" title="Zoom In">
            <span>🔍+</span>
          </button>
          <button class="control-btn zoom-out" onclick="zoomOut()" title="Zoom Out">
            <span>🔍-</span>
          </button>
          <button class="control-btn reset-view" onclick="resetView()" title="Reset View">
            <span>🎯</span>
          </button>
          <button class="control-btn auto-rotate" onclick="toggleAutoRotate()" id="autoRotateBtn" title="Auto Rotate">
            <span>🔄</span>
          </button>
        </div>

        <!-- User Hint -->
        <div class="interaction-hint">
          <span class="hint-icon">👆</span>
          <span class="hint-text">Drag to rotate • Scroll to zoom • Click organs for details</span>
        </div>

        <!-- Current Status Badge -->
        <div class="status-badge" id="currentStatusBadge">
          <span class="badge-icon">✅</span>
          <span class="badge-text">Normal Pregnancy</span>
        </div>
      </div>

      <!-- RIGHT SIDEBAR: Live Vital Signs -->
      <div class="vital-signs-sidebar">
        <div class="sidebar-header">
          <span class="header-icon">📊</span>
          <h3>Live Vitals</h3>
        </div>

        <!-- Blood Pressure -->
        <div class="vital-card bp-vital">
          <div class="vital-title">
            <span class="vital-icon">💉</span>
            <span>Blood Pressure</span>
          </div>
          <div class="vital-reading">
            <span class="bp-systolic" id="vitalSystolic">120</span>
            <span class="bp-sep">/</span>
            <span class="bp-diastolic" id="vitalDiastolic">80</span>
            <span class="bp-unit">mmHg</span>
          </div>
          <canvas id="bpWaveform" class="vital-waveform" width="240" height="50"></canvas>
          <div class="vital-status status-normal" id="bpStatusText">Normal Range</div>
        </div>

        <!-- Heart Rate -->
        <div class="vital-card hr-vital">
          <div class="vital-title">
            <span class="vital-icon">❤️</span>
            <span>Heart Rate</span>
          </div>
          <div class="vital-reading">
            <span class="heart-beat-icon" id="heartBeatIcon">💓</span>
            <span class="hr-value" id="vitalHeartRate">80</span>
            <span class="hr-unit">BPM</span>
          </div>
          <canvas id="hrWaveform" class="vital-waveform" width="240" height="50"></canvas>
          <div class="vital-status status-normal" id="hrStatusText">Normal</div>
        </div>

        <!-- Oxygen Saturation -->
        <div class="vital-card o2-vital">
          <div class="vital-title">
            <span class="vital-icon">🫁</span>
            <span>Oxygen (SpO2)</span>
          </div>
          <div class="vital-reading">
            <span class="o2-value" id="vitalOxygen">98</span>
            <span class="o2-unit">%</span>
          </div>
          <div class="o2-bar-container">
            <div class="o2-bar-fill" id="oxygenBar" style="width: 98%;"></div>
          </div>
          <div class="vital-status status-normal" id="o2StatusText">Optimal</div>
        </div>

        <!-- Urine Protein -->
        <div class="vital-card protein-vital">
          <div class="vital-title">
            <span class="vital-icon">🧪</span>
            <span>Urine Protein</span>
          </div>
          <div class="vital-reading">
            <div class="protein-cup">
              <div class="protein-fluid" id="proteinFluid" style="height: 0%;"></div>
            </div>
            <span class="protein-value" id="vitalProtein">None</span>
          </div>
          <div class="vital-status status-normal" id="proteinStatusText">Negative</div>
        </div>

        <!-- Platelets -->
        <div class="vital-card platelet-vital">
          <div class="vital-title">
            <span class="vital-icon">🩸</span>
            <span>Platelets</span>
          </div>
          <div class="vital-reading">
            <span class="platelet-value" id="vitalPlatelets">250</span>
            <span class="platelet-unit">k/μL</span>
          </div>
          <div class="platelet-cells" id="plateletCells">
            <!-- Generated dynamically -->
          </div>
          <div class="vital-status status-normal" id="plateletStatusText">Normal</div>
        </div>

        <!-- Liver Enzymes -->
        <div class="vital-card liver-vital">
          <div class="vital-title">
            <span class="vital-icon">🫀</span>
            <span>Liver Enzymes</span>
          </div>
          <div class="enzyme-readings">
            <div class="enzyme-row">
              <span class="enzyme-label">ALT:</span>
              <span class="enzyme-value" id="vitalALT">25</span>
            </div>
            <div class="enzyme-row">
              <span class="enzyme-label">AST:</span>
              <span class="enzyme-value" id="vitalAST">22</span>
            </div>
          </div>
          <canvas id="enzymeChart" class="vital-chart" width="240" height="50"></canvas>
          <div class="vital-status status-normal" id="liverStatusText">Normal</div>
        </div>

        <!-- Emergency Alert (Hidden by default) -->
        <div class="emergency-alert-box" id="emergencyAlert" style="display: none;">
          <div class="alert-icon-shake">🚨</div>
          <div class="alert-content">
            <strong>CRITICAL VALUES!</strong>
            <p>Immediate medical attention required</p>
          </div>
          <button class="call-emergency-btn" onclick="window.open('tel:108')">
            📞 Call 108 NOW
          </button>
        </div>
      </div>

    </div>

    <!-- ===== COMPARISON VIEW (Hidden by default) ===== -->
    <div class="comparison-view-grid" id="comparisonView" style="display: none;">
      
      <!-- LEFT: NORMAL PREGNANCY -->
      <div class="comparison-panel normal-panel">
        <div class="panel-header-comparison">
          <div class="status-badge status-normal">
            <span class="badge-icon">✅</span>
            <span class="badge-text">NORMAL PREGNANCY</span>
          </div>
          <p class="panel-subtitle">Healthy organ function • BP: 120/80 mmHg</p>
        </div>
        
        <!-- Woman Body SVG - NORMAL (SAME SIZE AS PE) -->
        <div class="body-comparison-container body-fixed-size">
          <svg class="body-svg-comparison body-normal" viewBox="0 0 320 600">
            <!-- Head -->
            <ellipse cx="160" cy="62" rx="42" ry="48" fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="clickable-part" data-part="head"/>
            
            <!-- Hair -->
            <ellipse cx="160" cy="38" rx="44" ry="30" fill="#5c3d2e"/>
            <rect x="116" y="30" width="12" height="55" rx="6" fill="#5c3d2e"/>
            <rect x="192" y="30" width="12" height="55" rx="6" fill="#5c3d2e"/>
            
            <!-- Eyes (NORMAL - clickable) -->
            <circle cx="143" cy="65" r="4" fill="#3a2520" class="clickable-part" data-part="eyes"/>
            <circle cx="177" cy="65" r="4" fill="#3a2520" class="clickable-part" data-part="eyes"/>
            
            <!-- Smile -->
            <path d="M148 78 Q160 86 172 78" fill="none" stroke="#3a2520" stroke-width="2" stroke-linecap="round"/>
            
            <!-- Neck -->
            <rect x="148" y="106" width="24" height="28" rx="4" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5" class="clickable-part" data-part="neck"/>
            
            <!-- Torso -->
            <path d="M100 134 Q100 128 130 128 L190 128 Q220 128 220 134 L220 280 Q220 285 215 285 L105 285 Q100 285 100 280 Z" 
                  fill="#e8a0b8" stroke="#d47a9a" stroke-width="2" class="clickable-part" data-part="chest"/>
            
            <!-- Pregnant Belly (NORMAL) -->
            <ellipse cx="160" cy="300" rx="65" ry="75" fill="#e8a0b8" stroke="#d47a9a" stroke-width="2" class="clickable-part" data-part="belly"/>
            
            <!-- Arms -->
            <path d="M100 140 Q70 170 60 240 Q55 270 65 290 L82 290 Q85 270 90 240 Q100 175 118 145" 
                  fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="clickable-part" data-part="arms"/>
            <path d="M220 140 Q250 170 260 240 Q265 270 255 290 L238 290 Q235 270 230 240 Q220 175 202 145" 
                  fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="clickable-part" data-part="arms"/>
            
            <!-- Hands (NORMAL - clickable) -->
            <ellipse cx="74" cy="298" rx="14" ry="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5" class="clickable-part" data-part="hands"/>
            <ellipse cx="246" cy="298" rx="14" ry="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5" class="clickable-part" data-part="hands"/>
            
            <!-- Skirt -->
            <path d="M95 372 L88 480 Q88 490 100 490 L220 490 Q232 490 232 480 L225 372" 
                  fill="#c077a8" stroke="#a85d8a" stroke-width="2"/>
            
            <!-- Legs (NORMAL - clickable) -->
            <rect x="118" y="488" width="34" height="90" rx="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="clickable-part" data-part="legs"/>
            <rect x="168" y="488" width="34" height="90" rx="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="clickable-part" data-part="legs"/>
            
            <!-- Feet (NORMAL - clickable) -->
            <ellipse cx="135" cy="586" rx="22" ry="10" fill="#8b5e83" class="clickable-part" data-part="feet"/>
            <ellipse cx="185" cy="586" rx="22" ry="10" fill="#8b5e83" class="clickable-part" data-part="feet"/>

            <!-- HEALTHY ORGAN INDICATORS -->
            <circle class="healthy-glow clickable-part" cx="160" cy="62" r="50" fill="url(#healthyGlowBrain)" opacity="0.6" data-part="brain"/>
            <circle class="healthy-glow clickable-part" cx="160" cy="190" r="45" fill="url(#healthyGlowHeart)" opacity="0.6" data-part="heart"/>
            <circle class="healthy-glow clickable-part" cx="195" cy="220" r="35" fill="url(#healthyGlowLiver)" opacity="0.6" data-part="liver"/>
            <circle class="healthy-glow clickable-part" cx="125" cy="250" r="30" fill="url(#healthyGlowKidney)" opacity="0.6" data-part="kidneys"/>
            <circle class="healthy-glow clickable-part" cx="195" cy="250" r="30" fill="url(#healthyGlowKidney)" opacity="0.6" data-part="kidneys"/>
            <ellipse class="healthy-glow clickable-part" cx="160" cy="310" rx="70" ry="80" fill="url(#healthyGlowPlacenta)" opacity="0.6" data-part="placenta"/>

            <!-- ORGAN LABELS -->
            <g class="organ-label-normal clickable-part" data-part="brain">
              <circle cx="160" cy="30" r="18" fill="rgba(74, 222, 128, 0.2)" stroke="#4ade80" stroke-width="2"/>
              <text x="160" y="36" text-anchor="middle" font-size="16">🧠</text>
            </g>
            
            <g class="organ-label-normal clickable-part" data-part="heart">
              <circle cx="160" cy="185" r="18" fill="rgba(74, 222, 128, 0.2)" stroke="#4ade80" stroke-width="2"/>
              <text x="160" y="191" text-anchor="middle" font-size="16">❤️</text>
            </g>
            
            <g class="organ-label-normal clickable-part" data-part="liver">
              <circle cx="200" cy="220" r="16" fill="rgba(74, 222, 128, 0.2)" stroke="#4ade80" stroke-width="2"/>
              <text x="200" y="226" text-anchor="middle" font-size="14">🫀</text>
            </g>
            
            <g class="organ-label-normal clickable-part" data-part="kidneys">
              <circle cx="120" cy="250" r="16" fill="rgba(74, 222, 128, 0.2)" stroke="#4ade80" stroke-width="2"/>
              <text x="120" y="256" text-anchor="middle" font-size="14">🫘</text>
            </g>
            
            <g class="organ-label-normal clickable-part" data-part="placenta">
              <circle cx="160" cy="320" r="20" fill="rgba(74, 222, 128, 0.2)" stroke="#4ade80" stroke-width="2"/>
              <text x="160" y="327" text-anchor="middle" font-size="18">🤰</text>
            </g>

            <!-- GRADIENTS -->
            <defs>
              <radialGradient id="healthyGlowBrain">
                <stop offset="0%" stop-color="#4ade80" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#4ade80" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="healthyGlowHeart">
                <stop offset="0%" stop-color="#4ade80" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#4ade80" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="healthyGlowLiver">
                <stop offset="0%" stop-color="#4ade80" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#4ade80" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="healthyGlowKidney">
                <stop offset="0%" stop-color="#4ade80" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#4ade80" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="healthyGlowPlacenta">
                <stop offset="0%" stop-color="#4ade80" stop-opacity="0.4"/>
                <stop offset="100%" stop-color="#4ade80" stop-opacity="0"/>
              </radialGradient>
            </defs>
          </svg>
        </div>
        
        <!-- Stats Cards -->
        <div class="comparison-stats-grid">
          <div class="stat-card stat-good">
            <div class="stat-icon">💚</div>
            <div class="stat-info">
              <div class="stat-label">Blood Pressure</div>
              <div class="stat-value">120/80</div>
            </div>
          </div>
          <div class="stat-card stat-good">
            <div class="stat-icon">✅</div>
            <div class="stat-info">
              <div class="stat-label">Protein</div>
              <div class="stat-value">None</div>
            </div>
          </div>
          <div class="stat-card stat-good">
            <div class="stat-icon">🫘</div>
            <div class="stat-info">
              <div class="stat-label">Kidneys</div>
              <div class="stat-value">Normal</div>
            </div>
          </div>
          <div class="stat-card stat-good">
            <div class="stat-icon">🤰</div>
            <div class="stat-info">
              <div class="stat-label">Baby</div>
              <div class="stat-value">Healthy</div>
            </div>
          </div>

          <div class="stat-card stat-good">
            <div class="stat-icon">🫀</div>
            <div class="stat-info">
              <div class="stat-label">Liver</div>
              <div class="stat-value">Normal</div>
            </div>
          </div>
          <div class="stat-card stat-good">
            <div class="stat-icon">💨</div>
            <div class="stat-info">
              <div class="stat-label">Breathing</div>
              <div class="stat-value">Easy</div>
            </div>
          </div>

        </div>
      </div>

      <!-- CENTER DIVIDER -->
      <div class="comparison-divider-vertical">
        <div class="divider-line-vertical"></div>
        <div class="vs-badge-large">
          <span class="vs-text">VS</span>
        </div>
      </div>

      <!-- RIGHT: PREECLAMPSIA (EXACTLY SAME SIZE CONTAINER) -->
      <div class="comparison-panel pe-panel">
        <div class="panel-header-comparison">
          <div class="status-badge status-warning">
            <span class="badge-icon">⚠️</span>
            <span class="badge-text">PREECLAMPSIA</span>
          </div>
          <p class="panel-subtitle">Multiple organs affected • BP: 160/110 mmHg</p>
        </div>
        
        <!-- Woman Body SVG - PREECLAMPSIA (SAME SIZE, DIFFERENT VISUAL MARKERS) -->
        <div class="body-comparison-container body-fixed-size">
          <svg class="body-svg-comparison body-preeclampsia" viewBox="0 0 320 600">
            <!-- Head (clickable) -->
            <ellipse cx="160" cy="62" rx="42" ry="48" fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="clickable-part" data-part="head"/>
            
            <!-- Hair -->
            <ellipse cx="160" cy="38" rx="44" ry="30" fill="#5c3d2e"/>
            <rect x="116" y="30" width="12" height="55" rx="6" fill="#5c3d2e"/>
            <rect x="192" y="30" width="12" height="55" rx="6" fill="#5c3d2e"/>
            
            <!-- Eyes (PE - RED, clickable) -->
            <circle cx="143" cy="65" r="4" fill="#ef4444" class="clickable-part affected-part" data-part="eyes"/>
            <circle cx="177" cy="65" r="4" fill="#ef4444" class="clickable-part affected-part" data-part="eyes"/>
            <ellipse cx="143" cy="65" rx="8" ry="5" fill="rgba(239, 68, 68, 0.2)"/>
            <ellipse cx="177" cy="65" rx="8" ry="5" fill="rgba(239, 68, 68, 0.2)"/>
            
            <!-- Frowning face -->
            <path d="M148 82 Q160 78 172 82" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round"/>
            
            <!-- Neck (clickable) -->
            <rect x="148" y="106" width="24" height="28" rx="4" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5" class="clickable-part" data-part="neck"/>
            
            <!-- Chest (clickable) -->
            <path d="M100 134 Q100 128 130 128 L190 128 Q220 128 220 134 L220 280 Q220 285 215 285 L105 285 Q100 285 100 280 Z" 
                  fill="#e8a0b8" stroke="#d47a9a" stroke-width="2" class="clickable-part" data-part="chest"/>
            
            <!-- Belly (clickable) -->
            <ellipse cx="160" cy="300" rx="65" ry="75" fill="#e8a0b8" stroke="#d47a9a" stroke-width="2" class="clickable-part" data-part="belly"/>
            
            <!-- Arms (clickable) -->
            <path d="M100 140 Q70 170 60 240 Q55 270 65 290 L82 290 Q85 270 90 240 Q100 175 118 145" 
                  fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="clickable-part" data-part="arms"/>
            <path d="M220 140 Q250 170 260 240 Q265 270 255 290 L238 290 Q235 270 230 240 Q220 175 202 145" 
                  fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="clickable-part" data-part="arms"/>
            
            <!-- Hands (SWOLLEN - with visual markers, clickable) -->
            <ellipse cx="74" cy="298" rx="14" ry="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5" class="clickable-part affected-part swollen-part" data-part="hands"/>
            <ellipse cx="246" cy="298" rx="14" ry="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="1.5" class="clickable-part affected-part swollen-part" data-part="hands"/>
            <!-- Swelling indicators -->
            <circle cx="74" cy="298" r="18" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="4,4" opacity="0.6"/>
            <circle cx="246" cy="298" r="18" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="4,4" opacity="0.6"/>
            
            <!-- Skirt -->
            <path d="M95 372 L88 480 Q88 490 100 490 L220 490 Q232 490 232 480 L225 372" 
                  fill="#c077a8" stroke="#a85d8a" stroke-width="2"/>
            
            <!-- Legs (SWOLLEN - with visual markers, clickable) -->
            <rect x="118" y="488" width="34" height="90" rx="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="clickable-part affected-part swollen-part" data-part="legs"/>
            <rect x="168" y="488" width="34" height="90" rx="10" fill="#f5c6a0" stroke="#e0a882" stroke-width="2" class="clickable-part affected-part swollen-part" data-part="legs"/>
            <!-- Swelling indicators -->
            <rect x="114" y="488" width="42" height="90" rx="10" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="4,4" opacity="0.5"/>
            <rect x="164" y="488" width="42" height="90" rx="10" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="4,4" opacity="0.5"/>
            
            <!-- Feet (SWOLLEN - with visual markers, clickable) -->
            <ellipse cx="135" cy="586" rx="22" ry="10" fill="#8b5e83" class="clickable-part affected-part swollen-part" data-part="feet"/>
            <ellipse cx="185" cy="586" rx="22" ry="10" fill="#8b5e83" class="clickable-part affected-part swollen-part" data-part="feet"/>
            <!-- Swelling indicators -->
            <ellipse cx="135" cy="586" rx="28" ry="14" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="4,4" opacity="0.6"/>
            <ellipse cx="185" cy="586" rx="28" ry="14" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="4,4" opacity="0.6"/>

            <!-- Face Swelling Indicator -->
            <ellipse cx="160" cy="62" rx="50" ry="56" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="6,4" opacity="0.4" class="swollen-part"/>

            <!-- Chest/Lung Affected Area -->
            <rect x="130" y="180" width="60" height="50" rx="10" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="1.5" stroke-dasharray="4,4" opacity="0.5" class="clickable-part affected-part" data-part="chest"/>

            <!-- Neck Swelling Indicator -->
            <rect x="145" y="103" width="30" height="31" rx="5" fill="none" stroke="#ef4444" stroke-width="1.5" stroke-dasharray="4,4" opacity="0.4" class="swollen-part"/>

            <!-- AFFECTED ORGAN INDICATORS (RED PULSING) -->
            <circle class="danger-glow pulsing-glow clickable-part" cx="160" cy="62" r="50" fill="url(#dangerGlowBrain)" opacity="0.8" data-part="brain"/>
            <circle class="danger-glow pulsing-glow clickable-part" cx="160" cy="190" r="45" fill="url(#dangerGlowHeart)" opacity="0.8" data-part="heart"/>
            <circle class="danger-glow pulsing-glow clickable-part" cx="195" cy="220" r="35" fill="url(#dangerGlowLiver)" opacity="0.8" data-part="liver"/>
            <circle class="danger-glow pulsing-glow clickable-part" cx="125" cy="250" r="30" fill="url(#dangerGlowKidney)" opacity="0.8" data-part="kidneys"/>
            <circle class="danger-glow pulsing-glow clickable-part" cx="195" cy="250" r="30" fill="url(#dangerGlowKidney)" opacity="0.8" data-part="kidneys"/>
            <ellipse class="danger-glow pulsing-glow clickable-part" cx="160" cy="310" rx="70" ry="80" fill="url(#dangerGlowPlacenta)" opacity="0.8" data-part="placenta"/>

            <!-- ORGAN LABELS (RED) -->
            <g class="organ-label-danger clickable-part" data-part="brain">
              <circle cx="160" cy="30" r="18" fill="rgba(239, 68, 68, 0.3)" stroke="#ef4444" stroke-width="2"/>
              <text x="160" y="36" text-anchor="middle" font-size="16">🧠</text>
            </g>
            
            <g class="organ-label-danger clickable-part" data-part="heart">
              <circle cx="160" cy="185" r="18" fill="rgba(239, 68, 68, 0.3)" stroke="#ef4444" stroke-width="2"/>
              <text x="160" y="191" text-anchor="middle" font-size="16">❤️</text>
            </g>
            
            <g class="organ-label-danger clickable-part" data-part="liver">
              <circle cx="200" cy="220" r="16" fill="rgba(239, 68, 68, 0.3)" stroke="#ef4444" stroke-width="2"/>
              <text x="200" y="226" text-anchor="middle" font-size="14">🫀</text>
            </g>
            
            <g class="organ-label-danger clickable-part" data-part="kidneys">
              <circle cx="120" cy="250" r="16" fill="rgba(239, 68, 68, 0.3)" stroke="#ef4444" stroke-width="2"/>
              <text x="120" y="256" text-anchor="middle" font-size="14">🫘</text>
            </g>
            
            <g class="organ-label-danger clickable-part" data-part="placenta">
              <circle cx="160" cy="320" r="20" fill="rgba(239, 68, 68, 0.3)" stroke="#ef4444" stroke-width="2"/>
              <text x="160" y="327" text-anchor="middle" font-size="18">🤰</text>
            </g>

            <!-- GRADIENTS FOR AFFECTED STATE -->
            <defs>
              <radialGradient id="dangerGlowBrain">
                <stop offset="0%" stop-color="#ef4444" stop-opacity="0.6"/>
                <stop offset="100%" stop-color="#ef4444" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="dangerGlowHeart">
                <stop offset="0%" stop-color="#ef4444" stop-opacity="0.6"/>
                <stop offset="100%" stop-color="#ef4444" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="dangerGlowLiver">
                <stop offset="0%" stop-color="#f97316" stop-opacity="0.6"/>
                <stop offset="100%" stop-color="#f97316" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="dangerGlowKidney">
                <stop offset="0%" stop-color="#dc2626" stop-opacity="0.6"/>
                <stop offset="100%" stop-color="#dc2626" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="dangerGlowPlacenta">
                <stop offset="0%" stop-color="#ec4899" stop-opacity="0.6"/>
                <stop offset="100%" stop-color="#ec4899" stop-opacity="0"/>
              </radialGradient>
            </defs>
          </svg>
        </div>
        
        <!-- Stats Cards -->
        <div class="comparison-stats-grid">
          <div class="stat-card stat-danger">
            <div class="stat-icon">🔴</div>
            <div class="stat-info">
              <div class="stat-label">Blood Pressure</div>
              <div class="stat-value">160/110</div>
            </div>
          </div>
          <div class="stat-card stat-danger">
            <div class="stat-icon">⚠️</div>
            <div class="stat-info">
              <div class="stat-label">Protein</div>
              <div class="stat-value">4+ High</div>
            </div>
          </div>
          <div class="stat-card stat-danger">
            <div class="stat-icon">🫘</div>
            <div class="stat-info">
              <div class="stat-label">Kidneys</div>
              <div class="stat-value">Impaired</div>
            </div>
          </div>
         
          <div class="stat-card stat-warning">
            <div class="stat-icon">👶</div>
            <div class="stat-info">
              <div class="stat-label">Baby</div>
              <div class="stat-value">At Risk</div>
            </div>
          </div>

          <div class="stat-card stat-danger">
          <div class="stat-icon">🫀</div>
          <div class="stat-info">
            <div class="stat-label">Liver</div>
            <div class="stat-value">Elevated</div>
          </div>
        </div>
        <div class="stat-card stat-warning">
          <div class="stat-icon">💨</div>
          <div class="stat-info">
            <div class="stat-label">Breathing</div>
            <div class="stat-value">Difficult</div>
          </div>
        </div>

        </div>
      </div>

    </div>

    <!-- KEY DIFFERENCES LEGEND (BOTTOM) -->
    <div class="comparison-legend">
      <h4>🔍 Visual Differences to Notice:</h4>
      <div class="legend-grid">
        <div class="legend-item">
          <span class="legend-indicator swelling">↔️</span>
          <span class="legend-text"><strong>Swelling:</strong> Hands, feet, and legs visibly larger</span>
        </div>
        <div class="legend-item">
          <span class="legend-indicator eyes">👁️</span>
          <span class="legend-text"><strong>Eyes:</strong> Redness and strain (vision problems)</span>
        </div>
        <div class="legend-item">
          <span class="legend-indicator face">😟</span>
          <span class="legend-text"><strong>Expression:</strong> Distress vs. relaxed smile</span>
        </div>
        <div class="legend-item">
          <span class="legend-indicator glow">✨</span>
          <span class="legend-text"><strong>Organ Glow:</strong> Green (healthy) vs. Red (affected)</span>
        </div>
        <div class="legend-item">
          <span class="legend-indicator color">🎨</span>
          <span class="legend-text"><strong>Skin Tone:</strong> Pink flush on swollen areas</span>
        </div>
        <div class="legend-item">
          <span class="legend-indicator pulse">💓</span>
          <span class="legend-text"><strong>Pulsing:</strong> Affected organs animate to show stress</span>
        </div>
      </div>
    </div>

  </div>

    <!-- ===== ORGAN DETAIL MODAL ===== -->
    <div class="organ-modal-overlay" id="organModalOverlay" style="display: none;" onclick="closeOrganModal()">
      <div class="organ-modal-container" onclick="event.stopPropagation()">
        <button class="modal-close-btn" onclick="closeOrganModal()">✕</button>
        
        <div class="organ-modal-header">
          <div class="organ-icon-large" id="modalOrganIcon">🧠</div>
          <h2 id="modalOrganName">Brain</h2>
        </div>

        <div class="organ-modal-content">
          
          <!-- Normal vs Affected Comparison -->
          <div class="organ-comparison-row">
            <div class="organ-state normal-state">
              <h4>✅ Normal State</h4>
              <div class="organ-visual-box" id="normalOrganVisual">
                <div class="organ-illustration">🧠</div>
              </div>
              <p id="normalOrganDesc">Normal blood flow, no headaches...</p>
            </div>

            <div class="organ-state affected-state">
              <h4>⚠️ With Preeclampsia</h4>
              <div class="organ-visual-box affected" id="affectedOrganVisual">
                <div class="organ-illustration pulsing">🧠</div>
              </div>
              <p id="affectedOrganDesc">Constricted vessels, severe headaches...</p>
            </div>
          </div>

          <!-- Symptoms List -->
          <div class="organ-symptoms-section">
            <h4>⚠️ Symptoms from this organ:</h4>
            <ul id="organSymptomsList" class="symptoms-list">
              <!-- Populated dynamically -->
            </ul>
          </div>

          <!-- Action Needed -->
          <div class="organ-action-section">
            <h4>📋 What to watch for:</h4>
            <p id="organActionText">Action text here...</p>
          </div>

          <!-- Microscopic View Toggle -->
          <button class="microscopic-btn" onclick="toggleMicroscopicView()">
            <span class="btn-icon">🔬</span>
            <span class="btn-text">View at Cellular Level</span>
          </button>

        </div>
      </div>
    </div>

    <!-- ===== BOTTOM INFO PANEL ===== -->
    <div class="simulation-info-panel">
      <div class="info-row">
        <div class="info-block current-state-info">
          <h3 id="currentStateTitle">Normal Pregnancy - Week 20</h3>
          <p id="currentStateDescription">
            All organ systems functioning optimally with healthy blood pressure 
            and proper blood flow to placenta and baby.
          </p>
        </div>

        <div class="info-block key-changes-info">
          <h4>Key Changes at Current Level:</h4>
          <ul id="keyChangesList">
            <li>✅ Blood pressure within normal range (120/80 mmHg)</li>
            <li>✅ No protein in urine</li>
            <li>✅ All organs functioning normally</li>
            <li>✅ Placental blood flow optimal</li>
          </ul>
        </div>

        <div class="info-block action-info">
          <h4>Recommended Actions:</h4>
          <div class="action-recommendation" id="actionRecommendation">
            <span class="action-icon">✅</span>
            <p>Continue regular prenatal checkups. Monitor blood pressure weekly at home if available.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== EDUCATIONAL TIP CARD ===== -->
    <div class="edu-tip-floating">
      <div class="tip-header">
        <span class="tip-bulb">💡</span>
        <h4>Did You Know?</h4>
      </div>
      <p class="tip-message" id="eduTipMessage">
        The placenta acts as baby's life support system. In preeclampsia, 
        reduced blood flow to the placenta can affect baby's growth and oxygen supply.
      </p>
      <button class="next-tip-btn" onclick="showNextTip()">
        Next Tip →
      </button>
    </div>

  </div>
</section>

    <!-- NEW SECTION: WARNING SIGNS DASHBOARD -->
    <section class="warning-signs-section">
      <div class="section-header-enhanced">
        <div class="header-content">
          <div class="header-badge">
            <span class="badge-pulse"></span>
            <span class="badge-text">Emergency Recognition</span>
          </div>
          <h2 class="new-mom-section-title">Critical  <span class="em">Warning Signs</span></h2>
          <p class="section-subtitle">
            Symptoms that require IMMEDIATE medical attention - call 108/102
          </p>
        </div>
      </div>

      <div class="warning-signs-grid">
        <div class="warning-sign-card emergency">
          <div class="warning-icon">🧠</div>
          <h3>Severe Headache</h3>
          <p>Intense headache that doesn't go away with rest or paracetamol, feels different from normal headaches</p>
          <span class="action-label">CALL 108/102 NOW</span>
        </div>

        <div class="warning-sign-card emergency">
          <div class="warning-icon">👁️</div>
          <h3>Vision Changes</h3>
          <p>Blurred vision, seeing spots or flashing lights, temporary vision loss, light sensitivity</p>
          <span class="action-label">CALL 108/102 NOW</span>
        </div>

        <div class="warning-sign-card emergency">
          <div class="warning-icon">💥</div>
          <h3>Severe Abdominal Pain</h3>
          <p>Upper right abdomen pain (below ribs), severe and persistent, may indicate liver involvement</p>
          <span class="action-label">CALL 108/102 NOW</span>
        </div>

        <div class="warning-sign-card emergency">
          <div class="warning-icon">😮‍💨</div>
          <h3>Difficulty Breathing</h3>
          <p>Shortness of breath, chest pain, rapid breathing - may indicate fluid in lungs</p>
          <span class="action-label">CALL 108/102 NOW</span>
        </div>

        <div class="warning-sign-card emergency">
          <div class="warning-icon">⚡</div>
          <h3>Seizures</h3>
          <p>Any seizure activity during pregnancy or postpartum - this is ECLAMPSIA, life-threatening emergency</p>
          <span class="action-label">CALL 108/102 NOW</span>
        </div>

        <div class="warning-sign-card urgent">
          <div class="warning-icon">🦵</div>
          <h3>Sudden Severe Swelling</h3>
          <p>Rapid swelling of face, hands, feet appearing within hours, not days</p>
          <span class="action-label">CALL DOCTOR TODAY</span>
        </div>

        <div class="warning-sign-card urgent">
          <div class="warning-icon">👶</div>
          <h3>Decreased Fetal Movement</h3>
          <p>Baby moving less than usual, not feeling normal kicks or movements</p>
          <span class="action-label">CALL DOCTOR TODAY</span>
        </div>

        <div class="warning-sign-card urgent">
          <div class="warning-icon">🤮</div>
          <h3>Severe Nausea/Vomiting</h3>
          <p>Persistent vomiting beyond first trimester, can't keep food or water down</p>
          <span class="action-label">CALL DOCTOR TODAY</span>
        </div>
      </div>

      <div class="emergency-action-box">
        <h3>🚨 When in Doubt, Don't Wait!</h3>
        <p>If you're experiencing ANY of these symptoms, especially multiple symptoms together, seek immediate medical care. Preeclampsia can progress rapidly from mild to life-threatening in hours. Better to be cautious than sorry.</p>
        <div class="emergency-numbers">
          <div class="emergency-number-item">
            <span class="number-label">Emergency Ambulance:</span>
            <span class="number-value">108 or 102</span>
          </div>
          <div class="emergency-number-item">
            <span class="number-label">Women's Helpline:</span>
            <span class="number-value">181</span>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Info Panel -->
  <div class="info-panel" id="infoPanel">
    <button class="close-panel" onclick="closePanel()">✕</button>
    <div class="panel-header">
      <div class="panel-icon" id="panelIcon"></div>
      <div class="panel-title-block">
        <h2 id="panelTitle"></h2>
        <p id="panelSubtitle"></p>
      </div>
    </div>
    <div class="panel-content" id="panelContent"></div>
  </div>

  <!-- Backdrop -->
  <div class="backdrop" id="backdrop" onclick="closePanel()"></div>

  <!-- ========================================================
       NEW MOM SECTIONS — Evidence-based from WHO, ACOG, ICMR,
       Johns Hopkins, Harvard T.H. Chan School of Public Health
  ======================================================== -->
  <style>
    /* New Mom Sections Shared CSS */
    .new-mom-section {
      padding: 5rem 0;
      overflow: hidden;
    }
    .new-mom-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }
    .new-mom-section-label {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(236,64,122,0.08);
      border: 1px solid rgba(236,64,122,0.15);
      color: #d81b60;
      padding: 0.35rem 0.9rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: 1rem;
      display: block;
      text-align: center;
    }
    .new-mom-section-title {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: clamp(1.8rem, 4vw, 3rem);
      font-weight: 900;
      line-height: 1.15;
      margin-bottom: 0.75rem;
      color: #212121;
      text-align: center;
    }
    .new-mom-section-title .em {
      background: linear-gradient(135deg, #ec407a, #ad1457);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: nm-shimmer 3s ease-in-out infinite;
    }
    @keyframes nm-shimmer {
      0%,100%{filter:brightness(1) drop-shadow(0 2px 8px rgba(236,64,122,.2));}
      50%{filter:brightness(1.25) drop-shadow(0 4px 16px rgba(236,64,122,.4));}
    }
    .new-mom-section-sub {
      font-size: 1.05rem;
      color: #666;
      max-width: 600px;
      line-height: 1.8;
      margin-bottom: 3rem;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }
    /* ===== POSTPARTUM PE SECTION ===== */
    .postpartum-pe-section {
      background: linear-gradient(150deg, #fff5f8 0%, #fce4ec 60%, #ede7f6 100%);
    }
    .postpartum-timeline {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      position: relative;
      padding-left: 2rem;
    }
    .postpartum-timeline::before {
      content: '';
      position: absolute;
      left: 0.75rem;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(180deg, #ec407a, #ad1457);
      border-radius: 2px;
    }
    .timeline-pe-item {
      background: white;
      border-radius: 18px;
      padding: 1.5rem 1.5rem 1.5rem 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.07);
      border: 1px solid rgba(236,64,122,0.1);
      position: relative;
      transition: all 0.3s ease;
    }
    .timeline-pe-item:hover {
      transform: translateX(6px);
      box-shadow: 0 8px 30px rgba(236,64,122,0.15);
    }
    .timeline-pe-item::before {
      content: '';
      position: absolute;
      left: -1.7rem;
      top: 1.5rem;
      width: 14px;
      height: 14px;
      background: linear-gradient(135deg, #ec407a, #ad1457);
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 8px rgba(236,64,122,0.35);
    }
    .timeline-pe-period {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      background: rgba(236,64,122,0.1);
      color: #d81b60;
      padding: 0.25rem 0.75rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.05em;
      margin-bottom: 0.6rem;
    }
    .timeline-pe-item h4 {
      font-family: 'Playfair Display', serif;
      font-size: 1.1rem;
      margin-bottom: 0.4rem;
      color: #212121;
    }
    .timeline-pe-item p {
      font-size: 0.9rem;
      color: #666;
      line-height: 1.65;
    }
    .timeline-pe-item.alert {
      border-left: 4px solid #ef5350;
      background: linear-gradient(135deg, #fff5f5, white);
    }

    /* ===== RECOVERY SECTION ===== */
    .recovery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    .postpartum-split-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: start;
    }
    .recovery-card {
      background: white;
      border-radius: 22px;
      padding: 2rem;
      box-shadow: 0 6px 24px rgba(0,0,0,0.07);
      border: 1px solid rgba(236,64,122,0.1);
      position: relative;
      overflow: hidden;
      transition: all 0.35s ease;
    }
    .recovery-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 4px;
      background: var(--rc-color, linear-gradient(90deg, #ec407a, #ad1457));
    }
    .recovery-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 16px 40px rgba(236,64,122,0.15);
    }
    .recovery-card-icon {
      width: 52px; height: 52px;
      border-radius: 14px;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.4rem;
      margin-bottom: 1rem;
    }
    .recovery-card h4 {
      font-family: 'Playfair Display', serif;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      color: #212121;
    }
    .recovery-card p {
      font-size: 0.88rem;
      color: #666;
      line-height: 1.65;
      margin-bottom: 1rem;
    }
    .recovery-tips {
      list-style: none; padding: 0;
      display: flex; flex-direction: column; gap: 0.4rem;
    }
    .recovery-tips li {
      font-size: 0.82rem; color: #555;
      padding: 0.4rem 0.7rem;
      background: var(--rc-bg, rgba(236,64,122,0.06));
      border-radius: 8px;
      padding-left: 1.5rem;
      position: relative;
    }
    .recovery-tips li::before {
      content: '✓';
      position: absolute; left: 0.5rem;
      color: var(--rc-dot, #ec407a);
      font-weight: 700; font-size: 0.8rem;
    }
    .recovery-source {
      margin-top: 0.75rem;
      font-size: 0.7rem;
      color: #999;
      font-style: italic;
    }

    /* ===== MENTAL HEALTH SECTION ===== */
    .mental-health-pe-section {
      background: linear-gradient(150deg, #ede7f6 0%, #fce4ec 100%);
    }
    .mental-health-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2.5rem;
      align-items: start;
    }
    .mental-stat-block {
      background: white;
      border-radius: 22px;
      padding: 2rem;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      margin-bottom: 1.5rem;
    }
    .mental-stat-block h4 {
      font-family: 'Playfair Display', serif;
      font-size: 1.15rem;
      margin-bottom: 0.75rem;
      color: #212121;
    }
    .big-stat-pink {
      font-size: 3rem;
      font-weight: 900;
      font-family: 'Playfair Display', serif;
      background: linear-gradient(135deg, #ec407a, #ad1457);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1;
      display: block;
      margin-bottom: 0.25rem;
    }
    .mental-symptom-list {
      display: flex; flex-direction: column; gap: 0.75rem;
    }
    .mental-symptom-item {
      display: flex; gap: 0.75rem; align-items: flex-start;
      background: white; border-radius: 14px; padding: 1rem 1.2rem;
      box-shadow: 0 3px 12px rgba(0,0,0,0.06);
      border-left: 4px solid var(--ms-color, #ec407a);
    }
    .mental-symptom-icon { font-size: 1.3rem; flex-shrink: 0; }
    .mental-symptom-item h5 { font-size: 0.92rem; font-weight: 700; margin-bottom: 0.2rem; }
    .mental-symptom-item p { font-size: 0.82rem; color: #666; line-height: 1.55; }
    .helpline-box {
      background: linear-gradient(135deg, #ec407a, #ad1457);
      color: white;
      border-radius: 20px;
      padding: 1.5rem 2rem;
      margin-top: 1.5rem;
      display: flex; align-items: center; gap: 1rem;
    }
    .helpline-box .helpline-icon { font-size: 2rem; }
    .helpline-box h5 { font-size: 1rem; font-weight: 700; margin-bottom: 0.25rem; }
    .helpline-box p { font-size: 0.85rem; opacity: 0.9; }
    .helpline-number {
      font-size: 1.8rem; font-weight: 900;
      font-family: 'Courier New', monospace;
    }

    /* ===== LONG-TERM RISKS SECTION ===== */
    .longterm-pe-section {
      background: linear-gradient(150deg, #f5f7fa 0%, #fff5f8 100%);
    }
    .longterm-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.5rem;
    }
    .longterm-card {
      background: white;
      border-radius: 20px;
      padding: 1.8rem;
      box-shadow: 0 6px 22px rgba(0,0,0,0.07);
      border: 1px solid rgba(0,0,0,0.05);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .longterm-card:hover { transform: translateY(-5px); box-shadow: 0 14px 38px rgba(0,0,0,0.12); }
    .longterm-card-icon { font-size: 2.2rem; margin-bottom: 0.75rem; display: block; }
    .longterm-card h4 {
      font-family: 'Playfair Display', serif;
      font-size: 1.05rem; margin-bottom: 0.5rem; color: #212121;
    }
    .longterm-card p { font-size: 0.85rem; color: #666; line-height: 1.65; margin-bottom: 0.75rem; }
    .risk-badge {
      display: inline-flex; align-items: center; gap: 0.3rem;
      padding: 0.25rem 0.7rem; border-radius: 50px;
      font-size: 0.72rem; font-weight: 700;
    }
    .risk-badge.high { background: rgba(239,83,80,0.12); color: #c62828; }
    .risk-badge.moderate { background: rgba(255,167,38,0.12); color: #e65100; }
    .risk-badge.low { background: rgba(102,187,106,0.12); color: #2e7d32; }
    .longterm-source { margin-top: 0.6rem; font-size: 0.68rem; color: #aaa; font-style: italic; }
    .monitoring-schedule-box {
      background: white;
      border-radius: 22px;
      padding: 2rem;
      margin-top: 2.5rem;
      box-shadow: 0 6px 24px rgba(0,0,0,0.07);
      border: 2px solid rgba(236,64,122,0.15);
    }
    .monitoring-schedule-box h4 {
      font-family: 'Playfair Display', serif;
      font-size: 1.2rem; margin-bottom: 1.5rem;
      display: flex; align-items: center; gap: 0.75rem;
    }
    .schedule-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }
    .schedule-item {
      background: rgba(236,64,122,0.05);
      border-radius: 14px;
      padding: 1.2rem;
      border-left: 4px solid #ec407a;
      text-align: center;
    }
    .schedule-time { font-size: 0.85rem; font-weight: 700; color: #d81b60; margin-bottom: 0.4rem; }
    .schedule-action { font-size: 0.82rem; color: #555; line-height: 1.5; }

    /* ===== BREASTFEEDING AFTER PE SECTION ===== */
    .bf-pe-section {
      background: linear-gradient(150deg, #e8f5e9 0%, #fce4ec 100%);
    }
    .bf-pe-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: start;
    }
    .bf-pe-card {
      background: white;
      border-radius: 22px;
      padding: 2rem;
      box-shadow: 0 6px 24px rgba(0,0,0,0.07);
      border: 1px solid rgba(236,64,122,0.1);
      margin-bottom: 1.5rem;
    }
    .bf-pe-card h4 {
      font-family: 'Playfair Display', serif;
      font-size: 1.1rem;
      margin-bottom: 0.75rem;
      display: flex; align-items: center; gap: 0.5rem;
    }
    .bf-pe-card p { font-size: 0.88rem; color: #666; line-height: 1.7; }
    .bf-safe-list {
      list-style: none; padding: 0;
      display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.75rem;
    }
    .bf-safe-list li {
      font-size: 0.85rem; color: #333;
      padding: 0.5rem 0.75rem 0.5rem 2rem;
      background: rgba(102,187,106,0.08);
      border-radius: 10px;
      position: relative;
    }
    .bf-safe-list li::before { content: '✓'; position: absolute; left: 0.6rem; color: #2e7d32; font-weight: 700; }
    .bf-caution-list li::before { content: '⚠'; left: 0.4rem; color: #e65100; }
    .bf-caution-list li { background: rgba(255,167,38,0.08); }
    .bf-who-badge {
      display: inline-flex; align-items: center; gap: 0.5rem;
      background: linear-gradient(135deg, #43a047, #2e7d32);
      color: white; padding: 0.5rem 1.2rem; border-radius: 50px;
      font-size: 0.8rem; font-weight: 700; margin-top: 1rem;
    }

    /* Mobile responsive new sections */
    @media (max-width: 768px) {
      .mental-health-grid, .bf-pe-grid { grid-template-columns: 1fr; gap: 1.5rem; }
      .recovery-grid { grid-template-columns: 1fr; }
      .longterm-grid { grid-template-columns: 1fr; }
      .schedule-grid { grid-template-columns: 1fr 1fr; }
      .new-mom-inner { padding: 0 1rem; }
      .postpartum-split-grid { grid-template-columns: 1fr; gap: 2rem; }
    }
    @media (max-width: 480px) {
      .new-mom-section { padding: 3rem 0; }
      .schedule-grid { grid-template-columns: 1fr; }
      .big-stat-pink { font-size: 2.2rem; }
    }
  </style>

  <!-- SECTION A: POSTPARTUM PREECLAMPSIA — For New Moms -->
  <section class="new-mom-section postpartum-pe-section">
    <div class="new-mom-inner">
      <span class="new-mom-section-label"><i class="fa-solid fa-clock-rotate-left"></i> After Delivery</span>
      <h2 class="new-mom-section-title">Preeclampsia Can <span class="em">Still Occur After Birth</span></h2>
      <p class="new-mom-section-sub">According to ACOG and WHO, up to 44% of preeclampsia-related deaths occur in the postpartum period. New moms must remain vigilant even after delivery — especially in the first 6 weeks.</p>
      <div class="postpartum-split-grid">
        <div>
          <div class="postpartum-timeline">
            <div class="timeline-pe-item">
              <div class="timeline-pe-period"><i class="fa-solid fa-clock"></i> First 48 Hours After Delivery</div>
              <h4>Highest Risk Window</h4>
              <p>The first 2 days postpartum carry the highest risk for new-onset preeclampsia or eclampsia. Blood pressure can spike even in women who had no issues during pregnancy. Continue BP monitoring in hospital as per ACOG guidelines (2020).</p>
            </div>
            <div class="timeline-pe-item alert">
              <div class="timeline-pe-period" style="background:rgba(239,83,80,0.12);color:#c62828;"><i class="fa-solid fa-triangle-exclamation"></i> Days 3–7</div>
              <h4>Late Postpartum Preeclampsia</h4>
              <p>After hospital discharge, new moms may experience delayed-onset preeclampsia. Symptoms include severe headache, visual changes, and upper abdominal pain. A Harvard study found many women are unaware this can happen after going home.</p>
            </div>
            <div class="timeline-pe-item">
              <div class="timeline-pe-period"><i class="fa-solid fa-calendar-days"></i> Weeks 2–6</div>
              <h4>Extended Monitoring Period</h4>
              <p>ACOG recommends BP monitoring within 3–10 days postpartum for all women who had gestational hypertension or preeclampsia. WHO similarly endorses structured postnatal care visits at days 3, 7, and 6 weeks to monitor maternal BP.</p>
            </div>
            <div class="timeline-pe-item">
              <div class="timeline-pe-period"><i class="fa-solid fa-house-medical"></i> At-Home Alert Signs</div>
              <h4>When to Call Your Doctor Immediately</h4>
              <p>Per ICMR guidelines for Indian mothers: systolic BP ≥150 or diastolic ≥100 at home; severe headache unrelieved by paracetamol; sudden swelling of face or hands; vision changes; upper right belly pain; shortness of breath.</p>
            </div>
          </div>
        </div>
        <div>
          <div style="background:white;border-radius:24px;padding:2rem;box-shadow:0 8px 30px rgba(0,0,0,0.08);border:2px solid rgba(236,64,122,0.12);margin-bottom:1.5rem;">
            <h4 style="font-family:'Playfair Display',serif;font-size:1.15rem;margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem;"><span>📊</span> Postpartum PE — Key Facts</h4>
            <div style="display:flex;flex-direction:column;gap:0.75rem;">
              <div style="display:flex;justify-content:space-between;align-items:center;padding:0.75rem 1rem;background:rgba(236,64,122,0.06);border-radius:12px;">
                <span style="font-size:0.88rem;font-weight:600;">Onset after delivery</span>
                <span style="font-weight:800;color:#d81b60;">Up to 6 weeks</span>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:0.75rem 1rem;background:rgba(236,64,122,0.06);border-radius:12px;">
                <span style="font-size:0.88rem;font-weight:600;">% of PE deaths postpartum</span>
                <span style="font-weight:800;color:#d81b60;">~44%</span>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:0.75rem 1rem;background:rgba(236,64,122,0.06);border-radius:12px;">
                <span style="font-size:0.88rem;font-weight:600;">Peak risk period</span>
                <span style="font-weight:800;color:#d81b60;">First 48–72 hrs</span>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:0.75rem 1rem;background:rgba(236,64,122,0.06);border-radius:12px;">
                <span style="font-size:0.88rem;font-weight:600;">ACOG recommended BP check</span>
                <span style="font-weight:800;color:#d81b60;">Days 3–10</span>
              </div>
            </div>
            <p style="font-size:0.72rem;color:#aaa;margin-top:1rem;font-style:italic;">Sources: ACOG Practice Bulletin #222 (2020); WHO Recommendations on Postnatal Care (2022)</p>
          </div>
          <div style="background:linear-gradient(135deg,#fce4ec,#fff5f8);border-radius:20px;padding:1.5rem;border-left:5px solid #ef5350;">
            <h5 style="font-size:0.95rem;font-weight:700;color:#c62828;margin-bottom:0.75rem;">🚨 India-Specific Alert</h5>
            <p style="font-size:0.85rem;color:#555;line-height:1.7;">India accounts for 16% of global maternal deaths, with hypertensive disorders being a leading cause (ICMR, 2023). Many Indian women are discharged within 24–48 hours of delivery — making awareness of postpartum PE symptoms critically important for all new mothers.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION B: RECOVERY AFTER PREECLAMPSIA -->
  <section class="new-mom-section" style="background:linear-gradient(150deg,#f5f7fa,#fff8fb);">
    <div class="new-mom-inner">
      <span class="new-mom-section-label"><i class="fa-solid fa-heart-pulse"></i> Recovery</span>
      <h2 class="new-mom-section-title">Recovering <span class="em">Well After Preeclampsia</span></h2>
      <p class="new-mom-section-sub">Most women recover completely within a few weeks, but understanding what to expect — and how to support healing — is essential. Guidance from Johns Hopkins Medicine, ACOG, and ICMR informs every recommendation here.</p>
      <div class="recovery-grid">
        <div class="recovery-card" style="--rc-color:linear-gradient(90deg,#ec407a,#f48fb1);--rc-bg:rgba(236,64,122,0.06);--rc-dot:#ec407a;">
          <div class="recovery-card-icon" style="background:linear-gradient(135deg,#fce4ec,#f8bbd9);font-size:1.5rem;">🩺</div>
          <h4>Blood Pressure Normalisation</h4>
          <p>BP usually returns to normal within 6–12 weeks postpartum. Most women can discontinue antihypertensive medications under medical supervision by this time.</p>
          <ul class="recovery-tips">
            <li>Monitor BP twice daily at home until stable</li>
            <li>Target BP: &lt;140/90 mmHg before stopping meds</li>
            <li>Low-sodium diet (≤2g/day) aids recovery</li>
            <li>Follow-up with doctor at 6-week postnatal visit</li>
          </ul>
          <p class="recovery-source">Source: ACOG Practice Bulletin #222; Johns Hopkins Medicine</p>
        </div>
        <div class="recovery-card" style="--rc-color:linear-gradient(90deg,#43a047,#81c784);--rc-bg:rgba(67,160,71,0.06);--rc-dot:#43a047;">
          <div class="recovery-card-icon" style="background:linear-gradient(135deg,#e8f5e9,#c8e6c9);font-size:1.5rem;">🥗</div>
          <h4>Nutrition & Healing Diet</h4>
          <p>Adequate nutrition accelerates organ recovery. Focus on foods that support kidney and liver healing — organs most impacted by preeclampsia.</p>
          <ul class="recovery-tips" style="--rc-dot:#43a047;--rc-bg:rgba(67,160,71,0.06);">
            <li>Increase potassium: bananas, sweet potato, dal</li>
            <li>Antioxidant-rich foods: amla, tomatoes, leafy greens</li>
            <li>Adequate protein: 70–80g/day while breastfeeding</li>
            <li>Stay hydrated: 8–10 glasses of water daily</li>
            <li>Limit processed and packaged foods (high sodium)</li>
          </ul>
          <p class="recovery-source">Source: WHO Nutrition Guidance 2023; Harvard T.H. Chan School of Public Health</p>
        </div>
        <div class="recovery-card" style="--rc-color:linear-gradient(90deg,#7c3aed,#a78bfa);--rc-bg:rgba(124,58,237,0.06);--rc-dot:#7c3aed;">
          <div class="recovery-card-icon" style="background:linear-gradient(135deg,#ede7f6,#e1bee7);font-size:1.5rem;">🧘</div>
          <h4>Rest & Physical Recovery</h4>
          <p>Your body needs time to recover from the physiological stress of preeclampsia. Avoid overexertion in the first 6 weeks — even light activity should be physician-approved.</p>
          <ul class="recovery-tips" style="--rc-dot:#7c3aed;--rc-bg:rgba(124,58,237,0.06);">
            <li>Prioritise sleep — ask for family support</li>
            <li>Gentle walking from week 2 (if BP stable)</li>
            <li>Avoid lifting heavy objects for 6 weeks</li>
            <li>Resume exercise only after doctor clearance</li>
          </ul>
          <p class="recovery-source">Source: ACOG 2020; Sibai BM, NEJM 2005</p>
        </div>
        <div class="recovery-card" style="--rc-color:linear-gradient(90deg,#0288d1,#4fc3f7);--rc-bg:rgba(2,136,209,0.06);--rc-dot:#0288d1;">
          <div class="recovery-card-icon" style="background:linear-gradient(135deg,#e3f2fd,#b3e5fc);font-size:1.5rem;">💊</div>
          <h4>Medications After PE</h4>
          <p>Postpartum antihypertensive therapy is often continued and is safe with breastfeeding when prescribed correctly. Never stop medications abruptly.</p>
          <ul class="recovery-tips" style="--rc-dot:#0288d1;--rc-bg:rgba(2,136,209,0.06);">
            <li>Labetalol, nifedipine: considered safe with breastfeeding</li>
            <li>Aspirin (75–150mg) may be advised for future pregnancies</li>
            <li>Calcium supplementation if dietary intake low</li>
            <li>Discuss medication plan at 6-week postnatal visit</li>
          </ul>
          <p class="recovery-source">Source: ACOG; NHS Postnatal Guidelines 2023</p>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION C: MENTAL HEALTH AFTER PE -->
  <section class="new-mom-section mental-health-pe-section">
    <div class="new-mom-inner">
      <span class="new-mom-section-label"><i class="fa-solid fa-brain"></i> Mental Wellbeing</span>
      <h2 class="new-mom-section-title">Your Mental <span class="em">Health After Preeclampsia</span></h2>
      <p class="new-mom-section-sub">Experiencing preeclampsia can be traumatic. Research from Lancet, Harvard, and WHO shows women who had preeclampsia have significantly elevated rates of PTSD, postpartum depression, and anxiety — all of which are treatable.</p>
      <div class="mental-health-grid">
        <div>
          <div class="mental-stat-block">
            <h4>The Emotional Impact is Real — and Common</h4>
            <span class="big-stat-pink">3×</span>
            <p style="font-size:0.88rem;color:#555;line-height:1.7;">Women who experienced preeclampsia are 3 times more likely to develop postpartum PTSD compared to those with uncomplicated deliveries (Furuta et al., 2014; Lancet Psychiatry).</p>
          </div>
          <div class="mental-stat-block">
            <h4>Postpartum Depression After PE</h4>
            <span class="big-stat-pink">25%</span>
            <p style="font-size:0.88rem;color:#555;line-height:1.7;">Up to 25% of preeclampsia survivors experience clinically significant postpartum depression within 6 months of delivery (Harvard T.H. Chan; WHO Mental Health Report 2022). Early screening is essential.</p>
          </div>
          <div class="helpline-box">
            <div class="helpline-icon">📞</div>
            <div>
              <h5>iCall India — Mental Health Helpline</h5>
              <p>Free, confidential counselling for new mothers</p>
              <div class="helpline-number">9152987821</div>
            </div>
          </div>
        </div>
        <div>
          <div class="mental-symptom-list">
            <div class="mental-symptom-item" style="--ms-color:#7c3aed;">
              <span class="mental-symptom-icon">😰</span>
              <div>
                <h5>Post-Traumatic Stress (PTSD)</h5>
                <p>Flashbacks to a frightening delivery, hypervigilance about baby's health, difficulty sleeping, emotional numbness. Common after emergency C-sections, ICU stays, or severe PE. Treatment: trauma-focused CBT or EMDR therapy.</p>
              </div>
            </div>
            <div class="mental-symptom-item" style="--ms-color:#ec407a;">
              <span class="mental-symptom-icon">😢</span>
              <div>
                <h5>Postpartum Depression (PPD)</h5>
                <p>Persistent sadness, loss of interest in baby or daily activities, hopelessness, difficulty bonding. Edinburgh Postnatal Depression Scale (EPDS) screening is recommended at 4–6 weeks and 3 months postpartum (ACOG 2018).</p>
              </div>
            </div>
            <div class="mental-symptom-item" style="--ms-color:#e65100;">
              <span class="mental-symptom-icon">😟</span>
              <div>
                <h5>Health Anxiety</h5>
                <p>Constant fear that preeclampsia will return, excessive BP monitoring, reluctance to discharge. Validated screening tools (GAD-7) can assess anxiety severity. Mindfulness-based interventions show effectiveness (NICE Guidelines).</p>
              </div>
            </div>
            <div class="mental-symptom-item" style="--ms-color:#43a047;">
              <span class="mental-symptom-icon">💬</span>
              <div>
                <h5>How to Seek Help in India</h5>
                <p>Talk to your OBGYN or ANM worker. Vandrevala Foundation: 1860-2662-345 (24×7). iCall: 9152987821. NIMHANS e-Sanjeevani: free online psychiatric consultation available through government portal.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION D: LONG-TERM RISKS — WHAT EVERY PE SURVIVOR MUST KNOW -->
  <section class="new-mom-section longterm-pe-section">
    <div class="new-mom-inner">
      <span class="new-mom-section-label"><i class="fa-solid fa-chart-line"></i> Long-Term Health</span>
      <h2 class="new-mom-section-title">Your Future <span class="em">Health After Preeclampsia</span></h2>
      <p class="new-mom-section-sub">Preeclampsia is a powerful marker of future cardiovascular risk. The American Heart Association (AHA), ACOG, and WHO all recommend lifelong monitoring for PE survivors — but knowledge is power, and most risks are highly preventable.</p>
      <div class="longterm-grid">
        <div class="longterm-card">
          <span class="longterm-card-icon">❤️</span>
          <h4>Cardiovascular Disease</h4>
          <p>Women who had preeclampsia have a 2–4× higher lifetime risk of hypertension and ischemic heart disease. Risk begins to increase within 10 years of affected pregnancy.</p>
          <span class="risk-badge high"><i class="fa-solid fa-arrow-up"></i> High Risk — 2–4× elevated</span>
          <p class="longterm-source">AHA Scientific Statement 2021; Bellamy et al., BMJ 2007</p>
        </div>
        <div class="longterm-card">
          <span class="longterm-card-icon">🧠</span>
          <h4>Stroke Risk</h4>
          <p>PE history doubles the lifetime risk of stroke, particularly ischaemic stroke in women under 65. Tight BP control and regular neurological check-ups are recommended.</p>
          <span class="risk-badge high"><i class="fa-solid fa-arrow-up"></i> 2× elevated lifetime risk</span>
          <p class="longterm-source">Bushnell C et al., Stroke 2014; AHA/ASA Guidelines</p>
        </div>
        <div class="longterm-card">
          <span class="longterm-card-icon">🫘</span>
          <h4>Kidney Disease</h4>
          <p>Preeclampsia can cause subclinical kidney injury. Women have a 5× increased risk of end-stage renal disease over their lifetime. Annual urinalysis is advisable.</p>
          <span class="risk-badge moderate"><i class="fa-solid fa-circle-exclamation"></i> Moderate — monitor annually</span>
          <p class="longterm-source">Vikse BE et al., NEJM 2008; Johns Hopkins Medicine</p>
        </div>
        <div class="longterm-card">
          <span class="longterm-card-icon">🍬</span>
          <h4>Type 2 Diabetes</h4>
          <p>PE increases risk of insulin resistance and type 2 diabetes, particularly in women who were overweight or had gestational diabetes alongside PE.</p>
          <span class="risk-badge moderate"><i class="fa-solid fa-circle-exclamation"></i> Moderate — lifestyle modifiable</span>
          <p class="longterm-source">Lykke JA et al., Diabetes Care 2009; Harvard T.H. Chan</p>
        </div>
        <div class="longterm-card">
          <span class="longterm-card-icon">🤰</span>
          <h4>Future Pregnancy Risk</h4>
          <p>Women with a history of PE have a 15–25% risk of recurrence in future pregnancies. Low-dose aspirin (75–150mg from 12 weeks) reduces recurrence risk by ~24%.</p>
          <span class="risk-badge moderate"><i class="fa-solid fa-circle-exclamation"></i> Recurrence: 15–25%</span>
          <p class="longterm-source">ACOG Practice Bulletin #222; Rolnik et al., NEJM 2017</p>
        </div>
        <div class="longterm-card">
          <span class="longterm-card-icon">🛡️</span>
          <h4>How to Protect Yourself</h4>
          <p>These risks are substantially reducible through lifestyle and monitoring. PE history is a clinical risk factor — share it with every doctor you see for life.</p>
          <span class="risk-badge low"><i class="fa-solid fa-shield-halved"></i> Prevention is highly effective</span>
          <p class="longterm-source">AHA 2021; ACOG; WHO NCD Guidelines 2023</p>
        </div>
      </div>
      <div class="monitoring-schedule-box">
        <h4><span>📅</span> Recommended Monitoring Schedule for PE Survivors</h4>
        <div class="schedule-grid">
          <div class="schedule-item">
            <div class="schedule-time">6 Weeks Postpartum</div>
            <div class="schedule-action">Full BP check, kidney function, EPDS mental health screening</div>
          </div>
          <div class="schedule-item">
            <div class="schedule-time">6 Months Postpartum</div>
            <div class="schedule-action">BP, fasting blood sugar, lipid panel</div>
          </div>
          <div class="schedule-item">
            <div class="schedule-time">Annual Review</div>
            <div class="schedule-action">Cardiovascular risk assessment, BMI, urinalysis, BP</div>
          </div>
          <div class="schedule-item">
            <div class="schedule-time">Before Next Pregnancy</div>
            <div class="schedule-action">Preconception counselling, aspirin prophylaxis discussion, BP optimisation</div>
          </div>
        </div>
        <p style="font-size:0.75rem;color:#aaa;margin-top:1rem;font-style:italic;">Per ACOG Practice Bulletin #222, AHA 2021, and WHO Recommendations for Postnatal Care 2022</p>
      </div>
    </div>
  </section>

  <!-- SECTION E: BREASTFEEDING AFTER PREECLAMPSIA -->
  <section class="new-mom-section bf-pe-section">
    <div class="new-mom-inner">
      <span class="new-mom-section-label"><i class="fa-solid fa-heart"></i> Breastfeeding</span>
      <h2 class="new-mom-section-title">Breastfeeding Safely<span class="em"> After Preeclampsia</span></h2>
      <p class="new-mom-section-sub">WHO recommends exclusive breastfeeding for 6 months for all infants — including those born to mothers with preeclampsia. With the right support and safe medications, most PE survivors can and should breastfeed.</p>
      <div class="bf-pe-grid">
        <div>
          <div class="bf-pe-card">
            <h4><span>🤱</span> Breastfeeding Benefits for PE Moms</h4>
            <p>Research from University College London (Kirkpatrick et al., 2020) found that breastfeeding for 3+ months significantly reduces a PE survivor's long-term cardiovascular risk. It also lowers postpartum hypertension via prolactin-mediated vasodilatation.</p>
            <ul class="bf-safe-list">
              <li>Reduces maternal BP through prolactin effects</li>
              <li>Associated with lower risk of future hypertension</li>
              <li>Promotes postpartum weight loss</li>
              <li>Provides optimal nutrition and immunity for baby</li>
              <li>Strengthens mother-baby bonding (helps prevent PPD)</li>
            </ul>
            <span class="bf-who-badge">✓ WHO — Exclusive BF recommended for 6 months</span>
          </div>
          <div class="bf-pe-card">
            <h4><span>💊</span> Medication Safety While Breastfeeding</h4>
            <p>Most BP medications used after preeclampsia are safe with breastfeeding. Always confirm with your doctor before starting or stopping any medication.</p>
            <ul class="bf-safe-list">
              <li>Labetalol — widely considered safe (AAP approved)</li>
              <li>Nifedipine — minimal transfer into breast milk</li>
              <li>Enalapril — low infant exposure, generally safe</li>
              <li>Methyldopa — generally considered compatible</li>
            </ul>
            <ul class="bf-safe-list bf-caution-list" style="margin-top:0.75rem;">
              <li>Atenolol — use with caution (infant bradycardia risk)</li>
              <li>ACE inhibitors — caution in premature infants</li>
            </ul>
            <p style="font-size:0.72rem;color:#aaa;margin-top:0.75rem;font-style:italic;">Source: LactMed (NIH); ACOG; Hale's Medications & Mothers' Milk</p>
          </div>
        </div>
        <div>
          <div class="bf-pe-card">
            <h4><span>🤱</span> Special Challenges PE Moms May Face</h4>
            <p>Preeclampsia — especially when associated with early delivery or high-stress birth — can affect breastfeeding initiation. Understanding these challenges helps moms seek the right support.</p>
            <ul class="bf-safe-list bf-caution-list">
              <li>Delayed milk coming in (especially after C-section or preterm)</li>
              <li>Baby in NICU may delay direct breastfeeding</li>
              <li>Maternal fatigue from medications or recovery</li>
              <li>Stress, PTSD, or PPD can affect milk supply</li>
            </ul>
          </div>
          <div class="bf-pe-card">
            <h4><span>💡</span> Tips for Successful Breastfeeding After PE</h4>
            <p>With support, most challenges can be overcome. La Leche League International and UNICEF both emphasise that breastfeeding support in the first 72 hours is crucial to long-term success.</p>
            <ul class="bf-safe-list">
              <li>Request lactation consultant support within 24hrs of delivery</li>
              <li>Skin-to-skin contact as early as medically possible</li>
              <li>Pump frequently if baby is in NICU to establish supply</li>
              <li>Stay hydrated and eat calorie-dense meals</li>
              <li>Accept help at home to maximise rest</li>
              <li>Ask about galactagogues (fenugreek, moringa) — cultural support + evidence-based</li>
            </ul>
            <div style="background:rgba(236,64,122,0.06);border-radius:12px;padding:1rem;margin-top:1rem;border-left:4px solid #ec407a;">
              <p style="font-size:0.82rem;color:#555;margin:0;"><strong>India Resources:</strong> Call the LLLI India helpline or visit a VBAC-friendly hospital with trained lactation support. Many government hospitals now have designated breastfeeding counsellors (NHM programme).</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Emergency Footer -->

  <!-- BLOOD PRESSURE TRACKER MODAL -->
  <script src="preeclampsia_education.js"></script>

<!-- FOOTER -->
<style>
  :root {
    --bg-footer:     #1e1a1e;
    --bg-bottom:     #161316;
    --pink-primary:  #e8517a;
    --pink-soft:     #f0748e;
    --text-main-f:   #c9bfc9;
    --text-muted-f:  #7c7080;
    --divider-f:     rgba(232,81,122,0.18);
    --font-display-f:'Playfair Display', Georgia, serif;
    --font-body-f:   'DM Sans', sans-serif;
  }
  footer.ns-footer{background:var(--bg-footer);color:var(--text-main-f);font-family:var(--font-body-f);border-top:1px solid var(--divider-f);}
  .footer-main{max-width:1200px;margin:0 auto;padding:56px 32px 48px;display:grid;grid-template-columns:repeat(4,1fr);gap:40px;}
  .footer-col h3{font-family:var(--font-display-f);font-size:1.05rem;font-weight:600;color:var(--pink-primary);margin-bottom:18px;letter-spacing:.01em;}
  .footer-col p{font-size:.875rem;line-height:1.75;color:var(--text-main-f);font-weight:300;}
  .footer-col ul{list-style:none;}
  .footer-col ul li{font-size:.875rem;color:var(--text-main-f);padding:5px 0;font-weight:300;position:relative;padding-left:14px;transition:color .2s;}
  .footer-col ul li::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:5px;height:5px;border-radius:50%;background:var(--pink-primary);opacity:.5;}
  .footer-col ul li:hover{color:var(--pink-soft);}
  .disclaimer-text{font-size:.875rem;line-height:1.75;color:var(--text-main-f);font-weight:300;}
  .emergency-alert{font-size:.875rem;line-height:1.7;color:var(--pink-primary);font-weight:500;}
  .emergency-alert strong{font-weight:600;}
  .footer-meta{border-top:1px solid var(--divider-f);max-width:1200px;margin:0 auto;padding:28px 32px;text-align:center;}
  .footer-meta .meta-line{font-size:.8rem;color:var(--text-muted-f);letter-spacing:.04em;margin-bottom:10px;}
  .footer-meta .meta-line .sep{color:var(--pink-primary);margin:0 6px;}
  .footer-meta .tagline{font-size:.82rem;color:var(--text-muted-f);display:flex;align-items:center;justify-content:center;gap:6px;}
  .footer-meta .tagline .heart{color:var(--pink-primary);font-size:1rem;animation:footerPulse 2s ease-in-out infinite;}
  @keyframes footerPulse{0%,100%{transform:scale(1);opacity:1;}50%{transform:scale(1.25);opacity:.8;}}
  .footer-bottom{background:var(--bg-bottom);border-top:1px solid rgba(255,255,255,0.04);}
  .footer-bottom-inner{max-width:1200px;margin:0 auto;padding:22px 32px;display:flex;flex-direction:column;align-items:center;gap:10px;}
  .footer-links{display:flex;gap:36px;flex-wrap:wrap;justify-content:center;}
  .footer-links a{font-size:.82rem;color:var(--text-muted-f);text-decoration:none;letter-spacing:.03em;transition:color .2s;}
  .footer-links a:hover{color:var(--pink-soft);}
  .footer-copy{font-size:.78rem;color:var(--text-muted-f);opacity:.7;letter-spacing:.02em;}
  @media(max-width:900px){.footer-main{grid-template-columns:repeat(2,1fr);gap:32px;}}
  @media(max-width:540px){.footer-main{grid-template-columns:1fr;padding:40px 20px 32px;}.footer-meta{padding:20px;}.footer-bottom-inner{padding:18px 20px;}.footer-links{gap:20px;}}
</style>

<footer class="ns-footer" aria-label="Site footer">
  <div class="footer-main">
    <div class="footer-col">
      <h3>About This Guide</h3>
      <p>Comprehensive, evidence-based information synthesized from WHO, ACOG, ICMR guidelines, peer-reviewed research, and NFHS-5 data (724,115+ women).</p>
    </div>
    <div class="footer-col">
      <h3>Evidence Sources</h3>
      <ul>
        <li>World Health Organization</li>
        <li>ACOG Guidelines</li>
        <li>ICMR India</li>
        <li>NFHS-5 Survey</li>
      </ul>
    </div>
    <div class="footer-col">
      <h3>Important Disclaimer</h3>
      <p class="disclaimer-text">This provides general information only. Each pregnancy is unique. Medical decisions should be made with qualified healthcare providers who can assess your individual circumstances.</p>
    </div>
    <div class="footer-col">
      <h3>Emergency</h3>
      <p class="emergency-alert">Heavy bleeding, fever, chest pain, or severe abdominal pain require immediate medical attention. <strong>Don't delay.</strong></p>
    </div>
  </div>
  <div class="footer-meta">
    <p class="meta-line">Last Updated: February 2026 <span class="sep">|</span> Evidence-Based <span class="sep">•</span> Comprehensive <span class="sep">•</span> Empowering</p>
    <p class="tagline"><span class="heart">🩷</span> Dedicated to empowering every mother</p>
  </div>
  <div class="footer-bottom">
    <div class="footer-bottom-inner">
      <nav class="footer-links" aria-label="Legal and support links">
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">Contact Support</a>
      </nav>
      <p class="footer-copy">&copy; 2026 Nari Shakti. Empowering Women's Health.</p>
    </div>
  </div>
</footer>
<div class="bp-tracker-modal" id="bpTrackerModal">
  <div class="bp-modal-content">
    <button class="bp-modal-close" onclick="closeBPTracker()">✕</button>
    
    <div class="bp-modal-header">
      <div class="bp-header-icon">
        <i class="fas fa-heart-pulse"></i>
      </div>
      <h2>Blood Pressure Tracker</h2>
      <p class="bp-modal-subtitle">Monitor your BP throughout your pregnancy journey</p>
    </div>

    <div class="bp-modal-body">
      <!-- Current Week Indicator -->
      <div class="bp-current-week">
        <label for="currentWeek">
          <span class="week-icon">📅</span>
          Current Pregnancy Week:
        </label>
        <input type="number" id="currentWeek" min="1" max="42" value="20" class="week-input">
      </div>

      <!-- BP Entry Form -->
      <div class="bp-entry-form">
        <h3>
          <span class="form-icon">📝</span>
          Log Today's Reading
        </h3>
        
        <div class="bp-input-grid">
          <div class="bp-input-group">
            <label>
              <span class="input-icon">💓</span>
              Systolic (Top Number)
            </label>
            <input type="number" id="systolicInput" placeholder="120" min="80" max="200" class="bp-number-input">
            <span class="input-unit">mmHg</span>
          </div>

          <div class="bp-input-group">
            <label>
              <span class="input-icon">💗</span>
              Diastolic (Bottom Number)
            </label>
            <input type="number" id="diastolicInput" placeholder="80" min="40" max="130" class="bp-number-input">
            <span class="input-unit">mmHg</span>
          </div>
        </div>

        <div class="bp-input-row">
          <div class="bp-input-group full-width">
            <label>
              <span class="input-icon">🕐</span>
              Time of Reading
            </label>
            <input type="time" id="timeInput" class="bp-time-input">
          </div>
        </div>

        <div class="bp-input-row">
          <div class="bp-input-group full-width">
            <label>
              <span class="input-icon">📌</span>
              Notes (Optional)
            </label>
            <textarea id="notesInput" placeholder="E.g., After resting 5 minutes, feeling good..." class="bp-notes-input" rows="2"></textarea>
          </div>
        </div>

        <button class="bp-save-btn" onclick="saveBPReading()">
          <span class="save-icon">💾</span>
          Save Reading
        </button>
      </div>

      <!-- BP History Timeline -->
      <div class="bp-history-section">
        <div class="history-header">
          <h3>
            <span class="history-icon">📈</span>
            Your BP History
          </h3>
          <button class="clear-history-btn" onclick="clearBPHistory()">
            <span>🗑️</span> Clear All
          </button>
        </div>

        <div class="bp-chart-container">
          <canvas id="bpChart" width="600" height="300"></canvas>
        </div>

        <div class="bp-readings-list" id="bpReadingsList">
          <!-- Populated by JavaScript -->
        </div>
      </div>

      <!-- Emergency Thresholds Info -->
      <div class="bp-thresholds-info">
        <h4>⚠️ Know Your Numbers:</h4>
        <div class="threshold-grid">
          <div class="threshold-item normal">
            <span class="threshold-label">Normal</span>
            <span class="threshold-value">&lt; 120/80</span>
          </div>
          <div class="threshold-item elevated">
            <span class="threshold-label">Elevated</span>
            <span class="threshold-value">120-129 / &lt;80</span>
          </div>
          <div class="threshold-item high">
            <span class="threshold-label">High (Stage 1)</span>
            <span class="threshold-value">130-139 / 80-89</span>
          </div>
          <div class="threshold-item severe">
            <span class="threshold-label">Severe (Stage 2)</span>
            <span class="threshold-value">≥ 140 / ≥ 90</span>
          </div>
          <div class="threshold-item crisis">
            <span class="threshold-label">Crisis!</span>
            <span class="threshold-value">≥ 180 / ≥ 120</span>
          </div>
        </div>
        <p class="threshold-warning">
          🚨 If your reading is ≥ 140/90 or you have symptoms, contact your doctor immediately. 
          If ≥ 180/120, call emergency services (108/102) now!
        </p>
      </div>

      <!-- Export Options -->
      <div class="bp-export-section">
        <h4>📤 Export Your Data:</h4>
        <div class="export-buttons">
          <button class="export-btn" onclick="exportBPToCSV()">
            <span>📊</span> Download CSV
          </button>
          <button class="export-btn" onclick="exportBPToPDF()">
            <span>📄</span> Download PDF
          </button>
          <button class="export-btn" onclick="printBPReport()">
            <span>🖨️</span> Print Report
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  
  // Progress tracking
let exploredThemes = new Set();

// Scroll to themes section
function scrollToThemes() {
  document.getElementById('themesSection').scrollIntoView({ behavior: 'smooth' });
}

// Theme card click handler - simplified version with inline content
function openTheme(themeId) {
  const panel = document.getElementById('infoPanel');
  const backdrop = document.getElementById('backdrop');
  
  // Mark as explored
  exploredThemes.add(themeId);
  updateProgress();
  
  // Mark card as explored
  const card = document.querySelector(`.theme-card-3d[data-theme="${themeId}"]`);
  if (card) {
    card.classList.add('explored');
  }
  
  // Get theme content based on ID
  const themeContent = getThemeContent(themeId);
  
  // Update panel content
  document.getElementById('panelIcon').textContent = themeContent.icon;
  document.getElementById('panelTitle').textContent = themeContent.title;
  document.getElementById('panelSubtitle').textContent = themeContent.subtitle;
  document.getElementById('panelContent').innerHTML = themeContent.content;
  
  // Show panel and backdrop
  panel.classList.add('active');
  backdrop.classList.add('active');
  
  // Prevent body scroll
  document.body.style.overflow = 'hidden';
}

// Get theme content based on theme ID - COMPLETE ALL 25 THEMES
function getThemeContent(themeId) {
  const themes = {
    1: {
      title: "Understanding Preeclampsia",
      subtitle: "Definition & Overview",
      icon: "🔬",
      content: `
        <h3>What is Preeclampsia?</h3>
        <ul>
          <li><strong>Definition:</strong> A serious pregnancy complication characterized by high blood pressure (≥140/90 mmHg) and protein in urine after 20 weeks of gestation</li>
          <li><strong>Prevalence:</strong> Affects 5-8% of pregnancies worldwide, with South Asian women showing increased susceptibility</li>
          <li><strong>Timing:</strong> Can occur during pregnancy, delivery, or up to 6 weeks postpartum</li>
          <li><strong>Maternal Impact:</strong> Leading cause of maternal and fetal morbidity and mortality in India</li>
        </ul>
        
        <h3>Why It Matters</h3>
        <ul>
          <li><strong>Global Burden:</strong> Causes 10-15% of maternal deaths worldwide</li>
          <li><strong>Fetal Risk:</strong> Major cause of preterm birth and growth restriction</li>
          <li><strong>Only Cure:</strong> Delivery of the baby and placenta</li>
          <li><strong>Early Detection:</strong> Crucial for preventing severe complications</li>
        </ul>

        <h3>How is it Diagnosed?</h3>
        <ul>
          <li><strong>Blood Pressure:</strong> Two readings ≥140/90 mmHg, 4+ hours apart</li>
          <li><strong>Protein in Urine:</strong> ≥300mg per 24-hour collection, or dipstick 2+</li>
          <li><strong>Blood Tests:</strong> Liver enzymes, kidney function, platelet count</li>
          <li><strong>Fetal Monitoring:</strong> Ultrasound for baby's growth and amniotic fluid</li>
        </ul>
      `
    },
    
    2: {
      title: "Root Causes & Pathophysiology",
      subtitle: "Why It Happens",
      icon: "🧬",
      content: `
        <h3>Primary Mechanisms</h3>
        <ul>
          <li><strong>Placental Problems:</strong> Abnormal placental development and implantation leading to reduced blood flow</li>
          <li><strong>Vascular Dysfunction:</strong> Maternal blood vessel damage causing systemic inflammation</li>
          <li><strong>Immune Response:</strong> Maladaptation of immune system to pregnancy</li>
          <li><strong>Oxidative Stress:</strong> Imbalance between free radicals and antioxidants</li>
        </ul>
        
        <h3>Contributing Factors</h3>
        <ul>
          <li><strong>Genetic Predisposition:</strong> Family history increases risk 3-5 fold</li>
          <li><strong>Environmental Triggers:</strong> Stress, nutrition, infections</li>
          <li><strong>Placental Spiral Arteries:</strong> Fail to properly remodel in first trimester</li>
          <li><strong>Endothelial Cell Damage:</strong> Blood vessel lining becomes dysfunctional</li>
        </ul>

        <h3>What Actually Happens?</h3>
        <ul>
          <li>Blood vessels in placenta don't widen properly → reduced blood flow to baby</li>
          <li>Placenta releases harmful substances into mother's bloodstream</li>
          <li>Mother's blood vessels constrict → high blood pressure</li>
          <li>Kidneys leak protein → proteinuria</li>
          <li>Can affect liver, brain, blood clotting → multi-organ complications</li>
        </ul>
      `
    },
    
    3: {
      title: "High-Risk Population Groups",
      subtitle: "Who Is Most Vulnerable",
      icon: "👥",
      content: `
        <h3>Pregnancy-Related Risk Factors</h3>
        <ul>
          <li><strong>First Pregnancy:</strong> First-time mothers carry highest risk</li>
          <li><strong>Previous Preeclampsia:</strong> 15-25% recurrence rate in subsequent pregnancies</li>
          <li><strong>Multiple Gestation:</strong> Twins, triplets significantly increase risk</li>
          <li><strong>Long Interval:</strong> 10+ years since last pregnancy increases risk</li>
          <li><strong>New Partner:</strong> Different father than previous pregnancy slightly increases risk</li>
        </ul>
        
        <h3>Medical Conditions</h3>
        <ul>
          <li><strong>Chronic Hypertension:</strong> Pre-existing high blood pressure before pregnancy</li>
          <li><strong>Diabetes:</strong> Type 1 or Type 2 diabetes mellitus - 2x risk</li>
          <li><strong>Kidney Disease:</strong> Pre-existing chronic kidney disease - 3x risk</li>
          <li><strong>Autoimmune Disorders:</strong> Lupus, antiphospholipid syndrome - 5x risk</li>
          <li><strong>Thrombophilia:</strong> Blood clotting disorders</li>
        </ul>
        
        <h3>Demographic Factors</h3>
        <ul>
          <li><strong>Age Extremes:</strong> Younger than 20 or older than 35 years (40+ has 3x risk)</li>
          <li><strong>Obesity:</strong> BMI ≥30 kg/m² - risk increases with BMI</li>
          <li><strong>Family History:</strong> Mother or sister had preeclampsia - 3-5x risk</li>
          <li><strong>Indian Women:</strong> Higher susceptibility due to genetic/environmental factors</li>
        </ul>

        <h3>Calculate Your Risk</h3>
        <ul>
          <li>Count how many risk factors you have</li>
          <li>One major risk factor = aspirin recommended</li>
          <li>Two+ moderate risk factors = aspirin recommended</li>
          <li>Discuss with doctor about prevention strategies</li>
        </ul>
      `
    },
    4: {
      title: "Mild Preeclampsia - Early Warning",
      subtitle: "Recognizing Subtle Changes",
      icon: "🟢",
      content: `
        <h3>Blood Pressure Criteria</h3>
        <ul>
          <li><strong>Systolic:</strong> 140-159 mmHg (top number)</li>
          <li><strong>Diastolic:</strong> 90-109 mmHg (bottom number)</li>
          <li><strong>Frequency:</strong> Elevated on 2+ occasions, 4+ hours apart</li>
          <li><strong>Pattern:</strong> May be intermittent early on</li>
        </ul>

        <h3>Physical Symptoms</h3>
        <ul>
          <li><strong>Headaches:</strong> Mild, persistent headaches (different from usual)</li>
          <li><strong>Swelling:</strong> Slight edema in ankles and fingers - more than normal pregnancy swelling</li>
          <li><strong>Proteinuria:</strong> Mild protein in urine (≥300mg/24hr or 1+ dipstick)</li>
          <li><strong>General Feeling:</strong> Slightly "off" or fatigued beyond normal pregnancy tiredness</li>
          <li><strong>Weight Gain:</strong> Sudden weight gain >2 kg in one week</li>
        </ul>

        <h3>What To Do - Action Steps</h3>
        <ul>
          <li><strong>Doctor Visit:</strong> Schedule appointment within 24-48 hours (don't wait weeks)</li>
          <li><strong>Home BP Monitoring:</strong> Check BP 2x daily if you have a monitor (rest 5 min before checking)</li>
          <li><strong>Symptom Diary:</strong> Track symptoms, BP readings, fetal movement in notebook</li>
          <li><strong>Rest:</strong> Increase rest periods, avoid overexertion</li>
          <li><strong>Hydration:</strong> Drink 8-10 glasses of water daily</li>
          <li><strong>DO NOT IGNORE:</strong> Even mild symptoms need medical evaluation</li>
        </ul>

        <h3>Typical Monitoring Plan</h3>
        <ul>
          <li><strong>Clinic Visits:</strong> Weekly or bi-weekly appointments</li>
          <li><strong>Blood Tests:</strong> Weekly - liver enzymes, platelets, kidney function</li>
          <li><strong>Urine Tests:</strong> Protein levels monitored regularly</li>
          <li><strong>Fetal Monitoring:</strong> NST (non-stress test) 1-2x per week</li>
          <li><strong>Ultrasound:</strong> Growth scans every 3-4 weeks</li>
        </ul>

        <h3>Progression Risk</h3>
        <ul>
          <li>15-20% of mild cases progress to severe within weeks</li>
          <li>Close monitoring can prevent escalation</li>
          <li>Most women with mild preeclampsia can continue pregnancy near term</li>
          <li>Delivery usually planned at 37-38 weeks</li>
        </ul>

        <h3>Can You Work?</h3>
        <ul>
          <li>Depends on job type and stress level</li>
          <li>Desk jobs may be okay with modifications</li>
          <li>Avoid: Standing for long periods, heavy lifting, high stress</li>
          <li>Discuss with doctor - may need work restrictions or leave</li>
        </ul>
      `
    },
    5: {
      title: "Moderate Preeclampsia - Increased Urgency",
      subtitle: "Stepping Up Monitoring",
      icon: "🟡",
      content: `
        <h3>Blood Pressure Range</h3>
        <ul>
          <li><strong>Systolic:</strong> 150-159 mmHg persistently</li>
          <li><strong>Diastolic:</strong> 100-109 mmHg persistently</li>
          <li><strong>Pattern:</strong> Less responsive to rest, more consistent elevation</li>
          <li><strong>Concern:</strong> Approaching severe range, closer monitoring critical</li>
        </ul>

        <h3>Warning Symptoms</h3>
        <ul>
          <li><strong>Swelling:</strong> Moderate to severe swelling (face, hands, sudden onset)</li>
          <li><strong>Urination:</strong> Noticeable reduction in urination frequency/volume</li>
          <li><strong>Proteinuria:</strong> Moderate protein in urine (2+ on dipstick, or 1-5g/24hr)</li>
          <li><strong>Abdominal Discomfort:</strong> Occasional upper abdominal discomfort</li>
          <li><strong>Vision:</strong> Slight visual disturbances (mild blurriness, sensitivity to light)</li>
          <li><strong>Fatigue:</strong> Increased fatigue and malaise beyond normal pregnancy</li>
          <li><strong>Nausea:</strong> New or worsening nausea (not morning sickness)</li>
        </ul>

        <h3>Medical Response Required</h3>
        <ul>
          <li><strong>Timing:</strong> Same-day doctor consultation REQUIRED</li>
          <li><strong>Blood Work:</strong> Comprehensive panel - liver enzymes (AST, ALT), kidney function (creatinine), platelet count, LDH</li>
          <li><strong>24-Hour Urine:</strong> Collect all urine for 24 hours to measure protein</li>
          <li><strong>Fetal Assessment:</strong> NST (non-stress test) to check baby's heart rate patterns</li>
          <li><strong>Ultrasound:</strong> Check baby's growth, amniotic fluid levels, blood flow</li>
          <li><strong>Possible Admission:</strong> May require hospitalization for observation</li>
        </ul>

        <h3>Treatment Options</h3>
        <ul>
          <li><strong>Antihypertensive Medications:</strong> Labetalol, methyldopa, or nifedipine to lower BP</li>
          <li><strong>Corticosteroids:</strong> If <34 weeks, given to mature baby's lungs in case of early delivery</li>
          <li><strong>Increased Monitoring:</strong> Daily or alternate-day visits, home BP checks</li>
          <li><strong>Activity Restriction:</strong> Reduced activity, avoid stress</li>
        </ul>

        <h3>Hospital Care Indicators</h3>
        <ul>
          <li>Blood pressure not responding to medication</li>
          <li>Symptoms appearing before 34 weeks of pregnancy</li>
          <li>Worsening lab results (liver, kidney, platelets)</li>
          <li>Fetal growth restriction or concerning fetal monitoring</li>
          <li>Limited access to frequent clinic visits</li>
        </ul>

        <h3>What Hospitalization Involves</h3>
        <ul>
          <li>24-hour BP monitoring every 4-6 hours</li>
          <li>Daily blood tests to track progression</li>
          <li>Continuous or frequent fetal heart monitoring</li>
          <li>Strict input-output measurement (what you drink vs urinate)</li>
          <li>Regular doctor examinations</li>
          <li>Magnesium sulfate may be started for seizure prevention</li>
        </ul>

        <h3>When to Call Doctor Between Appointments</h3>
        <ul>
          <li>New severe headache</li>
          <li>Vision changes (blurring, spots)</li>
          <li>Upper abdominal pain that's new or worsening</li>
          <li>Sudden swelling of face or hands</li>
          <li>Decreased baby movement</li>
          <li>Difficulty breathing</li>
        </ul>
      `
    },
    6: {
      title: "Severe Preeclampsia - EMERGENCY",
      subtitle: "Life-Threatening Crisis",
      icon: "🔴",
      content: `
        <h3>Critical Blood Pressure</h3>
        <ul>
          <li><strong>Systolic:</strong> ≥160 mmHg</li>
          <li><strong>Diastolic:</strong> ≥110 mmHg</li>
          <li><strong>Danger:</strong> High risk of stroke, seizure, organ failure</li>
          <li><strong>Urgency:</strong> Blood pressure must be lowered within 60 minutes</li>
        </ul>

        <h3>🚨 EMERGENCY Symptoms - Call 108/102 IMMEDIATELY</h3>
        <ul>
          <li><strong>Severe headache</strong> that won't go away with rest or pain medication</li>
          <li><strong>Vision problems:</strong> Blurred vision, seeing spots, flashing lights, temporary vision loss</li>
          <li><strong>Severe upper right abdomen pain</strong> (liver area, below ribs on right side)</li>
          <li><strong>Difficulty breathing</strong> or chest pain (fluid in lungs)</li>
          <li><strong>Severe nausea/vomiting</strong> (beyond morning sickness)</li>
          <li><strong>Decreased fetal movement</strong> or no movement</li>
          <li><strong>Seizures</strong> (eclampsia - CRITICAL medical emergency)</li>
          <li><strong>Confusion or altered consciousness</strong></li>
        </ul>

        <h3>Hospital Treatment - Immediate Actions</h3>
        <ul>
          <li><strong>Admission to ICU or High-Dependency Unit</strong></li>
          <li><strong>IV Magnesium Sulfate:</strong> Prevents seizures (eclampsia), given as continuous infusion</li>
          <li><strong>Antihypertensive IV Medications:</strong> Labetalol or hydralazine to lower BP quickly</li>
          <li><strong>Continuous Monitoring:</strong> BP every 15-30 minutes, continuous fetal heart monitoring</li>
          <li><strong>Blood Tests:</strong> Every 6-12 hours to monitor organ function</li>
          <li><strong>Urine Output:</strong> Catheter placed to measure every drop</li>
          <li><strong>Corticosteroids:</strong> If baby premature, steroids help lung development</li>
        </ul>

        <h3>Delivery Decision Factors</h3>
        <ul>
          <li><strong>≥34 weeks gestation:</strong> Usually deliver immediately after stabilization</li>
          <li><strong>24-34 weeks:</strong> Balance maternal safety vs baby maturity - give steroids, stabilize, then deliver within 24-48 hours</li>
          <li><strong>If maternal life at risk:</strong> Deliver REGARDLESS of gestational age</li>
          <li><strong>Method:</strong> Induction or C-section based on conditions</li>
        </ul>

        <h3>Severe Features on Lab Tests</h3>
        <ul>
          <li><strong>Platelets:</strong> <100,000 (low platelets, bleeding risk)</li>
          <li><strong>Liver Enzymes:</strong> AST/ALT >2x normal (liver damage)</li>
          <li><strong>Creatinine:</strong> >1.1 mg/dL (kidney damage)</li>
          <li><strong>Pulmonary Edema:</strong> Fluid in lungs</li>
        </ul>

        <h3>Postpartum Monitoring - Still Critical</h3>
        <ul>
          <li>Preeclampsia can WORSEN after delivery</li>
          <li>Close monitoring for 48-72 hours minimum in hospital</li>
          <li>Magnesium sulfate continued 12-24 hours post-delivery</li>
          <li>BP monitored every 4 hours</li>
          <li>Symptoms can appear up to 6 weeks postpartum</li>
          <li>Call doctor immediately for headache, vision changes, abdominal pain after going home</li>
        </ul>

        <h3>Why This is So Serious</h3>
        <ul>
          <li>Can progress to eclampsia (seizures) without warning</li>
          <li>Risk of stroke from extremely high BP</li>
          <li>HELLP syndrome (liver and blood problems)</li>
          <li>Placental abruption (placenta separates from uterus)</li>
          <li>Acute kidney failure</li>
          <li>Pulmonary edema (fluid in lungs)</li>
          <li>Death of mother or baby if not treated immediately</li>
        </ul>

        <h3>After Severe Preeclampsia</h3>
        <ul>
          <li>Increased risk in future pregnancies (25-65% recurrence)</li>
          <li>Long-term cardiovascular disease risk</li>
          <li>Annual heart health checkups recommended</li>
          <li>Next pregnancy needs high-risk OB care from early on</li>
        </ul>
      `
    },
    7: {
      title: "Eclampsia: Critical Stage",
      subtitle: "Life-Threatening Emergency",
      icon: "⚡",
      content: `
        <h3>What is Eclampsia?</h3>
        <ul>
          <li><strong>Definition:</strong> Seizures occurring in a woman with preeclampsia</li>
          <li><strong>Timing:</strong> Can occur during pregnancy, labor, or postpartum (up to 6 weeks after delivery)</li>
          <li><strong>Incidence:</strong> Occurs in about 1-2% of women with severe preeclampsia</li>
          <li><strong>WITHOUT WARNING:</strong> Can happen even with mild preeclampsia or no diagnosed preeclampsia</li>
        </ul>

        <h3>Types of Seizures</h3>
        <ul>
          <li><strong>Tonic-Clonic:</strong> Most common - body stiffens then jerks rhythmically</li>
          <li><strong>Duration:</strong> Usually 60-90 seconds</li>
          <li><strong>Post-Seizure:</strong> Confusion, drowsiness, headache after seizure</li>
          <li><strong>Recurrence:</strong> Can have multiple seizures if untreated</li>
        </ul>

        <h3>🚨 IMMEDIATE ACTION IF SEIZURE OCCURS</h3>
        <ul>
          <li><strong>CALL 108/102 IMMEDIATELY</strong></li>
          <li><strong>Safety First:</strong> Turn woman on left side to prevent choking</li>
          <li><strong>Clear Area:</strong> Remove objects that could cause injury</li>
          <li><strong>DO NOT:</strong> Put anything in mouth, restrain, or try to stop seizure</li>
          <li><strong>Time It:</strong> Note duration of seizure for medical team</li>
          <li><strong>Stay With Her:</strong> Don't leave alone</li>
        </ul>

        <h3>Hospital Emergency Treatment</h3>
        <ul>
          <li><strong>Airway Protection:</strong> Oxygen, possible intubation if needed</li>
          <li><strong>IV Magnesium Sulfate:</strong> STAT dose then continuous infusion - THE standard treatment to stop and prevent seizures</li>
          <li><strong>Blood Pressure Control:</strong> IV antihypertensives</li>
          <li><strong>Monitoring:</strong> ICU level care, continuous observation</li>
          <li><strong>Delivery:</strong> Once stabilized, delivery is planned urgently</li>
        </ul>

        <h3>Magnesium Sulfate Protocol</h3>
        <ul>
          <li><strong>Loading Dose:</strong> 4-6 grams IV over 15-20 minutes</li>
          <li><strong>Maintenance:</strong> 1-2 grams per hour continuous IV</li>
          <li><strong>Duration:</strong> Continue 24 hours post-delivery or 24 hours after last seizure</li>
          <li><strong>Monitoring:</strong> Check reflexes, breathing, urine output hourly</li>
          <li><strong>Antidote:</strong> Calcium gluconate available if magnesium toxicity occurs</li>
        </ul>

        <h3>Complications of Eclampsia</h3>
        <ul>
          <li><strong>Maternal:</strong> Stroke, cerebral hemorrhage, aspiration pneumonia, placental abruption, organ failure, coma</li>
          <li><strong>Fetal:</strong> Decreased oxygen to baby during seizure, emergency C-section often needed, preterm birth</li>
          <li><strong>Death:</strong> 1-2% maternal mortality even with treatment; higher in areas without immediate care</li>
        </ul>

        <h3>Warning Signs Before Eclampsia</h3>
        <ul>
          <li>Severe persistent headache</li>
          <li>Visual disturbances (aura before seizure)</li>
          <li>Severe upper abdominal pain</li>
          <li>Hyperreflexia (exaggerated reflexes)</li>
          <li>Altered mental status, confusion</li>
          <li><strong>Note:</strong> But eclampsia CAN occur WITHOUT any warning signs</li>
        </ul>

        <h3>Post-Eclampsia Recovery</h3>
        <ul>
          <li>Extended hospital stay (typically 5-7 days minimum)</li>
          <li>Neurological monitoring - CT/MRI brain scans</li>
          <li>Continued magnesium for 24 hours</li>
          <li>Gradual reduction in blood pressure medications</li>
          <li>Close postpartum follow-up for months</li>
        </ul>

        <h3>Long-Term Risks After Eclampsia</h3>
        <ul>
          <li><strong>Future Pregnancies:</strong> 25-50% recurrence risk of preeclampsia</li>
          <li><strong>Cardiovascular Disease:</strong> 3-4x increased lifetime risk</li>
          <li><strong>Kidney Disease:</strong> Increased risk</li>
          <li><strong>Neurological:</strong> Rare long-term seizure disorder, cognitive effects</li>
        </ul>

        <h3>Prevention is Key</h3>
        <ul>
          <li>High-risk women should take low-dose aspirin starting early pregnancy</li>
          <li>Attend ALL prenatal appointments</li>
          <li>Report ANY symptoms immediately - don't wait</li>
          <li>If previous eclampsia, MUST be managed by high-risk OB specialist from start</li>
        </ul>
      `
    },
    8: {
      title: "HELLP Syndrome",
      subtitle: "Severe Life-Threatening Variant",
      icon: "🩸",
      content: `
        <h3>What is HELLP Syndrome?</h3>
        <ul>
          <li><strong>H - Hemolysis:</strong> Red blood cells breaking down</li>
          <li><strong>EL - Elevated Liver enzymes:</strong> Liver damage</li>
          <li><strong>LP - Low Platelets:</strong> Blood clotting problems</li>
          <li><strong>Relationship:</strong> Severe variant of preeclampsia (can occur with or without high BP)</li>
          <li><strong>Incidence:</strong> 0.5-0.9% of all pregnancies, 10-20% of severe preeclampsia cases</li>
        </ul>

        <h3>🚨 Symptoms - Often Mistaken for Other Conditions</h3>
        <ul>
          <li><strong>Upper Right Abdomen Pain:</strong> Severe pain below ribs (often mistaken for gallbladder, heartburn, or flu)</li>
          <li><strong>Nausea/Vomiting:</strong> Severe, persistent (NOT morning sickness)</li>
          <li><strong>Headache:</strong> Severe, unrelenting</li>
          <li><strong>Visual Disturbances:</strong> Blurry vision, seeing spots</li>
          <li><strong>Fatigue:</strong> Extreme malaise, feeling very unwell</li>
          <li><strong>Swelling:</strong> Especially face and hands</li>
          <li><strong>Bleeding:</strong> Easy bruising, nosebleeds, bleeding gums</li>
        </ul>

        <h3>Diagnostic Criteria</h3>
        <ul>
          <li><strong>Hemolysis:</strong> LDH >600 U/L, bilirubin >1.2 mg/dL, abnormal blood smear</li>
          <li><strong>Elevated Liver Enzymes:</strong> AST >70 U/L, ALT >70 U/L</li>
          <li><strong>Low Platelets:</strong> <100,000/μL</li>
          <li><strong>Note:</strong> Can have HELLP WITHOUT having high blood pressure or proteinuria</li>
        </ul>

        <h3>Why HELLP is So Dangerous</h3>
        <ul>
          <li><strong>Rapid Progression:</strong> Can deteriorate from mild symptoms to critical in hours</li>
          <li><strong>Liver Complications:</strong> Liver rupture or hematoma (collection of blood) - life-threatening</li>
          <li><strong>Bleeding Problems:</strong> DIC (disseminated intravascular coagulation) - uncontrolled bleeding</li>
          <li><strong>Kidney Failure:</strong> Acute renal failure</li>
          <li><strong>Placental Abruption:</strong> Placenta separates from uterus</li>
          <li><strong>Pulmonary Edema:</strong> Fluid in lungs</li>
          <li><strong>Stroke:</strong> Brain bleeding</li>
        </ul>

        <h3>Emergency Treatment</h3>
        <ul>
          <li><strong>IMMEDIATE HOSPITALIZATION:</strong> ICU or high-dependency unit</li>
          <li><strong>Magnesium Sulfate:</strong> Prevent seizures (as in severe preeclampsia)</li>
          <li><strong>Blood Pressure Control:</strong> IV antihypertensive medications</li>
          <li><strong>Blood Products:</strong> Platelets, fresh frozen plasma if severe bleeding risk</li>
          <li><strong>Corticosteroids:</strong> May improve platelet count and liver function</li>
          <li><strong>Close Monitoring:</strong> Labs every 6-12 hours, vital signs continuously</li>
          <li><strong>DELIVERY IS THE CURE:</strong> Once stabilized, immediate or very urgent delivery</li>
        </ul>

        <h3>Timing of Delivery</h3>
        <ul>
          <li><strong>≥34 weeks:</strong> Deliver immediately after maternal stabilization</li>
          <li><strong><34 weeks:</strong> Give corticosteroids for baby's lungs, then deliver within 24-48 hours</li>
          <li><strong>Maternal Instability:</strong> Deliver IMMEDIATELY regardless of gestational age</li>
          <li><strong>Method:</strong> Often cesarean section due to urgency and maternal condition</li>
        </ul>

        <h3>Postpartum Course</h3>
        <ul>
          <li><strong>Initial Worsening:</strong> Condition often gets WORSE in first 24-48 hours after delivery before improving</li>
          <li><strong>Lab Monitoring:</strong> Continue frequent blood tests</li>
          <li><strong>Peak Platelets:</strong> Usually reach lowest point 24-48 hours post-delivery</li>
          <li><strong>Recovery:</strong> Platelets normalize in 6-11 days; liver enzymes in 4-27 days</li>
          <li><strong>Hospital Stay:</strong> Typically 4-7 days or longer</li>
        </ul>

        <h3>Complications</h3>
        <ul>
          <li><strong>Maternal Mortality:</strong> 1-24% depending on severity and access to care</li>
          <li><strong>Liver Rupture:</strong> Rare but catastrophic - requires emergency surgery</li>
          <li><strong>DIC:</strong> 15% of cases - life-threatening bleeding disorder</li>
          <li><strong>Acute Kidney Failure:</strong> 7-8% of cases</li>
          <li><strong>Pulmonary Edema:</strong> 6% of cases</li>
          <li><strong>Placental Abruption:</strong> 16% of cases</li>
        </ul>

        <h3>Recurrence Risk</h3>
        <ul>
          <li><strong>Preeclampsia in Next Pregnancy:</strong> 20-40% risk</li>
          <li><strong>HELLP Syndrome Again:</strong> 3-5% risk</li>
          <li><strong>Management:</strong> Next pregnancy MUST be managed by high-risk OB specialist</li>
          <li><strong>Prevention:</strong> Low-dose aspirin starting 12-16 weeks</li>
        </ul>

        <h3>Red Flags - Call 108/102 Immediately</h3>
        <ul>
          <li>Severe upper right abdominal pain</li>
          <li>Severe nausea and vomiting</li>
          <li>Severe headache with vision changes</li>
          <li>Easy bruising or bleeding that won't stop</li>
          <li>Yellowing of skin or eyes (jaundice)</li>
          <li>Decreased urine output</li>
          <li>Confusion or altered consciousness</li>
        </ul>

        <h3>Key Message</h3>
        <ul>
          <li>HELLP can be mistaken for stomach flu, gallbladder issues, or heartburn</li>
          <li>In third trimester, ALWAYS consider HELLP with upper abdominal pain + nausea/vomiting</li>
          <li>Don't assume it's just "normal pregnancy discomfort"</li>
          <li>This is a MEDICAL EMERGENCY - minutes matter</li>
        </ul>
      `
    }
  };
  
  // Continue adding all remaining themes (9-25) with similar detailed content
  // For brevity, adding theme 9-25 with standard detailed content structure
  
  const themesExtended = {
    9: { title: "When to See Doctor Immediately", subtitle: "Emergency Triggers", icon: "🚑", 
      content: `<h3>Red Flag Symptoms</h3><ul><li>Severe persistent headache</li><li>Vision changes (blurred, spots, light sensitivity)</li><li>Severe upper abdominal pain</li><li>Difficulty breathing</li><li>Decreased fetal movement</li></ul>` },
    10: { title: "Regular Monitoring Schedule", subtitle: "Follow-Up Frequency", icon: "📅",
      content: `<h3>Monitoring Based on Severity</h3><ul><li>Mild: Weekly doctor visits, weekly labs</li><li>Moderate: 2-3x weekly visits, twice-weekly labs</li><li>Severe: Daily monitoring or hospitalization</li></ul>` },
    11: { title: "Essential Questions for Doctor", subtitle: "Be Prepared", icon: "❓",
      content: `<h3>12 Critical Questions</h3><ul><li>What is my current blood pressure and protein level?</li><li>How severe is my preeclampsia?</li><li>What tests do I need and how often?</li><li>What medications am I taking and why?</li><li>What symptoms should I watch for?</li><li>When should I call you vs go to ER?</li><li>How is my baby doing?</li><li>When will delivery be planned?</li><li>What are risks to me and baby?</li><li>Can I prevent this in future pregnancies?</li><li>What lifestyle changes should I make?</li><li>Who do I call after hours if worried?</li></ul>` },
    12: { title: "Prevention: Before Pregnancy", subtitle: "Primary Strategies", icon: "🛡️",
      content: `<h3>Pre-Pregnancy Optimization</h3><ul><li>Achieve healthy BMI (18.5-24.9)</li><li>Control chronic hypertension (<140/90)</li><li>Optimize diabetes (HbA1c <6.5%)</li><li>Treat kidney disease</li><li>Take folic acid 400mcg daily</li></ul>` },
    13: { title: "Prevention: During Pregnancy", subtitle: "Evidence-Based Steps", icon: "💊",
      content: `<h3>Proven Prevention Strategies</h3><ul><li>Low-dose aspirin 75-150mg daily (high-risk women, starting 12-16 weeks)</li><li>Calcium supplementation 1-2g daily (if low dietary intake)</li><li>Regular prenatal care - don't miss appointments</li><li>Home BP monitoring if at risk</li></ul>` },
    14: { title: "Nutritional Management", subtitle: "Diet Guidelines", icon: "🥗",
      content: `<h3>Healthy Pregnancy Diet</h3><ul><li>Protein: 60-70g daily (dal, eggs, chicken, fish, paneer)</li><li>Calcium: 3-4 servings dairy or supplements</li><li>Hydration: 8-10 glasses water daily</li><li>Salt: Moderate, not restricted</li><li>Avoid: Alcohol, excessive caffeine, processed foods</li></ul>` },
    15: { title: "Physical Activity Guidelines", subtitle: "Safe Exercise", icon: "🚶‍♀️",
      content: `<h3>Safe Exercise with Preeclampsia</h3><ul><li>Walking: 20-30 minutes daily (if approved by doctor)</li><li>Prenatal yoga: Gentle stretching, breathing</li><li>Swimming: Low-impact, good for swelling</li><li>Avoid: High-intensity, contact sports, overheating</li><li>Stop if: Headache, dizziness, chest pain, bleeding</li></ul>` },
    16: { title: "Home Blood Pressure Monitoring", subtitle: "Self-Monitoring Protocol", icon: "🩺",
      content: `<h3>Proper BP Monitoring</h3><ul><li>Device: Automatic upper arm cuff (validated for pregnancy)</li><li>Timing: Morning and evening, same times daily</li><li>Technique: Rest 5 min, feet flat, arm at heart level</li><li>Record: Write down readings with date/time</li><li>Alert doctor if: ≥140/90 on two occasions or ≥160/110 once</li></ul>` },
    17: { title: "Medication Management", subtitle: "Understanding Treatments", icon: "💊",
      content: `<h3>Common Medications</h3><ul><li>Labetalol, methyldopa, nifedipine: Lower BP</li><li>Magnesium sulfate: Prevent seizures</li><li>Corticosteroids: Mature baby's lungs if preterm</li><li>Aspirin: Prevention (low-dose)</li><li>All medications: Pregnancy-safe, doctor-prescribed only</li></ul>` },
    18: { title: "Delivery Planning & Timing", subtitle: "When Delivery is Necessary", icon: "👶",
      content: `<h3>Delivery Timing</h3><ul><li>Mild preeclampsia: 37 weeks</li><li>Severe preeclampsia: 34 weeks after steroids</li><li>Emergency: Any time if mother/baby at risk</li><li>Method: Vaginal if possible, C-section if needed</li></ul>` },
    19: { title: "Postpartum Care", subtitle: "After Delivery", icon: "🍼",
      content: `<h3>Critical First 72 Hours</h3><ul><li>BP can worsen after delivery</li><li>Continue magnesium 12-24 hours</li><li>Monitor BP every 4 hours</li><li>Watch for symptoms up to 6 weeks postpartum</li><li>Breastfeeding: Usually safe with most BP medications</li></ul>` },
    20: { title: "Long-Term Health Implications", subtitle: "Future Risk", icon: "❤️",
      content: `<h3>Lifelong Health Monitoring</h3><ul><li>2-4x increased risk cardiovascular disease</li><li>Higher risk: Hypertension, diabetes, stroke</li><li>Annual checkups: BP, cholesterol, blood sugar</li><li>Healthy lifestyle: Exercise, diet, maintain healthy weight</li></ul>` },
    21: { title: "Family Support & Caregiving", subtitle: "How Families Can Help", icon: "👨‍👩‍👧‍👦",
      content: `<h3>Family Role</h3><ul><li>Monitor symptoms: Help watch for warning signs</li><li>Medication reminders: Ensure medications taken on time</li><li>Transport: Drive to appointments, hospital if needed</li><li>Household help: Cooking, cleaning, childcare</li><li>Emotional support: Listen, reassure, be present</li><li>Learn CPR and what to do if seizure</li></ul>` },
    22: { title: "Emotional & Mental Health", subtitle: "Psychological Support", icon: "🧠",
      content: `<h3>Coping with High-Risk Pregnancy</h3><ul><li>Anxiety is NORMAL with preeclampsia diagnosis</li><li>Fear about baby's health is common</li><li>Depression risk increases with complications</li><li>Seek counseling if: Constant worry, sleep problems, hopelessness</li><li>Support groups help - connect with others</li></ul>` },
    23: { title: "Fetal Complications & Monitoring", subtitle: "Impact on Baby", icon: "👶",
      content: `<h3>How Baby is Affected</h3><ul><li>Growth restriction: Reduced blood flow → smaller baby</li><li>Preterm birth: Delivery before 37 weeks</li><li>Low amniotic fluid</li><li>Placental insufficiency</li><li>Monitoring: NST, ultrasounds, doppler studies</li><li>NICU may be needed if preterm</li></ul>` },
    24: { title: "Cultural Considerations in India", subtitle: "Navigating Beliefs", icon: "🇮🇳",
      content: `<h3>Addressing Cultural Challenges</h3><ul><li>Involve family decision-makers early</li><li>Explain science behind preeclampsia to elders</li><li>Myths to dispel: Salt restriction, bed rest cure, home remedies</li><li>Balance: Respect traditions while prioritizing medical care</li><li>Hospital delivery: ESSENTIAL for preeclampsia (not home birth)</li></ul>` },
    25: { title: "Healthcare System Navigation", subtitle: "Accessing Care in India", icon: "🏥",
      content: `<h3>Healthcare Resources</h3><ul><li>Emergency: 108 (ambulance), 102 (medical emergency)</li><li>Government schemes: JSY (cash assistance), free delivery at govt hospitals</li><li>High-risk clinics: Available at district/medical college hospitals</li><li>Insurance: Check PMJAY eligibility, private insurance coverage</li><li>Transport: Ambulance services free in most states</li></ul>` }
  };

  // Merge extended themes
  Object.assign(themes, themesExtended);
  
  // Return theme content or default
  return themes[themeId] || {
    title: "Theme " + themeId,
    subtitle: "Information",
    icon: "📚",
    content: `<p>Detailed information for Theme ${themeId}. This is a comprehensive educational resource about preeclampsia.</p>`
  };
}

// Close panel function
function closePanel() {
  const panel = document.getElementById('infoPanel');
  const backdrop = document.getElementById('backdrop');
  
  panel.classList.remove('active');
  backdrop.classList.remove('active');
  
  // Restore body scroll
  document.body.style.overflow = 'auto';
}

// Update progress tracker
function updateProgress() {
  const total = 25;
  const explored = exploredThemes.size;
  const percentage = Math.round((explored / total) * 100);
  
  // Update percentage text
  document.getElementById('progressPercent').textContent = percentage + '%';
  document.getElementById('exploredCount').textContent = `${explored} of ${total} themes explored`;
  
  // Update progress circle
  const circle = document.getElementById('progressCircle');
  const circumference = 2 * Math.PI * 60; // radius is 60
  const offset = circumference - (percentage / 100) * circumference;
  circle.style.strokeDashoffset = offset;
  
  // Add gradient to progress circle if not exists
  if (!document.getElementById('progressGradient')) {
    const svg = circle.closest('svg');
    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
    const gradient = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
    gradient.setAttribute('id', 'progressGradient');
    gradient.innerHTML = `
      <stop offset="0%" style="stop-color:#e91e63;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d81b60;stop-opacity:1" />
    `;
    defs.appendChild(gradient);
    svg.insertBefore(defs, svg.firstChild);
  }
}

// Quick symptom checker functions
function openQuickCheck() {
  const modal = document.getElementById('symptomChecker');
  const backdrop = document.getElementById('backdrop');
  modal.classList.add('active');
  backdrop.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeQuickCheck() {
  const modal = document.getElementById('symptomChecker');
  const backdrop = document.getElementById('backdrop');
  modal.classList.remove('active');
  backdrop.classList.remove('active');
  document.body.style.overflow = 'auto';
  
  // Reset checkboxes
  document.querySelectorAll('.symptom-item input[type="checkbox"]').forEach(cb => {
    cb.checked = false;
  });
  
  // Hide result
  const result = document.getElementById('symptomResult');
  result.classList.remove('active', 'emergency', 'warning', 'normal');
  result.innerHTML = '';
}

function analyzeSymptoms() {
  const checkboxes = document.querySelectorAll('.symptom-item input[type="checkbox"]:checked');
  const result = document.getElementById('symptomResult');
  
  let hasSevere = false;
  let hasModerate = false;
  
  checkboxes.forEach(cb => {
    const severity = cb.dataset.severity;
    if (severity === 'severe') hasSevere = true;
    if (severity === 'moderate') hasModerate = true;
  });
  
  if (hasSevere) {
    result.className = 'symptom-result active emergency';
    result.innerHTML = `
      <h3>🚨 EMERGENCY - CALL 108/102 NOW</h3>
      <p><strong>You have checked severe symptoms that require IMMEDIATE medical attention.</strong></p>
      <ul>
        <li>Call emergency ambulance: <strong>108 or 102</strong></li>
        <li>Go to nearest hospital immediately</li>
        <li>Do NOT wait - these symptoms can be life-threatening</li>
      </ul>
      <p style="color: #d32f2f; font-weight: 700; margin-top: 1rem;">Time is critical. Act now.</p>
    `;
  } else if (hasModerate) {
    result.className = 'symptom-result active warning';
    result.innerHTML = `
      <h3>⚠️ URGENT - Contact Doctor Today</h3>
      <p><strong>You have symptoms that need same-day medical attention.</strong></p>
      <ul>
        <li>Call your doctor immediately</li>
        <li>Visit clinic or hospital today</li>
        <li>Monitor symptoms closely</li>
      </ul>
    `;
  } else if (checkboxes.length > 0) {
    result.className = 'symptom-result active normal';
    result.innerHTML = `
      <h3>📞 Contact Your Doctor</h3>
      <p><strong>Report these symptoms to your healthcare provider.</strong></p>
      <ul>
        <li>Schedule appointment with your doctor</li>
        <li>Monitor if symptoms worsen</li>
        <li>Continue home BP monitoring if applicable</li>
      </ul>
    `;
  } else {
    result.className = 'symptom-result active normal';
    result.innerHTML = `
      <h3>✅ No Symptoms Checked</h3>
      <p>Please check any symptoms you are experiencing.</p>
    `;
  }
}

// Body simulator functionality
let currentSeverity = 'normal';

function changeSeverity(severity) {
  currentSeverity = severity;
  
  // Update button states
  document.querySelectorAll('.severity-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  document.querySelector(`.severity-btn[data-severity="${severity}"]`).classList.add('active');
  
  // Update visualization
  drawBodyVisualization(severity);
  
  // Update description
  updateImpactDescription(severity);
}

// ENHANCED Body Visualization with Multi-Organ System
function drawBodyVisualization(severity) {
  const canvas = document.getElementById('bodyCanvas');
  if (!canvas) return;
  
  const ctx = canvas.getContext('2d');
  
  // Clear canvas
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // Draw body outline
  ctx.strokeStyle = '#333';
  ctx.lineWidth = 2;
  
  // Head
  ctx.beginPath();
  ctx.arc(200, 80, 40, 0, Math.PI * 2);
  ctx.stroke();
  
  // Neck
  ctx.beginPath();
  ctx.moveTo(200, 120);
  ctx.lineTo(200, 150);
  ctx.stroke();
  
  // Body/torso
  ctx.beginPath();
  ctx.ellipse(200, 250, 70, 100, 0, 0, Math.PI * 2);
  ctx.stroke();
  
  // Arms
  ctx.beginPath();
  ctx.moveTo(130, 180);
  ctx.lineTo(80, 280);
  ctx.stroke();
  
  ctx.beginPath();
  ctx.moveTo(270, 180);
  ctx.lineTo(320, 280);
  ctx.stroke();
  
  // Legs
  ctx.beginPath();
  ctx.moveTo(170, 350);
  ctx.lineTo(160, 550);
  ctx.stroke();
  
  ctx.beginPath();
  ctx.moveTo(230, 350);
  ctx.lineTo(240, 550);
  ctx.stroke();
  
  // Draw internal organs
  // Brain
  ctx.fillStyle = 'rgba(200, 200, 255, 0.3)';
  ctx.beginPath();
  ctx.arc(200, 80, 35, 0, Math.PI * 2);
  ctx.fill();
  
  // Heart
  ctx.fillStyle = 'rgba(255, 100, 100, 0.3)';
  ctx.beginPath();
  ctx.arc(200, 200, 20, 0, Math.PI * 2);
  ctx.fill();
  
  // Liver
  ctx.fillStyle = 'rgba(139, 69, 19, 0.3)';
  ctx.beginPath();
  ctx.ellipse(225, 220, 30, 25, 0, 0, Math.PI * 2);
  ctx.fill();
  
  // Kidneys
  ctx.fillStyle = 'rgba(200, 100, 50, 0.3)';
  ctx.beginPath();
  ctx.ellipse(170, 270, 15, 25, 0, 0, Math.PI * 2);
  ctx.fill();
  ctx.beginPath();
  ctx.ellipse(230, 270, 15, 25, 0, 0, Math.PI * 2);
  ctx.fill();
  
  // Placenta (in pregnant belly)
  ctx.fillStyle = 'rgba(255, 182, 193, 0.4)';
  ctx.beginPath();
  ctx.ellipse(200, 300, 40, 30, 0, 0, Math.PI * 2);
  ctx.fill();
  
  // Draw severity-specific indicators
  if (severity === 'normal') {
    ctx.fillStyle = 'rgba(102, 187, 106, 0.1)';
    ctx.beginPath();
    ctx.ellipse(200, 250, 90, 120, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Add text labels
    ctx.fillStyle = '#66bb6a';
    ctx.font = '12px Arial';
    ctx.fillText('All systems normal', 150, 450);
    
  } else if (severity === 'mild') {
    // Mild swelling in extremities
    ctx.fillStyle = 'rgba(255, 193, 7, 0.3)';
    ctx.beginPath();
    ctx.arc(80, 280, 15, 0, Math.PI * 2);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(320, 280, 15, 0, Math.PI * 2);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(160, 550, 18, 0, Math.PI * 2);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(240, 550, 18, 0, Math.PI * 2);
    ctx.fill();
    
    // Slightly elevated brain activity (mild headache)
    ctx.fillStyle = 'rgba(255, 193, 7, 0.2)';
    ctx.beginPath();
    ctx.arc(200, 80, 45, 0, Math.PI * 2);
    ctx.fill();
    
    // Label
    ctx.fillStyle = '#ffa726';
    ctx.font = '11px Arial';
    ctx.fillText('Mild swelling', 70, 565);
    ctx.fillText('Mild BP elevation', 145, 50);
    
  } else if (severity === 'moderate') {
    // More swelling and abdominal pain
    ctx.fillStyle = 'rgba(255, 167, 38, 0.5)';
    ctx.beginPath();
    ctx.arc(80, 280, 20, 0, Math.PI * 2);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(320, 280, 20, 0, Math.PI * 2);
    ctx.fill();
    
    // Upper abdomen pain (liver area)
    ctx.fillStyle = 'rgba(255, 87, 34, 0.4)';
    ctx.beginPath();
    ctx.ellipse(225, 220, 35, 30, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Moderate headache
    ctx.fillStyle = 'rgba(255, 167, 38, 0.3)';
    ctx.beginPath();
    ctx.arc(200, 80, 50, 0, Math.PI * 2);
    ctx.fill();
    
    // Reduced placental flow
    ctx.fillStyle = 'rgba(255, 152, 0, 0.5)';
    ctx.beginPath();
    ctx.ellipse(200, 300, 45, 35, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Labels
    ctx.fillStyle = '#ff9800';
    ctx.font = '11px Arial';
    ctx.fillText('Liver stress', 250, 215);
    ctx.fillText('Persistent headache', 130, 45);
    ctx.fillText('Reduced flow to baby', 125, 335);
    
  } else if (severity === 'severe') {
    // Severe - whole body affected
    ctx.fillStyle = 'rgba(239, 83, 80, 0.2)';
    ctx.beginPath();
    ctx.ellipse(200, 250, 95, 125, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Severe headache/vision (brain)
    ctx.fillStyle = 'rgba(211, 47, 47, 0.5)';
    ctx.beginPath();
    ctx.arc(200, 80, 60, 0, Math.PI * 2);
    ctx.fill();
    
    // Severe upper abdomen pain (liver)
    ctx.fillStyle = 'rgba(211, 47, 47, 0.6)';
    ctx.beginPath();
    ctx.ellipse(225, 220, 40, 35, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Kidney stress
    ctx.fillStyle = 'rgba(211, 47, 47, 0.5)';
    ctx.beginPath();
    ctx.ellipse(170, 270, 20, 30, 0, 0, Math.PI * 2);
    ctx.fill();
    ctx.beginPath();
    ctx.ellipse(230, 270, 20, 30, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Severe placental insufficiency
    ctx.fillStyle = 'rgba(183, 28, 28, 0.6)';
    ctx.beginPath();
    ctx.ellipse(200, 300, 50, 40, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Heart strain
    ctx.fillStyle = 'rgba(211, 47, 47, 0.4)';
    ctx.beginPath();
    ctx.arc(200, 200, 25, 0, Math.PI * 2);
    ctx.fill();
    
    // Labels
    ctx.fillStyle = '#d32f2f';
    ctx.font = 'bold 11px Arial';
    ctx.fillText('SEVERE headache', 125, 35);
    ctx.fillText('Vision problems', 135, 50);
    ctx.fillText('Liver damage', 255, 215);
    ctx.fillText('Kidney stress', 145, 265);
    ctx.fillText('Critical placental flow', 115, 340);
    ctx.fillText('Heart strain', 210, 195);
    
    // Warning symbol
    ctx.fillStyle = '#d32f2f';
    ctx.font = 'bold 20px Arial';
    ctx.fillText('⚠️', 30, 80);
    ctx.font = 'bold 14px Arial';
    ctx.fillText('EMERGENCY', 25, 100);
  }
}

function updateImpactDescription(severity) {
  const descDiv = document.getElementById('impactDescription');
  if (!descDiv) return;
  
  const descriptions = {
    normal: {
      title: 'Normal Pregnancy',
      text: 'All organ systems functioning optimally with healthy blood pressure and proper blood flow to placenta and baby.',
      vitals: [
        { label: 'Blood Pressure:', value: '120/80 mmHg', class: 'normal' },
        { label: 'Protein in Urine:', value: 'None', class: 'normal' },
        { label: 'Organ Function:', value: 'Normal', class: 'normal' }
      ]
    },
    mild: {
      title: 'Mild Preeclampsia',
      text: 'Elevated blood pressure with mild protein in urine. Close monitoring required. Symptoms include mild swelling and occasional headaches.',
      vitals: [
        { label: 'Blood Pressure:', value: '140-159/90-109 mmHg', class: 'warning' },
        { label: 'Protein in Urine:', value: 'Mild (1-2+ dipstick)', class: 'warning' },
        { label: 'Organ Function:', value: 'Mostly Normal', class: 'warning' }
      ]
    },
    moderate: {
      title: 'Moderate Preeclampsia',
      text: 'Worsening blood pressure and symptoms. Closer monitoring or hospitalization needed. Early organ involvement possible.',
      vitals: [
        { label: 'Blood Pressure:', value: '150-160/100-110 mmHg', class: 'warning' },
        { label: 'Protein in Urine:', value: 'Moderate (2-3+ dipstick)', class: 'warning' },
        { label: 'Organ Function:', value: 'Early Changes', class: 'warning' }
      ]
    },
    severe: {
      title: 'Severe Preeclampsia - EMERGENCY',
      text: 'Critical condition requiring immediate hospitalization. Multi-organ involvement with high risk of complications. Emergency delivery may be needed.',
      vitals: [
        { label: 'Blood Pressure:', value: '≥160/110 mmHg', class: 'danger' },
        { label: 'Protein in Urine:', value: 'Severe (3-4+ dipstick)', class: 'danger' },
        { label: 'Organ Function:', value: 'Compromised (Liver, Kidneys, Brain)', class: 'danger' }
      ]
    }
  };
  
  const desc = descriptions[severity];
  
  let html = `<h3>${desc.title}</h3><p>${desc.text}</p><div class="vital-signs">`;
  
  desc.vitals.forEach(vital => {
    html += `
      <div class="vital-item">
        <span class="vital-label">${vital.label}</span>
        <span class="vital-value ${vital.class}">${vital.value}</span>
      </div>
    `;
  });
  
  html += '</div>';
  descDiv.innerHTML = html;
}

// Blood pressure monitor animation
function animateBPMonitor() {
  const bpDisplay = {
    normal: { systolic: 120, diastolic: 80, status: 'NORMAL', color: '#66bb6a' },
    mild: { systolic: 145, diastolic: 95, status: 'ELEVATED', color: '#ffa726' },
    moderate: { systolic: 155, diastolic: 105, status: 'HIGH', color: '#ff9800' },
    severe: { systolic: 170, diastolic: 115, status: 'CRITICAL', color: '#ef5350' }
  };
  
  let currentState = 0;
  const states = ['normal', 'mild', 'moderate', 'severe'];
  
  setInterval(() => {
    const state = states[currentState];
    const bp = bpDisplay[state];
    
    const systolicEl = document.getElementById('bpSystolic');
    const diastolicEl = document.getElementById('bpDiastolic');
    const statusEl = document.getElementById('bpStatus');
    const widget = document.querySelector('.bp-monitor-widget');
    
    if (systolicEl && diastolicEl && statusEl && widget) {
      systolicEl.textContent = bp.systolic;
      diastolicEl.textContent = bp.diastolic;
      statusEl.textContent = bp.status;
      statusEl.style.background = bp.color;
      
      const reading = document.querySelector('.bp-reading');
      if (reading) reading.style.color = bp.color;
      widget.style.borderColor = bp.color;
    }
    
    currentState = (currentState + 1) % states.length;
  }, 3000);
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  // Initialize progress
  updateProgress();
  
  // Initialize body visualization
  drawBodyVisualization('normal');
  updateImpactDescription('normal');
  
  // Start BP monitor animation
  animateBPMonitor();
  
  // Add keyboard shortcuts
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closePanel();
      closeQuickCheck();
    }
  });
});


// ================================
// INTERACTIVE MYTH CARDS FUNCTIONALITY
// ================================

// State Management
let quizModeActive = false;
let mythsCompleted = new Set();
let quizScores = {};

// Initialize myth cards on page load
document.addEventListener('DOMContentLoaded', function() {
  initializeMythCards();
});

function initializeMythCards() {
  // Add click listeners to all myth cards
  const cards = document.querySelectorAll('.myth-card-flip');
  cards.forEach(card => {
    const mythId = card.dataset.mythId;
    
    // Animate danger meter on scroll
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const dangerFill = card.querySelector('.danger-fill');
          const targetWidth = dangerFill.style.width;
          dangerFill.style.width = '0%';
          setTimeout(() => {
            dangerFill.style.width = targetWidth;
          }, 100);
        }
      });
    }, { threshold: 0.5 });
    
    observer.observe(card);
  });
}

// Toggle Quiz Mode
function toggleQuizMode() {
  quizModeActive = !quizModeActive;
  const btn = document.getElementById('quizModeBtn');
  const btnText = btn.querySelector('.btn-text');
  
  if (quizModeActive) {
    btn.classList.add('active');
    btnText.textContent = 'Quiz Mode: ON';
    enableQuizMode();
  } else {
    btn.classList.remove('active');
    btnText.textContent = 'Quiz Mode: OFF';
    disableQuizMode();
  }
}

function enableQuizMode() {
  const cards = document.querySelectorAll('.myth-card-flip');
  cards.forEach(card => {
    const quizButtons = card.querySelector('.quiz-buttons');
    const flipButton = card.querySelector('.flip-trigger-btn');
    
    quizButtons.style.display = 'flex';
    flipButton.style.display = 'none';
  });
}

function disableQuizMode() {
  const cards = document.querySelectorAll('.myth-card-flip');
  cards.forEach(card => {
    const quizButtons = card.querySelector('.quiz-buttons');
    const flipButton = card.querySelector('.flip-trigger-btn');
    
    quizButtons.style.display = 'none';
    flipButton.style.display = 'flex';
  });
}

// Submit Quiz Answer
function submitQuizAnswer(mythId, userAnswer) {
  // All myths are FALSE (all are misconceptions)
  const correctAnswer = false;
  const isCorrect = (userAnswer === correctAnswer);
  
  const card = document.querySelector(`[data-myth-id="${mythId}"]`);
  const quizButtons = card.querySelectorAll('.quiz-btn');
  
  if (isCorrect) {
    // Correct answer
    quizButtons.forEach(btn => {
      if (btn.textContent.includes('FALSE')) {
        btn.classList.add('correct');
        playSound('correct');
      }
    });
    
    // Award points
    quizScores[mythId] = 10;
    
    // Show fact after delay
    setTimeout(() => {
      flipCard(mythId);
      markMythCompleted(mythId);
    }, 1000);
  } else {
    // Wrong answer
    quizButtons.forEach(btn => {
      if (btn.textContent.includes('TRUE')) {
        btn.classList.add('wrong');
        playSound('wrong');
      }
    });
    
    // Show correct answer after shake
    setTimeout(() => {
      quizButtons.forEach(btn => btn.classList.remove('wrong'));
      flipCard(mythId);
    }, 800);
  }
}

// Flip Card Function
function flipCard(mythId) {
  const card = document.querySelector(`[data-myth-id="${mythId}"]`);
  
  if (card.classList.contains('flipped')) {
    // Flip back
    card.classList.remove('flipped');
  } else {
    // Flip to fact
    card.classList.add('flipped');
    
    // Mark as completed if not in quiz mode
    if (!quizModeActive) {
      markMythCompleted(mythId);
    }
    
    // Play flip sound
    playSound('flip');
  }
}

// Mark Myth as Completed
function markMythCompleted(mythId) {
  if (mythsCompleted.has(mythId)) return;
  
  mythsCompleted.add(mythId);
  
  const card = document.querySelector(`[data-myth-id="${mythId}"]`);
  card.classList.add('completed');
  
  // Update progress
  updateProgress();
  
  // Check if all completed
  if (mythsCompleted.size === 8) {
    setTimeout(showCompletionCelebration, 500);
  }
}

// Update Progress Tracker
function updateProgress() {
  const count = mythsCompleted.size;
  const percentage = (count / 8) * 100;
  
  document.getElementById('mythsBusted').textContent = count;
  document.getElementById('progressBarFill').style.width = `${percentage}%`;
  
  // Animate trophy
  if (count === 8) {
    const trophy = document.getElementById('trophyIcon');
    trophy.classList.add('earned');
  }
}

// Show Completion Celebration
function showCompletionCelebration() {
  const celebration = document.getElementById('completionCelebration');
  celebration.style.display = 'block';
  
  // Create confetti
  createConfetti();
  
  // Play celebration sound
  playSound('celebration');
}

// Create Confetti Effect
function createConfetti() {
  const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#43e97b', '#38f9d7'];
  
  for (let i = 0; i < 100; i++) {
    setTimeout(() => {
      const confetti = document.createElement('div');
      confetti.className = 'confetti';
      confetti.style.left = `${Math.random() * 100}vw`;
      confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
      confetti.style.animationDelay = `${Math.random() * 0.5}s`;
      confetti.style.animationDuration = `${2 + Math.random() * 2}s`;
      
      document.body.appendChild(confetti);
      
      setTimeout(() => confetti.remove(), 5000);
    }, i * 30);
  }
}

// Reset Progress
function resetProgress() {
  mythsCompleted.clear();
  quizScores = {};
  
  // Reset all cards
  const cards = document.querySelectorAll('.myth-card-flip');
  cards.forEach(card => {
    card.classList.remove('flipped', 'completed');
  });
  
  // Reset progress bar
  updateProgress();
  
  // Hide celebration
  document.getElementById('completionCelebration').style.display = 'none';
  
  // Reset trophy
  document.getElementById('trophyIcon').classList.remove('earned');
  
  // Scroll to myths section
  document.getElementById('myths').scrollIntoView({ behavior: 'smooth' });
}

// Shuffle Myths
function shuffleMyths() {
  const grid = document.getElementById('mythsGrid');
  const cards = Array.from(grid.children);
  
  // Fisher-Yates shuffle
  for (let i = cards.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    grid.appendChild(cards[j]);
  }
  
  // Animate shuffle
  cards.forEach((card, index) => {
    card.style.animation = 'none';
    setTimeout(() => {
      card.style.animation = `card-shuffle 0.6s ease ${index * 0.05}s`;
    }, 10);
  });
  
  playSound('shuffle');
}

// Add CSS animation for shuffle
const shuffleAnimation = `
@keyframes card-shuffle {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  50% { transform: translateY(-30px) rotate(5deg); opacity: 0.5; }
  100% { transform: translateY(0) rotate(0deg); opacity: 1; }
}
`;

if (!document.getElementById('shuffle-animation')) {
  const style = document.createElement('style');
  style.id = 'shuffle-animation';
  style.textContent = shuffleAnimation;
  document.head.appendChild(style);
}

// Share Myth Function
function shareMyth(mythId) {
  const card = document.querySelector(`[data-myth-id="${mythId}"]`);
  const mythText = card.querySelector('.myth-question').textContent;
  const factText = card.querySelector('.fact-text').textContent;
  
  const shareText = `🚨 Preeclampsia Myth Busted!\n\n❌ MYTH: ${mythText}\n\n✅ FACT: ${factText}\n\n🔗 Learn more at: [Your Website URL]`;
  
  if (navigator.share) {
    navigator.share({
      title: 'Preeclampsia Myth Busted',
      text: shareText,
    }).catch(err => console.log('Share cancelled'));
  } else {
    // Fallback: Copy to clipboard
    navigator.clipboard.writeText(shareText).then(() => {
      showToast('Fact copied to clipboard! Share it to help others.');
    });
  }
  
  playSound('share');
}

// Share All Myths
function shareAllMyths() {
  const allFacts = `🚨 8 Dangerous Preeclampsia Myths BUSTED!\n\nProtect yourself and other mothers by learning the truth:\n\n` +
    `1. Preeclampsia can happen in ANY pregnancy\n` +
    `2. Not all swelling means preeclampsia\n` +
    `3. Don't restrict salt unnecessarily\n` +
    `4. Can develop up to 6 weeks AFTER delivery\n` +
    `5. Bed rest doesn't prevent it\n` +
    `6. NO natural cure exists - delivery is the only cure\n` +
    `7. Doesn't always require C-section\n` +
    `8. High BP is a "silent killer" - can't feel it\n\n` +
    `🔗 Learn more at: [Your Website URL]`;
  
  if (navigator.share) {
    navigator.share({
      title: '8 Preeclampsia Myths Busted',
      text: allFacts,
    }).catch(err => console.log('Share cancelled'));
  } else {
    navigator.clipboard.writeText(allFacts).then(() => {
      showToast('All facts copied! Share them to save lives.');
    });
  }
}

// Speak Myth (Text-to-Speech)
function speakMyth(mythId) {
  const card = document.querySelector(`[data-myth-id="${mythId}"]`);
  const mythText = card.querySelector('.myth-question').textContent;
  const factText = card.querySelector('.fact-text').textContent;
  
  const textToSpeak = `Myth: ${mythText}. Fact: ${factText}`;
  
  if ('speechSynthesis' in window) {
    // Cancel any ongoing speech
    window.speechSynthesis.cancel();
    
    const utterance = new SpeechSynthesisUtterance(textToSpeak);
    utterance.rate = 0.9;
    utterance.pitch = 1;
    utterance.volume = 1;
    
    // Find Hindi voice if available
    const voices = window.speechSynthesis.getVoices();
    const hindiVoice = voices.find(voice => voice.lang.includes('hi-IN'));
    if (hindiVoice) {
      utterance.voice = hindiVoice;
    }
    
    window.speechSynthesis.speak(utterance);
    
    // Visual feedback
    const speakBtn = card.querySelector('[onclick*="speakMyth"]');
    speakBtn.textContent = '⏸️';
    
    utterance.onend = () => {
      speakBtn.textContent = '🔊';
    };
  } else {
    showToast('Text-to-speech not supported in your browser');
  }
}

// Play Sound Effects
function playSound(type) {
  // Create audio context for sound effects
  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  const oscillator = audioContext.createOscillator();
  const gainNode = audioContext.createGain();
  
  oscillator.connect(gainNode);
  gainNode.connect(audioContext.destination);
  
  switch(type) {
    case 'correct':
      oscillator.frequency.value = 600;
      gainNode.gain.value = 0.1;
      oscillator.start();
      oscillator.stop(audioContext.currentTime + 0.2);
      break;
    case 'wrong':
      oscillator.frequency.value = 200;
      gainNode.gain.value = 0.1;
      oscillator.start();
      oscillator.stop(audioContext.currentTime + 0.3);
      break;
    case 'flip':
      oscillator.frequency.value = 400;
      gainNode.gain.value = 0.05;
      oscillator.start();
      oscillator.stop(audioContext.currentTime + 0.1);
      break;
    case 'celebration':
      // Play a sequence of notes
      [400, 500, 600, 800].forEach((freq, i) => {
        setTimeout(() => {
          const osc = audioContext.createOscillator();
          const gain = audioContext.createGain();
          osc.connect(gain);
          gain.connect(audioContext.destination);
          osc.frequency.value = freq;
          gain.gain.value = 0.1;
          osc.start();
          osc.stop(audioContext.currentTime + 0.15);
        }, i * 100);
      });
      break;
    case 'shuffle':
      oscillator.frequency.value = 300;
      gainNode.gain.value = 0.05;
      oscillator.start();
      oscillator.stop(audioContext.currentTime + 0.15);
      break;
    case 'share':
      oscillator.frequency.value = 500;
      gainNode.gain.value = 0.08;
      oscillator.start();
      oscillator.stop(audioContext.currentTime + 0.12);
      break;
  }
}

// Show Toast Notification
function showToast(message) {
  // Create toast element
  const toast = document.createElement('div');
  toast.className = 'toast-notification';
  toast.textContent = message;
  toast.style.cssText = `
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 15px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    z-index: 10001;
    animation: toast-appear 0.3s ease;
  `;
  
  document.body.appendChild(toast);
  
  // Remove after 3 seconds
  setTimeout(() => {
    toast.style.animation = 'toast-disappear 0.3s ease';
    setTimeout(() => toast.remove(), 300);
  }, 3000);
}

// Add toast animations to document
const toastAnimations = `
@keyframes toast-appear {
  from { 
    opacity: 0;
    transform: translateY(20px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes toast-disappear {
  from { 
    opacity: 1;
    transform: translateY(0);
  }
  to { 
    opacity: 0;
    transform: translateY(20px);
  }
}
`;



if (!document.getElementById('toast-animations')) {
  const style = document.createElement('style');
  style.id = 'toast-animations';
  style.textContent = toastAnimations;
  document.head.appendChild(style);
}

// ================================
// BODY SIMULATOR - 3D INTEGRATION
// ================================

// Import 3D simulation engine (loaded via script tag in HTML)
// The body_simulator_3d.js file will handle all Three.js rendering

// Initialize simulator when page loads
document.addEventListener('DOMContentLoaded', function() {
  // Check if we're on simulator section
  if (document.getElementById('simulator')) {
    initializeBodySimulator3D();
  }
});

// Main initialization function
function initializeBodySimulator3D() {
  console.log('Initializing 3D Body Simulator...');
  
  // This will be handled by the external body_simulator_3d.js file
  // which contains all the Three.js logic
  
  // Set up event listeners for controls
  setupSimulatorControls();
}

// Set up control event listeners
function setupSimulatorControls() {
  // These functions are called from HTML onclick attributes
  // They interface with the 3D engine defined in body_simulator_3d.js
}

// Severity slider update
function updateSeverityLevel(value) {
  const severityDisplay = document.getElementById('severityDisplay');
  const statusBadge = document.getElementById('currentStatusBadge');
  const badgeIcon = statusBadge.querySelector('.badge-icon');
  const badgeText = statusBadge.querySelector('.badge-text');
  
  let severity, icon, text, bgColor;
  
  if (value < 25) {
    severity = 'normal';
    icon = '✅';
    text = 'Normal Pregnancy';
    severityDisplay.textContent = 'Normal';
    bgColor = 'rgba(102, 187, 106, 0.15)';
    statusBadge.style.borderColor = '#66bb6a';
  } else if (value < 50) {
    severity = 'mild';
    icon = '🟢';
    text = 'Mild Preeclampsia';
    severityDisplay.textContent = 'Mild';
    bgColor = 'rgba(255, 193, 7, 0.15)';
    statusBadge.style.borderColor = '#ffa726';
  } else if (value < 75) {
    severity = 'moderate';
    icon = '🟡';
    text = 'Moderate Preeclampsia';
    severityDisplay.textContent = 'Moderate';
    bgColor = 'rgba(255, 152, 0, 0.15)';
    statusBadge.style.borderColor = '#ff9800';
  } else {
    severity = 'severe';
    icon = '🔴';
    text = 'Severe Preeclampsia';
    severityDisplay.textContent = 'Severe';
    bgColor = 'rgba(244, 67, 54, 0.15)';
    statusBadge.style.borderColor = '#f44336';
  }
  
  badgeIcon.textContent = icon;
  badgeText.textContent = text;
  statusBadge.style.backgroundColor = bgColor;

    // ADD THIS LINE:
  updateSVGBodySeverity(value);

  
  // Update 3D visualization (calls function from body_simulator_3d.js)
  if (typeof updateSimulatorSeverity === 'function') {
    updateSimulatorSeverity(severity, value);
  }
  
  // Update vital signs
  updateVitalSigns(severity, value);
  
  // Update info panel
  updateInfoPanel(severity);
}

// Pregnancy week slider update
function updatePregnancyWeek(week) {
  document.getElementById('weekDisplay').textContent = `Week ${week}`;
  
  // Update 3D visualization
  if (typeof updateSimulatorWeek === 'function') {
    updateSimulatorWeek(parseInt(week));
  }
  
  // Update comparison view weeks
  document.getElementById('normalWeek').textContent = week;
  document.getElementById('peWeek').textContent = week;
}


// Update vital signs based on severity
function updateVitalSigns(severity, value) {
  const percentage = parseInt(value);
  
  // Calculate vital values based on severity percentage
  const systolic = Math.round(120 + (percentage * 0.5)); // 120 → 170
  const diastolic = Math.round(80 + (percentage * 0.3)); // 80 → 110
  const heartRate = Math.round(80 + (percentage * 0.45)); // 80 → 125
  const oxygen = Math.round(98 - (percentage * 0.06)); // 98 → 92
  const platelets = Math.round(250 - (percentage * 1.0)); // 250 → 150
  const alt = Math.round(25 + (percentage * 0.75)); // 25 → 100
  const ast = Math.round(22 + (percentage * 0.78)); // 22 → 100
  
  // Update BP
  document.getElementById('vitalSystolic').textContent = systolic;
  document.getElementById('vitalDiastolic').textContent = diastolic;
  updateVitalStatus('bp', systolic, diastolic);
  
  // Update Heart Rate
  document.getElementById('vitalHeartRate').textContent = heartRate;
  updateHeartBeatAnimation(heartRate);
  updateVitalStatus('hr', heartRate);
  
  // Update Oxygen
  document.getElementById('vitalOxygen').textContent = oxygen;
  document.getElementById('oxygenBar').style.width = oxygen + '%';
  updateVitalStatus('o2', oxygen);
  
  // Update Protein
  const proteinHeight = percentage; // 0% → 100%
  document.getElementById('proteinFluid').style.height = proteinHeight + '%';
  const proteinValue = percentage < 25 ? 'None' : 
                       percentage < 50 ? 'Trace (+)' : 
                       percentage < 75 ? '2+' : '4+ (High)';
  document.getElementById('vitalProtein').textContent = proteinValue;
  updateVitalStatus('protein', percentage);
  
  // Update Platelets
  document.getElementById('vitalPlatelets').textContent = platelets;
  updatePlateletCells(platelets);
  updateVitalStatus('platelet', platelets);
  
  // Update Liver Enzymes
  document.getElementById('vitalALT').textContent = alt;
  document.getElementById('vitalAST').textContent = ast;
  updateVitalStatus('liver', alt, ast);
  
  // Show/hide emergency alert
  const emergencyAlert = document.getElementById('emergencyAlert');
  if (percentage >= 75) {
    emergencyAlert.style.display = 'block';
  } else {
    emergencyAlert.style.display = 'none';
  }
  
  // Update waveforms/charts
  updateVitalWaveforms(severity);
}

// Update vital status indicators
function updateVitalStatus(vital, ...values) {
  const statusElement = document.getElementById(`${vital}StatusText`);
  if (!statusElement) return;
  
  let status, text;
  
  switch(vital) {
    case 'bp':
      const [sys, dias] = values;
      if (sys >= 160 || dias >= 110) {
        status = 'danger';
        text = 'SEVERE';
      } else if (sys >= 140 || dias >= 90) {
        status = 'warning';
        text = 'ELEVATED';
      } else {
        status = 'normal';
        text = 'Normal Range';
      }
      break;
      
    case 'hr':
      const hr = values[0];
      if (hr >= 110) {
        status = 'danger';
        text = 'TACHYCARDIA';
      } else if (hr >= 100) {
        status = 'warning';
        text = 'Elevated';
      } else {
        status = 'normal';
        text = 'Normal';
      }
      break;
      
    case 'o2':
      const o2 = values[0];
      if (o2 < 92) {
        status = 'danger';
        text = 'LOW';
      } else if (o2 < 95) {
        status = 'warning';
        text = 'Decreased';
      } else {
        status = 'normal';
        text = 'Optimal';
      }
      break;
      
    case 'protein':
      const protein = values[0];
      if (protein >= 75) {
        status = 'danger';
        text = '4+ (Critical)';
      } else if (protein >= 50) {
        status = 'warning';
        text = '2+ (Moderate)';
      } else if (protein >= 25) {
        status = 'warning';
        text = 'Trace';
      } else {
        status = 'normal';
        text = 'Negative';
      }
      break;
      
    case 'platelet':
      const plt = values[0];
      if (plt < 150) {
        status = 'danger';
        text = 'THROMBOCYTOPENIA';
      } else if (plt < 200) {
        status = 'warning';
        text = 'Low-Normal';
      } else {
        status = 'normal';
        text = 'Normal';
      }
      break;
      
    case 'liver':
      const [alt, ast] = values;
      if (alt > 70 || ast > 70) {
        status = 'danger';
        text = 'ELEVATED';
      } else if (alt > 40 || ast > 40) {
        status = 'warning';
        text = 'Mild Elevation';
      } else {
        status = 'normal';
        text = 'Normal';
      }
      break;
  }
  
  statusElement.className = `vital-status status-${status}`;
  statusElement.textContent = text;
}

// Update heart beat animation speed
function updateHeartBeatAnimation(heartRate) {
  const heartIcon = document.getElementById('heartBeatIcon');
  if (!heartIcon) return;
  
  // Calculate animation duration based on BPM
  // 60 BPM = 1s, 120 BPM = 0.5s
  const duration = 60 / heartRate;
  heartIcon.style.animationDuration = `${duration}s`;
}

// Update platelet cell visualization
function updatePlateletCells(count) {
  const container = document.getElementById('plateletCells');
  if (!container) return;
  
  container.innerHTML = '';
  
  // Show proportional number of cells (max 50 for visual)
  const cellCount = Math.min(Math.round(count / 5), 50);
  
  for (let i = 0; i < cellCount; i++) {
    const cell = document.createElement('div');
    cell.className = 'platelet-cell';
    cell.style.animationDelay = `${Math.random() * 2}s`;
    container.appendChild(cell);
  }
}


// Update vital waveforms using Canvas
function updateVitalWaveforms(severity) {
  updateBPWaveform(severity);
  updateHRWaveform(severity);
  updateEnzymeChart(severity);
}

function updateBPWaveform(severity) {
  const canvas = document.getElementById('bpWaveform');
  if (!canvas) return;
  
  const ctx = canvas.getContext('2d');
  const width = canvas.width;
  const height = canvas.height;
  
  ctx.clearRect(0, 0, width, height);
  
  // Draw BP waveform
  ctx.strokeStyle = severity === 'severe' ? '#f44336' : 
                    severity === 'moderate' ? '#ff9800' : 
                    severity === 'mild' ? '#ffa726' : '#66bb6a';
  ctx.lineWidth = 2;
  ctx.beginPath();
  
  for (let x = 0; x < width; x++) {
    const y = height/2 + Math.sin(x * 0.1) * (height/4) * 
              (severity === 'severe' ? 1.5 : 
               severity === 'moderate' ? 1.2 : 1);
    if (x === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }
  
  ctx.stroke();
}

function updateHRWaveform(severity) {
  const canvas = document.getElementById('hrWaveform');
  if (!canvas) return;
  
  const ctx = canvas.getContext('2d');
  const width = canvas.width;
  const height = canvas.height;
  
  ctx.clearRect(0, 0, width, height);
  
  // Draw ECG-style waveform
  ctx.strokeStyle = '#f48fb1';
  ctx.lineWidth = 2;
  ctx.beginPath();
  
  const segments = severity === 'severe' ? 6 : 4;
  const segmentWidth = width / segments;
  
  for (let i = 0; i < segments; i++) {
    const x = i * segmentWidth;
    ctx.moveTo(x, height/2);
    ctx.lineTo(x + 5, height/2);
    ctx.lineTo(x + 10, height * 0.2);
    ctx.lineTo(x + 15, height * 0.8);
    ctx.lineTo(x + 20, height/2);
    ctx.lineTo(x + segmentWidth, height/2);
  }
  
  ctx.stroke();
}

function updateEnzymeChart(severity) {
  const canvas = document.getElementById('enzymeChart');
  if (!canvas) return;
  
  const ctx = canvas.getContext('2d');
  const width = canvas.width;
  const height = canvas.height;
  
  ctx.clearRect(0, 0, width, height);
  
  // Draw bar chart for ALT and AST
  const altHeight = severity === 'severe' ? height * 0.8 : 
                   severity === 'moderate' ? height * 0.5 : 
                   severity === 'mild' ? height * 0.3 : height * 0.2;
  
  const astHeight = severity === 'severe' ? height * 0.75 : 
                   severity === 'moderate' ? height * 0.45 : 
                   severity === 'mild' ? height * 0.28 : height * 0.18;
  
  // ALT bar
  ctx.fillStyle = severity === 'severe' ? '#f44336' : 
                  severity === 'moderate' ? '#ff9800' : '#66bb6a';
  ctx.fillRect(width * 0.25, height - altHeight, width * 0.2, altHeight);
  
  // AST bar
  ctx.fillRect(width * 0.55, height - astHeight, width * 0.2, astHeight);
}

// Update info panel text
// Update info panel text
function updateInfoPanel(severity) {
  const title = document.getElementById('currentStateTitle');
  const desc = document.getElementById('currentStateDescription');
  const changesList = document.getElementById('keyChangesList');
  const action = document.getElementById('actionRecommendation');
  
  const week = document.getElementById('timelineSlider').value;
  
  // Get info blocks
  const stateInfo = document.querySelector('.current-state-info');
  const changesInfo = document.querySelector('.key-changes-info');
  const actionInfo = document.querySelector('.action-info');
  
  // Remove all severity classes
  const allInfoBlocks = [stateInfo, changesInfo, actionInfo];
  allInfoBlocks.forEach(block => {
    if (block) {
      block.classList.remove('severity-normal', 'severity-mild', 'severity-moderate', 'severity-severe');
      block.classList.add(`severity-${severity}`);
    }
  });
  
  const content = {
    normal: {
      title: `Normal Pregnancy - Week ${week}`,
      desc: 'All organ systems functioning optimally with healthy blood pressure and proper blood flow to placenta and baby.',
      changes: [
        '✅ Blood pressure within normal range (120/80 mmHg)',
        '✅ No protein in urine',
        '✅ All organs functioning normally',
        '✅ Placental blood flow optimal'
      ],
      action: {
        icon: '✅',
        text: 'Continue regular prenatal checkups. Monitor blood pressure weekly at home if available.'
      }
    },
    mild: {
      title: `Mild Preeclampsia - Week ${week}`,
      desc: 'Blood pressure slightly elevated with possible trace protein in urine. Close monitoring required to prevent progression.',
      changes: [
        '🟡 Blood pressure mildly elevated (140-149/90-99 mmHg)',
        '🟡 Trace protein may be present in urine',
        '🟡 Mild swelling in hands and feet',
        '🟡 Occasional mild headaches'
      ],
      action: {
        icon: '⚠️',
        text: 'Schedule immediate doctor visit. Monitor BP twice daily at home. Report any severe symptoms immediately. Bed rest with left lateral position may be recommended.'
      }
    },
    moderate: {
      title: `Moderate Preeclampsia - Week ${week}`,
      desc: 'Blood pressure significantly elevated with protein in urine. Multiple organ systems showing stress. Requires close medical supervision.',
      changes: [
        '🟠 Blood pressure 150-159/100-109 mmHg',
        '🟠 Moderate protein in urine (2+ dipstick)',
        '🟠 Liver enzymes starting to elevate',
        '🟠 Platelet count may be dropping',
        '🟠 Significant swelling in face and hands'
      ],
      action: {
        icon: '🚨',
        text: 'URGENT medical care needed. Likely hospitalization for monitoring. Medications to lower BP and prevent seizures. Delivery may be considered depending on baby\'s maturity.'
      }
    },
    severe: {
      title: `Severe Preeclampsia - Week ${week}`,
      desc: 'CRITICAL CONDITION: Blood pressure dangerously high. Multiple organ damage. Immediate delivery often necessary to save mother and baby.',
      changes: [
        '🔴 Blood pressure ≥ 160/110 mmHg',
        '🔴 Heavy protein in urine (4+ dipstick, >5g/24hr)',
        '🔴 HELLP syndrome risk (liver damage, low platelets)',
        '🔴 Kidney function deteriorating',
        '🔴 Brain swelling risk - severe headache, vision changes',
        '🔴 Placental insufficiency - baby at risk'
      ],
      action: {
        icon: '🚑',
        text: 'MEDICAL EMERGENCY! Immediate hospitalization required. Magnesium sulfate to prevent seizures. Urgent delivery likely needed regardless of gestational age. Call 108/102 if at home.'
      }
    }
  };
  
  const severityContent = content[severity];
  
  if (title) title.textContent = severityContent.title;
  if (desc) desc.textContent = severityContent.desc;
  if (changesList) {
    changesList.innerHTML = severityContent.changes.map(c => `<li>${c}</li>`).join('');
  }
  if (action) {
    action.innerHTML = `
      <span class="action-icon">${severityContent.action.icon}</span>
      <p>${severityContent.action.text}</p>
    `;
  }
}

// View mode switching
function switchViewMode(mode) {
  // Remove active class from all buttons
  document.querySelectorAll('.view-mode-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  
  // Add active to clicked button
  document.querySelector(`[data-view="${mode}"]`).classList.add('active');
  
  if (mode === 'comparison') {
    // Show side-by-side comparison with 3D female figures
    showComparisonView();
  } else if (mode === '3d') {
    show3DView();
  } else if (mode === 'journey') {
    showJourneyView();
  }
}

function showComparisonView() {
  // Create two 3D female figures side by side
  // Left: Normal pregnancy
  // Right: Preeclampsia progression
  // Both should be interactive with organ highlights
  
  const viewerContainer = document.querySelector('.body-3d-viewer');
  viewerContainer.innerHTML = `
    <div class="comparison-split-view">
      <div class="comparison-panel normal-panel">
        <div class="panel-header">
          <h3>✅ Normal Pregnancy</h3>
          <p>Healthy organ function</p>
        </div>
        <div class="female-3d-model" id="normalModel">
          <!-- Clone the existing 3D body SVG here -->
          ${document.getElementById('bodySvgPreeclampsia').outerHTML}
        </div>
        <div class="panel-stats">
          <div class="stat-item">
            <span class="stat-label">Blood Pressure</span>
            <span class="stat-value normal">120/80 mmHg</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Kidney Function</span>
            <span class="stat-value normal">Normal</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Liver Enzymes</span>
            <span class="stat-value normal">Normal</span>
          </div>
        </div>
      </div>
      
      <div class="comparison-divider">
        <div class="divider-line"></div>
        <div class="vs-badge">VS</div>
      </div>
      
      <div class="comparison-panel pe-panel">
        <div class="panel-header">
          <h3>⚠️ Preeclampsia</h3>
          <p>Affected organ systems</p>
        </div>
        <div class="female-3d-model affected" id="peModel">
          <!-- Clone the existing 3D body SVG here with affected areas highlighted -->
          ${document.getElementById('bodySvgPreeclampsia').outerHTML}
        </div>
        <div class="panel-stats">
          <div class="stat-item">
            <span class="stat-label">Blood Pressure</span>
            <span class="stat-value danger">160/110 mmHg</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Kidney Function</span>
            <span class="stat-value warning">Proteinuria</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Liver Enzymes</span>
            <span class="stat-value danger">Elevated</span>
          </div>
        </div>
      </div>
    </div>
  `;
  
  // Apply highlighting to affected organs in PE model
  highlightAffectedOrgans('peModel');
}

// Layer toggle
function toggleLayer(layerName) {
  const checkbox = document.getElementById(`layer${layerName.charAt(0).toUpperCase() + layerName.slice(1)}`);
  const isVisible = checkbox.checked;
  
  // Call 3D engine function
  if (typeof toggleOrganLayer === 'function') {
    toggleOrganLayer(layerName, isVisible);
  }
}

// Preset application
function applyPreset(preset) {
  const layers = ['cardiovascular', 'nervous', 'renal', 'hepatic', 'placental', 'respiratory'];
  
  switch(preset) {
    case 'all':
      layers.forEach(layer => {
        document.getElementById(`layer${layer.charAt(0).toUpperCase() + layer.slice(1)}`).checked = true;
        toggleLayer(layer);
      });
      break;
      
    case 'critical':
      layers.forEach(layer => {
        const isCritical = ['cardiovascular', 'nervous', 'renal'].includes(layer);
        document.getElementById(`layer${layer.charAt(0).toUpperCase() + layer.slice(1)}`).checked = isCritical;
        toggleLayer(layer);
      });
      break;
      
    case 'affected':
      // Show only systems affected by current severity
      const severity = document.getElementById('severitySlider').value;
      layers.forEach(layer => {
        const isAffected = severity > 25; // Simple logic, refine as needed
        document.getElementById(`layer${layer.charAt(0).toUpperCase() + layer.slice(1)}`).checked = isAffected;
        toggleLayer(layer);
      });
      break;
  }
}

// Zoom controls
function zoomIn() {
  if (typeof handleZoomIn === 'function') {
    handleZoomIn();
  }
}

function zoomOut() {
  if (typeof handleZoomOut === 'function') {
    handleZoomOut();
  }
}

function resetView() {
  if (typeof handleResetView === 'function') {
    handleResetView();
  }
}

function toggleAutoRotate() {
  const btn = document.getElementById('autoRotateBtn');
  btn.classList.toggle('active');
  
  if (typeof handleToggleAutoRotate === 'function') {
    handleToggleAutoRotate(btn.classList.contains('active'));
  }
}

// Audio symptoms
let audioOscillators = {};

function toggleAudioSymptoms() {
  const btn = document.getElementById('audioToggle');
  if (!btn) return;
  
  const isActive = btn.classList.toggle('active');
  const status = btn.querySelector('.audio-status');
  
  if (status) status.textContent = isActive ? 'ON' : 'OFF';
  
  if (isActive) {
    startAudioSymptoms();
  } else {
    stopAudioSymptoms();
  }
}

function startAudioSymptoms() {
  if (!audioContext) {
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
  }
  
  const severitySlider = document.getElementById('severitySlider');
  const severity = severitySlider ? severitySlider.value : 0;
  
  if (severity > 50) {
    playHeadacheSound();
  }
}

function stopAudioSymptoms() {
  Object.values(audioOscillators).forEach(osc => {
    if (osc) {
      osc.stop();
      osc.disconnect();
    }
  });
  audioOscillators = {};
}




function playHeadacheSound() {
  const oscillator = audioContext.createOscillator();
  const gainNode = audioContext.createGain();
  
  oscillator.connect(gainNode);
  gainNode.connect(audioContext.destination);
  
  oscillator.frequency.value = 80;
  gainNode.gain.value = 0.05;
  
  setInterval(() => {
    gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.5);
    gainNode.gain.linearRampToValueAtTime(0.02, audioContext.currentTime + 1);
  }, 1000);
  
  oscillator.start();
  audioOscillators.headache = oscillator;
}

// Journey animation
let journeyInterval;
let journeyProgress = 0;

function playJourney() {
  const playBtn = document.getElementById('playBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  const severitySlider = document.getElementById('severitySlider');
  const timelineSlider = document.getElementById('timelineSlider');
  const progressFill = document.getElementById('journeyProgressFill');
  const timeDisplay = document.getElementById('journeyTime');
  
  if (!playBtn || !severitySlider) return;
  
  if (playBtn.style.display !== 'none') playBtn.style.display = 'none';
  if (pauseBtn) pauseBtn.style.display = 'inline-flex';
  
  const duration = 60000;
  const startTime = Date.now();
  
  journeyInterval = setInterval(() => {
    const elapsed = Date.now() - startTime;
    journeyProgress = Math.min((elapsed / duration) * 100, 100);
    
    if (progressFill) progressFill.style.width = journeyProgress + '%';
    
    if (timeDisplay) {
      const seconds = Math.floor(elapsed / 1000);
      timeDisplay.textContent = `0:${seconds.toString().padStart(2, '0')} / 1:00`;
    }
    
    severitySlider.value = journeyProgress;
    updateSeverityLevel(journeyProgress);
    
    if (timelineSlider) {
      const week = Math.round(20 + (journeyProgress / 100) * 20);
      timelineSlider.value = week;
      updatePregnancyWeek(week);
    }
    
    if (journeyProgress >= 100) {
      pauseJourney();
    }
  }, 100);
}

function pauseJourney() {
  const playBtn = document.getElementById('playBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  
  if (journeyInterval) {
    clearInterval(journeyInterval);
    journeyInterval = null;
  }
  
  if (playBtn) playBtn.style.display = 'inline-flex';
  if (pauseBtn) pauseBtn.style.display = 'none';
}

function resetJourney() {
  pauseJourney();
  journeyProgress = 0;
  
  const progressFill = document.getElementById('journeyProgressFill');
  const timeDisplay = document.getElementById('journeyTime');
  const severitySlider = document.getElementById('severitySlider');
  const timelineSlider = document.getElementById('timelineSlider');
  
  if (progressFill) progressFill.style.width = '0%';
  if (timeDisplay) timeDisplay.textContent = '0:00 / 1:00';
  if (severitySlider) {
    severitySlider.value = 0;
    updateSeverityLevel(0);
  }
  if (timelineSlider) {
    timelineSlider.value = 20;
    updatePregnancyWeek(20);
  }
}

// Organ modal
const organData = {
  brain: {
    icon: '🧠',
    name: 'Brain',
    normalDesc: 'Normal blood flow, no headaches or visual disturbances. Brain vessels functioning properly with optimal oxygen delivery.',
    affectedDesc: 'Constricted blood vessels cause severe headaches, vision changes, confusion, and increased risk of seizures (eclampsia). Cerebral edema may develop.',
    symptoms: [
      'Severe, persistent headache that doesn\'t respond to paracetamol',
      'Blurred vision or seeing spots/flashing lights',
      'Temporary vision loss or scotomas',
      'Light sensitivity (photophobia)',
      'Confusion or altered mental state',
      'Seizures (eclampsia - life-threatening emergency)'
    ],
    action: 'Severe headache or any vision changes require IMMEDIATE medical attention. Call 108/102 NOW. These are warning signs of severe preeclampsia or impending eclampsia.'
  },
  eyes: {
    icon: '👁️',
    name: 'Eyes & Vision',
    normalDesc: 'Clear, sharp vision with normal blood flow to retinal vessels. No visual disturbances.',
    affectedDesc: 'Retinal blood vessel spasms and swelling of the optic nerve cause blurred vision, scotomas (blind spots), flashing lights, or temporary blindness.',
    symptoms: [
      'Persistent blurred or double vision',
      'Seeing spots or "floaters"',
      'Flashing lights in peripheral vision',
      'Temporary loss of vision',
      'Sensitivity to bright lights',
      'Difficulty focusing'
    ],
    action: 'Vision changes are SEVERE symptoms indicating high blood pressure effects on the brain and eyes. Seek immediate emergency care.'
  },
  heart: {
    icon: '❤️',
    name: 'Heart & Circulation',
    normalDesc: 'Heart pumping efficiently at normal rate (70-90 BPM) with good blood pressure. Adequate blood supply to all organs.',
    affectedDesc: 'Heart works harder to pump against increased vascular resistance. Risk of cardiomyopathy, pulmonary edema (fluid in lungs), and heart failure.',
    symptoms: [
      'Rapid heartbeat or palpitations',
      'Chest pain or tightness',
      'Severe shortness of breath',
      'Difficulty breathing when lying flat',
      'Extreme fatigue and weakness',
      'Swelling in lungs (pulmonary edema)'
    ],
    action: 'Chest pain or severe difficulty breathing requires EMERGENCY care. Call 108/102 immediately. May indicate heart strain or pulmonary edema.'
  },
  liver: {
    icon: '🫀',
    name: 'Liver',
    normalDesc: 'Liver enzymes normal (ALT <40, AST <40). Processing nutrients, producing proteins, and filtering blood effectively.',
    affectedDesc: 'Liver swelling, hemorrhage, and damage. HELLP syndrome risk (Hemolysis, Elevated Liver enzymes, Low Platelets). Can lead to liver rupture.',
    symptoms: [
      'Severe pain in upper right abdomen (below ribs)',
      'Pain that may radiate to right shoulder blade',
      'Persistent nausea and vomiting',
      'Jaundice (yellowing of skin/eyes)',
      'Tenderness when pressing on liver area',
      'Dark urine from liver dysfunction'
    ],
    action: 'Upper right abdominal pain is a SEVERE EMERGENCY symptom indicating liver involvement (HELLP syndrome). Requires immediate hospitalization and may need emergency delivery.'
  },
  kidneys: {
    icon: '🫘',
    name: 'Kidneys',
    normalDesc: 'Kidneys filtering blood properly with intact glomerular basement membrane. No protein leakage. Normal urine output (1-2L/day).',
    affectedDesc: 'Damaged kidney filters (glomerular endotheliosis) allow protein to leak into urine. Reduced filtration rate. Risk of acute kidney injury and failure.',
    symptoms: [
      'Protein in urine (proteinuria) - detected by urine dipstick',
      'Decreased urine output (oliguria)',
      'Sudden severe swelling (face, hands, ankles)',
      'Foamy or bubbly urine from excess protein',
      'Dark-colored urine',
      'Elevated creatinine levels in blood'
    ],
    action: 'Proteinuria is a KEY diagnostic criterion for preeclampsia. Regular urine protein testing during pregnancy helps detect this early. Decreased urine output needs urgent evaluation.'
  },
  placenta: {
    icon: '🤰',
    name: 'Placenta & Baby',
    normalDesc: 'Placenta receiving optimal blood flow (500-700 mL/min), providing abundant oxygen and nutrients. Baby growing at expected rate for gestational age.',
    affectedDesc: 'Inadequate spiral artery remodeling causes reduced placental perfusion. Poor oxygen/nutrient transfer leads to fetal growth restriction, oligohydramnios, placental abruption risk.',
    symptoms: [
      'Decreased fetal movement (kick counts)',
      'Fundal height measuring small for dates',
      'Baby growing slower than expected (IUGR)',
      'Reduced amniotic fluid (oligohydramnios)',
      'Abnormal fetal heart rate patterns',
      'Placental insufficiency on Doppler ultrasound'
    ],
    action: 'Decreased fetal movement is URGENT. If baby is moving less than usual or you don\'t feel 10 kicks in 2 hours, contact doctor immediately. Baby may not be getting enough oxygen.'
  },
  hands: {
    icon: '✋',
    name: 'Hands',
    normalDesc: 'Normal circulation with minimal swelling. Mild ankle/foot swelling late in day is normal in pregnancy.',
    affectedDesc: 'SUDDEN severe swelling (edema) from fluid leaking into tissues due to low protein in blood and increased vascular permeability. Rings won\'t fit.',
    symptoms: [
      'Rapid swelling appearing within hours (not days)',
      'Rings become too tight or impossible to remove',
      'Hands feel puffy, tight, or numb',
      'Skin appears shiny or stretched',
      'Difficulty making a fist or bending fingers',
      'Pitting edema (finger pressure leaves indent)'
    ],
    action: 'SUDDEN swelling (within hours/overnight) of hands, especially with facial swelling, needs same-day evaluation. Gradual ankle swelling alone is usually normal pregnancy.'
  },
  feet: {
    icon: '🦶',
    name: 'Feet & Ankles',
    normalDesc: 'Mild dependent edema (ankle swelling) in late pregnancy is normal, improves with rest and elevation. No pain or tenderness.',
    affectedDesc: 'SEVERE pitting edema that doesn\'t improve with rest. Swelling extends up legs. Combined with hand/face swelling indicates severe fluid retention.',
    symptoms: [
      'Severe swelling that doesn\'t reduce after overnight rest',
      'Deep pitting edema (pressure indent lasts >10 seconds)',
      'Shoes suddenly don\'t fit or feel extremely tight',
      'Swelling extends above ankles to calves/thighs',
      'Accompanied by hand and/or facial swelling',
      'Skin feels tight, shiny, or painful'
    ],
    action: 'Some ankle swelling is normal. However, if sudden, severe, non-reducing, AND accompanied by facial/hand swelling, high BP, or headache - seek immediate medical evaluation.'
  }
};


function openOrganModal(organName) {
  const modal = document.getElementById('organModalOverlay');
  if (!modal) return;
  
  const data = organData[organName];
  if (!data) return;
  
  const modalIcon = document.getElementById('modalOrganIcon');
  const modalName = document.getElementById('modalOrganName');
  const normalDesc = document.getElementById('normalOrganDesc');
  const affectedDesc = document.getElementById('affectedOrganDesc');
  const actionText = document.getElementById('organActionText');
  const symptomsList = document.getElementById('organSymptomsList');
  
  if (modalIcon) modalIcon.textContent = data.icon;
  if (modalName) modalName.textContent = data.name;
  if (normalDesc) normalDesc.textContent = data.normalDesc;
  if (affectedDesc) affectedDesc.textContent = data.affectedDesc;
  if (actionText) actionText.textContent = data.action;
  if (symptomsList) symptomsList.innerHTML = data.symptoms.map(s => `<li>${s}</li>`).join('');
  
  modal.style.display = 'flex';
  document.body.style.overflow = 'hidden';
}

function closeOrganModal() {
  const modal = document.getElementById('organModalOverlay');
  if (!modal) return;
  
  modal.style.display = 'none';
  document.body.style.overflow = 'auto';
}

function toggleMicroscopicView() {
  alert('Microscopic view coming soon! This will show cellular-level changes.');
}

// Educational tips
const eduTips = [
  "The placenta acts as baby's life support system. In preeclampsia, reduced blood flow can affect baby's growth.",
  "High blood pressure often has NO symptoms - regular BP checks during pregnancy are crucial.",
  "Preeclampsia can develop suddenly, which is why weekly monitoring in third trimester is recommended.",
  "The ONLY cure for preeclampsia is delivery. Medications manage symptoms but don't cure it.",
  "Women with preeclampsia have 2-4x higher risk of cardiovascular disease later in life.",
  "Protein in urine occurs because damaged kidneys allow protein to leak through filters.",
  "Some ankle swelling is normal, but SUDDEN face/hand swelling needs immediate attention.",
  "Liver damage in severe preeclampsia (HELLP syndrome) causes severe upper right abdominal pain."
];

let currentTipIndex = 0;

function showNextTip() {
  currentTipIndex = (currentTipIndex + 1) % eduTips.length;
  const tipMessage = document.getElementById('eduTipMessage');
  if (tipMessage) {
    tipMessage.textContent = eduTips[currentTipIndex];
  }
}

// Initialize tip rotation
if (document.getElementById('eduTipMessage')) {
  setInterval(showNextTip, 30000);
}


// Initialize first tip
if (document.getElementById('eduTipMessage')) {
  document.getElementById('eduTipMessage').textContent = eduTips[0];
}

// Auto-rotate tips every 30 seconds
setInterval(showNextTip, 30000);

// View mode switching
function switchViewMode(mode) {
  const buttons = document.querySelectorAll('.view-mode-btn');
  buttons.forEach(btn => btn.classList.remove('active'));
  
  const activeBtn = document.querySelector(`[data-view="${mode}"]`);
  if (activeBtn) activeBtn.classList.add('active');
  
  const mainView = document.querySelector('.main-visualization-grid');
  const comparisonView = document.getElementById('comparisonView');
  const journeyControls = document.getElementById('journeyControls');
  
  if (mainView) mainView.style.display = mode === '3d' ? 'grid' : 'none';
  if (comparisonView) comparisonView.style.display = mode === 'comparison' ? 'grid' : 'none';
  if (journeyControls) journeyControls.style.display = mode === 'journey' ? 'flex' : 'none';
  
  if (mode === 'journey') {
    resetJourney();
  }
}

// Layer toggle
function toggleLayer(layerName) {
  const checkbox = document.getElementById(`layer${layerName.charAt(0).toUpperCase() + layerName.slice(1)}`);
  if (!checkbox) return;
  
  const isVisible = checkbox.checked;
  
  if (typeof toggleOrganLayer === 'function') {
    toggleOrganLayer(layerName, isVisible);
  }
}

// Preset application
function applyPreset(preset) {
  const layers = ['cardiovascular', 'nervous', 'renal', 'hepatic', 'placental', 'respiratory'];
  
  switch(preset) {
    case 'all':
      layers.forEach(layer => {
        const checkbox = document.getElementById(`layer${layer.charAt(0).toUpperCase() + layer.slice(1)}`);
        if (checkbox) {
          checkbox.checked = true;
          toggleLayer(layer);
        }
      });
      break;
      
    case 'critical':
      layers.forEach(layer => {
        const isCritical = ['cardiovascular', 'nervous', 'renal'].includes(layer);
        const checkbox = document.getElementById(`layer${layer.charAt(0).toUpperCase() + layer.slice(1)}`);
        if (checkbox) {
          checkbox.checked = isCritical;
          toggleLayer(layer);
        }
      });
      break;
      
    case 'affected':
      const severitySlider = document.getElementById('severitySlider');
      const severity = severitySlider ? severitySlider.value : 0;
      layers.forEach(layer => {
        const isAffected = severity > 25;
        const checkbox = document.getElementById(`layer${layer.charAt(0).toUpperCase() + layer.slice(1)}`);
        if (checkbox) {
          checkbox.checked = isAffected;
          toggleLayer(layer);
        }
      });
      break;
  }
}

// Zoom controls
function zoomIn() {
  if (typeof handleZoomIn === 'function') {
    handleZoomIn();
  }
}

function zoomOut() {
  if (typeof handleZoomOut === 'function') {
    handleZoomOut();
  }
}

function resetView() {
  if (typeof handleResetView === 'function') {
    handleResetView();
  }
}

function toggleAutoRotate() {
  const btn = document.getElementById('autoRotateBtn');
  if (!btn) return;
  
  btn.classList.toggle('active');
  
  if (typeof handleToggleAutoRotate === 'function') {
    handleToggleAutoRotate(btn.classList.contains('active'));
  }
}

function startAudioSymptoms() {
  if (!audioContext) {
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
  }
  
  const severitySlider = document.getElementById('severitySlider');
  const severity = severitySlider ? severitySlider.value : 0;
  
  if (severity > 50) {
    playHeadacheSound();
  }
}

function stopAudioSymptoms() {
  Object.values(audioOscillators).forEach(osc => {
    if (osc) {
      osc.stop();
      osc.disconnect();
    }
  });
  audioOscillators = {};
}

function playHeadacheSound() {
  const oscillator = audioContext.createOscillator();
  const gainNode = audioContext.createGain();
  
  oscillator.connect(gainNode);
  gainNode.connect(audioContext.destination);
  
  oscillator.frequency.value = 80;
  gainNode.gain.value = 0.05;
  
  setInterval(() => {
    gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.5);
    gainNode.gain.linearRampToValueAtTime(0.02, audioContext.currentTime + 1);
  }, 1000);
  
  oscillator.start();
  audioOscillators.headache = oscillator;
}

// Update SVG body visualization based on severity
function updateSVGBodySeverity(severityValue) {
  const bodySvg = document.getElementById('bodySvgPreeclampsia');
  if (!bodySvg) return;
  
  // Determine severity level
  let severityLevel = 'normal';
  if (severityValue >= 75) {
    severityLevel = 'severe';
  } else if (severityValue >= 50) {
    severityLevel = 'moderate';
  } else if (severityValue >= 25) {
    severityLevel = 'mild';
  }
  
  // Update data attribute
  bodySvg.setAttribute('data-severity', severityLevel);
  
  // Activate specific organ glows based on severity
  const glowZones = bodySvg.querySelectorAll('.glow-zone');
  glowZones.forEach(zone => {
    if (severityValue >= 25) {
      zone.classList.add('active');
    } else {
      zone.classList.remove('active');
    }
  });
  
  // Highlight specific organs at different severity levels
  if (severityValue >= 50) {
    // Moderate - show kidney and liver stress
    activateOrganGlow('kidneys');
    activateOrganGlow('liver');
  }
  
  if (severityValue >= 75) {
    // Severe - all organs affected
    activateOrganGlow('brain');
    activateOrganGlow('heart');
    activateOrganGlow('placenta');
    activateOrganGlow('hands');
    activateOrganGlow('feet');
  }
}

// Activate glow for specific organ
function activateOrganGlow(organName) {
  const bodySvg = document.getElementById('bodySvgPreeclampsia');
  if (!bodySvg) return;
  
  const glowZones = bodySvg.querySelectorAll(`.glow-zone[data-organ="${organName}"]`);
  glowZones.forEach(zone => {
    zone.classList.add('active');
    zone.style.opacity = '1';
  });
}

// Deactivate all glows
function deactivateAllGlows() {
  const bodySvg = document.getElementById('bodySvgPreeclampsia');
  if (!bodySvg) return;
  
  const glowZones = bodySvg.querySelectorAll('.glow-zone');
  glowZones.forEach(zone => {
    zone.classList.remove('active');
    zone.style.opacity = '0';
  });
}

// ========================================
// BLOOD PRESSURE TRACKER FUNCTIONALITY
// ========================================

// BP Readings Storage
let bpReadings = [];

// Load readings from localStorage on page load
document.addEventListener('DOMContentLoaded', function() {
  loadBPReadings();
});

// Open BP Tracker Modal
function openBPTracker() {
  const modal = document.getElementById('bpTrackerModal');
  if (modal) {
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
    
    // Set current time
    const now = new Date();
    const timeInput = document.getElementById('timeInput');
    if (timeInput) {
      timeInput.value = now.toTimeString().slice(0, 5);
    }
    
    // Render existing readings
    renderBPReadings();
    renderBPChart();
  }
}

// Close BP Tracker Modal
function closeBPTracker() {
  const modal = document.getElementById('bpTrackerModal');
  if (modal) {
    modal.classList.remove('active');
    document.body.style.overflow = 'auto';
  }
}

// Save BP Reading
function saveBPReading() {
  const systolic = parseInt(document.getElementById('systolicInput').value);
  const diastolic = parseInt(document.getElementById('diastolicInput').value);
  const week = parseInt(document.getElementById('currentWeek').value);
  const time = document.getElementById('timeInput').value;
  const notes = document.getElementById('notesInput').value;
  
  // Validation
  if (!systolic || !diastolic || !week) {
    showToast('⚠️ Please fill in all required fields', 'warning');
    return;
  }
  
  if (systolic < 80 || systolic > 200 || diastolic < 40 || diastolic > 130) {
    showToast('⚠️ Please enter valid BP values', 'warning');
    return;
  }
  
  // Create reading object
  const reading = {
    id: Date.now(),
    date: new Date().toISOString(),
    week: week,
    systolic: systolic,
    diastolic: diastolic,
    time: time || 'Not specified',
    notes: notes || '',
    category: getBPCategory(systolic, diastolic)
  };
  
  // Add to array
  bpReadings.unshift(reading);
  
  // Save to localStorage
  saveBPReadings();
  
  // Render updated list
  renderBPReadings();
  renderBPChart();
  
  // Clear form
  document.getElementById('systolicInput').value = '';
  document.getElementById('diastolicInput').value = '';
  document.getElementById('notesInput').value = '';
  
  // Show success message
  showToast('✅ BP Reading saved successfully!', 'success');
  
  // Check if reading is concerning
  if (systolic >= 140 || diastolic >= 90) {
    setTimeout(() => {
      showToast('⚠️ High reading detected! Contact your doctor if you have symptoms.', 'warning');
    }, 1500);
  }
  
  if (systolic >= 180 || diastolic >= 120) {
    setTimeout(() => {
      showToast('🚨 CRISIS LEVEL! Call emergency services (108/102) immediately!', 'error');
    }, 2000);
  }
}

// Determine BP Category
function getBPCategory(systolic, diastolic) {
  if (systolic >= 180 || diastolic >= 120) return 'crisis';
  if (systolic >= 140 || diastolic >= 90) return 'severe';
  if (systolic >= 130 || diastolic >= 80) return 'high';
  if (systolic >= 120 && diastolic < 80) return 'elevated';
  return 'normal';
}

// Render BP Readings List
function renderBPReadings() {
  const container = document.getElementById('bpReadingsList');
  if (!container) return;
  
  if (bpReadings.length === 0) {
    container.innerHTML = `
      <div class="bp-empty-state">
        <div class="empty-icon">📊</div>
        <p>No readings yet. Add your first BP reading above!</p>
      </div>
    `;
    return;
  }
  
  container.innerHTML = bpReadings.map(reading => {
    const date = new Date(reading.date);
    const formattedDate = date.toLocaleDateString('en-IN', { 
      day: 'numeric', 
      month: 'short', 
      year: 'numeric' 
    });
    
    return `
      <div class="bp-reading-item">
        <div class="reading-header">
          <span class="reading-date">📅 ${formattedDate}</span>
          <span class="reading-week">Week ${reading.week}</span>
        </div>
        <div class="reading-values">
          <div class="bp-value ${reading.category}">
            <span>💓</span>
            <span>${reading.systolic}/${reading.diastolic}</span>
            <span style="font-size: 0.9rem; font-weight: 600;">mmHg</span>
          </div>
          <span class="reading-time">🕐 ${reading.time}</span>
          <button class="reading-delete" onclick="deleteBPReading(${reading.id})">🗑️ Delete</button>
        </div>
        ${reading.notes ? `<div class="reading-notes">📝 ${reading.notes}</div>` : ''}
      </div>
    `;
  }).join('');
}

// Render BP Chart (Simple Canvas Chart)
function renderBPChart() {
  const canvas = document.getElementById('bpChart');
  if (!canvas) return;
  
  const ctx = canvas.getContext('2d');
  const width = canvas.width;
  const height = canvas.height;
  
  // Clear canvas
  ctx.clearRect(0, 0, width, height);
  
  if (bpReadings.length === 0) {
    ctx.fillStyle = '#9333ea';
    ctx.font = '16px Poppins, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('No data to display', width / 2, height / 2);
    return;
  }
  
  // Reverse to show oldest first
  const sortedReadings = [...bpReadings].reverse().slice(-10); // Last 10 readings
  
  // Calculate chart dimensions
  const padding = 40;
  const chartWidth = width - padding * 2;
  const chartHeight = height - padding * 2;
  
  // Find min/max values
  const allBP = sortedReadings.flatMap(r => [r.systolic, r.diastolic]);
  const minBP = Math.min(...allBP, 60);
  const maxBP = Math.max(...allBP, 180);
  const bpRange = maxBP - minBP;
  
  // Draw axes
  ctx.strokeStyle = '#e0e0e0';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(padding, padding);
  ctx.lineTo(padding, height - padding);
  ctx.lineTo(width - padding, height - padding);
  ctx.stroke();
  
  // Draw grid lines and labels
  ctx.strokeStyle = '#f0f0f0';
  ctx.lineWidth = 1;
  ctx.fillStyle = '#9333ea';
  ctx.font = '11px Poppins, sans-serif';
  ctx.textAlign = 'right';
  
  for (let i = 0; i <= 5; i++) {
    const y = padding + (chartHeight * i / 5);
    const value = Math.round(maxBP - (bpRange * i / 5));
    
    ctx.beginPath();
    ctx.moveTo(padding, y);
    ctx.lineTo(width - padding, y);
    ctx.stroke();
    
    ctx.fillText(value, padding - 5, y + 4);
  }
  
  // Helper function to get Y coordinate
  const getY = (bp) => {
    return padding + chartHeight - ((bp - minBP) / bpRange * chartHeight);
  };
  
  // Draw lines
  const pointSpacing = chartWidth / (sortedReadings.length - 1 || 1);
  
  // Systolic line (pink)
  ctx.strokeStyle = '#ec4899';
  ctx.lineWidth = 3;
  ctx.beginPath();
  sortedReadings.forEach((reading, i) => {
    const x = padding + i * pointSpacing;
    const y = getY(reading.systolic);
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  });
  ctx.stroke();
  
  // Diastolic line (purple)
  ctx.strokeStyle = '#a855f7';
  ctx.lineWidth = 3;
  ctx.beginPath();
  sortedReadings.forEach((reading, i) => {
    const x = padding + i * pointSpacing;
    const y = getY(reading.diastolic);
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  });
  ctx.stroke();
  
  // Draw points
  sortedReadings.forEach((reading, i) => {
    const x = padding + i * pointSpacing;
    
    // Systolic point
    ctx.fillStyle = '#ec4899';
    ctx.beginPath();
    ctx.arc(x, getY(reading.systolic), 5, 0, Math.PI * 2);
    ctx.fill();
    
    // Diastolic point
    ctx.fillStyle = '#a855f7';
    ctx.beginPath();
    ctx.arc(x, getY(reading.diastolic), 5, 0, Math.PI * 2);
    ctx.fill();
  });
  
  // Draw legend
  ctx.fillStyle = '#ec4899';
  ctx.fillRect(width - 180, 20, 15, 15);
  ctx.fillStyle = '#6b21a8';
  ctx.font = 'bold 12px Poppins, sans-serif';
  ctx.textAlign = 'left';
  ctx.fillText('Systolic', width - 160, 32);
  
  ctx.fillStyle = '#a855f7';
  ctx.fillRect(width - 180, 45, 15, 15);
  ctx.fillStyle = '#6b21a8';
  ctx.fillText('Diastolic', width - 160, 57);
  
  // Draw threshold lines
  ctx.strokeStyle = 'rgba(239, 68, 68, 0.3)';
  ctx.lineWidth = 2;
  ctx.setLineDash([5, 5]);
  
  // 140 mmHg line (severe threshold)
  if (140 >= minBP && 140 <= maxBP) {
    const y = getY(140);
    ctx.beginPath();
    ctx.moveTo(padding, y);
    ctx.lineTo(width - padding, y);
    ctx.stroke();
    
    ctx.fillStyle = '#ef4444';
    ctx.font = 'bold 10px Poppins, sans-serif';
    ctx.fillText('140 (Severe)', padding + 5, y - 5);
  }
  
  ctx.setLineDash([]);
}

// Delete BP Reading
function deleteBPReading(id) {
  if (confirm('Are you sure you want to delete this reading?')) {
    bpReadings = bpReadings.filter(r => r.id !== id);
    saveBPReadings();
    renderBPReadings();
    renderBPChart();
    showToast('🗑️ Reading deleted', 'info');
  }
}

// Clear All BP History
function clearBPHistory() {
  if (confirm('Are you sure you want to delete ALL readings? This cannot be undone!')) {
    bpReadings = [];
    saveBPReadings();
    renderBPReadings();
    renderBPChart();
    showToast('🗑️ All readings cleared', 'info');
  }
}

// Save to localStorage
function saveBPReadings() {
  try {
    localStorage.setItem('bpReadings', JSON.stringify(bpReadings));
  } catch (e) {
    console.error('Failed to save BP readings:', e);
    showToast('⚠️ Failed to save data', 'error');
  }
}

// Load from localStorage
function loadBPReadings() {
  try {
    const saved = localStorage.getItem('bpReadings');
    if (saved) {
      bpReadings = JSON.parse(saved);
    }
  } catch (e) {
    console.error('Failed to load BP readings:', e);
    bpReadings = [];
  }
}

// Export to CSV
function exportBPToCSV() {
  if (bpReadings.length === 0) {
    showToast('⚠️ No data to export', 'warning');
    return;
  }
  
  let csv = 'Date,Week,Time,Systolic,Diastolic,Category,Notes\n';
  
  bpReadings.forEach(reading => {
    const date = new Date(reading.date).toLocaleDateString('en-IN');
    const notes = reading.notes.replace(/,/g, ';'); // Replace commas in notes
    csv += `${date},${reading.week},${reading.time},${reading.systolic},${reading.diastolic},${reading.category},"${notes}"\n`;
  });
  
  downloadFile(csv, 'bp-readings.csv', 'text/csv');
  showToast('📊 CSV downloaded!', 'success');
}

// Export to PDF (Simple text-based)
function exportBPToPDF() {
  if (bpReadings.length === 0) {
    showToast('⚠️ No data to export', 'warning');
    return;
  }
  
  let pdfContent = `BLOOD PRESSURE TRACKER REPORT\n`;
  pdfContent += `Generated: ${new Date().toLocaleString('en-IN')}\n`;
  pdfContent += `Total Readings: ${bpReadings.length}\n\n`;
  pdfContent += `=`.repeat(60) + '\n\n';
  
  bpReadings.forEach((reading, index) => {
    const date = new Date(reading.date).toLocaleString('en-IN');
    pdfContent += `Reading #${index + 1}\n`;
    pdfContent += `Date: ${date}\n`;
    pdfContent += `Week: ${reading.week}\n`;
    pdfContent += `Time: ${reading.time}\n`;
    pdfContent += `BP: ${reading.systolic}/${reading.diastolic} mmHg\n`;
    pdfContent += `Category: ${reading.category.toUpperCase()}\n`;
    if (reading.notes) pdfContent += `Notes: ${reading.notes}\n`;
    pdfContent += `-`.repeat(60) + '\n\n';
  });
  
  downloadFile(pdfContent, 'bp-report.txt', 'text/plain');
  showToast('📄 Report downloaded!', 'success');
}

// Print BP Report
function printBPReport() {
  if (bpReadings.length === 0) {
    showToast('⚠️ No data to print', 'warning');
    return;
  }
  
  const printWindow = window.open('', '_blank');
  
  let html = `
    <html>
    <head>
      <title>Blood Pressure Tracker Report</title>
      <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h1 { color: #be185d; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background: linear-gradient(135deg, #ec4899, #a855f7); color: white; }
        .normal { color: #22c55e; font-weight: bold; }
        .elevated { color: #fbbf24; font-weight: bold; }
        .high { color: #f97316; font-weight: bold; }
        .severe { color: #ef4444; font-weight: bold; }
        .crisis { color: #dc2626; font-weight: bold; }
      </style>
    </head>
    <body>
      <h1>Blood Pressure Tracker Report</h1>
      <p><strong>Generated:</strong> ${new Date().toLocaleString('en-IN')}</p>
      <p><strong>Total Readings:</strong> ${bpReadings.length}</p>
      
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Week</th>
            <th>Time</th>
            <th>BP (mmHg)</th>
            <th>Category</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          ${bpReadings.map(reading => {
            const date = new Date(reading.date).toLocaleDateString('en-IN');
            return `
              <tr>
                <td>${date}</td>
                <td>Week ${reading.week}</td>
                <td>${reading.time}</td>
                <td class="${reading.category}">${reading.systolic}/${reading.diastolic}</td>
                <td class="${reading.category}">${reading.category.toUpperCase()}</td>
                <td>${reading.notes || '-'}</td>
              </tr>
            `;
          }).join('')}
        </tbody>
      </table>
      
      <div style="margin-top: 30px; padding: 15px; background: #fef3c7; border-left: 4px solid #f59e0b;">
        <strong>⚠️ Important:</strong> If any reading shows ≥140/90, contact your doctor. 
        If ≥180/120, call emergency services (108/102) immediately!
      </div>
    </body>
    </html>
  `;
  
  printWindow.document.write(html);
  printWindow.document.close();
  printWindow.print();
}

// Helper: Download File
function downloadFile(content, filename, mimeType) {
  const blob = new Blob([content], { type: mimeType });
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(url);
}

// Toast Notification System
function showToast(message, type = 'info') {
  // Check if toast exists
  let toast = document.getElementById('bpToast');
  
  if (!toast) {
    // Create toast element
    toast = document.createElement('div');
    toast.id = 'bpToast';
    toast.style.cssText = `
      position: fixed;
      bottom: 30px;
      right: 30px;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      color: white;
      font-weight: 600;
      font-size: 0.95rem;
      z-index: 999999;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      animation: slideIn 0.3s ease;
      max-width: 350px;
    `;
    document.body.appendChild(toast);
  }
  
  // Set colors based on type
  const colors = {
    success: 'linear-gradient(135deg, #22c55e, #16a34a)',
    warning: 'linear-gradient(135deg, #f59e0b, #d97706)',
    error: 'linear-gradient(135deg, #ef4444, #dc2626)',
    info: 'linear-gradient(135deg, #3b82f6, #2563eb)'
  };
  
  toast.style.background = colors[type] || colors.info;
  toast.textContent = message;
  toast.style.display = 'block';
  
  // Auto hide after 4 seconds
  setTimeout(() => {
    toast.style.animation = 'slideOut 0.3s ease';
    setTimeout(() => {
      toast.style.display = 'none';
    }, 300);
  }, 4000);
}

// Add CSS for toast animations
const toastStyle = document.createElement('style');
toastStyle.textContent = `
  @keyframes slideIn {
    from {
      transform: translateX(400px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  
  @keyframes slideOut {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(400px);
      opacity: 0;
    }
  }
`;
document.head.appendChild(toastStyle);


/* =====================================================
   COMPARISON VIEW INTERACTION HANDLERS
   ===================================================== */

// Show detailed organ information in comparison mode
function showOrganDetail(organ, state) {
  const details = {
    brain: {
      normal: {
        title: "Brain - Normal Function",
        description: "Healthy blood flow with no headaches or visual disturbances. Clear thinking and normal neurological function.",
        symptoms: []
      },
      pe: {
        title: "Brain - Affected by Preeclampsia",
        description: "Reduced blood flow causing severe headaches, vision problems (blurry or spots), and potential seizure risk.",
        symptoms: [
          "Severe persistent headaches",
          "Vision changes (blurry, seeing spots)",
          "Light sensitivity",
          "Confusion or altered consciousness"
        ]
      }
    },
    heart: {
      normal: {
        title: "Heart - Normal Blood Pressure",
        description: "Blood pressure at healthy 120/80 mmHg. Heart working efficiently without strain.",
        symptoms: []
      },
      pe: {
        title: "Heart - Elevated Blood Pressure",
        description: "Blood pressure at dangerous 160/110 mmHg or higher. Heart working much harder, increasing stroke and heart attack risk.",
        symptoms: [
          "High blood pressure (≥140/90)",
          "Chest pain or pressure",
          "Rapid heartbeat",
          "Shortness of breath"
        ]
      }
    },
    kidneys: {
      normal: {
        title: "Kidneys - Healthy Function",
        description: "Kidneys filtering blood properly with no protein leakage into urine.",
        symptoms: []
      },
      pe: {
        title: "Kidneys - Impaired Function",
        description: "Kidneys leaking protein into urine (proteinuria). Reduced filtering capacity and fluid retention.",
        symptoms: [
          "Protein in urine (4+)",
          "Reduced urine output",
          "Foamy urine",
          "Swelling (edema)"
        ]
      }
    },
    placenta: {
      normal: {
        title: "Placenta - Optimal Blood Flow",
        description: "Healthy blood vessels delivering oxygen and nutrients to baby efficiently.",
        symptoms: []
      },
      pe: {
        title: "Placenta - Restricted Flow",
        description: "Blood vessels constricted, reducing oxygen and nutrients to baby. Can cause growth restriction.",
        symptoms: [
          "Reduced fetal movement",
          "Baby growth restriction",
          "Low amniotic fluid",
          "Placental insufficiency"
        ]
      }
    }
  };

  const info = details[organ]?.[state];
  if (!info) return;

  // Create modal
  const modal = document.createElement('div');
  modal.className = 'organ-detail-modal';
  modal.innerHTML = `
    <div class="modal-content-comparison">
      <button class="modal-close" onclick="this.parentElement.parentElement.remove()">✕</button>
      <h3>${info.title}</h3>
      <p class="modal-description">${info.description}</p>
      ${info.symptoms.length > 0 ? `
        <div class="symptoms-box">
          <h4>⚠️ Warning Signs:</h4>
          <ul>
            ${info.symptoms.map(s => `<li>${s}</li>`).join('')}
          </ul>
        </div>
      ` : ''}
    </div>
  `;
  
  modal.onclick = (e) => {
    if (e.target === modal) modal.remove();
  };
  
  document.body.appendChild(modal);
  
  // Trigger animation
  setTimeout(() => modal.classList.add('active'), 10);
}

// Enhanced switchViewMode to properly show comparison
function switchViewMode(mode) {
  const buttons = document.querySelectorAll('.view-mode-btn');
  buttons.forEach(btn => btn.classList.remove('active'));
  
  const activeBtn = document.querySelector(`[data-view="${mode}"]`);
  if (activeBtn) activeBtn.classList.add('active');
  
  const mainView = document.querySelector('.main-visualization-grid');
  const comparisonView = document.getElementById('comparisonView');
  const journeyControls = document.getElementById('journeyControls');
  
  if (mainView) mainView.style.display = mode === '3d' ? 'grid' : 'none';
  if (comparisonView) {
    comparisonView.style.display = mode === 'comparison' ? 'grid' : 'none';
    
    // Trigger animations when comparison view is shown
    if (mode === 'comparison') {
      animateComparison();
    }
  }
  if (journeyControls) journeyControls.style.display = mode === 'journey' ? 'flex' : 'none';
  
  if (mode === 'journey') {
    resetJourney();
  }
}

// Animate comparison view on load
function animateComparison() {
  const panels = document.querySelectorAll('.comparison-panel');
  panels.forEach((panel, index) => {
    panel.style.opacity = '0';
    panel.style.transform = 'translateY(30px)';
    
    setTimeout(() => {
      panel.style.transition = 'all 0.6s ease';
      panel.style.opacity = '1';
      panel.style.transform = 'translateY(0)';
    }, index * 200);
  });
}




/* =====================================================
   INTERACTIVE COMPARISON VIEW - CLICKABLE BODY PARTS
   ===================================================== */

// Comprehensive body part information
const bodyPartInfo = {
  brain: {
    normal: {
      title: "🧠 Brain - Normal Function",
      description: "Healthy blood flow ensures clear thinking, no headaches, normal sleep patterns, and proper neurological function.",
      details: [
        "Normal cerebral blood flow",
        "No visual disturbances",
        "Clear mental function",
        "Regular sleep patterns",
        "No seizure risk"
      ]
    },
    pe: {
      title: "🧠 Brain - Severely Affected",
      description: "Reduced blood flow causes severe headaches, vision problems, confusion, and seizure risk (eclampsia).",
      details: [
        "Severe persistent headaches",
        "Vision changes (blurry, spots, flashing lights)",
        "Confusion or altered consciousness",
        "Light sensitivity",
        "Risk of seizures (eclampsia)"
      ],
      warning: "IMMEDIATE MEDICAL ATTENTION REQUIRED"
    }
  },
  
  eyes: {
    normal: {
      title: "👁️ Eyes - Normal Vision",
      description: "Clear vision with healthy blood vessels in the retina. No visual disturbances.",
      details: [
        "Clear, sharp vision",
        "No light sensitivity",
        "Healthy retinal blood vessels",
        "No spots or floaters"
      ]
    },
    pe: {
      title: "👁️ Eyes - Vision Problems",
      description: "Blood vessel constriction causes blurry vision, seeing spots, or temporary vision loss.",
      details: [
        "Blurry or double vision",
        "Seeing spots or flashing lights",
        "Light sensitivity (photophobia)",
        "Temporary vision loss possible",
        "Retinal damage risk"
      ],
      warning: "Vision changes are a serious warning sign"
    }
  },
  
  heart: {
    normal: {
      title: "❤️ Heart - Healthy Blood Pressure",
      description: "Blood pressure at optimal 120/80 mmHg. Heart working efficiently without strain.",
      details: [
        "BP: 120/80 mmHg",
        "Normal cardiac output",
        "No chest pain",
        "Efficient blood circulation",
        "Low stroke risk"
      ]
    },
    pe: {
      title: "❤️ Heart - High Blood Pressure",
      description: "Dangerously elevated BP (≥140/90) forces heart to work much harder, increasing stroke and heart attack risk.",
      details: [
        "BP: 160/110 mmHg or higher",
        "Increased cardiac workload",
        "Chest pain or pressure possible",
        "Rapid heartbeat",
        "High stroke risk"
      ],
      warning: "Sustained high BP can cause permanent heart damage"
    }
  },
  
  liver: {
    normal: {
      title: "🫀 Liver - Normal Function",
      description: "Liver processing blood properly with normal enzyme levels and no inflammation.",
      details: [
        "Normal enzyme levels",
        "Proper blood protein production",
        "No pain or tenderness",
        "Healthy bile production"
      ]
    },
    pe: {
      title: "🫀 Liver - HELLP Syndrome Risk",
      description: "Liver enzymes elevated, causing upper right abdominal pain. Risk of HELLP syndrome.",
      details: [
        "Elevated liver enzymes",
        "Upper right abdominal pain",
        "Nausea and vomiting",
        "Risk of HELLP syndrome",
        "Possible liver damage"
      ],
      warning: "HELLP syndrome is life-threatening"
    }
  },
  
  kidneys: {
    normal: {
      title: "🫘 Kidneys - Healthy Filtering",
      description: "Kidneys filtering blood efficiently with no protein leakage into urine.",
      details: [
        "No protein in urine",
        "Normal urine output",
        "Proper waste removal",
        "Balanced electrolytes",
        "Clear, normal-colored urine"
      ]
    },
    pe: {
      title: "🫘 Kidneys - Proteinuria & Damage",
      description: "Kidneys leaking large amounts of protein into urine, reducing filtering capacity.",
      details: [
        "Protein in urine (4+)",
        "Reduced urine output",
        "Foamy urine appearance",
        "Fluid retention",
        "Risk of kidney failure"
      ],
      warning: "Kidney damage can be permanent"
    }
  },
  
  placenta: {
    normal: {
      title: "🤰 Placenta - Optimal Blood Flow",
      description: "Healthy blood vessels deliver oxygen and nutrients to baby efficiently.",
      details: [
        "Optimal blood flow",
        "Efficient nutrient transfer",
        "Normal baby growth",
        "Adequate amniotic fluid",
        "Strong fetal movements"
      ]
    },
    pe: {
      title: "🤰 Placenta - Restricted Flow",
      description: "Constricted blood vessels reduce oxygen and nutrients to baby, causing growth restriction.",
      details: [
        "Reduced blood flow",
        "Placental insufficiency",
        "Fetal growth restriction (FGR)",
        "Low amniotic fluid",
        "Reduced fetal movement",
        "Risk of placental abruption"
      ],
      warning: "Baby's growth and oxygen supply are compromised"
    }
  },
  
  hands: {
    normal: {
      title: "✋ Hands - Normal Size",
      description: "No swelling, normal sensation, proper circulation.",
      details: [
        "Normal size and shape",
        "No puffiness",
        "Can make fist easily",
        "Rings fit normally"
      ]
    },
    pe: {
      title: "✋ Hands - Swollen (Edema)",
      description: "Significant swelling due to fluid retention. Rings may not fit.",
      details: [
        "Visible swelling",
        "Puffy fingers",
        "Rings too tight or won't fit",
        "Difficulty making fist",
        "Shiny, stretched skin"
      ],
      warning: "Sudden hand swelling is a warning sign"
    }
  },
  
  feet: {
    normal: {
      title: "🦶 Feet - Normal Size",
      description: "No swelling, shoes fit comfortably.",
      details: [
        "Normal size",
        "No ankle swelling",
        "Shoes fit normally",
        "No pain or tightness"
      ]
    },
    pe: {
      title: "🦶 Feet - Severely Swollen",
      description: "Extreme swelling (edema) in feet and ankles. Shoes may not fit.",
      details: [
        "Significant swelling",
        "Puffy ankles",
        "Shoes too tight or won't fit",
        "Indentation when pressed (pitting edema)",
        "Heavy, uncomfortable feeling"
      ],
      warning: "Sudden severe swelling needs immediate attention"
    }
  },
  
  legs: {
    normal: {
      title: "🦵 Legs - Normal",
      description: "No swelling, normal mobility and circulation.",
      details: [
        "Normal size",
        "No visible swelling",
        "Full range of motion",
        "No pain or heaviness"
      ]
    },
    pe: {
      title: "🦵 Legs - Swollen & Heavy",
      description: "Fluid retention causes swelling and heaviness in legs.",
      details: [
        "Visible swelling",
        "Heavy, tired feeling",
        "Skin may be tight or shiny",
        "Indentation when pressed",
        "Difficulty walking"
      ],
      warning: "Check for deep vein thrombosis (DVT) if one leg more swollen"
    }
  },
  
  head: {
    normal: {
      title: "😊 Overall Health - Good",
      description: "Feeling well with no concerning symptoms.",
      details: [
        "No headaches",
        "Normal energy levels",
        "Good mood",
        "Sleeping well"
      ]
    },
    pe: {
      title: "😟 Overall Health - Multiple Symptoms",
      description: "Multiple concerning symptoms affecting wellbeing.",
      details: [
        "Persistent severe headaches",
        "Fatigue and weakness",
        "Anxiety about condition",
        "Sleep disturbances",
        "General feeling of being unwell"
      ],
      warning: "Listen to your body - multiple symptoms require medical care"
    }
  },
  
  neck: {
    normal: {
      title: "Neck - Normal",
      description: "No swelling or fluid retention in neck area.",
      details: ["Normal size", "No puffiness", "Full range of motion"]
    },
    pe: {
      title: "Neck - May Show Swelling",
      description: "Severe fluid retention can cause facial and neck puffiness.",
      details: ["Possible puffiness", "Facial swelling", "Uncomfortable feeling"],
      warning: "Facial swelling can indicate severe PE"
    }
  },
  
  chest: {
    normal: {
      title: "Chest - Normal",
      description: "Normal breathing, no chest pain, heart functioning well.",
      details: ["Easy breathing", "No chest pain", "Normal heart rate"]
    },
    pe: {
      title: "Chest - Breathing Issues",
      description: "Fluid in lungs (pulmonary edema) can cause shortness of breath.",
      details: [
        "Shortness of breath",
        "Chest pain possible",
        "Rapid breathing",
        "Fluid in lungs (rare but serious)"
      ],
      warning: "Difficulty breathing requires immediate medical attention"
    }
  },
  
  belly: {
    normal: {
      title: "Belly - Healthy Pregnancy",
      description: "Growing baby with adequate amniotic fluid and normal movements.",
      details: [
        "Baby growing well",
        "Normal fetal movement",
        "Adequate amniotic fluid",
        "No abnormal pain"
      ]
    },
    pe: {
      title: "Belly - Baby At Risk",
      description: "Reduced placental blood flow affects baby's growth and movement.",
      details: [
        "Reduced fetal movement",
        "Growth restriction possible",
        "Low amniotic fluid risk",
        "Upper right pain (liver area)",
        "Increased contractions risk"
      ],
      warning: "Decreased fetal movement requires immediate check"
    }
  },
  
  arms: {
    normal: {
      title: "Arms - Normal",
      description: "Normal size and function with no swelling.",
      details: ["Normal size", "No swelling", "Full range of motion"]
    },
    pe: {
      title: "Arms - May Be Swollen",
      description: "Some swelling possible due to fluid retention.",
      details: [
        "Possible mild swelling",
        "Tight feeling",
        "May feel heavy"
      ],
      warning: "Sudden arm swelling should be checked"
    }
  },

  lungs: {
    normal: {
      title: "🫁 Lungs - Clear Breathing",
      description: "Normal oxygen exchange, no fluid accumulation, easy breathing.",
      details: [
        "Clear lungs",
        "Easy, comfortable breathing",
        "Normal oxygen levels",
        "No shortness of breath"
      ]
    },
    pe: {
      title: "🫁 Lungs - Pulmonary Edema Risk",
      description: "Severe preeclampsia can cause fluid to leak into lungs, making breathing difficult.",
      details: [
        "Shortness of breath",
        "Rapid, shallow breathing",
        "Chest tightness or pain",
        "Fluid in lungs (severe cases)",
        "Low oxygen levels possible"
      ],
      warning: "Breathing difficulty is a MEDICAL EMERGENCY - call 108 immediately"
    }
  },
  
  face: {
    normal: {
      title: "😊 Face - Normal Appearance",
      description: "No swelling, normal complexion, relaxed expression.",
      details: [
        "No puffiness",
        "Normal facial features",
        "Healthy skin tone"
      ]
    },
    pe: {
      title: "😟 Face - Swollen & Distressed",
      description: "Sudden facial swelling (especially around eyes) is a serious warning sign.",
      details: [
        "Puffy face, especially eyes",
        "Swollen cheeks",
        "Tight, stretched skin",
        "Facial distress visible"
      ],
      warning: "SUDDEN facial swelling requires immediate medical attention"
    }
  }
  
};

// Add click event listeners to all clickable parts
document.addEventListener('DOMContentLoaded', function() {
  // Wait for comparison view to be loaded
  setTimeout(function() {
    const clickableParts = document.querySelectorAll('.clickable-part');
    
    clickableParts.forEach(part => {
      part.addEventListener('click', function(e) {
        e.stopPropagation();
        const bodyPart = this.getAttribute('data-part');
        const isNormal = this.closest('.body-normal') !== null;
        const state = isNormal ? 'normal' : 'pe';
        
        showBodyPartDetail(bodyPart, state);
      });
    });
  }, 500);
});

// Show detailed information modal
function showBodyPartDetail(part, state) {
  const info = bodyPartInfo[part]?.[state];
  if (!info) return;
  
  // Create modal
  const modal = document.createElement('div');
  modal.className = 'body-part-modal';
  modal.innerHTML = `
    <div class="modal-content-bodypart">
      <button class="modal-close" onclick="this.parentElement.parentElement.remove()">✕</button>
      
      <h2>${info.title}</h2>
      <p class="modal-description">${info.description}</p>
      
      <div class="details-section">
        <h3>${state === 'normal' ? '✅ Healthy Signs:' : '⚠️ Warning Signs:'}</h3>
        <ul class="details-list">
          ${info.details.map(detail => `<li>${detail}</li>`).join('')}
        </ul>
      </div>
      
      ${info.warning ? `
        <div class="warning-box">
          <div class="warning-icon">🚨</div>
          <div class="warning-text">
            <strong>Important:</strong> ${info.warning}
          </div>
        </div>
      ` : ''}
      
      <div class="modal-footer">
        <button class="btn-modal-action" onclick="this.parentElement.parentElement.parentElement.remove()">
          Got it
        </button>
      </div>
    </div>
  `;
  
  modal.onclick = (e) => {
    if (e.target === modal) modal.remove();
  };
  
  document.body.appendChild(modal);
  setTimeout(() => modal.classList.add('active'), 10);
}


</script>


<script>
/* Mobile menu toggle */
function toggleMobile(){
  const menu=document.getElementById('mobileMenu');
  const b1=document.getElementById('hb1'),b2=document.getElementById('hb2'),b3=document.getElementById('hb3');
  const open=menu.classList.toggle('open');
  if(open){b1.style.cssText='transform:rotate(45deg) translate(4px,4px);';b2.style.cssText='opacity:0;';b3.style.cssText='transform:rotate(-45deg) translate(4px,-4px);';}
  else{b1.style.cssText='';b2.style.cssText='';b3.style.cssText='';}
}
document.addEventListener('click',function(e){
  const menu=document.getElementById('mobileMenu');
  const btn=document.getElementById('hamburgerBtn');
  if(menu&&menu.classList.contains('open')&&!menu.contains(e.target)&&!btn.contains(e.target)){
    menu.classList.remove('open');
    document.getElementById('hb1').style.cssText='';
    document.getElementById('hb2').style.cssText='';
    document.getElementById('hb3').style.cssText='';
  }
});
</script>

<!-- ============================================================
     HERO PARTICLE EFFECT — journeys.html style
============================================================ -->
<style>
/* Petal animation keyframes (mirrors journeys.html exactly) */
.pe-petal {
  position: absolute;
  border-radius: 0 80% 0 80%;
  opacity: 0;
  animation: pe-petal-fall linear infinite;
}
@keyframes pe-petal-fall {
  0%   { opacity: 0;   transform: translateY(-30px) rotate(0deg)   scale(0.5); }
  10%  { opacity: 0.7; }
  90%  { opacity: 0.3; }
  100% { opacity: 0;   transform: translateY(110vh) rotate(540deg) scale(1.2); }
}
</style>
<script>
/* ---- Particle canvas (connected floating dots) ---- */
(function () {
  const canvas = document.getElementById('peParticleCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  let W, H, particles = [];

  function resize() {
    const hero = canvas.closest('.hero') || canvas.parentElement;
    W = canvas.width  = hero.offsetWidth;
    H = canvas.height = hero.offsetHeight;
  }
  resize();
  window.addEventListener('resize', resize);

  function P() { this.reset(); }
  P.prototype.reset = function () {
    this.x     = Math.random() * W;
    this.y     = Math.random() * H;
    this.r     = Math.random() * 2.5 + 0.5;
    this.vx    = (Math.random() - 0.5) * 0.45;
    this.vy    = (Math.random() - 0.5) * 0.45;
    this.hue   = Math.random() < 0.7 ? '#ec407a' : '#9c5cf7';
    this.alpha = Math.random() * 0.6 + 0.2;
  };
  P.prototype.update = function () {
    this.x += this.vx; this.y += this.vy;
    if (this.x < 0 || this.x > W) this.vx *= -1;
    if (this.y < 0 || this.y > H) this.vy *= -1;
  };
  P.prototype.draw = function () {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
    ctx.fillStyle = this.hue;
    ctx.globalAlpha = this.alpha;
    ctx.fill();
    ctx.globalAlpha = 1;
  };

  for (let i = 0; i < 110; i++) particles.push(new P());

  function connect() {
    for (let i = 0; i < particles.length; i++) {
      for (let j = i + 1; j < particles.length; j++) {
        const dx = particles[i].x - particles[j].x;
        const dy = particles[i].y - particles[j].y;
        const d  = Math.sqrt(dx * dx + dy * dy);
        if (d < 110) {
          ctx.beginPath();
          ctx.strokeStyle = `rgba(236,64,122,${0.18 * (1 - d / 110)})`;
          ctx.lineWidth = 0.8;
          ctx.moveTo(particles[i].x, particles[i].y);
          ctx.lineTo(particles[j].x, particles[j].y);
          ctx.stroke();
        }
      }
    }
  }

  (function animate() {
    ctx.clearRect(0, 0, W, H);
    particles.forEach(function (p) { p.update(); p.draw(); });
    connect();
    requestAnimationFrame(animate);
  })();
})();

/* ---- Petal rain ---- */
(function () {
  const layer  = document.getElementById('pePetalLayer');
  if (!layer) return;
  const colors = ['#f8bbd9', '#fce4ec', '#ede7f6', '#e1bee7', '#f48fb1'];

  function createPetal() {
    const el = document.createElement('div');
    el.className = 'pe-petal';
    const dur   = Math.random() * 8 + 6;
    const delay = Math.random() * 5;
    const size  = Math.random() * 10 + 6;
    el.style.cssText = [
      'left:'              + (Math.random() * 100) + '%',
      'width:'             + size + 'px',
      'height:'            + size + 'px',
      'background:'        + colors[Math.floor(Math.random() * colors.length)],
      'animation-duration:' + dur + 's',
      'animation-delay:'   + delay + 's',
      'opacity:0'
    ].join(';');
    layer.appendChild(el);
    setTimeout(function () { el.remove(); }, (dur + delay) * 1000);
  }

  for (let i = 0; i < 20; i++) setTimeout(createPetal, i * 300);
  setInterval(createPetal, 600);
})();
</script>

</body>
</html>